# ------------------------------------------------------
# Last Update: modified by Valminder Mar 23, 2018.
# ------------------------------------------------------
#
# Version Pathfinder; (D&D version 3.75) NPC or PC Stat Blocks with the Option to Generate Encounter Groups of NPCs
# by Larry Cormier
#
# -------------------------------------------------------------------------
#
# If you add something new, search for:
#    Class : ### NEW CLASS ###
#    Race  : ### NEW RACE ###
#            ### NEW SUBRACE ###
#    Feat  : ### NEW FEATS ###
#            ### NEW SKILL FEATS ###
#
# -------------------------------------------------------------------------
#
# To call this table from another one:
#    [NPC Stat Block v3_5.Start(%Race%,%Class%,%CharacterLevel%,
#     %STR%,%DEX%,%CON%,%INT%,%WIS%,%CHA%,%MeleeWeaponID%,99,99)
#
#    [NPC Stat Block v3_5.Start(%GroupFlag%,%GroupFlagNumber%,%ALGroupEvil%,%VillainFlag%,
#     %Race%,%Class%,%NPCLevel%,%LowHD%,%HighHD%,
#     %ClassType%,%AdeptType%,%CommonerType%,%DruidNatureBond%,%ExpertType%,%PaladinDivineBond%,
#     %RNGCombatStyle%,%RNGHunterBond%,%SorcererBlood%,%WizardSchool%,
#     %Gender%,%SuggestedMotivation%,%DescriptionFlag%,%PersonalHistoryFlag%,
#     %PointBuyFlag%,%Heroic%,%AgeFlag%,%FavClassBonus%,%ChooseRanks%,
#     %CasterMinStatChoice%,%CasterMinStatChance%,%PFExperience%,%PFFantasy%,%WorldNeeded%,%GodGenGroup%,%GodGenPersonal%,%GodPercent%
#     %RaceGroup%,%LargeGroups%,%GroupNames%,%Show%,%ShowInitialWealth%,%ShowMissingWealth%
#     %ShowStats%,%ShowUnarmed%,%LeadershipFeat%,%GenCohort%,%MonsterCohort%,%GenFollowers%,
#     %Valminder%,%Bonus0Level%,
#     %Instructions% 
#
#
#    GroupFlag:           1   1=Group   2=Single Character
#    GroupFlagNumber Random   Enter the number of NPCs to generate in the group (max 10):
#    ALGroupEvil:         3   Group Alignment?
#                             1=No Evil   2=Evil   3=Anything
#    VillainFlag          3   Should this Character (or the Group Leader) be a Villain? (Only non-good Heroic NPCs can be villains)
#                             1=Yes   2=No   3= Random (a Good character won't be a villain)
#    --- Race and Class --------------------------------------------------------------------
#                             ### NEW RACE ###
#    Race:               20   Please choose a Race (Groups are usually random, unless RaceGroup parameter is modified)
#                             1=Human  2=Dwarf  3=Elf  4=Gnome  5=Half-Elf  6=Half-Orc  7=Halfling
#                             8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
#                             20=RANDOM
#                             ### NEW CLASS ###
#    Class:              17   1=Fighter  2=Barbarian  3=Bard  4=Cleric
#                             5=Druid  6=Monk  7=Paladin  8=Ranger  9=Rogue
#                             10=Sorcerer  11=Wizard  12=Adept  13=Aristocrat
#                             14=Commoner  15=Expert  16=Warrior 17=Random
#    NPCLevel:            0   Enter the required NPC level or EL for a group (or CR below)
#    LowHD:               1   Enter the Lowest Character Level desired (1-20):
#    HighHD:             20   Enter the Highest Character Level desired (1-20):
#    --- Class Options --------------------------------------------------------------------
#    ClassType:           1   Choose the type of class to create (only for a random class or groups).
#                             1=Anything   2=PC Classes only   3=NPC Classes only
#                             ### NEW CLASS ### (add options below when you add a new class)
#    AdeptType:           1   1=Random   2=Adept (standard from PF Core)   3=Seer (UltNPC)   4=Smiter (UltNPC)
#                             ### NEW CLASS ### Commoner. Change " CommonerTypeCode " if you add some commoner types. Also in Pathfinder Skills + Pathfinder Feats
#    CommonerType:        1   1=Random   2=Standard   3=Beggar (UltNPC)  4-Prostitute (UltNPC)
#    DruidNatureBond:     1   1=Random   2=Air domain   3=Animal domain   4=Earth domain   5=Fire domain   6=Plant domain
#                             7=Water domain   8=Weather domain   9=Animal Companion
#                             ### NEW CLASS ### Expert. Change " ExpertTypeCode= " if you add some expert types. Also in Pathfinder Skills + Pathfinder Feats
#    ExpertType:          1   1=Random    2=Standard    3=Blacksmith (UltNPC)    4=Courtesan (UltNPC)  5=Fence (UltNPC)
#                             6=Jeweller (UltNPC)  7=Pawnbroker (UltNPC)  8=Sage_Scholar (UltNPC)  9=Locksmith   10=Merchant
#    PaladinDivineBond:   1   1=Random   2=Enhanced Weapon    3=Special Mount
#    RNGCombatStyle:      1   1=Random   2=Archery   3=Two-Weapon Fighting
#    RNGHunterBond:       1   1=Random   2=Animal Companion   3=Companions 
#    SorcererBlood:       1   1=Random   2=Aberrant   3=Abyssal   4=Arcane   5=Celestial   6=Destined
#                             7=Draconic   8=Elemental   9=Fey   10=Infernal   11=Undead
#    WizardSchool:        1   1=Random   2=Abjuration   3=Conjuration   4=Divination   5=Enchantment   6=Evocation
#                             7=Illusion   8=Necromancy   9=Transmutation   10=Universalist
#    --- Description ---------------------------------------------------------------------------
#    Gender               3   1=Male   2=Female   3=Random
#    SuggestedMotivation: 1   Show the suggested motivation for a sinlge NPC?
#                             1=Yes   2=No   3=Random
#    DescriptionFlag      3   Include a Character Description?
#                             1=Yes   2=No   3=Add a link to generate the NPC's description
#    PersonalHistoryFlag  3   Include a Personal History for this Character?
#                             1=Yes   2=No   3=Add a link to generate the NPC's description
#    --- NPC Creation Rules --------------------------------------------------------------------
#    PointBuyFlag         6   Use the Non-Standard Point Buy Method to Generate Attributes?
#                             If you want to be able to change stats based on the Heroic or Basic character type,
#                                you must choose either 5 (Heroic) or 6 (Basic).
#                             1=Standard (5d3+3)
#                             2=Standard (Best 3 out of 4d6)
#                             3=Standard (3d6)
#                             4=Input the number of Points allowed
#                             5=Elite Array (15 14 13 12 10 8)
#                             6=NPC Array (13 12 11 10 9 8)
#                             7=All 10's [This is a good choice for testing the table]
#    Heroic:              3   Heroic NPC (If Point Buy Method is either Heroic or Basic it will alternate between these two depending on this choice;
#                             Single NPC Classes 95 percent Basic otherwise based on group)
#                             1=Heroic  2=Basic  3=Random
#    AgeFlag:             1   AGE: Do you want to add age modifiers to attributes?
#                             1=Yes   2=No
#    FavClassBonus:       1   1=Random each level   2=Skill ranks only   3=Hit points only   4=Random all in SR or HP
#    ChooseRanks:         1   SKILLS: How do you want skill ranks to be chosen?
#                             1=Random   2=Choose a number of skills base on "INT+Skill Points" and max the ranks in them.
#                             3=Buy each rank one at a time.   4=Buy a few ranks at a time (1-4 based on level).
#    CasterMinStatChoice: 2   Spellcaster: Select spellcasting stats option (set percentage below).
#                             1=No minimum spellcasting stat (will always raise it to a minimum of 12)
#                             2=Raise spellcasting stat to max spell level (Heroic only)
#                             3=Raise spellcasting stat to max spell level (ALL)
#    CasterMinStatChance: 80  Spellcaster: Set the percentage chance to apply the above option.
#    PFExperience:        4   Pathfinder: Determine experience progression for NPC treasures (PF version only)
#                             1=Slow   2=Normal   3=Fast   4=LOAD from Permanent Variables
#    PFFantasy:           4   Pathfinder: Determine fantasy setting for NPC treasures (PF version only)
#                             1=Low Fantasy (1/2 treasure value)
#                             2=Normal Fantasy
#                             3=High Fantasy (x2 treasure value)
#                             4=LOAD from Permanent Variables
#                             ### NEW WORLD ###
#    ModWealth:           1   Modify Wealth based on Item Creation Feats? (+25 percent in certain categories)
#                             1=Yes   2=No
#    ModWealthProf:       1   Modify Wealth based on Profession skill? (+1 percent per +1 in total skill in all categories)
#                             1=Yes   2=No
#    WorldNeeded:         1   WORLD: Creatures from which world?
#                              1= LOAD permanent variable 2= RANDOM, 3= Blackmoor 4= Conan 5= Dragonlance 6= Dragonlance (Taladas) 7= Dark Sun 
#                              8= Eberron 9= Forgotten Realms 10= Golarion 11= Greyhawk 12= Kingdoms of Kalamar 13= Lankhmar 14= Modern 15= MYSTARA 
#                             16= Ravenloft 17= Rokugan 18= Scarred Lands 19= Spelljammer 20= Sovereign Stone
#    GodGenGroup:         3   How do you want to generate group gods?
#                             1= Same god for everyone
#                             2= Different gods for everyone
#                             3= Random (90% for same god)
#    GodGenPersonal:      1   Do you want to generate a god for each NPC?
#                             1=Yes   2=No (only for divine casters)   3=Random
#    GodPercent:         65   How many percent of non-divine NPCs will follow a god?
#    --- Output -----------------------------------------------------------------------------
#    RaceGroup:           1   RACE: Ranom races determination for groups
#                             1=Yes   2=No
#    GroupNames:          1   Do you want to show names and genders for groups?
#                             1=Yes   2=No
#    InsertHPField:       2   Do you want to insert a "field" beseide the HPs of the NPCs?
#                             1=Yes   2=No
#    Show:                1   Show description of some class powers and Feats?
#                             1=Yes   2=No
#    ShowInitialWealth:   2   Show the initial Wealth for the NPC?
#                             1=Yes   2=No
#    ShowMissingWealth:   1   Show the Wealth missing based on Heroic or Basic type?
#                             1=Yes   2=No
#    ShowStats:           2   Show Attribute modifiers from Age - Race - Levels? Show above must be YES.
#                             1=Yes   2=No
#    ShowUnarmed:         3   Show unarmed attack?
#                             1=Yes   2=No   3=If special equipement or Improved Unarmed Strike
#    LeadershipFeat:      1   LEADERSHIP: Allow the Leadership feat? (Always NO for cohorts or Basic or group of NPCs)
#                             1=Yes   2=No
#    GenCohort:           1   LEADERSHIP: Generate Cohorts?
#                             1=Yes   2=No
#    MonsterCohort:      15   Chances to generate a Monster Cohort     
#    GenFollowers:        2   LEADERSHIP: Generate list of followers?
#                             1=Yes (All classes)   2=Yes (Alternate way)   3=No
#    --- Special Rules -----------------------------------------------------------------------------
#    FeatOption:          1   Choose Feats options:
#                             1= Standard PF
#                             2= 1/level (PCs only)
#                             3= 1/level (Only 1% of heroic NPCs)
#                             4= 1/level + racial at levels 3-6-9-12-15-18 (PCs only)
#                             5= 1/level + racial at levels 3-6-9-12-15-18 (Only 1% of heroic NPCs)
#    Valminder:           3   Apply Valminder's modifications?
#                             1=Yes   2=No   3=LOAD from Permanent Variables
#    Bonus0Level          2   OPTIONAL: Bonus 0-level spells based on Prime Attribute? (same as 1st-level spells)
#                             1=Yes   2=No
#    --- Instructions -------------------------------------------------------------------------------
#    Instructions         2   Would you like to continue showing the Instructions?
#                             1=Yes   2=No
#
# -------------------------------------------------------------------------
# This table is called by: (can be called by other tables also)
#    None
#
# -------------------------------------------------------------------------
#
# This Table Links to these tables as required:
#
#   AddComma.tab                                         ~Reference
#   ADV Instant Adventure Namer.tab                       Adventuring
#   Animal Companion Pathfinder.tab                       Creatures
#   Background Sorcery.tab                                NPCs
#   Conflict Namer.tab		                              Names
#   Countries.tab                                         ~Reference
#   Creatures.tab                                         ~Reference
#   Dice Reroll.tab                                       ~Reference
#   Equipment.tab                                         ~Reference
#   ENC Ultimate Random Encounter.tab                     Adventuring
#   Formal Names.tab                                      ~Names
#   Gems.tab                                              Treasure
#   Githyanki Names.tab                                   ~Names
#   Githzerai Names.tab                                   ~Names
#   Gnoll Names.tab                                       ~Names
#   Goblin Names.tab                                      ~Names
#   Group Designer.tab                                    Names
#   Group Namer.tab			                              ~Reference Misc
#   Hobgoblin Names.tab                                   ~Names
#   Kobold Names.tab                                      ~Names
#   Magic Weapon Names.tab                                Magic
#   Minotaurs Names.tab                                   ~Names
#	Miscellaneous.tab                                     ~Reference
#   Monster Stats.tab		                              Creatures
#	Names Generator.tab                                   NPCs
#	Mundane Equipment.tab	                              ~Reference Misc
#   Noble Household Names.tab                             ~Names
#   Ogre Names.tab                                        ~Names
#   Pathfinder Feats.tab                                  ~Reference Misc
#   Pathfinder Random Spells.tab                          Magic
#   Pathfinder Skills.tab                                 ~Reference Misc
#   Pathfinder Spells.tab                                 ~Reference Misc
#   Permanent_Variables.tab                               ~Reference
#   PF Bestiaries.tab                                     ~Reference
#   Random Magic.tab      [3.5E]                          Magic
#   Religion.tab                                          ~Reference
#   Town Names.tab                                        Inns, Towns and Countries
#   Troglodyte Names.tab                                  ~Names
#   Troll Names.tab                                       ~Names
#   Underdark.tab                                         ~Names
#   Villainous Motivations.tab                            NPCs
#   Yuanti Names.tab                                      ~Names
#
# -------------------------------------------------------------------------
#
# Updated by Larry Cormier March 3, 2006
#    Added D&D Non-Standard Point Buy Method for Attribute Generation
#
# Modified by Valminder, March 2006.
#    Adapted for TSv5.
#    I changed the "START" line.
#    Removed the "GenerateFeats" subtable and created "Random Feats.tab"
#    Removed the "GenerateSkills" subtable and created "Random Skills.tab"
#    Added links to:
#       Random Feats.tab
#       Random Skills.tab
#    Changed "GroupFlag", "PointBuyFlag", "DescriptionFlag" and "PersonalHistoryFlag"
#       parameters to reflect the standard 1=Yes 2=No
#
# Modified by Valminder, July 2006.
#    Fixed the point buy method.
#    Modified "AssignAbilities" to assign the abilities as per the class.
#    Added parameter to choose between "Core Gods" and "Religion.tab".
#    Added link to:
#       Background Sorcery.Alternate(%Gender%)
#       Religion.tab (replaced from "Random Deity.tab").
#
# Modified by Larry Cormier December 24, 2007
#    Addressed a Formatting issue that was associated with the Sorcery Background coding that inadvertently
#       changed the Gender of Male Sorcerers to Female in the Sorcery Background, itself. This was
#       accomplished by changing some Variable names (Gender2 to NPC_Gender), and adding a PC_Gender variable
#       that consequentially made the Variable references a little more easy to understand as well - especially
#       when other individuals are being referred to grammatically in the table... such as friends, relatives,
#       mentors, and enemies
#    Removed Exterraneous 'Sorcery Background' Coding that was overlooked when the Table had originally been
#       updated to Reference a link to Background Sorcery.tab, as noted above.
#    Disabled 'Catonia' as a valid Insanity - after all, what good is a Catatonic PC - or NPC for that matter?
#    Added the potential for the PC, NPC, or Group Leader generated to have re-rollable Villainous Motivations
#       if so desired.
#
# Modified by Valminder, Jan 2008.
#    Changed Villain to Villain (and Villainous to Villainous) everywhere.
#    Removed some LN.
#    Corrected an error.
#    Removed all references to "Villainous Motivations" and linked to the "Villainous Motivations" table.
#
# Modified by Larry Cormier March 15-16, 2008
#    Addressed a few display issues that annoyed me; Especially NPC Stat Block Building Code to assure consistency
#    between NPC Stats and Animal Companions Stats, and 'everything' being displayed as Italics after a certain point.
#    Added BAB/Grapple determination table, as well as Space/Reach, and modified table to show'Full Attack' as the
#    Primary Attack Option display.
#    Replaced missing reference to include Melee Attack Bonuses Tables in Weapon Damage Displays.
#    Modified Ranged Attack Weapon Stats to reflect the Potential of additional Damage (Strength Modifiers) for
#    some Hand-Thrown Weapons, as well as Strength Modifiers for Composite Short and Long Bows, and additional
#    accuracy damage (Dexterity Modifiers) for Whips.
#
# Modified by Larry Cormier March 29, 2008
#    Fixed coding that erraneously designated Intelligence as the Prime Attribute for Sorcerers. It should have been
#    (and now is) Charisma.
#
# Modified by Larry Cormier Oct 08, 2012
#    Added Pathfinder-Specific Combat Manuever Statistics; i.e., Combat Manuever Bonus (CMB),
#    and Combat Manuever Defense (CMD) figures to the NPC Generation Tables, as well as the Familiars, Companions,
#    and Mounts Tables
#
# Modified by Larry Cormier Oct 08, 2012
#    Replaced 'Random Spells.tab' References with Pathfinder Spells.tab links to make the NPC Generator
#    compatible with Pathfinder references and directives.
#
# Modified by Larry Cormier Oct 09, 2012
#    'Cleaned up' some annoying misspellings, and skewed grammar instances.
#
# Modified by Larry Cormier Jan, 2013
#    Added Perception Skills as a default Statistic
#    Added Links to the Pathfinder Skills Table
#
# Modified by Larry Cormier February, 2013
#    Added Links to the Pathfinder Feats Table
#
# Modified by Valminder, Jan 2015.
#    Added Abilities modifier by Race 
#
# Modified by Valminder, July 2015.
#    Modified for "ENC Ultimate Random Encounter.tab"
#             parameters to add links to generate Description/History.
#    Added a "NPCLevel" parameter.
#          a "GroupFlagNumber" parameter.
#          a "LargeGroups" parameter.
#          "GenerateURE" subtable (for "ENC Ultimate Random Encounter.tab")
#          Links to: Countries.Land_%WorldNeededName%
# Modified by Valminder, Jan 2017
#    Heavily modified the whole table, including:
#       Familiars: added Monkey, corrected some errors.
#       PointBuyFlag: 4=Input the number of Points allowed to be in line with Pathfinder
#       Height / Weight / Age (Heroic high-level NPCs are younger than Basic NPCs)
#       AC: was incorrect in multiple NPCs, AC fixed, added "ShieldWorn"
#       FEATS: takes into account all feats of Core Rule, option to add reminders for feats.
#       Mounts: Easier generation of mount for NPCs with Mounted Combat.
#       Weapons: Modified all weapons and integrated them in "Equipment.tab"
#                Modified for special weapons of class
#       Class: Class powers added + optional notes.
#       MW + Magical Armors/Shield, Ironwood druid armors.
#       Saves.
#       COLORS:
#          DarkCyan      = Class
#          Green         = Informations and Feats
#          Grey          = Rules
#          HotPink       = test
#          Olive         = Template informations
#          Orange        = Magic Items
#          OrangeRed     = Warning
#          Peru          = Race
#          Purple        = Spells and magic
#          Red           = Penalties or Missing informations.
#          SaddleBrown   = Equipment
# Modified by Valminder, Mar-Apr 2017 - Jan 2018
#       Double weapons: both heads are enchanted with the same "magicplusses"
#       Shields/Armors: non-proficient modifiers / armor check penalties / arcane spell failure.
#       Added cost + weight to "Equipment.tab" for "NPC Stat Block Pathfinder"
#       Added class options.
#          Weapon categories for Fighter Weapon Training and Weapon Mastery.
# Modified by Valminder, Feb 2018
#       Added favored class bonuses (skill rankls or hp).
#       Added Druid wild shape +wild armor if applicable.
#       Added minimum spellcasting stat options.
#       Added Cohorts.
# Modified by Valminder, Mar-Apr-May 2018
#       Added NPC Classes.
#       Halfling Sling Staff: for small size only (in Equipment.tab)
#       Error on Monk flurry of blows fized.
#       Valminder's VP/WP fixed.
#       Unarmed Attacks.
#       ALTERNATE: Feats 1/level
#                        1/level + racial at 3-6-9-12-15-18
#          Including a lot of racial feats.
#          Alternate Item Creation Rule.
#       Added racial traits.
#       Added Improvised Weapons.
#       Followers generation.
#       Removed the "LargeGroup" parameter.
#       Fixed CR/EL for groups.
#       Added modified wealth based on Item Creation Feats and Profession skill.
#       Added lance in equipment when the unseat feat is chosen, and 33% with spirited charge.
#       Added 10% to have a second weapon (less magical than the main weapon)
#       Added gods from Religion.tab
#       Modified call to "Pathfinder Random Spell" to send "GodName" and "GodDomains".
#       Group Alignment: based on the first one rolled ... no E with G, no L with C.
#       Cleric Favored  Weapon ( GodFavoredWeapon ) 60 percent to have it
#       Poisons: Blowgun, automatic poison.
#                Drow: 80 percent
#                Evil Rogue: 60 percent.
#                Evil with Craft (alchemy) : 90 percent (this skill is quite rare)
#                Evil, all others: 15 percent only.
#       Familiars + Improved Familiar feat.
# Modified by Valminder, Jan-Feb 2019
#       Added Races from PFB1.
#       Added Subraces
#
#    XXX TO DO:  
#    GODS ... religion.tab
#    Armors: SHIELDS + ARMORS: Equipment: special description (sometimes)
#    Wealth: Modify "ENC Ultimate Random Encounters" for NPC Equipement ??? + NPC Magic Equipment ??? + Item Creation Feats (add more wealth for certain feats)
#    EQ : Gauntlet Locked
#    Mundane EQ: companion animal name ... alternate mounts for other races (ex: drows or aquatic races)
#    WEAPONS:
#           TwowpnChoice ... for Two-WeaponFighting add another weapon, like dagger, short sword etc....for the second weapon with MW or magic +1++ if enough wealth
#    Familiar (make a new table with Improved Familiar) / Mount / XXX add Companion for a (Cleric with Animal domain as DRD level -3)
#    Pathfinder Random Spells.Start === send domains chosen to this table XXX
#              / domains have to be chosen before the skills !!!
#              / so, the god has to be chosen before the skills also.
#              / must create the gods for each world ... in Countries.tab
#    PARAM: Choose feats (ForcedFeats + number) (the prerequisites won't be taken into account)
#    Add "Click" to generate short description for groupflag=1

#/OverrideRolls 1

# XXX TO TEST TABLE ... to be removed
%TestWealth%,0
%TestHtWt%,0
%TestAmmo%,0
%TestVPWP%,0
%TestLog%,1
%TestTableNote%,0
%TestCostWeight%,0

# Variable Declaration
%Instructions%,1
%AlterSelf%,0
%Chance%,0
%Chance2%,0
%CohortMonster%,0
%CRSearch%,0
%IronyFlag%,0
%GroupFlag%,0
%GroupFlagNumber%,0
#%LargeGroups%,0
%DescriptionFlag%,0
%PersonalHistoryFlag%,0
%Gender%,3
%GenderCohort%,0
%PC_Gender%,0
%NPC_Gender%,0
%NPCLevel%,0
%Race%,8
%RaceTraits%,0
%RaceType%,0
%RaceSubtype%,0
%RaceMaster%,0
%SubraceMaster%,0
%Class%,12
%ClassMaster%,0
%ClassType%,0
%ShortClass%,12
%CharacterLevel%,1
%LowHD%,1
%HighHD%,20
%HD_Range%,0
%BaseHeight%,0
%HeightModifier%,0
%HeightVariable%,0
%HeightInFeet%,0
%HeightInInches%,0
%HeightInFeetCohort%,0
%HeightInInchesCohort%,0
%HeightFlag%,1
%ShortSize%,0
%TallSize%,0
%Weight%,0
%WeightCohort%,0
%BaseWeight%,0
%WeightModifier%,0
%Overweight%,0
%Underweight%,0
%WeightFlag%,1
%WeightFlagMaster%,1
%HDBase%,1
%STR%,0
%DEX%,0
%CON%,0
%INT%,0
%WIS%,0
%CHA%,0
%STRBonus%,0
%DEXBonus%,0
%DEXBonusArmorMod%,0
%CONBonus%,0
%INTBonus%,0
%WISBonus%,0
%CHABonus%,0
%HDMod%,0
%HitPoints%,0
%Movement%,0
%MovementOriginal%,0
%AdjustedAC%,0
%ArmorType%,0
%MageArmorBonus1%,0
%MageArmorBonus2%,0
%MAB12%,0
%MageArmorType1%,0
%MageArmorType2%,0
%PrintArmor%,0
%ArmorDescription%,0
%NormalPlusses%,0
%MagicPlussesArmor%,0
%MagicPlussesMage1%,0
%MagicPlussesMage2%,0
%MagicPlussesMelee%,0
%MagicPlussesRange%,0
%MagicPlussesShield%,0
%ArmorPlusses%,0
%MonkACBonus%,0
%SpellImprovement%,0
%ACSpellID%,0
%SpellACImprovementFlag%,0
%AlignmentChoice%,0
%AlignmentType%,0
%TempNumber%,0
%TempString%,0
%ShieldFlag%,0
%ShieldType%,0
%ShieldACPlus%,0
# 4= Small / 5= Medium / 6= Large
%Size%,5
%SkipShield%,No
%MeleeAttackBonus%,0
%MeleeWeaponID%,0
%RangeAttackBonus%,0
%RangeWeaponID%,0
%FavoredEnemies%,0
%FavoredTerrains%,0
%FamiliarGen%,No
%FamiliarID%,0
%FamiliarImpID%,0
%FamiliarSAString%,0
%NaturalArmorRacial%,0
%DodgeRacial%,0
%FamiliarINT%,0
%PaladinMountSAString%,0
%MountSTR%,0
%MountINT%,0
%DruidSAString%,0
%BonusHD%,0
%BonusTricks%,0
%STRModAnimal%,0
%DEXModAnimal%,0
%AnimalCompanion%,0
%AC_BAB%,0
%AC_Fort%,0
%AC_Ref%,0
%AC_Will%,0
%AC_Sk%,0
%AC_Feats%,0
%AC_Type%,0
%AC_Size%,0
%AC_MV%,0
%AC_Att%,0
%AC_STR%,0
%AC_DEX%,0
%AC_CON%,0
%AC_INT%,0
%AC_WIS%,0
%AC_CHA%,0
%AC_SA%,0
%AC_SQ%,0
%HD%,0
%MonsterID%,0
%InputValue%,0
%ResultRange%,0
%StartingValue%,0
%FortitudeSave%,0
%FortitudeSaveBase%,0
%FortitudeSaveFeat%,0
%ReflexSave%,0
%ReflexSaveBase%,0
%ReflexSaveFeat%,0
%WillSave%,0
%WillSaveBase%,0
%WillSaveFeat%,0
%Result%,0
%TempSave%,0
%BAB%,0
%BAB1%,0
%BAB2%,0
%BAB3%,0
%BAB4%,0
%MagicUserClass%,0
%DeityID%,0
%FirstDomainID%,0
%SecondDomainID%,0
%PrimeAttribute%,0
%PrimeAttributeScore%,0
%RandomAttribute%,0
%SpellLevel%,0
%MaxSpellLevel%,0
%DailyCount%,0
%SpellString%,0
%GroupFlag%,0
%Skill%,0
%SkillCount%,0
%SkillID%,0
%MaxRanks%,0
%CrossClassRanks%,0
%RanksApplied%,0
%SkillCountAtMaxRanks%,0
%Feat%,0
%FeatsCount%,0
%RogueSA%,0
%RogueSANum%,0
%Profession%,0
%Population%,0
%ParentFlag%,0
%OrphanFlag%,0
%ReligiousFlag%,0
%PoliticalFlag%,0
%MultiCulturalFlag%,0
%MagicFlag%,0
%TheArtsFlag%,0
%Relative%,0
%IdeosyncrasyID%,0
%NA%,0
%Count%,0
%Counter%,0
%Total%,0
%Pos%,0
%X1%,0
%X2%,0
%X3%,0
%X4%,0
%X5%,0
%X6%,0
%X7%,0
%X8%,0
%X9%,0
%X10%,0

# Added March 2006 to Support D&D Non-Standard Point Buy Method (Larry)
%PointBuyFlag%,0
%AttributeScore%,0
%CostValue%,0
%Attribute1%,0
%Attribute2%,0
%Attribute3%,0
%Attribute4%,0
%Attribute5%,0
%Attribute6%,0
%AttributeCount%,0
%Points%,28
%TempPoints%,0
%TempSort%,0
%RunningTotal%,0

# Added March 2006 (Val)
# For "Random Spells.tab"
%Bonus0Level%,2
%CharacterLevel%,21
%InitialCharacterLevel%,0
%ChooseGod%,3
%MagicUserClass%,11
%RandomAttribute%,99
# To link it with Monster Stats.tab
%Ally4%,0
%AllyCount4%,0
# For "Pathfinder Skills.tab"
%SkillsString%,0
%TotalSkillPoints%,0
%FamSkillBonus%,0
%LanguageString%,0
# For Random Feats.tab"
%FeatsString%,0
%StartingFeats%,0
%ProficientWeapons%,0
# Ability Gen (Best 3 out of 4d6)
%Die1%,0
%Die2%,0
%Die3%,0
%Die4%,0
%LowRoll%,0
%TotalDie%,0
%CoreGods%,0

# Added December 2007 to Support Villainous Motivations Link (Larry)
%VillainFlag%,0
%MotivationFlag%,0
%InsanityFlag%,0

# Added March 15-16, 2008 to Support BAB/Grapple Code, and Attack String Consistency (Larry)
%Grapple%,0
%GrappleMod%,0

# Added July 2015
%DSALLDATA%,0
%MonsterName%,0
%Book%,0
%BookR%,0
%Type%,0
%SubT%,0
%S%,0
%OrgMax%,0
%Env%,0
%T%,0
%AL%,0
%ALC%,0
%ALCohort%,0
%ALGroup%,0
%ALGroupEvil%,0
%ALMaster%,0
%StrMod%,0
%DexMod%,0
%ConMod%,0
%IntMod%,0
%WisMod%,0
%ChaMod%,0
%MV%,0
%RacialHD%,0
%AC%,0
%AT%,0
%RE%,0
%SA%,0
%SQ%,0
%FEATS%,0
%SK%,0
%LANG%,0
%BonusLANG%,0
%RollStat%,0
%FavCL%,0
%LA%,0
%TempApp%,0
%World%,0
# FOR BandTypes ... See "Suggested Motvations"
%Plural%,0
# Parameter
%RaceALLDATA%,0

# Added October 2012; Modified Basic 3.5 Table to create CMB and CMD Options for Basic Pathfinder D&D v3.75 NPC Generation (Larry)
%CMB%,0
%CMBD_Mod%,0
%CMD%,0

# Added January 2013 to support Addition of a Default Perception Skill Score Notation
%Perception%,0

# Added March 2013 to support Pathfinder Deities selection
%PathfinderGods%,0

# Added Jan 2017-2018
# Parameters
%DruidNatureBond%,0
%PaladinDivineBond%,0
%SorcererBlood%,0
%WizardSchool%,0
# Variables
%2H%,0
%2HR%,0
%2WCP%,0
%2WCOff%,0
%ACBArm%,0
%ACBDef%,0
%ACBIns%,0
%ACBNat%,0
%ACBShi%,0
%ACFF%,0
%ACInfo%,0
%ACP%,0
%ACPOriginal%,0
%ACPNote%,
%ACPSh%,0
%ACTouch%,0
%ActionPoints%,0
%ActionPointsChoice%,0
%AdamDR%,0
%AddAb%,0
%AdeptType%,0
%AdeptTypeChosen%,0
%Adp%,0
%AdpSee%,0
%AdpSmi%,0
%Age%,0
%AgeMaster%,0
%AgeFlag%,0
%AgeLevelMult%,0
%AgeMid%,0
%AgeOld%,0
%AgeVen%,0
%AgeMax%,0
%AgeModAttributes%,0
%AllSaveBonus%,0
%AmmoWt%,0
%AMV%,0
%AMVSh%,0
%AncestralWeapon%,0
%Ari%,0
%ArmorGauntlet%,No
%ArmorMagicSpecial%,
%ArmorShieldPenalty%,0
%ASF%,0
%ASFSh%,0
%BbnDR%,0
%BbnFastMV%,0
%BbnFearlessRage%,No
%BbnGuardedStance%,0
%BbnIncreaseDR%,0
%BbnIndomitableWill%,No
%BbnInternalFortitude%,No
%BbnRagePower%,0
%BbnRagePowerLight%,0
%BbnRagingClimber%,0
%BbnRagingLeaper%,0
%BbnRagingSwimmer%,0
%BbnRollingDodge%,0
%BbnRPClearMind%,No
%BbnRageRounds%,0
%BbnSuperstition%,0
%BbnSwiftFoot%,0
%BbnTrapSense%,0
%BbnWillRage%,0
%BeastShape%,0
%Blank1%,0
%Blank2%,0
%Blank3%,0
%Blank4%,0
%Blank5%,0
%Blank6%,0
%Blank7%,0
%Blank8%,0
%Blank9%,0
%Bloodline%,0
%BloodlineFeats%,
%BondedObject%,No
%BrdBardicKnowledge%,0
%BrdWellVersed%,No
%BSk%,0
%CasterMinStatChance%,0
%CasterMinStatChoice%,0
%CasterMinStatSet%,No
%CasterMinStat%,0
%ChooseRanks%,0
# CarryingCapacity
%CCL%,0
%CCM%,0
%CCH%,0
%CCCP%,0
%CCMaxDex%,0
# Max MV with carrying capacity
%CCMV%,0
# Over heavy carrying capacity (Y or N)
%CCOver%,No
%CCOverDrag%,No
%ChoiceMod%,0
# Feats generated in this table and forced into "Pathfinder Feats" (ex: Ranger/Monk Class Feats)
%ClassFeats%,
%Climb%,0
%CohortGen%,No
%ColorAdjustedAC%,No
%ColorACFF%,No
%ColorACTouch%,No
%Com%,0
%ComDoc%,0
%ComFar%,0
%ComMil%,0
%ComMin%,0
%ComPor%,0
%ComTra%,0
%ComTow%,0
%ComViE%,0
%Comma%,0
%CommonerType%,0
%CommonerTypeChosen%,0
%CommonerTypeCode%,0
%Cost%,0
%CostR%,0
%DefensiveTraining%,No
%Description%,0
%DisarmMod%,0
%DisplaySTRDEX%,0
%Divine%,0
%DmgModM%,0
%DmgModM2%,0
%DmgModR%,0
%DomainPower%,0
%DomainSpell%,0
%Draconic%,0
%DraconicBreath%,0
%DraconicEnergy%,0
%DRUWildArmor%,0
%EL%,0
%Elemental%,0
%ElementalBaseMV%,0
%ElementalBody%,0
%ElementalEnergy%,0
%ElementalMV%,0
%ElementalNewMV%,No
%ElvenImmunities%,No
%ElvenMagic%,No
%EQProt%,
%EQWpn%,
%EQWpnM%,0
%EQWpnR%,0
%Evasion%,No
%ExoticFlag%,0
%ExoticWeaponM%,0
%ExoticWeaponR%,0
%ExtraRacialSpells%,0
### NEW CLASS ### Expert
%Exp2%,0
%Exp3%,0
%Exp4%,0
%Exp5%,0
%Exp6%,0
%Exp7%,0
%Exp8%,0
%Exp9%,0
%Exp10%,0
%ExpertType%,0
%ExpertTypeChosen%,0
%ExpertTypeCode%,0
%ExtraFeatsAny%,0
%ExtraMeleeWpn%,No
%ExtraPerformanceFeat%,0
%FamACMod%,0
%FamACNat%,0
%FamAL%,0
%FamAtt%,0
%FamBAB%,0
%FamCMBBonus%,0
%FamCMDBonus%,0
%FamFeats%,0
%FamFort%,0
%FamFortType%,Standard
%FamImpAL%,0
%FamLang%,0
%FamMV%,0
%FamName%,0
%FamReflex%,0
%FamSA%,0
%FamSQ%,0
%FamSize%,0
%FamSkills%,0
%FamType%,0
%FamWill%,0
%FavClassBonus%,0
%FavClassHP%,0
%FavClassSP%,0
%FeatsAll%,0
%FeatOption%,1
%FeatOptionTemp%,0
%FeatsSkill%,
%Fly%,0
%FlyMan%,0
%FormOfTheDragon%,0
%Fortification%,0
%FSPCharacter%,None
%Ftr%,0
%Bbn%,0
%Brd%,0
%Clr%,0
%Drd%,0
%Mnk%,0
%Pal%,0
%Rgr%,0
%Rog%,0
%Sor%,0
%Wiz%,0
# Fighter Special Modifications
%FTR_ACP%,0
%FTR_ArmorMastery%,No
%FTR_Bravery%,0
%FTR_WT1%,0
%FTR_WT2%,0
%FTR_WT3%,0
%FTR_WT4%,0
%FTRWTUnarmed%,No
%FTR_WT_M%,0
%FTR_WT_R%,0
%FTR_WT_M_Bonus%,0
%FTR_WT_M_BonusU%,0
%FTR_WT_R_Bonus%,0
%GenCohort%,0
%GenFollowers%,2
%GhostShroud%,No
%GiantForm%,0
%GnomeAcademican%,0
%GnomeIllusion%,No
%GnomeObsessive%,0
%GodShort%,0
%GodComplete%,0
%GodFavoredWeapon%,No
%GodGenGroup%,0
%GodGenPersonal%,0
%GodName%,0
%GodLand%,0
%GodAL%,0
%GodRank%,0
%GodSphere%,0
%GodWAL%,0
%GodPercent%,0
%GodPriAL%,0
%GodPortfolio%,0
%GodDomains%,0
%GodSym%,0
%GodWpnT%,0
%GodWpnF%,0
%GodWpn%,0
# Either ranged or melee ID from Equipment.tab
%GodWpnID%,0
%GodWpnMag%,0
%Greed%,No
%GroupNames%,0
%Hardy%,No
%Haste%,0
%HatredGobRep%,0
%HatredOrcGob%,0
%HeartWilderness%,0
%Heroic%,0
%HitModM%,0
%HumanHeartStreet%,0
%InitiativeFeat%,0
%InitiativeRace%,0
%InsertHPField%,0
%Interlock%,No
# XXX %ImprovedUS%,No
%Ironwood%,0
%LanceSearch%,No
%LCohLvl%,0
%LFolLvl1%,0
%LFolLvl2%,0
%LFolLvl3%,0
%LFolLvl4%,0
%LFolLvl5%,0
%LFolLvl6%,0
%Leadership%,0
%LeadershipCoh%,0
%LeadershipFeat%,0
%LeadershipInfo%,0
%LeadershipFol%,0
%LevelMod%,
%Lt%,0
%LtR%,0
%Manyshot%,0
%Material%,0
%MaterialAmmo%,0
%MatShield%,0
%MaxDex%,99
%MaxDexSh%,99
%MeleeMagicSpecial%,
%MID%,0
%ModWealth%,0
%ModWealthProf%,0
%MonkDiamondBody%,No
%MonkFastMV%,0
%MonkFeats%,0
%MonkFlurry%,No
%MonkFlurryMelee%,No
%MonkFlurryRange%,No
%MonkHighJump%,0
%MonkKiPoolDR%,ERROR
%MonkManeuverTraining%,0
%MonkMeleeWpn%,No
%MonkPerfectSelf%,No
%MonkPurity%,No
%MonkRangedWpn%,No
%MonkStillMind%,No
%MonsterCohort%,0
%Mount%,0
%MountedCombat%,No
%MundaneEQ%,0
%MundaneEQWt%,0
%MundaneEQCost%,0
%MundaneMountEQWt%,0
%MW%,0
%MWAttB%,0
%MWAttBR%,0
%NoFeat%,0
%NoFeatTemp%,0
%Note%,0
%NPCClass%,No
%OriginalWpnName%,0
%OriginalWpnRName%,0
%PALAnimalCompanion%,0
%PALAuraCourage%,No
%PALAuraFaith%,No
%PALAuraResolve%,No
%PALAuraRight%,No
%PALDivineHealth%,No
%PALHolyChampion%,No
%PALSaveBonus%,0
%PALWpnBonus%,0
%PALWpnPowers%,0
%PFExperience%,0
%PFFantasy%,0
%PlantShape%,0
%PrintGroupGod%,0
%RaceGroup%,0
%RacialAL%,0
%RacialMod%,0
%RapidReloadNotEnoughWealthFlag%,No
%RangerFeats%,0
%RangeMagicSpecial%,
%RNGAnimalCompanion%,0
%RNGCombatStyle%,0
%RNGFavEnem1%,0
%RNGFavEnem2%,0
%RNGFavEnem3%,0
%RNGFavEnem4%,0
%RNGFavEnem5%,0
%RNGFavEnemB1%,0
%RNGFavEnemB2%,0
%RNGFavEnemB3%,0
%RNGFavEnemB4%,0
%RNGFavEnemB5%,0
%RNGFavTer1%,0
%RNGFavTer2%,0
%RNGFavTer3%,0
%RNGFavTer4%,0
%RNGFavTer5%,0
%RNGFavTerB1%,0
%RNGFavTerB2%,0
%RNGFavTerB3%,0
%RNGFavTerB4%,0
%RNGFavTerB5%,0
%RNGHunterBond%,0
%RNGTrack%,0
%ROGCrawl%,No
%ROGDefensiveRoll%,No
%ROGFastStealth%,No
%ROGLedgeWalker%,No
%ROGQuickDisable%,No
%ROGResiliency%,No
%ROGSlippery%,No
%ROGStandUP%,No
%ROGTrap%,0
%ROGTrapSense%,0
%ROGMasterStrike%,No
%Rule%,0
%SaveResistBonus%,0
%ShieldBash%,0
%ShieldMagicSpecial%,0
%ShieldWorn%,0
%ShieldMaster%,0
%Show%,0
%ShowInitialWealth%,0
%ShowMissingWealth%,0
#### XXXX TO DO
%ShowSubraceDesc%,0
%ShowStats%,0
%ShowUnarmed%,0
%SlowSteady%,No
%Sneak%,0
%SORCelestialAsc%,No
%SORCelestialResist%,0
%SORDestinedBA%,No
%SORDestinedFated%,0
%SORDestinedTouch%,0
%SorDestinedWR%,No
%SORUnusualAnatomy%,No
%SORDemResist%,0
%SORDraconicAC%,0
%SORDraconicResist%,0
%SORElementalBody%,No
%SORElementalResist%,0
%SORFeySoul%,No
%SORInfernalResist%,0
%SORStrAbyss%,0
%SORUndeadResist%,0
%SORUndeadOneOfUs%,No
%SpeedM%,0
%SpeedR%,0
%SpellPenetration%,0
%SpellResistance%,0
%SpellResistanceRacial%,0
%SpikeSh%,0
%SR%,0
%Stonecunning%,No
%SubDwarf%,0
%SubElf%,0
%SubGnome%,0
%SubGoblin%,0
%SubHalfling%,0
%SubHalfElf%,0
%SubHalfOrc%,0
%SubHuman%,0
%SubKobold%,0
%SubOrc%,0
%Subrace%,0
%SuggestedMotivation%,1
%Swim%,0
%Temp1%,0
%Temp2%,0
%Temp3%,0
# Temp4 is used for Followers and to add a 2nd weapon. Do not use for anything else before being sure it does not affect the 2nd weapon generation.
%Temp4%,0
# TempM is used for "FindMelee"
%TempM%,0
%TempMagicPlus%,0
# TempR is used for "FindRange"
%TempR%,0
%TempVerify%,0
%TempEQ%,0
%TempCrit1%,0
%TempCrit2%,0
%TimelessBody%,No
%TowerFlag%,0
%UnarmedType%,0
%UncannyDodge%,0
%Valminder%,0
%VisionDark%,0
%VisionLowLight%,0
%VP%,0
%War%,0
%WarBody%,0
%WarMili%,0
%WarThug%,0
%WarriorTypeChosen%,0
%WealthTOTGroup%,0
%WealthTOT%,0
%WealthWPN%,0
%WealthPROT%,0
%WealthMAG%,0
%WealthLIM%,0
%WealthGEAR%,0
%WealthTOTInitial%,0
%WealthWPNInitial%,0
%WealthPROTInitial%,0
%WealthMAGInitial%,0
%WealthLIMInitial%,0
%WealthGEARInitial%,0
%WealthTOTMissing%,0
%WealthWPNMissing%,0
%WealthPROTMissing%,0
%WealthMAGMissing%,0
%WealthLIMMissing%,0
%WealthGEARMissing%,0
%WeaponChoice%,0
%WizardOpposed%,99
%WIZAbjResist%,0
%WIZAbjAbsorption%,0
%WIZDivInit%,0
%WIZEncSmile%,0
%WIZEvoIntense%,0
%WIZNecPower%,0
%WIZNecPowerFeat%,0
%WIZSchool%,0
%WizardSchoolTemp%,0
%WIZTraPE%,0
%WIZTraPESTR%,No
%WIZTraPEDEX%,No
%WIZTraPECON%,No
%WIZUniHand%,No
%WorldNeeded%,0
%WorldNeededName%,0
%WP%,0
%WpnSpeAdd%,0
%WpnSpeAdd2%,0
%WpnFocM%,0
%WpnFocR%,0
%WpnFocUnarmed%,0
%WpnSpeM%,0
%WpnSpeR%,0
%WpnSpeUnarmed%,0
%Wpn%,0
%WpnCrit%,0
%WpnCrit2%,0
%WpnDmg%,0
%WpnDmg2%,0
%WpnDmgT%,0
%WpnDmgT2%,0
%WpnRng%,0
%WpnSp%,0
%WpnSpShow%,0
%WpnSpBrace%,0
%WpnSpCharge%,0
%WpnSpDisarm%,0
%WpnSpDouble%,0
%WpnSpMonk%,0
%WpnSpNonlethal%,0
%WpnSpReach%,0
%WpnSpThreeNoSTR%,0
%WpnSpTrip%,0
%Wt%,0
%WtTotalCarried%,0
%WpnR%,0
%WpnCritR%,0
%WpnCritR2%,0
%WpnDmgR%,0
%WpnDmgR2%,0
%WpnDmgTR%,0
%WpnDmgTR2%,0
%WpnRngR%,0
%WpnSpR%,0
%WtR%,0
%WpnNumM%,0
%WpnNumR%,0

# Poisons
%Damage%,0
%MagEffect%,0
%Freq%,0
%Onset%,0
%Cure%,0
%CRVal%,0

# ---------------------------------------------------------------------------

# Parameter Display Lists:
@GroupFlag,2,Would you like to generate a Group of Characters?,Group,Single Character
# Random
@GroupFlagNumber,Random,Enter the number of NPCs to generate in the group (max 10):
@ALGroupEvil,3,Group Alignment?,No Evil,Evil,Anything
@VillainFlag,3,Should this Character (or the Group Leader) be a Villain? (Only non-good Heroic NPCs can be villains),Yes,No,Random (a Good character won't be a villain)
@Blank1,-,--------------- Race and Class ---------------
### NEW RACE ###
# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
# 20=RANDOM
@Race,20,Please choose a Race (Groups are usually random),Human,Dwarf,Elf,Gnome,Half Elf,Half Orc,Halfling,Aasimar,Drow,Drow Noble,Duergar,Goblin,Hobgoblin,Kobold,Merfolk,Orc,Svirfneblin,Tengu,Tiefling,Random
### NEW CLASS ### Set Random
#  1=Fighter  2=Barbarian  3=Bard  4=Cleric
#  5=Druid  6=Monk  7=Paladin  8=Ranger  9=Rogue
# 10=Sorcerer  11=Wizard  12=Adept  13=Aristocrat
# 14=Commoner  15=Expert  16=Warrior
# 17=RANDOM
@Class,17,Please choose a Class (Groups are Random),Fighter,Barbarian,Bard,Cleric,Druid,Monk,Paladin,Ranger,Rogue,Sorcerer,Wizard,Adept,Aristocrat,Commoner,Expert,Warrior,Random
# 0
@NPCLevel,1,Enter the required NPC level or EL for a group (or CR below) (Leave at '0' to use the CR below):
@LowHD,1,Please Enter the Lowest Character Level desired (1-20):
@HighHD,20,Please Enter the Highest Character Level desired (1-20):
@Blank2,-,--------------- Class Options ---------------
@ClassType,1,Choose the type of class to create (only for a random class or groups).,Anything,PC Classes only,NPC Classes only
### NEW CLASS ### (add options below when you add a new class)
@AdeptType,1,Choose Adept's type,Random,Adept,Seer,Smiter
### NEW CLASS ### Commoner. Change " CommonerTypeCode " if you add some commoner types. Alsi in Pathfinder Skills + Pathfinder Feats
### 1=Random   2=Standard   3=Beggar   4-Prostitute
@CommonerType,1,Choose Commoner's type,Random,Standard,Beggar,Prostitute
@DruidNatureBond,1,Choose Druid's Nature Bond,Random,Air domain,Animal domain,Earth domain,Fire domain,Plant domain,Water domain,Weather domain,Animal Companion
### NEW CLASS ### Expert. Change " ExpertTypeCode= " if you add some expert types. Also in Pathfinder Skills + Pathfinder Feats
# 1=Random    2=Standard    3=Blacksmith    4=Courtesan  5=Fence
# 6=Jeweller  7=Pawnbroker  8=Sage_Scholar  9=Locksmith 10=Merchant
@ExpertType,1,Choose Expert's type (UltNPC1),Random,Standard,Blacksmith,Courtesan,Fence,Jeweller,Pawnbroker,Sage_Scholar,Locksmith,Merchant
@PaladinDivineBond,1,Choose Paladin's Divine Bond,Random,Enhanced Weapon,Special Mount
@RNGCombatStyle,1,Choose Ranger's Combat Style,Random,Archery,Two-Weapon Fighting
@RNGHunterBond,1,Choose Ranger's Hunter Bond,Random,Animal Companion,Companions 
@SorcererBlood,1,Choose Sorcerer's Bloodline,Random,Aberrant,Abyssal,Arcane,Celestial,Destined,Draconic,Elemental,Fey,Infernal,Undead
# If you add another School speciality for Wizards: (### WizardSchool ###)
#    - modify the "WizardSchoolTempWeighted" subtable.
#    - modify "WizardSchool" subtable.
#    - modify "Pathfinder Random Spell.tab"
@WizardSchool,1,Choose Wizard's School,Random,Abjuration,Conjuration,Divination,Enchantment,Evocation,Illusion,Necromancy,Transmutation,Universalist
@Blank3,-,---------------- Race Options ----------------
### NEW SUBRACE ###
@SubDwarf,1,Choose Dwarf's Subrace,Random,None,Hill,Aquatic,Arctic,Deep,Desert,Elder,Exiled,Jungle,Mountain
@SubElf,1,Choose Elf's Subrace,Random,None,High,Aquatic,Arctic,Desert,Dusk (Shadow in Mystara),Gray,Jungle,Savage,Tower,Wild,Wood
@SubGnome,1,Choose Gnome's Subrace,Random,None,Rock,Aquatic,Arctic,Desert,Dread,Forest,Gear (Thinker in Dragonlance),Jungle,Lava,Traveler
@SubGoblin,1,Choose Goblin's Subrace,Random,None,Aquatic,Arctic,Desert,Jungle
@SubHalfling,1,Choose Halfling's Subrace,Random,None,Lightfoot,Aquatic,Arctic,Avenging,Deep,Desert,Jungle,Nomadic,Slave Born,Tallfellow
@SubHalfElf,1,Choose Half Elf's Subrace,Random,None,Aquatic,Arctic,Desert,Drow-Descended,Elf-Raised,Human-Raised,Jungle
@SubHalfOrc,1,Choose Half Orc's Subrace,Random,None,Aquatic,Arctic,Arena-Bred,Deep Kin,Desert,Feral,Jungle,Mountain Clan,Mystic
@SubHuman,1,Choose Human's Subrace,Random,None,Aquatic,Cosmopolitain,Country Folk,Gutter Rat,Imperious,Trailblazer
@SubKobold,1,Choose Kobold's Subrace (need Quintessential Kobold),Random,None,Aquatic,Arctic,Desert,Ebore's Clan,Jungle,Matthias' Clan,Sigrun's Clan,Uwe's Clan,Exiled
@SubOrc,1,Choose Orc's Subrace,Random,None,Aquatic,Arctic,Desert,Jungle
@ShowSubraceDesc,1,Show the subrace special description?,Yes,No
@Blank4,-,---------------- Description ----------------
@Gender,3,Please choose a Gender (Groups are Random),Male,Female,Random
@SuggestedMotivation,1,Show the suggested motivation for a single NPC?,Yes,No,Random
@DescriptionFlag,3,Include a Character Description?,Yes,No,Add a link to generate the NPC's description
@PersonalHistoryFlag,3,Would you like to include a Personal History for this Character?,Yes,No,Add a link to generate the NPC's personality
@Blank5,-,------------- NPC Creation Rules -------------
### VAL (PointBuyFlag) "6" (base =6)
# Set at 5 (Heroic) or 6 (Basic). 7= All 10s, good for testing.
@PointBuyFlag,6,Use the Non-Standard Point Buy Method to Generate Attributes? (NOTE: to work with Heroic/Basic type you must choose Heroic or Basic here),Standard (5d3+3),Standard (Best 3 out of 4d6),Standard (3d6),Input the number of Points allowed,Heroic (15 14 13 12 10 8),Basic (13 12 11 10 9 8),All 10's
### VAL (Heroic) "3" (base =3)
# 1=Heroic  2=Basic  3=Random (also used for Animal Companion and Familiars)
@Heroic,3,Heroic NPC (If Point Buy Method is either Heroic or Basic it will alternate between these two depending on this choice; Single NPC Classes 95 percent Basic otherwise based on group),Heroic,Basic,Random
@AgeFlag,1,AGE: Do you want to add age modifiers to attributes?,Yes,No
### VAL (FavClassBonus) "1" (base =1)
@FavClassBonus,1,Select favored class bonus,Random each level,Skill ranks only,Hit points only,Random all in SR or HP
### VAL (ChooseRanks) "4" (base =1)
@ChooseRanks,4,SKILLS: How do you want ranks to be chosen?,Random,Choose a number of skills base on "INT+Skill Points" and max the ranks in them.,Buy each rank one at a time.,Buy a few ranks at a time (1-4 based on level).
### VAL (CasterMinStatChoice) "2"
@CasterMinStatChoice,2,Spellcaster: Select spellcasting stats option (set percentage below).,No minimum spellcasting stat (will always raise it to a minimum of 12),Raise spellcasting stat to max spell level (Heroic only),Raise spellcasting stat to max spell level (ALL)
### VAL (CasterMinStatChance) "80"
@CasterMinStatChance,80,Spellcaster: Set the percentage chance to apply the above option.
### VAL (PFExperience) "4" (base =4)
@PFExperience,4,PF: Determine experience progression for NPC treasures (PF version only),Slow,Normal,Fast,LOAD from Permanent Variables
# PFFantasy: Low/normal/high fantasy (1/2 treasure value/normal/x2 treasure value)
@PFFantasy,4,PF: Determine fantasy setting for NPC treasures (PF version only),Low Fantasy (1/2 treasure value),Normal Fantasy,High Fantasy (x2 treasure value),LOAD from Permanent Variables
### VAL (ModWealth) "1" (base =2)
@ModWealth,1,Modify Wealth based on Item Creation Feats? (+25 percent in certain categories),Yes,No
### VAL (ModWealthProf) "1" (base =2)
@ModWealthProf,1,Modify Wealth based on Profession skill? (+1 percent per +1 in total skill in all wealth categories),Yes,No
### NEW WORLD ###
# If you add some worlds, see NEW WORLD below.
# DO NOT CHANGE the WORLDS CODES ===> Useful for all other tables (Book Titles, Countries, Permanent_Variables, Religion, Travelers, Ultimate NPC).
# 1= LOAD permanent variable 2= RANDOM, 3= Blackmoor 4= Conan 5= Dragonlance 6= Dragonlance (Taladas) 7= Dark Sun 
# 8= Eberron 9= Forgotten Realms 10= Golarion 11= Greyhawk 12= Kingdoms of Kalamar 13= Lankhmar 14= Modern 15= MYSTARA 
# 16= Ravenloft 17= Rokugan 18= Scarred Lands 19= Spelljammer 20= Sovereign Stone
# XXX TO DO --- Gods based on World to be done.
### VAL (WorldNeeded) "1" (base =1)
@WorldNeeded,1,WORLD: Creatures from which world?,LOAD from Permanent_Variables,Random World,Blackmoor,Conan,Dragonlance,Dragonlance (Taladas),Dark Sun,Eberron,Forgotten Realms,Golarion,Greyhawk,Kingdoms of Kalamar,Lankhmar,Modern,Mystara,Ravenloft,Rokugan,Scarred Lands,Spelljammer,Sovereign Stone
@GodGenGroup,3,GOD: How do you want to generate group gods? (Random = 90 percent same god),Same god for everyone,Different gods for everyone,Random
@GodGenPersonal,3,GOD: Do you want to generate a god for each NPC? (No = only for divine casters),Yes,No,Random
@GodPercent,65,GOD: How many percent of non-divine NPCs will follow a god?
@Blank6,-,------------------- Output -------------------
@RaceGroup,1,RACE: Random races determination for groups,Yes,No
#    LargeGroups:         2   SPECIAL: Generate large groups of monsters (10 and over)?
#                             1=Yes   2=No
#@LargeGroups,1,SPECIAL: Generate large groups of monsters (10 and over)?,Yes,No
@GroupNames,1,Do you want to show names and genders for groups?,Yes,No
### VAL (InsertHPField) "1" (base =2)
@InsertHPField,1,Do you want to insert a "field" beside the HPs of the NPCs?,Yes,No
@Show,1,Show description of some class powers and Feats?,Yes,No
@ShowInitialWealth,1,Show the initial Wealth for the NPC?,Yes,No
# XXX TO DO, to add some equipment.
@ShowMissingWealth,1,Show the Wealth missing based on Heroic or Basic type?,Yes,No
@ShowStats,1,Show Attribute modifiers from Age - Race - Levels? Show above must be YES.,Yes,No
@ShowUnarmed,1,Show unarmed attack?,Yes,No,If special equipement or Improved Unarmed Strike
@LeadershipFeat,1,LEADERSHIP: Allow the Leadership feat? (Always NO for cohorts or Basic or group of NPCs),Yes,No
@GenCohort,1,LEADERSHIP: Generate Cohorts?,Yes,No
@MonsterCohort,15,LEADERSHIP: Chance to generate a Monster Cohort (0-100)
@GenFollowers,2,LEADERSHIP: Generate list of followers?,Yes (All Classes),Yes (Mainly NPC Classes),No
@Blank7,-,--------------- Special Rules ---------------
### VAL (FeatOption) "5" (base =1)
@FeatOption,5,Choose Feats options.,Standard Pathfinder,1/level (PCs only),1/level (only 1% for Heroic NPCs),1/level + racial at levels 3-6-9-12-15-18 (PCs only),1/level + racial at levels 3-6-9-12-15-18 (only 1% for Heroic NPCs)
### VAL (ActionPoints) "3" (base =2)
@ActionPoints,3,Do you use Action Points?,Yes (everyone),No,Only for Heroic NPCs,Only for Heroes
### VAL (Valminder) "3" (base =2)
@Valminder,3,Apply Valminder's modifications,Yes,No,LOAD from Permanent Variables
@Bonus0Level,2,OPTIONAL: Bonus 0-level spells based on Prime Attribute? (same as 1st-level spells),Yes,No
@Blank8,-,---------------- Instructions ----------------
@Instructions,2,Would you like to show the Instructions?,Yes,No

:Start
1,{Status~by Larry Cormier and Valminder 2006,2008,2012,2018}
_{If~%Instructions%=1?[Instructions]/[GroupSelection]}

:GroupSelection
1,[VersionNeeded][WorldNeeded][Valminder]
_|ALGroup=0|
_|ALGroupEvil={Param~ALGroupEvil,%ALGroupEvil%}|
_{If~%GodGenGroup%=3?{If~{Dice~1d100}<=90?|GodGenGroup=1|/|GodGenGroup=2|}}
_{If~%GodGenPersonal%=3?|GodGenPersonal={Dice~1d2}|}
_{If~%GroupFlag%=1?[GenGroup]/[InitialCharacterSetup]}

:Instructions
1,[FontB=4]This table generates a Random, single class, Pathfinder Non-Player Characters (NPCs) or Player Characters (PCs)
_ - complete with personality quirks and basic appearances in standard D&D Stat Block Format.<br>
_It also randomly determines Paladin Mounts, Animal Companions for Druids and Rangers, 
_and familiars for Wizard and Sorcerer NPCs.<br><br>
_This update also modifies all the informations, attack rolls, AC, hit points, feat bonuses (except Skill Focus) and skill ranks.<br>
_You can see bonus {Color~Green,informations and feat rules}, {Color~Red,penalties or missing information}, {Color~OrangeRed,warning}, {Color~Orange,magic items}, {Color~SaddleBrown,equipment}, {Color~Grey, rules},
_ {Color~DarkCyan,class informations}, {Color~Peru,racial informations}, {Color~Purple,magic enhanced information}, {Color~HotPink,tests}, and {Color~Olive,template informations}.<br>
_There is also some equipment and mounts, as well as the carrying capacity (with only armor and weapons, and with all the equipment at the end of the equipment section, showing how the gear affects the NPC).<br><br>
_You also have the option to generate a complete group of NPCs that can be used as Bandits, Pirates, Buccaneers,
_ or other similar bands of adventurers that would typically run around together for Nefarious (or even Noble)
_ purposes. It also provides a re-rollable option to make your NPC a Villain - complete with villainous motivations
_ - if so desired. <br><br>
_Use this Table to generate quick, complete Pathfinder-Compatible NPCs, Characters, or groups of opponents for your players
_ - ready to Cut and Paste into any Pathfinder Core Rules Game you may be writing - or as a quick way to actually begin
_ to play a D&D 3.75 Pathfinder-Compatible game - as opposed to spending hours building a new character. 
_All you have to do is select Race, Class, and Level as desired.<br><br>
_You can also generate completely random Characters (Level 1-20; standard Races and/or Classes) if desired.<br><br>
_Change the parameter (upper left-hand corner) to select your initial Gender, Race, Class, and Level Range to get started.
_<br><br>------------------------ Groups ------------------------
_<br><b>GroupFlag:</b> <font color=darkred>(Default=2)</font> Determine if you create a Group (1) or a Single NPC (2).
_<br><b>GroupFlagNumber:</b> <font color=darkred>(Default=Random)</font> Enter the number of NPCs to generate in the group (max 10).
_<br><b>ALGroupEvil:</b> <font color=darkred>(Default=3)</font> Determine if the group is composed of {Bold~non-evil} NPCs (1), only of {Bold~Evil} NPCs (2) or anything goes (3).
_<br>{Space~5}Note: If a Paladin is chosen as the initial class for a group, "ALGroupEvil" will be set to (1, No Evil) by default.
_<br><b>VillainFlag:</b> <font color=darkred>(Default=3)</font> Should this Character (or the Group Leader) be a Villain? (Only non-good Heroic NPCs can be villains).
_<br><br>-------------------- Race and Class --------------------
### NEW RACE ###
_<br><b>Race:</b> <font color=darkred>(Default=1)</font> 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half-Elf  6=Half-Orc  7=Halfling
_  8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
_  20=RANDOM
_<br><b>Class:</b> <font color=darkred>(Default=17)</font> 1=Fighter  2=Barbarian  3=Bard  4=Cleric   5=Druid  6=Monk  7=Paladin  8=Ranger  9=Rogue   10=Sorcerer  11=Wizard  12=Adept  13=Aristocrat   14=Commoner  15=Expert  16=Warrior   17=Random
_<br><b>NPCLevel:</b> <font color=darkred>(Default=0)</font> The maximum level for a single class NPC will be 20. For a group, enter the required EL. If "0" is chosen, it will choose a level in a range set by the LowHD and HighHD parameters below.
_<br><b>LowHD:</b> <font color=darkred>(Default=1)</font> Enter the Lowest Character Level desired (1-20).
_<br><b>HighHD:</b> <font color=darkred>(Default=20)</font> Enter the Highest Character Level desired (1-20).
_<br><br>--------------------- Class Options --------------------
_<br><b>ClassType:</b> <font color=darkred>(Default=1)</font> You can decide to create only PC classes, NPC classes or any mix of them.
_<br><b>AdeptType:</b> <font color=darkred>(Default=1)</font> Set the Adept type. The "Standard" is the regular adept from the Core Rulebook. 
_<br>{Space~5}The Seer and Smiter were introduced in the "Ultimate NPCs, supplementary rulebook XII" from Mongoose Publishing (2004, 3.5E).
_<br><b>CommonerType:</b> <font color=darkred>(Default=1)</font> Set the Commoner type. The "Standard" is the regular commoner form the Core Rulebook. 
_<br>{Space~5}The Beggar and Prostitute were introduced in the "Ultimate NPCs, supplementary rulebook XII" from Mongoose Publishing (2004, 3.5E).
_<br><b>DruidNatureBond:</b> <font color=darkred>(Default=1)</font>
_<br><b>ExpertType:</b> <font color=darkred>(Default=1)</font> Set the Expert type. The "Standard" is the regular expeert form the Core Rulebook. 
_<br>{Space~5}The Blacksmith, Courtesan, Fence, Jeweller, Pawnbroker and Sage-Scholar were introduced in the "Ultimate NPCs, supplementary rulebook XII" from Mongoose Publishing (2004, 3.5E). 
_<br>{Space~5}The Merchant and Locksmith were added by Valminder.
_<br><b>PaladinDivineBond:</b> <font color=darkred>(Default=1)</font>
_<br><b>RNGCombatStyle:</b> <font color=darkred>(Default=1)</font> 
_<br><b>RNGHunterBond:</b> <font color=darkred>(Default=1)</font> 
_<br><b>SorcererBlood:</b> <font color=darkred>(Default=1)</font> 
_<br><b>WizardSchool:</b> <font color=darkred>(Default=1)</font> 
_<br><br>---------------------- Description ---------------------
_<br><b>Gender:</b> <font color=darkred>(Default=3)</font> 
_<br><b>SuggestedMotivation:</b> <font color=darkred>(Default=1)</font> This gives a suggested motivation for the NPC or group rolled.
_<br><b>DescriptionFlag:</b> <font color=darkred>(Default=3)</font> This will create a text description of the single NPC (not for groups).
_<br><b>PersonalHistoryFlag:</b> <font color=darkred>(Default=3)</font> This will create a text of the personal history of the single NPC (not for groups).
_<br><br>------------------ NPC Creation Rules ------------------
_<br><b>PointBuyFlag:</b> <font color=darkred>(Default=6)</font> This will let you choose how to roll the stats for a NPC.
_<br>{Space~5}1=Standard (5d3+3)
_<br>{Space~5}2=Standard (Best 3 out of 4d6)
_<br>{Space~5}3=Standard (3d6)
_<br>{Space~5}4=Input the number of Points allowed
_<br>{Space~5}5=Elite Array (15 14 13 12 10 8)
_<br>{Space~5}6=NPC Array (13 12 11 10 9 8)
_<br>{Space~5}7=All 10's (This is a good choice for testing the table)
_<br>{Space~5}If you want to be able to change the way attributes are calculated based on the Heroic or Basic character type, you must choose either 5 (Heroic) or 6 (Basic).
_<br><b>Heroic:</b> <font color=darkred>(Default=3)</font> This will let you choose what kind of character to create. 
_<br>{Space~5}A Heroic character has more equipment, is less affected by age since it's considered he went adventuring to gain experience, and will have the Elite attributes (15 14 13 12 10 8). Also, a Heroic NPC should have a high enough spellcasting attribute to be able to cast his higher spell levels. 
_<br>{Space~5}A Basic character has less equipment, is more affected by old age since the experience gained is slower due do his lack of experience gained through adventure, will use the NPC array (13 12 11 10 9 8) and his spellcasting attribute might not be high enough for him to cast his higher spells.
_<br><b>AgeFlag:</b> <font color=darkred>(Default=1)</font> This will show (1) or not (2) the age modifiers to attributes.
_<br><b>FavClassBonus:</b> <font color=darkred>(Default=1)</font> Since this only creates single class NPCs, the NPC will gain 1 SP or HP per level, determined as per this parameter.
_<br><b>ChooseRanks:</b> <font color=darkred>(Default=1)</font> This will let you choose how to assign ranks for the skill choice of the NPCs.
_<br><b>CasterMinStatChoice:</b> <font color=darkred>(Default=2)</font> Select how the spellcasting attribute will be modified.
_<br>{Space~5}1=No minimum spellcasting stat (will always raise it to a minimum of 12)
_<br>{Space~5}2=Raise spellcasting stat to max spell level (Heroic only)
_<br>{Space~5}3=Raise spellcasting stat to max spell level (ALL)
_<br><b>CasterMinStatChance:</b> <font color=darkred>(Default=80)</font> Set the percentage chance to apply the above option.
_<br><b>PFExperience:</b> <font color=darkred>(Default=X)</font> Determine fantasy setting for NPC treasures.
_<br><b>PFFantasy:</b> <font color=darkred>(Default=X)</font> Determine fantasy setting for NPC treasures.
_<br><b>ModWealth:</b> <font color=darkred>(Default=1)</font> Modify Wealth based on Item Creation Feats? (+25 percent in certain categories). Use the best one between this +25 percent or the Profession bonus.
_<br><b>ModWealthProf:</b> <font color=darkred>(Default=1)</font> Modify Wealth based on Profession skill? (+1 percent per +1 in total skill in all categories). Use the best one between the Profession bonus or the +25 percent for the Item Creation Feat.
### XXX TO DO
_<br><b>WorldNeeded:</b> <font color=darkred>(Default=1)</font> Determine which world you use. This will be modified later in the Countries table.
_<br>{Space~5}1= LOAD permanent variable 2= RANDOM, 3= Blackmoor 4= Conan 5= Dragonlance 6= Dragonlance (Taladas) 7= Dark Sun 
_<br>{Space~5}8= Eberron 9= Forgotten Realms 10= Golarion 11= Greyhawk 12= Kingdoms of Kalamar 13= Lankhmar 14= Modern 15= MYSTARA 
_<br>{Space~5}16= Ravenloft 17= Rokugan 18= Scarred Lands 19= Spelljammer 20= Sovereign Stone
_<br><b>GodGenGroup:</b> <font color=darkred>(Default=3)</font> How do you want to generate group gods?
_<br>{Space~5}1= Same god for everyone in the group. Alignemnt will then match the god's worshipers alignment.
_<br>{Space~5}2= Different gods for everyone in the group.
_<br>{Space~5}3= Random.
_<br><b>GodGenPersonal:</b> <font color=darkred>(Default=1)</font> Do you want to generate a god for each NPC? (No = only for divine casters)
_<br>{Space~5}1= Yes. It's considered that each NPC should have a god, since gods have real powers.
_<br>{Space~5}2= No. Only divine spell casters will have a god.
_<br>{Space~5}3= Random.
_<br><b>GodPercent:</b> <font color=darkred>(Default=65)</font> Percent chances for a non-divine NPC to have a god.
_<br><br>------------------ Output (1=Yes, 2=No) ----------------
_<br><b>RaceGroup:</b> <font color=darkred>(Default=1)</font> Set to (2) if you want all members of a group to be of the same race.
#_<br><b>LargeGroups:</b> <font color=darkred>(Default=2)</font> Set to (2) if you do not want groups of more than 10 members.
_<br><b>GroupNames:</b> <font color=darkred>(Default=1)</font> Set to (1) to add names and gender for members of a group. 
_<br><b>InsertHPField:</b> <font color=darkred>(Default=2)</font> Set to (1) to add a "field" beside the HPs to have a place to note them if you copy/paste the NPCs in another file or if you print it. 
_<br><b>Show:</b> <font color=darkred>(Default=1)</font> Set at (1) to show (in green) the description of some skills, abilities, and powers.
_<br><b>ShowInitialWealth:</b> <font color=darkred>(Default=2)</font> Show the initial Wealth for the NPC?
_<br><b>ShowMissingWealth:</b> <font color=darkred>(Default=1)</font> Shows the missing wealth based on the type chosen (either Heroic or Basic). This wealth can then be spent in another program.
_<br><b>ShowStats:</b> <font color=darkred>(Default=2)</font> Set at (1) to show Attribute modifiers from Age, Race, and Levels. Show above must also be set at (1).
_<br><b>ShowUnarmed:</b> <font color=darkred>(Default=3)</font> Set at (1) to show unarmed attacks for wevery one. At (3) the unarmed attack will only appear if the NPC has some special equipement (like a gauntlet) or the Improved Unarmed Strike feat.
_<br><b>LeadershipFeat:</b> <font color=darkred>(Default=1)</font> Do you allow this feat. It will always be (2, No) for groups.
_<br><b>GenCohort:</b> <font color=darkred>(Default=1)</font> If Leadership can be choosen, do you want to generate the cohort? The alignment will match for a Paladin as master.
_<br><b>GenFollowers:</b> <font color=darkred>(Default=2)</font> Choose the way followers will be rolled.
_<br>{Space~5}1= All classes can be chosen.
_<br>{Space~5}2= Mainly NPC Classes. Though followers are normally warriors, experts, or commoners, your DM might allow you to have characters of other classes as followers.
_ If you use this optional rules, adept or aristocrat followers count as followers of two levels higher than their actual character level.
_<br>{Space~8}A follower with any levels in a PC class counts as a follower three levels higher than his character level. 
_<br>{Space~8}A follower with any levels in a prestige class counts as a follower five levels higher than his character level. 
_<br>{Space~8}This reflects the fact that such characters are rarely followers and are much more likely to be unique characters in their own right.
_<br>{Space~5}3= 1/level (Only 1[Percent] of heroic NPCs, if not will use #2)
_<br><br>--------------------- Special Rules --------------------
_<br><b>FeatOption:</b> <font color=darkred>(Default=1)</font> Do you want to use Pathfinder's regular feat progression?
_<br>{Space~5}1= Standard Pathfinder progression
_<br>{Space~5}2= 1/level (PCs only)
_<br>{Space~5}3= 1/level (Only 1[Percent] of heroic NPCs, if not will use #2)
_<br>{Space~5}4= 1/level + racial at levels 3-6-9-12-15-18 (PCs only)
_<br>{Space~5}5= 1/level + racial at levels 3-6-9-12-15-18 (Only 1[Percent] of heroic NPCs, if not will use #2)
_<br><b>Valminder:</b> <font color=darkred>(Default=3)</font> Do you want to use Valminder's optional rules:
_<br>{Space~5}- VP/WP rules (from Book of Experimental Might)
_<br>{Space~5}- Some modifications for magic weapons.
_<br>{Space~5}- Improved Feat Rules: 1 feat/level. At level 3-6-9-12-15-18 must choose from a special racial feat list.
_<br>{Space~5}- COMING: Item Creation feats.
#_<br>{Space~5}
#_<br>{Space~5}
_<br><b>Bonus0Level:</b> <font color=darkred>(Default=2)</font> Do you want to be able to cast bonus 0-level spells based on the spellcasting attribute for 1st level spells?
_<br><br>---------------------- Instructions --------------------
_<br><b>Instructions:</b> <font color=darkred>(Default=2)</font> 
#
#_<br><b>PARAM:</b> <font color=darkred>(Default=X)</font> XXX
#_<br>{Space~5}Note: 
_[FontE]

:BoldOn
1,<b>

:BoldOff
1,</b>

:Chanceof
1,|Chance={Dice~1d100}|

:FontB
1,<font size=1>
2,<font size=2>
3,<font size=3>
4,<font size=4>

:FontE
1,</font>

:Gender
1,male
2,female

:GenderShort
1,M
2,F

:ItalicsOn
1,<i>

:ItalicsOff
1,</i>

:PrRule
1,{If~{And~%Show%=1,%Rule%!=0}=1?[FontB=2]{Color~Grey, (%Rule%)[FontE]}}

:PrRuleAlways
1,[FontB=2]{Color~Grey, (%Rule%)[FontE]}

:Slash
1,/

:Tab
1,{Loop~5,&nbsp;}

:TestTable
1,[FontB=2]{Color~HotPink,%TestTableNote%}[FontE]

:Valminder
1,{If~%Valminder%=3?|Valminder=[Permanent_Variables.Val_Rules]|}

:VersionNeeded
1,{If~%PFExperience%=4?|PFExperience=[Permanent_Variables.PFExperience]|}
_{If~%PFFantasy%=4?|PFFantasy=[Permanent_Variables.PFFantasy]|}

:WorldNeeded
1,{If~%WorldNeeded%=1?|WorldNeeded=[Permanent_Variables.WorldNeeded]|
_     /{If~%WorldNeeded%=2?|WorldNeeded=[Countries.RandomWorld]|/
_}}
_|WorldNeededName=[Countries.WorldNeededName=%WorldNeeded%]|

# ---------------------------------------------------------------------------
:GenGroup
1,|PrintGroupGod=Yes|
#{Input~Total,How many individuals in this Group? (Default: 5-20),Random}
#_{If~%Total%=Random?|Total={Dice~5d4}|}
_{If~%NPCLevel%=0?|LowHD+1||HighHD+1|[CalculateLevelRange2]|NPCLevel=%CharacterLevel%|/{If~%NPCLevel%>=100?|NPCLevel=1|/|NPCLevel+1|}|CharacterLevel=%NPCLevel%|}
_{If~{Or~%GroupFlagNumber%=Random,%GroupFlagNumber%=0}=1?[GenGroupNumber=%CharacterLevel%]/|Total=%GroupFlagNumber%|}
###_{If~{And~%LargeGroups%=2,%Total%>10}=1?|Total=10|}|Total<30|
###_|Total<10|
# Below, the NPCLevel is actually 1 over the required EL.
_{If~%NPCLevel%=2?|Total<3|
_/{If~%NPCLevel%=3?|Total<5|
_/{If~%NPCLevel%=4?|Total<7|{If~%Total%=4?|Total=3|}{If~%Total%=2?|Total=1|}
_/{If~%NPCLevel%=5?|Total<9|{If~%Total%=6?|Total=5|}{If~%Total%=3?|Total=2|}
_/{If~%NPCLevel%=6?{If~%Total%=9?|Total=6|}{If~%Total%=8?|Total=7|}{If~%Total%=4?|Total=3|}
_/{If~%NPCLevel%=7?{If~%Total%=6?|Total=5|}
_/{If~%NPCLevel%=8?{If~{And~%Total%>=8,%Total%<=9}=1?|Total=7|}
_}}}}}}}
# 1=Heroic  2=Basic
# Only 25% to have an Heroic group.
_{If~%Heroic%=3?|Heroic={Dice~1d4}|{If~%Heroic%>1?|Heroic=2|}}
_[CRSearchReset=%Total%]|CRSearch>1|
_|EL={Calc~%CharacterLevel%-1}|
_[GroupBreakout][GroupComposition]
_{If~%ShowMissingWealth%=1?
_<br>|WealthTOTMissing={Calc~%WealthWPNMissing%+%WealthPROTMissing%+%WealthMAGMissing%+%WealthLIMMissing%+%WealthGEARMissing%}||WealthTOTMissing={Round~0,%WealthTOTMissing%}|{Color~Red,[WealthInfo3] = {Bold~[AddComma.Start(%WealthTOTMissing%)] gp} (Spent: [AddComma.Start({Round~0,{Calc~%WealthTOTGroup%-%WealthTOTMissing%}})] gp); Weapon: [AddComma.Start({Round~0,%WealthWPNMissing%})], Protection: [AddComma.Start({Round~0,%WealthPROTMissing%})], Magic: [AddComma.Start({Round~0,%WealthMAGMissing%})], Limited: [AddComma.Start({Round~0,%WealthLIMMissing%})], Gear: [AddComma.Start({Round~0,%WealthGEARMissing%})]. }
_}

:PrintGroupInfo
1,<b>Group Encounter ([Countries.World=%WorldNeeded%]):</b> ([~BandTypePlural]) consisting of {Bold~%Total%} randomly determined NPCs {Bold~(EL %EL%)}.
#_ NPCs (Level %LowHD% to %HighHD%):
_{If~%VillainFlag%=3?|VillainFlag={Dice~1d2}|}
_{If~%VillainFlag%=1?<br><br>This Group's Leader has this Villainous Motivation: [~GroupVillainousMotivation]|VillainFlag=0|}
_<br><br>
_{Bold~Group Alignment:} {If~%AL%=NN?N/%AL%}.<br><br>

:GenGroupNumber
1,|Total=1|
2-3,|Total={Dice~1d2}|
4-5,|Total={Dice~1d3+1}|
6-8,|Total={Dice~1d4+1}|
9-12,|Total={Dice~1d6+1}|
13-17,|Total={Dice~1d9+1}|
18-23,|Total={Dice~1d13+1}|
24-100,|Total={Dice~1d19+1}|

:CRSearchReset
1,|CRSearch=%NPCLevel%|
2,{If~%NPCLevel%=3?|CRSearch={Calc~%NPCLevel%-1}|
_/|CRSearch={Calc~%NPCLevel%-2}|
_}
3,{If~%NPCLevel%=4?|CRSearch={Calc~%NPCLevel%-2}|
_/|CRSearch={Calc~%NPCLevel%-3}|
_}
4,{If~%NPCLevel%=5?|CRSearch={Calc~%NPCLevel%-3}|
_/|CRSearch={Calc~%NPCLevel%-4}|
_}
5,{If~%NPCLevel%=5?|CRSearch={Calc~%NPCLevel%-3}|
_/|CRSearch={Calc~%NPCLevel%-4}|
_}
6,{If~%NPCLevel%=6?|CRSearch={Calc~%NPCLevel%-4}|
_/|CRSearch={Calc~%NPCLevel%-5}|
_}
7,{If~%NPCLevel%=6?|CRSearch={Calc~%NPCLevel%-4}|
_/|CRSearch={Calc~%NPCLevel%-5}|
_}
8,{If~%NPCLevel%=7?|CRSearch={Calc~%NPCLevel%-5}|
_/|CRSearch={Calc~%NPCLevel%-6}|
_}
9,{If~%NPCLevel%=7?|CRSearch={Calc~%NPCLevel%-5}|
_/|CRSearch={Calc~%NPCLevel%-6}|
_}
10,{If~%NPCLevel%=7?|CRSearch={Calc~%NPCLevel%-5}|
_/|CRSearch={Calc~%NPCLevel%-6}|
_}


:CalculateLevelRange
1,{If~%NPCLevel%=0?[CalculateLevelRange2]|NPCLevel=%CharacterLevel%|/{If~%CRSearch%=0?|CharacterLevel=%NPCLevel%|/|CharacterLevel=%CRSearch%|}}

:CalculateLevelRange2
1,{If~%LowHD%>%HighHD%?[ReverseRanges]}
_|HD_Range={Calc~((%HighHD%-%LowHD%)+1)}|
_{If~%HD_Range%<0?|HD_Range=1|}
_|TempNumber={Dice~1d%HD_Range%}|
_|CharacterLevel={Calc~((%TempNumber%+%LowHD%)-1)}|
_{If~%LowHD%=%HighHD%?|CharacterLevel=%LowHD%|}

:ReverseRanges
1,|TempNumber=%LowHD%||LowHD=%HighHD%||HighHD=%TempNumber%|

:ValueCalculation
1,|Result={Ceil~{Calc~((%InputValue%-%StartingValue%) / %ResultRange%)}}|

# ---------------------------------------------------------------------------
# Group Generation Tables

:GroupBreakout
1,|X1={Dice~1d%Total%}|
_|X2={Calc~(%Total%-%X1%)}|
_{If~%X2%>0?{If~%X1%>%X2%?|TempNumber=%X1%||X1=%X2%||X2=%TempNumber%|}}
_|X3={Dice~1d%X2%}||X2={Calc~(%X2%-%X3%)}|
_{If~%X3%>0?{If~%X2%>%X3%?|TempNumber=%X2%||X2=%X3%||X3=%TempNumber%|}}
_|X4={Dice~1d%X3%}||X3={Calc~(%X3%-%X4%)}|
_{If~%X4%>0?{If~%X3%>%X4%?|TempNumber=%X3%||X3=%X4%||X4=%TempNumber%|}}
_|X5={Dice~1d%X4%}||X4={Calc~(%X4%-%X5%)}|
_{If~%X5%>0?{If~%X4%>%X5%?|TempNumber=%X4%||X4=%X5%||X5=%TempNumber%|}}
_|X6={Dice~1d%X5%}||X5={Calc~(%X5%-%X6%)}|
_{If~%X6%>0?{If~%X5%>%X6%?|TempNumber=%X5%||X5=%X6%||X6=%TempNumber%|}}
_|X7={Dice~1d%X6%}||X6={Calc~(%X6%-%X7%)}|
_{If~%X7%>0?{If~%X6%>%X7%?|TempNumber=%X6%||X6=%X7%||X7=%TempNumber%|}}
_|X8={Dice~1d%X7%}||X7={Calc~(%X7%-%X8%)}|
_{If~%X8%>0?{If~%X7%>%X8%?|TempNumber=%X7%||X7=%X8%||X8=%TempNumber%|}}
_|X9={Dice~1d%X8%}||X8={Calc~(%X8%-%X9%)}|
_{If~%X9%>0?{If~%X8%>%X9%?|TempNumber=%X8%||X8=%X9%||X9=%TempNumber%|}}
_|X10={Dice~1d%X9%}||X9={Calc~(%X9%-%X10%)}|
_{If~%X10%>0?{If~%X9%>%X10%?|TempNumber=%X9%||X9=%X10%||X10=%TempNumber%|}}
_{If~%X2%=-1?|X2=0||X10=0|}

### NEW CLASS ### --- Change "Class=" below to be equal to the RANDOM value.
### NEW RACE ### ---- Change "Race=" below to be equal to the RANDOM value.
:GroupComposition
1,{If~%X1%>0?|NA=%X1%|[GroupComposition2]{If~{Param~Class,%Class%}=Paladin?|ALGroupEvil=No Evil|}}{If~%RaceGroup%=1?|Race=20|}|Class=17||NPCClass=No|
_ {If~%X2%>0?<br><br>|NA=%X2%|[GroupComposition2]}{If~%RaceGroup%=1?|Race=20|}|Class=17||NPCClass=No|
_ {If~%X3%>0?<br><br>|NA=%X3%|[GroupComposition2]}{If~%RaceGroup%=1?|Race=20|}|Class=17||NPCClass=No|
_ {If~%X4%>0?<br><br>|NA=%X4%|[GroupComposition2]}{If~%RaceGroup%=1?|Race=20|}|Class=17||NPCClass=No|
_ {If~%X5%>0?<br><br>|NA=%X5%|[GroupComposition2]}{If~%RaceGroup%=1?|Race=20|}|Class=17||NPCClass=No|
_ {If~%X6%>0?<br><br>|NA=%X6%|[GroupComposition2]}{If~%RaceGroup%=1?|Race=20|}|Class=17||NPCClass=No|
_ {If~%X7%>0?<br><br>|NA=%X7%|[GroupComposition2]}{If~%RaceGroup%=1?|Race=20|}|Class=17||NPCClass=No|
_ {If~%X8%>0?<br><br>|NA=%X8%|[GroupComposition2]}{If~%RaceGroup%=1?|Race=20|}|Class=17||NPCClass=No|
_ {If~%X9%>0?<br><br>|NA=%X9%|[GroupComposition2]}{If~%RaceGroup%=1?|Race=20|}|Class=17||NPCClass=No|
_ {If~%X10%>0?<br><br>|NA=%X10%|[GroupComposition2]}{If~%RaceGroup%=1?|Race=20|}|Class=17||NPCClass=No|

### NEW RACE ### ---- Change "Race=" below to be equal to the RANDOM value.
:GroupComposition2
1,[CalculateLevelRange]
_{If~{Param~Race,%Race%}=Random?[RaceDistribution]
_   /{If~{And~{Param~Race,%Race%}=Drow,%ALGroupEvil%=No Evil}=1?[RaceDistribution]
_   /{If~{And~{Param~Race,%Race%}=Drow Noble,%ALGroupEvil%=No Evil}=1?[RaceDistribution]
_   /{If~{And~{Param~Race,%Race%}=Duergar,%ALGroupEvil%=No Evil}=1?[RaceDistribution]
_   /{If~{And~{Param~Race,%Race%}=Goblin,%ALGroupEvil%=No Evil}=1?[RaceDistribution]
_   /{If~{And~{Param~Race,%Race%}=Hobgoblin,%ALGroupEvil%=No Evil}=1?[RaceDistribution]
_   /{If~{And~{Param~Race,%Race%}=Kobold,%ALGroupEvil%=No Evil}=1?[RaceDistribution]
_   /{If~{And~{Param~Race,%Race%}=Orc,%ALGroupEvil%=No Evil}=1?[RaceDistribution]
_   /{If~{And~{Param~Race,%Race%}=Tiefling,%ALGroupEvil%=No Evil}=1?[RaceDistribution]
_   /{If~{And~{Param~Race,%Race%}=Aasimar,%ALGroupEvil%=Evil}=1?[RaceDistribution]
_}}}}}}}}}}
_[SubraceDistribution]
_[SetRacialAL=%Race%]
_{If~{Param~Class,%Class%}=Random?[ClassDistribution]
_   /{If~{And~{Param~Class,%Class%}=Paladin,%ALGroupEvil%=Evil}=1?[ClassDistribution]
_}}
_[NPCClass=%Class%]
_|InitialCharacterLevel=%CharacterLevel%|
_{If~%NPCClass%=Yes?|CharacterLevel+1||CharacterLevel<20|}
_{If~{Param~Class,%Class%}=Wizard?[WizardDetermineSchool]
_   /{If~{Param~Class,%Class%}=Adept?[AdeptTypeDetermination]
_   /{If~{Param~Class,%Class%}=Expert?[ExpertTypeDetermination]
_   /{If~{Param~Class,%Class%}=Commoner?[CommonerTypeDetermination]
_   /{If~{Param~Class,%Class%}=Warrior?[WarriorTypeDetermination]
_}}}}}
_ |Description=[BoldOn]{If~%Subrace%!=None?{Cap~%Subrace%} }{Cap~[Race=%Race%]} [PrintClass]; [ShortClass=%Class%]%CharacterLevel% (x%NA%);[BoldOff]{If~%GroupNames%=1?[PrintGroupNames]}|
_ [FinishStatBlock]
_|CharacterLevel=%InitialCharacterLevel%|

### NEW RACE ###
;RaceDistribution
6,[RaceDistributionCommon]
3,[RaceDistributionUncommon]
1,[RaceDistributionRare]
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling

;RaceDistributionCommon
# Human
50,|Race=1|
# Dwarf
15,|Race=2|
# Elf
20,|Race=3|
# Gnome
5,|Race=4|
# Half-elf
15,|Race=5|
# Half-orc
10,|Race=6|
# Halfling
5,|Race=7|

;RaceDistributionUncommon
# Aasimar 
5,{If~%ALGroupEvil%!=Evil?|Race=8|/[RaceDistribution]}
# Goblin
10,{If~%ALGroupEvil%!=No Evil?|Race=12|/[RaceDistribution]}
# Hobgoblin
10,{If~%ALGroupEvil%!=No Evil?|Race=13|/[RaceDistribution]}
# Kobold
5,{If~%ALGroupEvil%!=No Evil?|Race=14|/[RaceDistribution]}
# Orc
10,{If~%ALGroupEvil%!=No Evil?|Race=16|/[RaceDistribution]}
# Tiefling
5,{If~%ALGroupEvil%!=No Evil?|Race=19|/[RaceDistribution]}

;RaceDistributionRare
# Drow
5,{If~%ALGroupEvil%!=No Evil?|Race=9|/[RaceDistribution]}
# Drow Noble
1,{If~%ALGroupEvil%!=No Evil?|Race=10|/[RaceDistribution]}
# Duergar
5,{If~%ALGroupEvil%!=No Evil?|Race=11|/[RaceDistribution]}
# Merfolk
5,|Race=15|
# Svirfneblin
5,|Race=17|
# Tengu
5,|Race=18|

;RaceDistributionOLD_before_2019_01
# Human
50,|Race=1|
# Dwarf
15,|Race=2|
# Elf
20,|Race=3|
# Gnome
5,|Race=4|
# Half-elf
15,|Race=5|
# Half-orc
10,|Race=6|
# Halfling
5,|Race=7|

### NEW RACE ###
:Race
1,human
2,dwarf
3,elf
4,gnome
5,half-elf
6,half-orc
7,halfling
8,aasimar
9,drow
10,drow noble
11,duergar
12,goblin
13,hobgoblin
14,kobold
15,merfolk
16,orc
17,svirfneblin
18,tengu
19,tiefling
20,{Stop~ERROR Race}

### NEW RACE ###
### NEW SUBRACE ###
:SubraceDistribution
1,|Subrace=None|
_{If~{Param~Race,%Race%}=Dwarf?|Subrace={If~%SubDwarf%=1?[SubDwarf]/{Param~SubDwarf,%SubDwarf%}}|
_/{If~{Param~Race,%Race%}=Elf?|Subrace={If~%SubElf%=1?[SubElf]/{Param~SubElf,%SubElf%}}|{If~%Subrace%=Dusk (Shadow in Mystara)?|Subrace={If~%WorldNeededName%=Mystara?Shadow/Dusk}|}
_/{If~{Param~Race,%Race%}=Gnome?|Subrace={If~%SubGnome%=1?[SubGnome]/{Param~SubGnome,%SubGnome%}}|{If~%Subrace%=Gear (Thinker in Dragonlance)?|Subrace=Gear|}
_/{If~{Param~Race,%Race%}=Halfling?|Subrace={If~%SubHalfling%=1?[SubHalfling]/{Param~SubHalfling,%SubHalfling%}}|
_/{If~{Param~Race,%Race%}=Half Elf?|Subrace={If~%SubHalfElf%=1?[SubHalfElf]/{Param~SubHalfElf,%SubHalfElf%}}|
_/{If~{Param~Race,%Race%}=Half Orc?|Subrace={If~%SubHalfOrc%=1?[SubHalfOrc]/{Param~SubHalfOrc,%SubHalfOrc%}}|
_/{If~{Param~Race,%Race%}=Human?|Subrace={If~%SubHuman%=1?[SubHuman]/{Param~SubHuman,%SubHuman%}}|
_/{If~{Param~Race,%Race%}=Kobold?|Subrace={If~%SubKobold%=1?[SubKobold]/{Param~SubKobold,%SubKobold%}}|
_/{If~{Param~Race,%Race%}=Goblin?|Subrace={If~%SubGoblin%=1?[SubGoblin]/{Param~SubGoblin,%SubGoblin%}}|
_/{If~{Param~Race,%Race%}=Orc?|Subrace={If~%SubOrc%=1?[SubOrc]/{Param~SubOrc,%SubOrc%}}|
_}}}}}}}}}}

#_/{If~{Param~Race,%Race%}=?|Subrace={If~%Sub%=1?[Sub]/{Param~Sub,%Sub%}}|

;SubDwarf
9,{If~[Permanent_Variables.PHB1]=Yes?Hill/None}
1,{If~[Permanent_Variables.UA]=Yes?Aquatic/[SubDwarf]}
1,{If~[Permanent_Variables.UA]=Yes?Arctic/[SubDwarf]}
1,Deep
1,{If~[Permanent_Variables.UA]=Yes?Desert/[SubDwarf]}
1,Elder
1,Exiled
3,Mountain

;SubElf
12,{If~[Permanent_Variables.PHB1]=Yes?High/None}
1,Aquatic
1,{If~[Permanent_Variables.UA]=Yes?Arctic/[SubElf]}
1,{If~[Permanent_Variables.UA]=Yes?Desert/[SubElf]}
2,{If~%WorldNeededName%=Mystara?Shadow/Dusk}
2,{If~[Permanent_Variables.MM1]=Yes?Gray/[SubElf]}
1,Savage
1,Tower
1,{If~[Permanent_Variables.MM1]=Yes?Wild/[SubElf]}
2,{If~[Permanent_Variables.MM1]=Yes?Wood/[SubElf]}

;SubGnome
10,Rock
1,{If~[Permanent_Variables.UA]=Yes?Aquatic/[SubGnome]}
1,{If~[Permanent_Variables.UA]=Yes?Arctic/[SubGnome]}
1,{If~[Permanent_Variables.UA]=Yes?Desert/[SubGnome]}
1,Dread
2,Forest
1,Gear
1,Lava
2,Traveler

;SubGoblin
10,None
1,{If~[Permanent_Variables.UA]=Yes?Aquatic/[SubGoblin]}
1,{If~[Permanent_Variables.UA]=Yes?Arctic/[SubGoblin]}
1,{If~[Permanent_Variables.UA]=Yes?Desert/[SubGoblin]}

;SubHalfling
11,{If~[Permanent_Variables.PHB1]=Yes?Lightfoot/None}
1,{If~[Permanent_Variables.UA]=Yes?Aquatic/[SubHalfling]}
1,Avenging
1,{If~[Permanent_Variables.UA]=Yes?Arctic/[SubHalfling]}
1,Deep
1,{If~[Permanent_Variables.UA]=Yes?Desert/[SubHalfling]}
1,Nomadic
1,Slave Born
4,{If~[Permanent_Variables.MM1]=Yes?Tallfellow/[SubHalfling]}

;SubHalfElf
48,None
1,{If~[Permanent_Variables.UA]=Yes?Aquatic/[SubHalfElf]}
1,{If~[Permanent_Variables.UA]=Yes?Arctic/[SubHalfElf]}
1,{If~[Permanent_Variables.UA]=Yes?Desert/[SubHalfElf]}
1,Drow-Descended
10,Elf-Raised
10,Human-Raised

;SubHalfOrc
16,None
1,{If~[Permanent_Variables.UA]=Yes?Aquatic/[SubHalfOrc]}
1,{If~[Permanent_Variables.UA]=Yes?Arctic/[SubHalfOrc]}
1,Arena-Bred
1,Deep Kin
1,{If~[Permanent_Variables.UA]=Yes?Desert/[SubHalfOrc]}
1,Feral
1,Mountain Clan
1,Mystic

;SubHuman
27,None
1,{If~[Permanent_Variables.UA]=Yes?Aquatic/[SubHuman]}
5,Cosmopolitain
10,Country Folk
5,Gutter Rat
1,Imperious
5,Trailblazer

;SubKobold
25,None
1,{If~[Permanent_Variables.UA]=Yes?Aquatic/[SubKobold]}
1,{If~[Permanent_Variables.UA]=Yes?Arctic/[SubKobold]}
1,{If~[Permanent_Variables.UA]=Yes?Desert/[SubKobold]}
10,{If~[Permanent_Variables.QKob]=Yes?Ebore's Clan/[SubKobold]}
6,{If~[Permanent_Variables.QKob]=Yes?Matthias' Clan/[SubKobold]}
3,{If~[Permanent_Variables.QKob]=Yes?Sigrun's Clan/[SubKobold]}
1,{If~[Permanent_Variables.QKob]=Yes?Uwe's Clan/[SubKobold]}
2,{If~[Permanent_Variables.QKob]=Yes?Exiled/[SubKobold]}

;SubOrc
10,None
1,{If~[Permanent_Variables.UA]=Yes?Aquatic/[SubOrc]}
1,{If~[Permanent_Variables.UA]=Yes?Arctic/[SubOrc]}
1,{If~[Permanent_Variables.UA]=Yes?Desert/[SubOrc]}

### NEW SUBRACE ###
# Subrace Description
:ShowSubraceDescDwarf
1,{If~%Subrace%=Hill?The standard dwarf.
_/{If~%Subrace%=Aquatic?Beneath the waves, dwarves remain the masters of stone. They build massive, elaborate fortresses near the mineral-rich waters that surround undersea thermal vents. They are tough enough to survive the brutal environment of the sea floor, but rely on strength and heavy armor rather than agility.
_/{If~%Subrace%=Arctic?In the icy wastes, dwarves are the masters of both ice and stone. They build massive, elaborate defenses of ice and rock around the mines where they dig for copper, silver, gold, and iron.
_/{If~%Subrace%=Deep?Dwarves living far below the earth. They have increased darkvision, brigth light dazzle them, and they grew up facing the abominations that live deep beneath the surface.
_/{If~%Subrace%=Desert?Because of their skill with stone and engineering, dwarves are acknowledged masters of locating water and digging wells. The importance of water to desert peoples gives the dwarves both great wealth and great political power.
_/{If~%Subrace%=Elder?Traditionalist dwarves of ancient lineage. They have long been in conflict with elves, especially the hated drow. They keep extensive records about their history and the world around them, and these older dwarven clans are particularly resistant to magic.
_/{If~%Subrace%=Exiled?These dwarves have lost their homelands. They are skilled at pushing their way through a battlefield, tossing aside lesser foes with ease, but they are renowned for their stubbornness. They have learned to fight against all kinds of dragons.
_/{If~%Subrace%=Jungle?Because of their height, dwarves can duck under vegetation that impedes humansyet they are stockier than gnomes or halflings, and able to bull through what they cant avoid. Hardy to a fault, jungle dwarves are explorers, pathfinders, and traveling merchants.
_/{If~%Subrace%=Mountain?These dwarves are living atop high peaks.
_}}}}}}}}}

:ShowSubraceDescElf
1,{If~%Subrace%=High?The standard elf.
_/{If~%Subrace%=Aquatic?Aquatic elves can live either in or out of the water, but most prefer homes in the watery depths of oceans and seas.
_/{If~%Subrace%=Arctic?These elves were born and raised in the frozen lands of the far north or south, and have dealt with freezing deserts, nights that last for weeks, and the horrors that roam the cold terrain.
_/{If~%Subrace%=Desert?In the desert, elves follow nomadic lifestyles. They herd horses, cattle, and goats across the sands, sleeping during the day and working or traveling at night. Their wandering takes them many places and puts them in contact with many cultures. As a result, they are welcome everywhere for the news and exotic trade goods they carry.
_/{If~{Or~%Subrace%=Shadow,%Subrace%=Dusk}=1?Rather than being tied to the terrain around them, some elves are linked to the night itself. Though not tied to demon worship and evil as drow are, these elves are similarly attuned to the magical concepts of darkness and shadow. They have the ability to tap into the power of sleep, dreams, and prescient reverie, as well as being are renowned for their subtlety and skill.
_/{If~%Subrace%=Gray?Gray elves are the most noble and regal of all elves. Taller and grander in physical appearance than others of their race, gray elves have a reputation for being aloof and arrogant (even by elven standards). They certainly are more reclusive than high elves, living in isolated mountain citadels and allowing entry only to a select few outsiders. They have either silver hair and amber eyes or pale golden hair and violet eyes. They prefer clothing of white, silver, yellow, or gold, with cloaks of deep blue or purple.
_/{If~%Subrace%=Jungle?Jungle elves are somewhat more primal than their baseline counterparts. In many jungles, ancient elven cities have been swallowed up by the voracious encroachment of trees, vines, and animals, leaving just a shadowy remnant of the population to remember the former glories of their lost civilization.
_/{If~%Subrace%=Savage?In lands where every day is a constant struggle to survive and the niceties of civilization are rare, elves adapt to depend on swift strikes and lifelong vigilance to keep their families alive. They grow up in secluded, isolationist communities where generations-old slights and quarrels linger as eternal blood feuds. While all elves are naturally lithe and agile, savage elves are naturally speedy and have a strong desire to rush into situations rather than worrying about looking ahead.
_/{If~%Subrace%=Tower?Some elven institutions of magical learning date back centuries, and entire clans of elves have lived for generations as caretakers, students, and instructors of these self-sufficient schools of wizardry. These elven families have such long traditions of producing wizards (and other arcane spellcasters) that they raise their children with the assumption each is destined to be a powerful magic-user, with little need for mundane concerns such as skill with weapons. Living in cities for more than a century, they grow to know the ebb and flow of social situations just as their forest-dwelling cousins know the rules of the wild.
_/{If~%Subrace%=Wild?Wild elves, also known as grugach, are barbaric and tribal. Wild elves hair color ranges from black to light brown, lightening to silvery white with age. They dress in simple clothing of animal skins and basic plant weaves. Though other elves consider them savages, they contend that they are the true elves, for the rest have lost their primal elven essence in needing to build. Nomadic and rugged, wild elves favor the sorcerer class rather than wizard, although many are barbarians as well.
_/{If~%Subrace%=Wood?Also called sylvan elves, members of this subrace live deep in primordial forests. Their hair color ranges from yellow to a coppery red, and they are more muscular than other elves. Their clothing is in dark shades of green and earth tones to better blend in with their natural surroundings. Their homes are sometimes guarded by giant owls or leopards.
_}}}}}}}}}}}

:ShowSubraceDescGnome
1,{If~%Subrace%=Rock?The standard gnome.
_/{If~%Subrace%=Aquatic?Aquatic gnomes travel the world beneath the waves in elaborate wood and shell chariots pulled by domesticated sea creatures. Their vehicles range in size from single-person launches to those large enough to house several families.
_/{If~%Subrace%=Arctic?Arctic gnomes travel the ice and snow on cleverly constructed sleds pulled by immense woolly mammoths. The animals serve as transportation, a source of fibers for weaving, and walls against the elements. The sleds are enclosed, often transporting entire families.
_/{If~%Subrace%=Desert?Desert dwarves may dig and maintain wells, but desert gnomes pay for them. Desert gnomes establish and operate fortified trading posts around wells and oases, cultivating crops wherever possible and scouring the surrounding desert for the wealth of buried civilizations. Desert gnome outposts are rarely quiet, doing business both day and night.
_/{If~%Subrace%=Dread?Moodier, less forgiving, and often crueler than other gnomes, dread gnomes trace their heritage to the darker, more bloodthirsty lines of fey. Though not all dread gnomes are evil, they all find humor in watching others suffer, and have little use for the bright colors and joyful pursuits of their more cheerful cousins. They have an instinctive understanding of poisons and their uses.
_/{If~%Subrace%=Forest?Shy and elusive, forest gnomes shun contact with other races except when dire emergencies threaten their beloved homes.
_/{If~%Subrace%=Gear?Sometimes rather than a single gnome becoming obsessed with a project, whole families of gnomes undertake a project so massive it requires generations of artisans to complete. Such projects often involve complex clockwork devices (or entire clockwork buildings), and those born into families dedicated to lifetimes of work on them are known as gear gnomes. They are more academically inclined than their kin and they experiment with all manner of mechanical devices.
_/{If~%Subrace%=Jungle?Jungle gnomes live in and along the mighty rivers that wind through the jungles. A gnome jungle town is often a collection of boats tied together across a river, with channels to allow passing vessels through (after they pay a toll, of course). Jungle gnomes are also seen traveling the rivers, trading what they can find to those they meet along the way.
_/{If~%Subrace%=Lava?Fascinated by the power of magma and living in vast caverns beneath active volcanoes, lava gnomes are considered hot-tempered and dangerously unstable even by other gnomes. They have lived in the underground depths for so long they have given up on light entirely and they have a pyromaniac way with fire.
_/{If~%Subrace%=Traveler?These gnomes were born on the move, their families living on a ship or in a caravan wagon. They study languages in both their mundane and supernatural manifestations and are obsessed with seeing as much of the world as possible, rather than perfecting some specific talent or vocation.
_}}}}}}}}}}

:ShowSubraceDescGoblin
1,{If~%Subrace%=Aquatic?Aquatic goblins are feared and reviled as ocean-dwelling piranhas. A band of aquatic goblins and their shark mounts is likely to swoop down on any individual or group perceived as weak, to strip it of everything from gold and jewelry to clothing and hides. Leaving a trail of junk behind them as they evaluate their loot, the bandits swim off in search of other unlucky victims. Aquatic goblins to take up adventuring for many reasons. While most goblins are neutral evil, many have different beliefs and seek like-minded individuals outside the tribe. Some lack opportunities to advance, and tire of living on the scraps of those with more authority or higher social position.
_/{If~%Subrace%=Arctic?Arctic goblins are feared and reviled because their appearance heralds theft, assaults, and property damage. They survive by moving from place to place, constantly driven out of their previous homes by irate neighbors. Arctic goblins to take up adventuring for many reasons. While most goblins are neutral evil, many have different beliefs and seek like-minded individuals outside the tribe. Some just want an opportunity to settle down and work to earn a better reputation than that of their fellows.
_/{If~%Subrace%=Desert?Desert goblins are feared and reviled because their appearance often heralds the arrival of a horde of nomadic hobgoblins and bugbears. As the desert dwarf proverb puts it, The only good thing about goblins is that once they arrive, you know theyll soon be gone.<br>[Tab]Desert goblins take up adventuring for many reasons. While most goblins are neutral evil, many have different beliefs and seek like-minded individuals outside the tribe. Some lack opportunities to advance, and they tire of living on the scraps of those with more authority or higher social position.
_/{If~%Subrace%=Jungle?If monkeys were evil and could speak, theyd be a lot like jungle goblins.<br>[Tab]Jungle goblins are territorial, tree-dwelling savages with a sadistic streak a mile wide. Their skills at climbing and moving from tree to tree, combined with their cunning and vicious nature, cause even other goblinoids to respect them.<br>[Tab]Jungle goblins generally take up adventuring to gain personal power and serve their ambitions within their clans, or because they somehow lack the evil nature of the rest of their kind.
_}}}}

:ShowSubraceDescHalfling
1,{If~%Subrace%=Lightfoot?The standard halfling.
_/{If~%Subrace%=Aquatic?Aquatic halflings are much more settled than their surfacedwelling cousins. Their slight size means they are easily buffeted by currents that flow beneath the waves like the rivers of the surface world. Many predatory creatures think nothing of swooping down on such small prey. As a result, aquatic halflings often live among dwarves and humans, within the defenses those races provide.
_/{If~%Subrace%=Arctic?Arctic halflings are hunters and fishermen, stalking walrus and seal and putting to sea to fish, usually in the company of larger races such as humans. They are a peaceful, spiritual people whose rituals include preexpedition prayers for forgiveness from the animals they hope to kill.
_/{If~%Subrace%=Avenging?Unlike most halflings, members of this subtype actively look for trouble in their quest to avenge slights and wrongdoings. Whether resisting a local bully, monster, or troops of an oppressive ruler, halfling warriors of this secret subculture don masks and strike back on behalf of their community. They train extensively in the art of attacking larger creatures, training hard to effectively fight bigger opponents. They are also experts at the use of the sling.
_/{If~%Subrace%=Deep?These halflings are shorter and stockier than the more common lightfeet. They take great pleasure in gems and fine masonry, often working as jewelers or stonecutters. They rarely mix with humans and elves but enjoy the company of dwarves and speak Dwarven fluently.
_/{If~%Subrace%=Desert?Like gnomes, halflings are most likely to be active during the day. Most other races regard them somewhat like cats, in that they appear whether invited or not, work at what they want when they want, and disappear without prior notice. A desert gnome proverb observes that Halflings in your town are a source of trouble, but at least they dont tolerate competition.
_/{If~%Subrace%=Jungle?Jungle halflings live a much more settled life than their normal counterparts do. They build villages along rivers and burn clearings in the jungle to plant their crops. In addition, they gather the most abundant food source in their environment, fish, and hunt with poison-tipped weapons.
_/{If~%Subrace%=Nomadic?These halflings were born on the road and most follow it until the end of their days. They travel fast and light and never miss a chance for either profit or adventure. They are quicker than their kin but less cautious. Because they spend a lot of time traveling, they developed a talent for learning new languages and they love travel and maps.
_/{If~%Subrace%=Slave Born?hese halflings come from lineages that have spent countless generations as property. Though usually free themselves, the weight of slavery still bears down on their souls, making them eager to please and prone to sudden fits of fear. While most halflings are fearless, these are skittish, making them particularly alert. They often survive at the whims of larger, more aggressive races. Because of this, they go out of their way to make themselves more useful, or at least entertaining, to larger folk.
_/{If~%Subrace%=Tallfellow?They are somewhat rare among halfling folk. Tallfellows are 4 feet tall or more and weigh between 30 and 35 pounds. They generally speak Elven in addition to Common and Halfling, and they greatly enjoy the company of elves.
_}}}}}}}}}}

:ShowSubraceDescHalf Elf
1,{If~%Subrace%=Aquatic?Aquatic elves sometimes wed aquatic humans, just as land-based elves sometimes marry surface-dwelling humans. The aquatic results are aquatic half-elf children. They often serve as the diplomats and negotiators for either their human or elf communities, depending on where they live.
_/{If~%Subrace%=Arctic?Arctic elves wed humans as often as basic elves do, producing arctic half-elf children. These half-breeds tend to have great wanderlust, and are uncomfortable staying in one place for very long. They often carry messages and rumors with them as they travel between communities.
_/{If~%Subrace%=Desert?Desert elves often wed humans, just as their more common cousins do, producing desert half-elf children. These offspring often serve as diplomats and negotiators for either their human or elf communities, depending on where they live.
_/{If~%Subrace%=Drow-Descended?These half-elves clearly bear the features of their dark elf parents, branding them immediately as a potential threat in the eyes of others no matter what their intent or character. They exhibit more drow traits than othersparticularly many of the physical features of the drow. Their drow ancestry exhibit the innate magic of that race.
_/{If~%Subrace%=Elf-Raised?These half-elves represent those embraced by their elven relatives, and raised with all of the traditional cultural training and education typical of most full-blooded elves. They receive training in an unusual weapon and they seeked tutoring to help them master the magic in their blood.
_/{If~%Subrace%=Human-Raised?These half-elves were born and raised into accepting human communities, often raised by generations of a single family, or through the charity of churches and temples. They are skilled in the art of ingratiating themselves into a community as if they were natives. They also spent their long lives moving from place to place, often driven out by the hostility of others. Such experiences have made them wary of others motivations.
_/{If~%Subrace%=Jungle?Some elf communities believe that introducing human blood into their families is a way to invigorate their race once again. Others prefer a mixed-race emissary to deal with outsiders, rather than a pure-blood elf. Either way, jungle half-elves are the result.
_}}}}}}}

:ShowSubraceDescHalf Orc
1,{If~%Subrace%=Aquatic?In their remote and wild tribal homes, aquatic orcs occasionally coexist with barbarian tribes of aquatic humans. Sometimes the two groups intermarry, producing aquatic half-orcs.
_/{If~%Subrace%=Arctic?The arctic is a harsh place, a frozen testing ground for the chosen people of Gruumsh. Many tribes of arctic orcs eke out a living on the warm slopes of volcanic mountains, herding elk and caribou. Often their mutual dependence on sources of fresh water and meat brings them into contact with arctic-dwelling human barbarians. The resulting offspring are sometimes welcome in places where full orcs are not, valued for their tenacity, courage, and combat prowess.
_/{If~%Subrace%=Arena-Bred?Many half-orcs are born and raised to fight in the arena, and in many cases have two half-orc parents or even a half-orc and a human parent. These arena-bred half-orcs lose the brutal physical appearance of their orc ancestors and look more human. They know little of their orc ancestry and were raised among humans and other half-orcs in a large city. As second- and third-generation, they favor their human heritage more than their orc heritage.
_/{If~%Subrace%=Deep Kin?Some half-orcs are descended from clans that remained in the eternal darkness below the surface. Half-orcs from these clans tend to be smaller and more at home underground than those descended from surface-dwelling orcs. They have exceptionally sharp darkvision caused by living far below the surface, seeking freedom in winding cave complexes.
_/{If~%Subrace%=Desert?The deserts of the world are harsh places, and ideal testing grounds for Gruumshs chosen people. Many tribes of orcs live in isolated desert canyons or the ruins of ancient cities, now abandoned to the sands. Often their mutual dependence on sources of fresh water brings them into contact with desert-dwelling human barbarians. The resulting offspring, valued for their tenacity, courage, and combat prowess, are often welcome in places where full-blooded orcs are not.
_/{If~%Subrace%=Feral?Half-orc children who are abandoned as infants or small children rarely survive in the wild, but a few manage to scrape out a meager existence as wild children, tough enough to live but completely uncivilized. They are more at home in the forests and jungles of the world, these half-orcs are well adapted to their surroundings. Their tusks are large and sharp, granting a bite attack.
_/{If~%Subrace%=Jungle?The jungle is a wonderful home for orcs. It provides them with places to hide, plenty of food, and as much or as little contact with other races as they wantwhich is always more than the other races want. On occasion, such contact with humans produces half-orcs.
_/{If~%Subrace%=Mountain Clan?Half-orcs from the more mountainous regions tend to be more agile and alert to the echoing sounds of their homeland. Their orc blood manifests in the form of particularly prominent orc features, exacerbating their bestial appearances but improving their already keen senses. They are excellent climbers, and sometimes ambush prey by leaping down from above.
_/{If~%Subrace%=Mystic?Orc shamans are brutal teachers who sometimes kill or maim their most promising students in order to eliminate what could be a potential rival. Half-orcs who survive years of abuse by an orc shaman master are deeply scarred and altered by the experience. Shaman trainees learn early that cunning and luck are often the only things that offer a chance of survival. Only the most stalwart survive the years of harsh treatment that an apprenticeship to an orc shaman entails. They decorate themselves with tattoos, piercings, and ritual scarification, which they consider sacred markings. 
_}}}}}}}}}

:ShowSubraceDescHuman
1,{If~%Subrace%=Aquatic?Aquatic humans have a place beneath the surface of the sea, perhaps as descendants of forgotten civilizations whose island cities sank beneath the surface. They may replace merfolk in such campaigns, or exist along with them.
_/{If~%Subrace%=Cosmopolitain?Adept as city living, these humans can navigate crowds and fulfill the need for skilled labor in such settlements. All humans are skillful, but cosmopolitains, rather than being generalists, tend to specialize in a handful of skills.
_/{If~%Subrace%=Country Folk?These humans are suited to life in the countryside and they are used to hard labor. All humans are skillful, but country folks, rather than being generalists, tend to specialize in a handful of skills.
_/{If~%Subrace%=Gutter Rat?Often second-class citizens living in sprawling ghettos and slums, these humans work hard to eke out an existence in a city. They must be quick and clever.
_/{If~%Subrace%=Imperious?Hailing from either an empire, an emerging nation, or a controlling city-state, these humans are arrogant expansionists, absorbing others to their causes and culture. They are often adept at subtle manipulation and putting even sworn foes at ease. They have great intuition for hidden potential.
_/{If~%Subrace%=Trailblazer?Adaptive and inventive, these humans must have quick wits and a dose of heroic luck to survive in the lands they settle.
_}}}}}}

:ShowSubraceDescKobold
1,{If~%Subrace%=Aquatic?Aquatic kobolds are seldom seen outside their mines, much like their surface-dwelling cousinsdespite the fact that their broad tails make them exceptional swimmers. They dig constantly, always expanding their subterranean territory, and as a result frequently come into conflict with aquatic dwarves. Aquatic kobolds often hire mercenaries to fight for them, hiding behind their carefully constructed traps and other defenses and paying their defenders with the mineral wealth they uncover while expanding their warrens. The life of an aquatic kobold is one of constant toil and fear. Some few kobolds seek peace of mind through personal power and boon companions. These rare individuals become adventurers.
_/{If~%Subrace%=Arctic?Arctic kobolds are seldom seen outside their mines. They dig constantly, always expanding their subterranean territory (which is often carefully constructed to tap into geothermal vents for heat), and as a result are in constant conflict with arctic dwarves. Arctic kobolds often hire mercenaries to fight for them, hiding behind their carefully constructed traps and other defenses and paying their defenders with the mineral wealth they uncover while expanding their warrens.
_/{If~%Subrace%=Desert?Desert kobolds live like scaly, intelligent rats, hiding in forgotten corners of settlements, living just over the dunes from trading posts, and always reappearing right after the residents think theyve finally been killed off.<br>[Tab]Desert kobolds claim they were among the first to settle the deserts, and that gnomes threw them out into the wilderness. Though their survival relies on goods available at oasis settlements and trading posts, desert kobolds hate the gnomes who often build and run such settlements.<br>[Tab]The life of a desert kobold is one of constant fear, which motivates them to build traps and fortifications and to ambush intruders. Some few kobolds, however, seek peace of mind through personal power and boon companions. These rare individuals become adventurers.
_/{If~%Subrace%=Ebore's Clan?Ebores is the most numerous of the clans, comprising 50[Percent] of the kobold population. It is also the most traditional. Their settlements tend to be large, elaborately maintained fortifications with extensive magical and religious areas. Culturally the Eborites rely extensively on magic to solve their problems.
_/{If~%Subrace%=Jungle?Clouded mountain peaks, many of which have religious or ceremonial importance to those who live below, tower over jungle canopies. Few know of the ancient ruined cities near the rocky summits, concealed amid the clouds. Dwelling in such ancient ruins are the jungle kobolds.<br>[Tab]Those few explorers who have reached the cities report that their jungle kobold residents claim to have built them, pointing to reptilian and draconic images on the walls and in the architecture as evidence. The explorers report, however, that the cities were obviously built by and for people larger than the little reptilian humanoids.<br>[Tab]Jungle kobolds lack the cowardice common to other kobolds, thanks to the isolation of their mountain peak homes. By all reports they show a calmer, more generous side than other kobolds do.
_/{If~%Subrace%=Matthias' Clan?First they must train and study hard to gain the abilities they would have had in their pure state, despite the corruption of the material world. Second they must submit themselves to uncomplaining service to the true descendants of the dragon gods, the chromatic dragons. This clans settlements can be found in service to elder dragons deep within the mountains. In addition to his physical and martial techniques, Matthias advocated a wide array of mechanical tools that allowed the user to experience the sensation of dragonkind.
_/{If~%Subrace%=Sigrun's Clan?Sigruns clan comprises perhaps 15[Percent] of the current kobold population. They keep to themselves unless they need blood for their magical evolution. Their settlements contain hundreds of kobolds, each one walking an individual path to perfection. All Sigrun settlements hold constant contests and tournaments at which practitioners can demonstrate their superiority.
_/{If~%Subrace%=Uwe's Clan?Uwes clan accounts for perhaps 5[Percent] of the current kobold population. These feisty kobolds build beautiful, architecturally complex strongholds near trade crossroads. There they work with a wide variety of other races to expand their knowledge. They try to get along with the other clans, but their rejection of the so called dragon myth means they have little in common with their kinsmen.
_/{If~%Subrace%=Exiled?There are communities composed entirely of kobolds raised outside of the clan. These settlements come from kobolds banished from the main body of kobold society for crimes against their people. There are communities composed entirely of kobolds raised outside of the clan. These settlements come from kobolds banished from the main body of kobold society for crimes against their people.
_}}}}}}}}}

:ShowSubraceDescOrc
1,{If~%Subrace%=Aquatic?Aquatic orcs survive on the slopes of cliff sides or undersea drops, far from the warmth of volcanic vents and the nurturing light of the sun. As such, they control access to the secrets of the deep ocean trenchesbut are menaced by fell creatures that rise up out of the trenches in search of fresh prey. Aquatic orcs stand ever vigilant against attackers and thieves when theyre not making preemptive strikes against those foolish enough to settle near their territory. Occasionally an individual orc questions the need for constant battle, or seeks strategies other than brute force. Such iconoclasts often leave their tribesat least temporarilyto become adventurers.
_/{If~%Subrace%=Arctic?Arctic orcs are primitive herders, eking out a living on the slopes of volcanic mountains and building their crude huts near hot springs or steam vents. They herd woolly cattle, caribou, and elk. As a result, they control large sources of meat, water, and heatall things coveted by others living in or traveling through the arctic. What they dont have, they take by force. Arctic orcs stand ever vigilant against attackers and thieves when theyre not making preemptive strikes against those foolish enough to settle near their territory. Occasionally an individual orc questions the need for constant battle, or seeks strategies other than brute force. Such iconoclasts often leave their tribesat least temporarilyto become adventurers.
_/{If~%Subrace%=Desert?Desert orcs are martial creatures who live for battle. Prowess in battle is their only measure of social standing, and they dont particularly care if weaker races get hurt when orcs test their skills. In fact, the chief difference between desert orcs and desert goblinoids is that the former never accept defeatwhen desert orcs attack, they conquer or die trying.<br>[Tab]Desert orcs live in a perpetual state of war, participating in eternal night sorties from their isolated desert canyons and ancient ruined cities to attack settlements and expand their territory. Only the burning sun, and their weakness when in it, keeps them from ruling the desert with Gruumshs iron fist.<br>[Tab]Occasionally an individual orc questions the need for constant battle, or seeks strategies other than brute force. Such iconoclasts often leave their tribesat least temporarilyto become adventurers.
_/{If~%Subrace%=Jungle?If gorillas were evil and could speak, theyd be a lot like jungle orcs. Jungle orcs live a simple existence, moving through the jungle hunting and gathering food in clan groups (equivalent in size to the squads given in the orc Monster Manual entry, plus 150[Percent] noncombatants). Although combat is common within the clans, its relatively bloodless and hardly ever lethal. Only when jungle orcs encounter other clans or other races do they show the true extent of their violent, evil nature.<br>[Tab]Conquest is a baffling concept to jungle orcs. They attack, take whatever strikes their fancy, and move on. They lack the discipline required to maintain the things they steal, so they always seek weakly defended settlements and caravans to replace those things that break or wear out in the humidity of the jungle.<br>[Tab]Occasionally an individual jungle orc questions the need for constant battle, or seeks strategies other than brute force. These are often the more intelligent members of their clans. Such iconoclasts often leave the jungleat least temporarilyto become adventurers.
_}}}}

:ShowSubraceDescXXX
1,{If~%Subrace%=?
_/{If~%Subrace%=?
_/{If~%Subrace%=?
_/{If~%Subrace%=?
_/{If~%Subrace%=?
_}}}}}

### NEW CLASS ###
# Spellcaster 5; Part casters 10; No magic 20
# NPC Classes +5
;ClassDistribution
80,{If~{Or~%ClassType%=1,%ClassType%=2}=1?[ClassDistributionPC]/[ClassDistributionNPC]}
20,{If~{Or~%ClassType%=1,%ClassType%=3}=1?[ClassDistributionNPC]/[ClassDistributionPC]}

### NEW CLASS ### PC
;ClassDistributionPC
# Fighter
20,|Class=1|
# Barbarian
20,{If~%GroupFlag%=2?|Class=2|/[VerifyBbn]}
# Bard
10,|Class=3|
# Cleric
5,|Class=4|
# Druid
5,{If~%GroupFlag%=2?|Class=5|/[VerifyDrd]}
# Monk
10,{If~%GroupFlag%=2?|Class=6|/[VerifyMnk]}
# Paladin (NOT found in groups because they cannot be allied with everyone)
10,{If~{And~%ALGroupEvil%!=Evil,{Find~1,E,%RacialAL%}=0}=1?
_{If~%CohortGen%=No?{If~%GroupFlag%=2?|Class=7|/{If~{Or~%ALGroup%=0,{Find~1,LG,%ALGroup%}!=0}=1?|Class=7|/<hr>[ClassDistribution]}}
#_{If~%CohortGen%=No?{If~%GroupFlag%=2?|Class=7|/[ClassDistribution]}
# With a cohort, the "Master's" alignement has to be LG.
_/{If~%ALMaster%=LG?|Class=7|/[ClassDistribution]}}
_/[ClassDistribution]}
# Ranger
10,{If~%GroupFlag%=2?|Class=8|/[VerifyRng]}
# Rogue
20,|Class=9|
# Sorcerer
5,|Class=10|
# Wizard
5,|Class=11|

### GOD: NEW CLASS with required ALIGNMENT or "Nature" with spells (Druid + Ranger) ###
:VerifyBbn
1,{If~%GodName%=0?|Class=2|
_/{If~%GodGenGroup%=2?|Class=2|
_/{If~{Find~1,Any,%GodWAL%}!=0?|Class=2|
_/{If~{Find~1,CG,%GodWAL%}!=0?|Class=2|
_/{If~{Find~1,CN,%GodWAL%}!=0?|Class=2|
_/{If~{Find~1,CE,%GodWAL%}!=0?|Class=2|
_/{If~{Find~1,NN,%GodWAL%}!=0?|Class=2|
_/{If~{Find~1,NG,%GodWAL%}!=0?|Class=2|
_/{If~{Find~1,NE,%GodWAL%}!=0?|Class=2|
_/[ClassDistribution]
_}}}}}}}}}

:VerifyDrd
1,{If~%GodName%=0?|Class=5|
_/{If~%GodGenGroup%=2?|Class=5|
_/{If~{Find~1,Druid,%GodPriAL%}!=0?|Class=5|
_/[ClassDistribution]
_}}}

:VerifyRng
1,{If~%GodName%=0?|Class=8|
_/{If~%GodGenGroup%=2?|Class=8|
_/{If~{Find~1,Druid,%GodPriAL%}!=0?|Class=8|
_/[ClassDistribution]
_}}}

:VerifyMnk
1,{If~%GodName%=0?|Class=6|
_/{If~%GodGenGroup%=2?|Class=6|
_/{If~{Find~1,Any,%GodWAL%}!=0?|Class=6|
_/{If~{Find~1,LG,%GodWAL%}!=0?|Class=6|
_/{If~{Find~1,LN,%GodWAL%}!=0?|Class=6|
_/{If~{Find~1,LE,%GodWAL%}!=0?|Class=6|
_/[ClassDistribution]
_}}}}}}

### NEW CLASS ### NPC
;ClassDistributionNPC
# Adept
5,|Class=12|
# Aristocrat
5,|Class=13|
# Commoner
5,|Class=14|
# Expert
5,|Class=15|
# Warrior
5,|Class=16|

### NEW CLASS ### ALL the classes.
:Class
1,fighter
2,barbarian
3,bard
4,cleric
5,druid
6,monk
7,paladin
8,ranger
9,rogue
10,sorcerer
11,wizard
12,adept
13,aristocrat
14,commoner
15,expert
16,warrior
17,{Stop~ERROR in class assignation}

### NEW CLASS ### ALL classes.
:ShortClass
1,Ftr
2,Bbn
3,Brd
4,Clr
5,Drd
6,Mnk
7,Pal
8,Rgr
9,Rog
10,Sor
11,Wiz
12,Adp
13,Ari
14,Com
15,Exp
16,War
17,{Stop~ERROR in shortclass}

### For Leadership feat to determine followers ###
### NEW CLASS ### PC classes.
;ShortClassPC
20,Ftr
20,Bbn
10,Brd
5,Clr
5,Drd
10,Mnk
10,{If~{Find~1,E,%ALMaster%}=0?Pal/[ShortClassPC]}
10,Rgr
20,Rog
5,Sor
5,Wiz

### NEW CLASS ### ALL Classes. Is it a NPC: Yes or No.
:NPCClass
1-3,|NPCClass=No||Divine=No|
4-5,|NPCClass=No||Divine=Yes|
6,|NPCClass=No||Divine=No|
7-8,|NPCClass=No||Divine=Yes|
9-11,|NPCClass=No||Divine=No|
12,|NPCClass=Yes||Divine=Yes|
13-16,|NPCClass=Yes||Divine=No|

:PrintClass
1,{Cap~{If~%NA%>1?{Plural~[Class=%Class%]}/[Class=%Class%]}}[PrintClassExtra]

:PrintClassExtra
1,{If~{Param~Class,%Class%}=Wizard? ({Cap~%WIZSchool%})
_/{If~{And~{Param~Class,%Class%}=Adept,%AdeptTypeChosen%!=Adept}=1? ({Cap~%AdeptTypeChosen%})
_/{If~{And~{Param~Class,%Class%}=Expert,%ExpertTypeChosen%!=Standard}=1? ({Color~DarkCyan,{Cap~%ExpertTypeChosen%}})
_/{If~{And~{Param~Class,%Class%}=Commoner,%CommonerTypeChosen%!=Standard}=1? ({Cap~%CommonerTypeChosen%})
#_/{If~{And~{Param~Class,%Class%}=Warrior,%WarriorTypeChosen%!=Standard}=1? ({Cap~%WarriorTypeChosen%})
_}}}}
#_}

# ---------------------------------------------------------------------------
:InitialCharacterSetup
1,|PrintGroupGod=No|
_{If~%NPCLevel%=0?[CalculateLevelRange2]|CharacterLevel<20||NPCLevel=%CharacterLevel%|/{If~%NPCLevel%>=100?|NPCLevel=1|}|NPCLevel<20||CharacterLevel=%NPCLevel%|}
### NEW RACE ### Race=RANDOM value
_{If~%CohortGen%=Yes?|Race=20|}
_{If~{Param~Race,%Race%}=Random?[RaceDistribution]}
_[SubraceDistribution]
_{If~{And~%TestLog%=1,%CohortGen%=Yes}=1?{Log~E:\log.txt,+++++ Cohort +++++ Race={Param~Race,%Race%}}}
_[SetRacialAL=%Race%]
_{If~%CohortGen%=No?|RaceMaster=%Race%||SubraceMaster=%Subrace%|}
_{If~%Gender%=3?|Gender={Dice~1d2}|}
_|PC_Gender=%Gender%|
_{If~%VillainFlag%=3?|VillainFlag={Dice~1d2}|}
_|NPCClass=No|{If~{Param~Class,%Class%}=Random?[ClassDistribution]}
_{If~{And~%TestLog%=1,%CohortGen%=Yes}=1?{Log~E:\log.txt,+++++ Cohort +++++ Race={Param~Class,%Class%}}}
_[NPCClass=%Class%]
#
# 1=Heroic  2=Basic
# 75% to have a Heroic character.
# Human (Trailblazer) are always Heroic.
_{If~%NPCClass%=No?{If~%Heroic%=3?{If~{Dice~1d4}=1?{If~{And~{Param~Race,%Race%}=Human,%Subrace%=Trailblazer}=1?|Heroic=1|/|Heroic=2|}/|Heroic=1|}}
# For a NPC Class 95% to be Basic.
_/{If~%Heroic%=3?{If~{Dice~1d100}<=95?{If~{And~{Param~Race,%Race%}=Human,%Subrace%=Trailblazer}=1?|Heroic=1|/|Heroic=2|}/|Heroic=1|}
_}}
#
_{If~{Param~Class,%Class%}=Wizard?[WizardDetermineSchool]
_/{If~{Param~Class,%Class%}=Adept?[AdeptTypeDetermination]
_/{If~{Param~Class,%Class%}=Expert?[ExpertTypeDetermination]
_/{If~{Param~Class,%Class%}=Commoner?[CommonerTypeDetermination]
_/{If~{Param~Class,%Class%}=Warrior?[WarriorTypeDetermination]
_}}}}}
#
_[CalculateLevelRange]
_|InitialCharacterLevel=%CharacterLevel%|
#_{If~%NPCClass%=Yes?|CharacterLevel+1||CharacterLevel<20|}
_{If~%SuggestedMotivation%=3?|SuggestedMotivation={Dice~1d2}|}{If~%SuggestedMotivation%=1?[SuggestedMotivation]}
_|Description=
_{If~%GroupFlag%=1?{If~%Subrace%!=None?{Cap~%Subrace%} }{Cap~[Race=%Race%]} [PrintClass]; [ShortClass=%Class%]%CharacterLevel% (x%NA%):{If~%GroupNames%=1?[PrintGroupNames]}
_/[~NamesBranch], {Cap~{If~%CohortGen%=No?[Gender=%Gender%]/[Gender=%GenderCohort%]}} {If~%Subrace%!=None?{Cap~%Subrace%} }{Cap~[Race=%Race%]} {Cap~[ShortClass=%Class%]}[PrintClassExtra] %CharacterLevel%: 
_}
_|
_[FinishStatBlock]
_|CharacterLevel=%InitialCharacterLevel%|

# ---------------------------------------------------------------------------
:FinishStatBlock
1,|WtTotalCarried=0||ClassFeats=||SR=0||Fortification=0||SA=||SQ=||UncannyDodge=0||FamiliarGen=No||FamiliarID=0||FamiliarImpID=0||BondedObject=No|
_[SetWealth]
_[SetAttributes]
_{If~%CohortGen%=No?[GenAlignment]{If~{And~%GroupFlag%=1,%ALGroup%=0}=1?[SetALGroup]}/[GenAlignmentCohort]}
_[SetGod]
_{If~%PrintGroupGod%=Yes?[PrintGroupInfo]}
_{If~{And~%PrintGroupGod%=Yes,{And~%GroupFlag%=1,%GodGenGroup%=1}=1}=1?{Bold~God Worshipped by the Group:} |GodShort=No||GodComplete=No|[PrintGod]}
_|PrintGroupGod=No|
_{If~%GroupFlag%=2?{Bold~%Description%}/%Description%}
_|FavClassHP=0||FavClassSP=0|[FavClassBonus=%FavClassBonus%]
# XXX SetVar
_|Rule=0||BSk=0||CasterMinStat=0||CasterMinStatSet=No||LCohLvl=0||Fly=0||FlyMan=0||DisarmMod=0||MonkFlurryMelee=No||MonkFlurryRange=No||DodgeRacial=0|
_|WpnSpBrace=0||WpnSpCharge=0||WpnSpDisarm=0||WpnSpDouble=0||WpnSpMonk=0||WpnSpNonlethal=0||WpnSpReach=0||WpnSpTrip=0||WpnSpThreeNoSTR=0||WpnSpShow=0||FTRWTUnarmed=No||UnarmedType=No|
_|AllSaveBonus=0||AlterSelf=0||BeastShape=0||ElementalBody=0||FormOfTheDragon=0||GiantForm=0||PlantShape=0||ArmorGauntlet=No||SpeedM=0||SpeedR=0||GhostShroud=No|
_|SlowSteady=No||DefensiveTraining=No||Greed=No||Hardy=No||HatredGobRep=0||HatredOrcGob=0||GnomeAcademican=0||GnomeIllusion=No||GnomeObsessive=0||Profession=0|
_|FTR_ACP=0||FTR_ArmorMastery=No||FTR_WT1=0||FTR_WT2=0||FTR_WT3=0||FTR_WT4=0||FTR_WT_M_Bonus=0||FTR_WT_R_Bonus=0||FTR_Bravery=0|
_|BbnRPClearMind=No||BbnDR=0||BbnFastMV=0||BbnFearlessRage=No||BbnGuardedStance=0||BbnIncreaseDR=0||BbnInternalFortitude=No||BbnRagePower=||BbnRagePowerLight=||BbnRageRounds=0||BbnRagingClimber=0||BbnRagingLeaper=0||BbnRagingSwimmer=0||BbnWillRage=0||BbnIndomitableWill=No||BbnRollingDodge=0||BbnSuperstition=0||BbnSwiftFoot=0||BbnTrapSense=0|
_|BrdBardicKnowledge=0||BrdWellVersed=No||DRUWildArmor=0||LanceSearch=No||ElvenImmunities=No||ElvenMagic=No||ExtraRacialSpells=0|
_|AnimalCompanion=0||TimelessBody=No||Evasion=No||SpellPenetration=0||SpellResistance=0||SpellResistanceRacial=0||FavoredEnemies=0||FavoredTerrains=0|
_|HeartWilderness=0||HumanHeartStreet=0|
_|MonkManeuverTraining=0||MonkFastMV=0||MonkStillMind=No||MonkHighJump=0||MonkPurity=No||MonkDiamondBody=No||MonkPerfectSelf=No||MonkKiPoolDR=ERROR||NaturalArmorRacial=0|
_|PALAnimalCompanion=0||PALAuraCourage=No||PALAuraFaith=No||PALAuraResolve=No||PALAuraRight=No||PALDivineHealth=No||PALHolyChampion=No||PALSaveBonus=0||PALWpnBonus=0||PALWpnPowers=0|
_|RNGFavEnem1=0||RNGFavEnem2=0||RNGFavEnem3=0||RNGFavEnem4=0||RNGFavEnem5=0||RNGFavEnemB1=0||RNGFavEnemB2=0||RNGFavEnemB3=0||RNGFavEnemB4=0||RNGFavEnemB5=0|
_|RNGAnimalCompanion=0||RNGFavTer1=0||RNGFavTer2=0||RNGFavTer3=0||RNGFavTer4=0||RNGFavTer5=0||RNGFavTerB1=0||RNGFavTerB2=0||RNGFavTerB3=0||RNGFavTerB4=0||RNGFavTerB5=0|
_|RNGTrack=0||Sneak=0||Stonecunning=No|
_|ROGCrawl=No||ROGDefensiveRoll=No||ROGFastStealth=No||ROGLedgeWalker=No||ROGMasterStrike=No||ROGQuickDisable=No||ROGResiliency=No||ROGSlippery=No||ROGStandUP=No||ROGTrap=0||ROGTrapSense=0|
_|SORCelestialAsc=No||SORCelestialResist=0||SORDestinedBA=No||SORDestinedFated=0||SORDestinedTouch=0||SorDestinedWR=No||SORDraconicResist=0||SORUnusualAnatomy=No||SORDemResist=0||SORElementalResist=0||SORElementalBody=No||SORFeySoul=No||SORInfernalResist=0||SORStrAbyss=0||SORUndeadResist=0||SORUndeadOneOfUs=No|
_|Swim=0||Climb=0|
_|DraconicEnergy=0||Draconic=0||DraconicBreath=0||Elemental=0||ElementalEnergy=0||ElementalMV=0||ElementalBaseMV=0||ElementalNewMV=No|
_|WizardOpposed=99|
_|WIZAbjResist=0||WIZAbjAbsorption=0||WIZDivInit=0||WIZEncSmile=0||WIZEvoIntense=0||WIZNecPower=0||WIZNecPowerFeat=0|
_|WIZTraPE=0||WIZTraPESTR=No||WIZTraPEDEX=No||WIZTraPECON=No||WIZUniHand=No|
_{Reset~Opposed2}{Reset~Opposed3}{Reset~Opposed4}{Reset~Opposed5}{Reset~Opposed6}{Reset~Opposed7}{Reset~Opposed8}{Reset~Opposed9}
_|RaceTraits=[SetRacialTraits=%Race%]|
_{If~%TestLog%=1?
_{If~%CohortGen%=No?{Log~E:\log.txt,------------------------------------------------------------------------------------------------}/{Log~E:\log.txt,++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++}}
_{Log~E:\log.txt,-----1----- {If~%Subrace%!=None?{Cap~%Subrace%} }{Param~Race,%Race%} {Param~Class,%Class%}{If~%ExpertTypeCode%>1? ({Param~ExpertType,%ExpertTypeCode%})}}
_{Log~E:\log.txt,-----2----- Race= %Race% Subrace= %Subrace%  Class= %Class% CL= %CharacterLevel% FamID= %FamiliarID%, S=%STR% D=%DEX% C=%CON% I=%INT% W=%WIS% C=%CHA%, Sz=%Size%, ChooseRanks=%ChooseRanks%}
_}
_[SetSpecialAbilities]
_[SetSpecialQualities]
_{If~%SORStrAbyss%>0?|STR+%SORStrAbyss%|}
#
_[FeatOptionTemp=%FeatOption%]
_[ActionPointsChoice=%ActionPoints%]
_ {Bold~({If~{Param~Heroic,%Heroic%}=Heroic?{If~{Or~%FeatOptionTemp%=2,%FeatOptionTemp%=4}=1?{Color~Orange,Hero}{If~%ActionPointsChoice%=2?|ActionPointsChoice=1|}/Heroic{If~%ActionPointsChoice%=2?|ActionPointsChoice=0|}}/Basic{If~%ActionPoints%!=1?|ActionPointsChoice=0|}})}
#
# Write Description
_ {Cap~[Miscellaneous.Size=%Size%]} {If~%MonkPerfectSelf%=Yes?{Color~DarkCyan,Outsider} ({Cap~%RaceType%}[PrintSubtype])/{Cap~%RaceType%}[PrintSubtype]} 
_(
_[DetermineHeight=%Race%][FinishHeight][DetermineWeight=%Race%], [FinishWeight]{If~{And~%GroupFlag%=2,%WeightFlag%!=1}=1?; [WeightBranch=%WeightFlag%]}
_; [DetermineAge=%Race%]
_{If~%Age%>%AgeMax%?|Age<%AgeMax%||Age-{Dice~1d3}|}
_[DetermineAgeMod]
#
_{If~%CohortGen%=No?|AgeMaster=%Age%|}
#
_{If~%AgeFlag%=1?[DetermineAttributesAgeMod=%AgeModAttributes%]}
_[CasterMinStatChoice=%CasterMinStatChoice%]
_[DetermineAttributeBonuses]
_[DetermineCarryingCapacity]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After CarryingCapacity}}
#
# GenerateFeats: generates special class feats as well as other class informations, like Sorcerer Bloodlines (which give feats)
_[GenerateFeats]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After GenerateFeats : %FeatsAll%}}
_{If~%FamiliarGen%=Yes?[FamiliarGen]}
_{IIf~{Find~1,Wisdom of Ages,%FeatsAll%}!=0?|Age>200|}
#
# XXX To TEST skill feats
#_|Temp1=Self-Sufficient||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#
# Skills are generated after Feats and Armors/Shields to take the abilities found there into account.
# TEST _-------------- Familiar ID: %FamiliarID% --------------- 
_[GenerateSkills]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After GenerateSkills}}
_{If~%ModWealth%=1?
_{If~%Valminder%=2?[ModifyWealthBasedOnFeats]/[ModifyWealthBasedOnFeatsValminder]}
_}
_|WealthTOTInitial=%WealthTOT%||WealthWPNInitial=%WealthWPN%||WealthPROTInitial=%WealthPROT%||WealthMAGInitial=%WealthMAG%||WealthLIMInitial=%WealthLIM%||WealthGEARInitial=%WealthGEAR%|
_|WealthTOTGroup+%WealthTOT%|
_[PrintAge]
_);
### NEW FEATS ###
### Test Feats XXX
#_|Temp1=Two-Weapon Fighting, Improved Two-Weapon Fighting, Greater Two-Weapon Fighting||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Two-Weapon Fighting, Greater Weapon Specialization||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Two-Weapon Fighting||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Two-Weapon Defense||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Martial Weapon Proficiency||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Greater Shield Focus||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Greater Weapon Specialization||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Whirlwind Attack||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Extra Performance||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Arcane Armor Training||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Improved Shield Bash Shield Proficiency||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Tower Shield Proficiency||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Shield Proficiency||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Armor Proficiency (Light)||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Armor Proficiency (Medium)||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Arcane Armor Training||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Arcane Armor Mastery||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Master Craftsman Mounted Combat Dazzling Display||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Master Craftsman Master Trapmaker||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Weapon Finesse||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Weapon Finesse Exotic Weapon Proficiency||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=WPNFOCUS||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Exotic Weapon Proficiency||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Improved Critical||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Throw Anything  Quick Draw||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Stonelord||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Throw Anything||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_|Temp1=Catch Off-Guard||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|
#_{If~%LeadershipFeat%=1?|Temp1=Leadership||FeatsString& ==> %Temp1% <==||FeatsAll& %Temp1%|}
#
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> Before SetArmor}}
_[SetArmor]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After SetArmor}}
_[SetWeapons]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After SetWeapons}}
_[DetermineCarryingCapacityPenalties]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After CarryingCapacityPenalties}}
#
_{If~%ActionPointsChoice%=1?[PrintActionPoints]}
_ {Bold~HD:} [WriteHD]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After WriteHD}}
_ {Bold~Init:} [WriteINIT]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After WriteINIT}}
_ {Bold~Spd:} [WriteMOVE]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After WriteMOVE}}
_ {Bold~AC:} [WriteAC]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After WriteAC}}
_ {Bold~BAB:} [SetBAB][SizeMod=%Size%]+%BAB%;
_ {Bold~CMB:} {If~%CMB%>=0?+}
_{If~%MonkManeuverTraining%!=0?{Color~DarkCyan,%CMB%}
_/{If~{Find~1,Agile Maneuvers,%FeatsAll%}!=0?{Color~Green,%CMB%}
_/%CMB%
_}}
_{If~%Show%=1?[CMB_Special]};
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After CMB Special}}
_ {Bold~CMD:} {If~{Find~1,Defensive Combat Training,%FeatsAll%}=0?%CMD%/{Color~Green,%CMD%}}{If~%Show%=1?[CMD_Special]};
###TEST###_ACP=%ACP% ACPSh=%ACPSh% ASP=%ArmorShieldPenalty%<br>
_
# Set Fighter's Weapon Training bonuses
_{If~{And~{Param~Class,%Class%}=Fighter,%CharacterLevel%>=5}=1?[FighterWeaponTrainingReplace]}
_
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> Before PrintMelee}}
_ <b>Full Atk Melee:</b> [PrintMelee]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After PrintMelee}}
_[ShowUnarmed=%ShowUnarmed%]|UnarmedType=No|
# Range Weapon
_|WpnSpeAdd=%WpnSpeR%||WpnSpeAdd+%DmgModR%||WpnSpeAdd+%MagicPlussesRange%||WpnSpeAdd2+%MagicPlussesRange%|
_; <b>Full Atk Range:</b> [PrintRange];
### TEST below
_{If~{Or~%TestWealth%=1,%TestCostWeight%=1}=1?|TestTableNote=<br>WEALTH: (Heroic= {Param~Heroic,%Heroic%}) Total= [AddComma.Start(%WealthTOT%)]; Weapon: [AddComma.Start(%WealthWPN%)], Protection: [AddComma.Start(%WealthPROT%)], Magic: [AddComma.Start(%WealthMAG%)], Limited: [AddComma.Start(%WealthLIM%)], Gear: [AddComma.Start(%WealthGEAR%)]|[TestTable]}
####_ <b>AL</b> {If~%AL%=NN?N/%AL%};
_ <b>AL</b> 
_{If~%AL%=NN?{If~{Or~{Find~1,NN,%ALGroup%}!=0,%ALGroup%=0}=1?N/{Color~Red,N}}
_/{If~{Or~{Find~1,%AL%,%ALGroup%}!=0,%ALGroup%=0}=1?%AL%/{Color~Red,%AL%}
_}}
_{If~%RacialAL%!=0? (%RacialAL%)}
_;
_ <b>Space/Reach:</b> [SpaceReach=%Size%]
_<br><b>Attributes:
_ Str</b> {If~%WIZTraPESTR%=No?%STR%/{Color~DarkCyan,%STR%}} ({If~%STRBonus%>=0?+}%STRBonus%)
_, <b>Dex</b> {If~%WIZTraPEDEX%=No?%DEX%/{Color~DarkCyan,%DEX%}} ({If~%DEXBonus%>=0?+}%DEXBonus%)
_, <b>Con</b> {If~%WIZTraPECON%=No?%CON%/{Color~DarkCyan,%CON%}} ({If~%CONBonus%>=0?+}%CONBonus%)
_[FontB=1]
_{If~%Show%=1?
_   {If~{And~{Param~Race,%Race%}=Elf,%Subrace%=Arctic}=1? {Color~Peru,+Desert Runner}}
_   {If~{Find~1,Kobold Endurance,%FeatsAll%}!=0? {Color~Green,+Kobold Endurance}
_   /{If~{Find~1,Endurance,%FeatsAll%}!=0? {Color~Green,+Endurance}
_}}
_}
_[FontE]
_, <b>Int</b> %INT% ({If~%INTBonus%>=0?+}%INTBonus%)
_, <b>Wis</b> %WIS% ({If~%WISBonus%>=0?+}%WISBonus%)
_, <b>Cha</b> %CHA% ({If~%CHABonus%>=0?+}%CHABonus%).
#
# Shows attributes' racial modifications and bonus gained each level
_{Color~Grey,[FontB=2]<i>
_{If~{And~%Show%=1,%ShowStats%=1}=1?{If~%GroupFlag%=2?{If~{Or~%RacialMod%!=0,{Length~%LevelMod%}>0}=1? (
_{If~%RacialMod%!=0?Racial: %RacialMod%}
_{If~{Length~%LevelMod%}>0?{If~%RacialMod%!=0?; }Level: %LevelMod%}
_{If~{And~%AgeFlag%=1,%AgeModAttributes%>1}=1?{If~%RacialMod%!=0?; }Age: {If~%AgeModAttributes%=2?mid -1 Str-Dex-Con +2 Int-Wis-Ch/{If~%AgeModAttributes%=3?old -3 Str-Dex-Con +2 Int-Wis-Ch/venerable -6 Str-Dex-Con +3 Int-Wis-Ch}}}
_{If~{Or~%RacialMod%!=0,{Length~%LevelMod%}>0}=1?)}
_}}}
_</i>[FontE]}
#
_[DetermineBaseSaves=%Class%]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After DetermineBaseSaves}}
_|FortitudeSaveBase=%FortitudeSave%||ReflexSaveBase=%ReflexSave%||WillSaveBase=%WillSave%|
_<br><b>Saves:</b> [PrintSave]
#
#####_{If~%GroupFlag%=2?<br>} 
_<br>
_<b>Skills:</b></i> [PrintSkills]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After PrintSkills}}
#
# Set Weapon note for Exotic Weapon or Weapon Focus
_{If~{Find~1,WPNFOCUS,%FeatsString%}!=0?|FeatsString={Replace~WPNFOCUS,Weapon Focus ({If~%WeaponChoice%=Melee?{If~%WpnFocUnarmed%>0?unarmed/%Wpn%}/%WpnR%}),%FeatsString%}|}
_{If~{Find~1,Exotic Weapon Proficiency,%FeatsString%}!=0?|FeatsString={Replace~Exotic Weapon Proficiency (,Exotic Weapon Proficiency ({If~%WeaponChoice%=Melee?%ExoticWeaponM%/%ExoticWeaponR%} or ,%FeatsString%}|}
#
_{If~%GroupFlag%=2?<br>} <b>Feats:</b></i> [PrintFeats]
#
_[ReplaceInfo]
_{If~%GroupFlag%=2?<br>} <b>Special Abilities:</b> {If~{Length~%SA%}<2?none/%SA%}.
_{If~%GroupFlag%=2?<br>} <b>Special Qualities:</b> {If~{Length~%SQ%}<2?none/%SQ%}.
_{If~%GroupFlag%=2?<br>} <b>Racial Traits:</b> [PrintRacialTraits]
_{If~{Or~%GroupFlag%=2,{And~%GroupFlag%=1,{Or~%GodGenGroup%=2,%Divine%=Yes}=1}=1}=1?{If~{Or~%GroupFlag%=2,{And~%GroupFlag%=1,%Divine%=Yes}=1}=1?<br>} {Bold~God Worshipped:} |GodShort=No||GodComplete=No|{If~{And~%Divine%=No,%GroupFlag%=1}=1?|GodShort=Yes|/{If~%Divine%=Yes?|GodComplete=Yes|}}[PrintGod]}
#
# TO DO XXX Add EQ when $ is still left to spend.
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> Before PrintEQ}}
_[PrintEquipment]
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After PrintEQ}}
#
_[MagicUserClassIdentification=%Class%]
_|SpellString=0|{If~%MagicUserClass%>0?[PrintSpells]}
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After PrintSpells}}
_{If~%AlterSelf%>0?<br><br>{Bold~Alter Self:} [Pathfinder Spells.AlterSelf]}
_{If~%BeastShape%>0?<br><br>{Bold~Beast Shape %BeastShape%:} [Pathfinder Spells.BeastShape%BeastShape%]}
_{If~%ElementalBody%>0?<br><br>{Bold~Elemental Body %ElementalBody%:} [Pathfinder Spells.ElementalBody%ElementalBody%]}
_{If~%FormOfTheDragon%>0?<br><br>{Bold~Form of the Dragon %FormOfTheDragon%:} [Pathfinder Spells.FormOfTheDragon%FormOfTheDragon%]}
_{If~%GiantForm%>0?<br><br>{Bold~Giant Form %GiantForm%:} [Pathfinder Spells.GiantForm%GiantForm%]}
_{If~%PlantShape%>0?<br><br>{Bold~Plant Shape %PlantShape%:} [Pathfinder Spells.PlantShape%PlantShape%]}
##### Following this line, do not add anything related to the Character's STR, DEX, CON, INT, WIS, CHA.
_{If~{Or~%FamiliarID%!=0,%FamiliarImpID%!=0}=1?<br><br>[PrintFamiliar]}
_{If~%BondedObject%=Yes?<br><br>[BondedObject]}
_{If~{Param~Class,%Class%}=Druid?{If~%AnimalCompanion%=0?<br><br>[DruideNatureBondBranch=%DruidNatureBond%]}}
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> Before PrintAnimalCompanion}}
_{If~%AnimalCompanion%>0?[PrintAnimalCompanion]}
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After PrintAnimalCompanion}}
_{If~%PALAnimalCompanion%>0?[PrintPALMount]}
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> Before PrintRNGAnimalCompanion}}
_{If~%RNGAnimalCompanion%>0?[PrintRNGAnimalCompanion]}
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After PrintRNGAnimalCompanion}}
_{If~{And~%VillainFlag%=1,{Find~1,G,%AL%}=0}=1?{If~{Param~Heroic,%Heroic%}=Heroic?<br><br>[~GenerateVillainousMotivation]}}
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> Before CharacterDescriptionBranch}}
_{If~%GroupFlag%=2?<br>[CharacterDescriptionBranch][PersonalHistoryBranch]}
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After CharacterDescriptionBranch: GroupFlag=%GroupFlag%   LCohLvl=%LCohLvl%   GenCohort=%GenCohort%   GenFollowers=%GenFollowers%}}
_|CohortGen=No|{If~{And~%GroupFlag%=2,%LCohLvl%>0}=1?{If~{Or~%GenCohort%=1,%GenFollowers%!=3}=1?[GenerateCohortFollowers]}}
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After GenerateCohortFollowers}}
_<hr>
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> End of Generation}}

# ---------------------------------------------------------------------------
# Villainy Related

:GenerateVillainousMotivation
1,[Villainous Motivations.GenerateMotivation(%Gender%)]

:GroupVillainousMotivation
1,[Villainous Motivations.Alternate(%Gender%)]

# ---------------------------------------------------------------------------
### NEW RACE ###
### NEW CLASS ### For special names. Below, an Aristocrat has 75% to have a noble name.
:NamesBranch
1,{If~{And~{Param~Class,%Class%}=Aristocrat,{Dice~1d4}>1}=1?[NamesBranchAristocrat]
_/[NamesBranchRace=%Race%]
_}

:NamesBranchAristocrat
1,{If~%Gender%=1?[Noble Household Names.Male]/[Noble Household Names.Female]}

# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
:NamesBranchRace
1,{If~%Gender%=1?[Names Generator.NAME Human Male]/[Names Generator.NAME Human Female]}
2,{If~%Gender%=1?[Names Generator.NAME Dwarf Male]/[Names Generator.NAME Dwarf Female]}
3,[Names Generator.NAME Elf]
4,{If~%Gender%=1?{Cap~[Names Generator.NAME Gnome Male]}/[Names Generator.NAME Gnome Female]}
5,|TempNumber={Dice~1d100}|{If~%TempNumber%<75?{If~%Gender%=1?[Names Generator.NAME Human Male]/[Names Generator.NAME Human Female]}/
_[Names Generator.NAME Elf]}
6,|TempNumber={Dice~1d100}|{If~%TempNumber%>75?{If~%Gender%=1?[Names Generator.NAME Human Male]/[Names Generator.NAME Human Female]}/
_[Names Generator.NAME Orc]}
7,{If~%Gender%=1?[Names Generator.NAME Halfling Male]/[Names Generator.NAME Halfling Female]}
8,{If~%Gender%=1?[Names Generator.NAME Aasimar Male]/[Names Generator.NAME Aasimar Female]}
9-10,{If~%Gender%=1?[Names Generator.NAME Drow Male]/[Names Generator.NAME Drow Female]}
11,{If~%Gender%=1?[Underdark.DuergarMaleNoMeaning]/[Underdark.DuergarFemaleNoMeaning]}
12,{If~%Gender%=1?[Goblin Names.Male]/[Goblin Names.Female]}
13,{If~%Gender%=1?[Hobgoblin Names.Male]/[Hobgoblin Names.Female]}
14,{If~%Gender%=1?[Kobold Names.Male]/[Kobold Names.Female]}
# XXX Merfolk Name XXX TO DO
15,{If~%Gender%=1?[Names Generator.NAME Human Male]/[Names Generator.NAME Human Female]}
16,[Names Generator.NAME Orc]
17,{If~%Gender%=1?[Underdark.SvifneblinMaleNoMeaning]/[Underdark.SvifneblinFemaleNoMeaning]}
# XXX Tengu Name XXX TO DO
18,{If~%Gender%=1?[Names Generator.NAME Human Male]/[Names Generator.NAME Human Female]}
19,{If~%Gender%=1?[Names Generator.NAME Tiefling Male]/[Names Generator.NAME Tiefling Female]}
20,{Stop~ERROR NamesBranchRace}

### NEW RACE ###
:NamesBranch2
1,{If~{Find~1,human,%MonsterName%}>0?[~NamesBranchRace=1]
#
_/{If~{Find~1,derro,%MonsterName%}>0?[~Underdark.DerroNoMeaning]
_/{If~{Find~1,duergar,%MonsterName%}>0?[~NamesBranchRace=11]
_/{If~{Find~1,dwarf,%MonsterName%}>0?[~NamesBranchRace=2]
#
_/{If~{Find~1,drow,%MonsterName%}>0?{If~%Gender%=1?[~Names Generator.NAME Drow Male]/[~Names Generator.NAME Drow Female]}
_/{If~{Find~1,drider,%MonsterName%}>0?{If~%Gender%=1?[~Names Generator.NAME Drow Male]/[~Names Generator.NAME Drow Female]}
_/{If~{Find~1,half-elf,%MonsterName%}>0?[~NamesBranchRace=5]
_/{If~{Find~1,elf,%MonsterName%}>0?[~NamesBranchRace=3]
#
_/{If~{Find~1,svirfneblin,%MonsterName%}>0?[~NamesBranchRace=17]
_/{If~{Find~1,gnome,%MonsterName%}>0?[~NamesBranchRace=4]
#
_/{If~{Find~1,half-orc,%MonsterName%}>0?[~NamesBranchRace=6]
_/{If~{Find~1,orc,%MonsterName%}>0?[~NamesBranchRace=16]
#
_/{If~{Find~1,halfling,%MonsterName%}>0?[~NamesBranchRace=7]
_/{If~{Find~1,aasimar,%MonsterName%}>0?[~NamesBranchRace=8]
_/{If~{Find~1,bugbear,%MonsterName%}>0?{If~%Gender%=1?[~Names Generator.Bugbear Names Male]/[~Names Generator.Bugbear Names Female]}
_/{If~{Find~1,centaur,%MonsterName%}>0?{If~%Gender%=1?[~Names Generator.Centaur Names Male]/[~Names Generator.Centaur Names Female]}
_/{If~{Find~1,githyanki,%MonsterName%}>0?{If~%Gender%=1?[~Githyanki Names.Male]/[~Githyanki Names.Female]}
_/{If~{Find~1,githzerai,%MonsterName%}>0?{If~%Gender%=1?[~Githzerai Names.Male]/[~Githzerai Names.Female]}
_/{If~{Find~1,gnoll,%MonsterName%}>0?{If~%Gender%=1?[~Gnoll Names.Male]/[~Gnoll Names.Female]}
#
_/{If~{Find~1,hobgoblin,%MonsterName%}>0?[~NamesBranchRace=13]
_/{If~{Find~1,goblin,%MonsterName%}>0?[~NamesBranchRace=12]
#
_/{If~{Find~1,kobold,%MonsterName%}>0?[~NamesBranchRace=14]
_/{If~{Find~1,mind flayer,%MonsterName%}>0?[~Names Generator.NAME Illithid]
_/{If~{Find~1,kuo-toa,%MonsterName%}>0?[~Underdark.KuoToaNoMeaning]
_/{If~{Find~1,lizardfolk,%MonsterName%}>0?[~Names Generator.NAME Lizardfolk]
_/{If~{Find~1,merfolk,%MonsterName%}>0?[~NamesBranchRace=15]
_/{If~{Find~1,minotaur,%MonsterName%}>0?{If~%Gender%=1?[~Minotaur Names.Male]/[~Minotaur Names.Female]}
_/{If~{Find~1,ogre,%MonsterName%}>0?{If~%Gender%=1?[~Ogre Names.Male]/[~Ogre Names.Female]}
_/{If~{Find~1,tengu,%MonsterName%}>0?[~NamesBranchRace=18]
_/{If~{Find~1,tiefling,%MonsterName%}>0?[~NamesBranchRace=19]
_/{If~{Find~1,troglodyte,%MonsterName%}>0?[~Troglodyte Names.Start]
_/{If~{Find~1,troll,%MonsterName%}>0?{If~%Gender%=1?[~Troll Names.Male]/[~Troll Names.Female]}
_/{If~{Find~1,yuan-ti,%MonsterName%}>0?[~Yuanti Names.Start]
#
_/{If~{Find~1,dragon,%MonsterName%}>0?[~Names Generator.NAME Dragon]
_/[~Names Generator.NAME Random]
_}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}

:PrintGroupNames
1,|Temp1=%NA%| (<u>Name{If~%NA%>1?s}</u>: {While~%Temp1%,
_|Gender={Dice~1d2}|
_[NamesBranch] ([GenderShort=%Gender%])
_|Temp1-1|
_{If~%Temp1%>0?; }
_})

# locathah, merfolk, sprite! pixie, grimlock, tiefling
# azer, sahuagin, satyr ... find~, doppleganger, dryad
# gargoyle, harpy, janni (genie), sea hag
# green hag, annis (hag), ettin, hill giant, medusa
# stone giant, frost giant, fire giant
# rakshasa, cloud giant, storm giant

# ---------------------------------------------------------------------------
# NPC Gear / NPC Wealth

# WealthWPN: MW, magic weapons, magic staves and wands used by spellcasters to harm their enemies.
#            For example, a wand of scorching ray would count as a weapon, but a staff of life would count as a piece of magic gear.
# WealthPROT Protection: armor and shields, as well as any magic item that augments a characters Armor Class or saving throws.
# WealthMAG Magic: all other permanent magic items. Most rings, rods, and wondrous items fit into this category.
# WealthLIM Limited Use: alchemical items, potions, scrolls, and wands with few charges. +Charged wondrous items.
# WealthGEAR Gear: nonmagical gear. +jewelry, gems, or loose coins.

:SetWealth
1,|TempNumber=%CharacterLevel%|{If~{Param~Heroic,%Heroic%}=Heroic?|TempNumber+1|}
### NEW CLASS ### For Wealthier classes
_{If~{Param~Class,%Class%}=Aristocrat?|TempNumber+2|}
# PFExperience: 1= Slow (-1) 2= Normal 3= Fast (+1)
_{If~%PFExperience%=1?|TempNumber-1|/{If~%PFExperience%=3?|TempNumber+1|}}
_{If~%TempNumber%<1?|TempNumber=1|}
_[SetWealth2=%TempNumber%]
# PFFantasy: 1= Low (1/2) 2= Normal 3= High (x2)
_{If~%PFFantasy%=1?|WealthTOT\2||WealthWPN\2||WealthPROT\2||WealthMAG\2||WealthLIM\2||WealthGEAR\2|
_/{If~%PFFantasy%=3?|WealthTOT*2||WealthWPN*2||WealthPROT*2||WealthMAG*2||WealthLIM*2||WealthGEAR*2|}
_}
### NEW CLASS ### A commoner has 1/2 the wealth of a regular NPC.
_{If~{And~{Param~Heroic,%Heroic%}=Basic,{Param~Class,%Class%}=Commoner}=1?
_{If~{Param~CommonerType,%CommonerTypeCode%}=Beggar?|WealthTOT\100||WealthWPN\100||WealthPROT\100||WealthMAG\100||WealthLIM\100||WealthGEAR\100|
_/|WealthTOT\2||WealthWPN\2||WealthPROT\2||WealthMAG\2||WealthLIM\2||WealthGEAR\2|
_}}
_{If~%TestWealth%=1?|TestTableNote=<br>WEALTH: (Heroic= {Param~Heroic,%Heroic%}) Total= [AddComma.Start(%WealthTOT%)]; Weapon: [AddComma.Start(%WealthWPN%)], Protection: [AddComma.Start(%WealthPROT%)], Magic: [AddComma.Start(%WealthMAG%)], Limited: [AddComma.Start(%WealthLIM%)], Gear: [AddComma.Start(%WealthGEAR%)]|[TestTable]}

:SetWealth2
1,|WealthTOT=260||WealthWPN=50||WealthPROT=130||WealthMAG=0||WealthLIM=40||WealthGEAR=40|
2,|WealthTOT=390||WealthWPN=100||WealthPROT=150||WealthMAG=0||WealthLIM=40||WealthGEAR=100|
3,|WealthTOT=780||WealthWPN=350||WealthPROT=200||WealthMAG=0||WealthLIM=80||WealthGEAR=150|
4,|WealthTOT=1650||WealthWPN=650||WealthPROT=800||WealthMAG=0||WealthLIM=100||WealthGEAR=200|
5,|WealthTOT=2400||WealthWPN=900||WealthPROT=1000||WealthMAG=0||WealthLIM=300||WealthGEAR=200|
6,|WealthTOT=3450||WealthWPN=1400||WealthPROT=1400||WealthMAG=0||WealthLIM=450||WealthGEAR=200|
7,|WealthTOT=4650||WealthWPN=2350||WealthPROT=1650||WealthMAG=0||WealthLIM=450||WealthGEAR=200|
8,|WealthTOT=6000||WealthWPN=2700||WealthPROT=2000||WealthMAG=500||WealthLIM=600||WealthGEAR=200|
9,|WealthTOT=7800||WealthWPN=3000||WealthPROT=2500||WealthMAG=1000||WealthLIM=800||WealthGEAR=500|
10,|WealthTOT=10050||WealthWPN=3500||WealthPROT=3000||WealthMAG=2000||WealthLIM=1050||WealthGEAR=500|
11,|WealthTOT=12750||WealthWPN=4000||WealthPROT=4000||WealthMAG=3000||WealthLIM=1250||WealthGEAR=500|
12,|WealthTOT=16350||WealthWPN=6000||WealthPROT=4500||WealthMAG=4000||WealthLIM=1350||WealthGEAR=500|
13,|WealthTOT=21000||WealthWPN=8500||WealthPROT=5500||WealthMAG=5000||WealthLIM=1500||WealthGEAR=500|
14,|WealthTOT=27000||WealthWPN=9000||WealthPROT=8000||WealthMAG=7000||WealthLIM=2500||WealthGEAR=500|
15,|WealthTOT=34800||WealthWPN=12000||WealthPROT=10500||WealthMAG=9000||WealthLIM=2800||WealthGEAR=500|
16,|WealthTOT=45000||WealthWPN=17000||WealthPROT=13500||WealthMAG=11000||WealthLIM=3000||WealthGEAR=500|
17,|WealthTOT=58500||WealthWPN=19000||WealthPROT=18000||WealthMAG=16000||WealthLIM=4000||WealthGEAR=1500|
18,|WealthTOT=75000||WealthWPN=24000||WealthPROT=23000||WealthMAG=20000||WealthLIM=6500||WealthGEAR=1500|
19,|WealthTOT=96000||WealthWPN=30000||WealthPROT=28000||WealthMAG=28000||WealthLIM=8000||WealthGEAR=2000|
20,|WealthTOT=123000||WealthWPN=40000||WealthPROT=35000||WealthMAG=35000||WealthLIM=11000||WealthGEAR=2000|
21-100,|WealthTOT=159000||WealthWPN=55000||WealthPROT=40000||WealthMAG=44000||WealthLIM=18000||WealthGEAR=2000|

### NEW FEATS ###
### NEW SKILL FEATS ###
:ModifyWealthBasedOnFeats
1,[SetMod]
_{If~{Find~1,Brew Potion,%FeatsAll%}!=0?[AddLIM]
_/{If~{Find~1,Craft Staff,%FeatsAll%}!=0?[AddLIM]
_/{If~{Find~1,Craft Wand,%FeatsAll%}!=0?[AddLIM]
_/{If~{Find~1,Scribe Scroll,%FeatsAll%}!=0?[AddLIM]
_/{If~{And~%ModWealthProf%=1,%Profession%>0}=1?|Temp2=%Profession%|[AddLIM]}
_}}}}
_[SetMod]
_{If~{Or~{Find~1,Master Craftsman,%FeatsAll%}!=0,{Find~1,Craft Magic Arms and Armor,%FeatsAll%}!=0}=1?[AddPROT][AddWPN]
_/{If~{And~%ModWealthProf%=1,%Profession%>0}=1?|Temp2=%Profession%|[AddPROT][AddWPN]}
_}
_[SetMod]
_{If~{Find~1,Craft Rod,%FeatsAll%}!=0?[AddMAG]
_/{If~{Find~1,Forge Ring,%FeatsAll%}!=0?[AddMAG]
_/{If~{Find~1,Craft Wondrous Item,%FeatsAll%}!=0?[AddMAG]
_/{If~{Find~1,Master Craftsman,%FeatsAll%}!=0?[AddMAG]
_/{If~{And~%ModWealthProf%=1,%Profession%>0}=1?|Temp2=%Profession%|[AddMAG]}
_}}}}
_{If~{And~%ModWealthProf%=1,%Profession%>0}=1?|Temp2=%Profession%|[AddGEAR]}

### NEW FEATS ###
### NEW SKILL FEATS ###
:ModifyWealthBasedOnFeatsValminder
1,[SetMod]
#_<hr> %Temp2% (Prof = %Profession%)
_{If~{Find~1,Craft Charged Items,%FeatsAll%}!=0?[AddLIM]
_/{If~{Find~1,Craft Single-Use Items,%FeatsAll%}!=0?[AddLIM]
_/{If~{Find~1,Craft Spell Completion Items,%FeatsAll%}!=0?[AddLIM]
_/{If~{And~%ModWealthProf%=1,%Profession%>0}=1?|Temp2=%Profession%|[AddLIM]}
_}}}
_[SetMod]
_{If~{Or~{Find~1,Master Craftsman,%FeatsAll%}!=0,{Find~1,Craft Magic Arms and Armor,%FeatsAll%}!=0}=1?[AddPROT][AddWPN]
_/{If~{And~%ModWealthProf%=1,%Profession%>0}=1?|Temp2=%Profession%|[AddPROT][AddWPN]}
_}
_[SetMod]
_{If~{Find~1,Craft Constant Items,%FeatsAll%}!=0?[AddMAG]
_/{If~{Find~1,Master Craftsman,%FeatsAll%}!=0?[AddMAG]
_/{If~{And~%ModWealthProf%=1,%Profession%>0}=1?|Temp2=%Profession%|[AddMAG]}
_}}
_{If~{And~%ModWealthProf%=1,%Profession%>0}=1?|Temp2=%Profession%|[AddGEAR]}

:SetMod
1,{If~%ModWealthProf%=2?|Temp2=25|
_/{If~%Profession%<25?|Temp2=25|/|Temp2=%Profession%|}
_}

:AddGEAR
1,|Temp1=%WealthGEAR%||Temp1*%Temp2%||Temp1\100||WealthGEAR+%Temp1%||WealthTOT+%Temp1%|
#_<hr>GEAR:%Temp1% / %Temp2% perc/ %WealthGEAR% - T: %WealthTOT%<hr>

:AddLIM
1,|Temp1=%WealthLIM%||Temp1*%Temp2%||Temp1\100||WealthLIM+%Temp1%||WealthTOT+%Temp1%|
#_<hr>LIM:%Temp1% / %Temp2% perc/ %WealthLIM% - T: %WealthTOT%

:AddMAG
1,|Temp1=%WealthMAG%||Temp1*%Temp2%||Temp1\100||WealthMAG+%Temp1%||WealthTOT+%Temp1%|
#_<hr>MAG:%Temp1% / %Temp2% perc/ %WealthMAG% - T: %WealthTOT%

:AddPROT
1,|Temp1=%WealthPROT%||Temp1*%Temp2%||Temp1\100||WealthPROT+%Temp1%||WealthTOT+%Temp1%|
#_<hr>PROT:%Temp1% / %Temp2% perc/ %WealthPROT% - T: %WealthTOT%

:AddWPN
1,|Temp1=%WealthWPN%||Temp1*%Temp2%||Temp1\100||WealthWPN+%Temp1%||WealthTOT+%Temp1%|
#_<hr>WPN:%Temp1% / %Temp2% perc/ %WealthWPN% - T: %WealthTOT%


# Lift CCH over head
# Lift 2xCCH off ground, lose DEX, 5'/rnd FULL
# Push Drag x5 CCH
# Favorabe x2 / Unfavorable 1/2 
### OK Bipeds Lx2 Hx4 Gx8 Cx16 Sx3/4 Tx1/2 Dx1/4 Fx1/8
# Quadrupeds Lx3 Hx46 Gx12 Cx24 Mx1.5 Sx1 Tx3/4 Dx1/2 Fx1/4
# CCL!CCM!CCH  (Light Medium Heavy)

:DetermineCarryingCapacity
1,|TempSort=[CarryingCapacity=%STR%]|
_{Split~TempSort,"!",CCL,CCM,CCH}
_[CCSizeMod=%Size%]

:CarryingCapacity
1,3!6!10
2,6!13!20
3,10!20!30
4,13!26!40
5,16!33!50
6,20!40!60
7,23!46!70
8,26!53!80
9,30!60!90
10,33!66!100
11,38!76!115
12,43!86!130
13,50!100!150
14,58!116!175
15,66!133!200
16,76!153!230
17,86!173!260
18,100!200!300
19,116!233!350
20,133!266!400
21,153!306!460
22,173!346!520
23,200!400!600
24,233!466!700
25,266!533!800
26,306!613!920
27,346!693!1040
28,400!800!1200
29,466!933!1400
30,{Calc~133*4}!{Calc~266*4}!{Calc~400*4}
31,{Calc~153*4}!{Calc~306*4}!{Calc~460*4}
32,{Calc~173*4}!{Calc~346*4}!{Calc~520*4}
33,{Calc~200*4}!{Calc~400*4}!{Calc~600*4}
34,{Calc~233*4}!{Calc~466*4}!{Calc~700*4}
35,{Calc~266*4}!{Calc~533*4}!{Calc~800*4}
36,{Calc~306*4}!{Calc~613*4}!{Calc~920*4}
37,{Calc~346*4}!{Calc~693*4}!{Calc~1040*4}
38,{Calc~400*4}!{Calc~800*4}!{Calc~1200*4}
39,{Calc~466*4}!{Calc~933*4}!{Calc~1400*4}
40,{Calc~133*16}!{Calc~266*16}!{Calc~400*16}
41,{Calc~153*16}!{Calc~306*16}!{Calc~460*16}
42,{Calc~173*16}!{Calc~346*16}!{Calc~520*16}
43,{Calc~200*16}!{Calc~400*16}!{Calc~600*16}
44,{Calc~233*16}!{Calc~466*16}!{Calc~700*16}
45,{Calc~266*16}!{Calc~533*16}!{Calc~800*16}
46,{Calc~306*16}!{Calc~613*16}!{Calc~920*16}
47,{Calc~346*16}!{Calc~693*16}!{Calc~1040*16}
48,{Calc~400*16}!{Calc~800*16}!{Calc~1200*16}
49,{Calc~466*16}!{Calc~933*16}!{Calc~1400*16}
50,{Calc~133*64}!{Calc~266*64}!{Calc~400*64}
51,{Calc~153*64}!{Calc~306*64}!{Calc~460*64}
52,{Calc~173*64}!{Calc~346*64}!{Calc~520*64}
53,{Calc~200*64}!{Calc~400*64}!{Calc~600*64}
54,{Calc~233*64}!{Calc~466*64}!{Calc~700*64}
55,{Calc~266*64}!{Calc~533*64}!{Calc~800*64}
56,{Calc~306*64}!{Calc~613*64}!{Calc~920*64}
57,{Calc~346*64}!{Calc~693*64}!{Calc~1040*64}
58,{Calc~400*64}!{Calc~800*64}!{Calc~1200*64}
59,{Calc~466*64}!{Calc~933*64}!{Calc~1400*64}
60,{Calc~133*256}!{Calc~266*256}!{Calc~400*256}
61,{Calc~153*256}!{Calc~306*256}!{Calc~460*256}
62,{Calc~173*256}!{Calc~346*256}!{Calc~520*256}
63,{Calc~200*256}!{Calc~400*256}!{Calc~600*256}
64,{Calc~233*256}!{Calc~466*256}!{Calc~700*256}
65,{Calc~266*256}!{Calc~533*256}!{Calc~800*256}
66,{Calc~306*256}!{Calc~613*256}!{Calc~920*256}
67,{Calc~346*256}!{Calc~693*256}!{Calc~1040*256}
68,{Calc~400*256}!{Calc~800*256}!{Calc~1200*256}
69,{Calc~466*256}!{Calc~933*256}!{Calc~1400*256}
70,{Calc~133*1024}!{Calc~266*1024}!{Calc~400*1024}
71,{Calc~153*1024}!{Calc~306*1024}!{Calc~460*1024}
72,{Calc~173*1024}!{Calc~346*1024}!{Calc~520*1024}
73,{Calc~200*1024}!{Calc~400*1024}!{Calc~600*1024}
74,{Calc~233*1024}!{Calc~466*1024}!{Calc~700*1024}
75,{Calc~266*1024}!{Calc~533*1024}!{Calc~800*1024}
76,{Calc~306*1024}!{Calc~613*1024}!{Calc~920*1024}
77,{Calc~346*1024}!{Calc~693*1024}!{Calc~1040*1024}
78,{Calc~400*1024}!{Calc~800*1024}!{Calc~1200*1024}
79,{Calc~466*1024}!{Calc~933*1024}!{Calc~1400*1024}
80,{Calc~133*4096}!{Calc~266*4096}!{Calc~400*4096}
81,{Calc~153*4096}!{Calc~306*4096}!{Calc~460*4096}
82,{Calc~173*4096}!{Calc~346*4096}!{Calc~520*4096}
83,{Calc~200*4096}!{Calc~400*4096}!{Calc~600*4096}
84,{Calc~233*4096}!{Calc~466*4096}!{Calc~700*4096}
85,{Calc~266*4096}!{Calc~533*4096}!{Calc~800*4096}
86,{Calc~306*4096}!{Calc~613*4096}!{Calc~920*4096}
87,{Calc~346*4096}!{Calc~693*4096}!{Calc~1040*4096}
88,{Calc~400*4096}!{Calc~800*4096}!{Calc~1200*4096}
89,{Calc~466*4096}!{Calc~933*4096}!{Calc~1400*4096}
90,{Calc~133*16384}!{Calc~266*16384}!{Calc~400*16384}
91,{Calc~153*16384}!{Calc~306*16384}!{Calc~460*16384}
92,{Calc~173*16384}!{Calc~346*16384}!{Calc~520*16384}
93,{Calc~200*16384}!{Calc~400*16384}!{Calc~600*16384}
94,{Calc~233*16384}!{Calc~466*16384}!{Calc~700*16384}
95,{Calc~266*16384}!{Calc~533*16384}!{Calc~800*16384}
96,{Calc~306*16384}!{Calc~613*16384}!{Calc~920*16384}
97,{Calc~346*16384}!{Calc~693*16384}!{Calc~1040*16384}
98,{Calc~400*16384}!{Calc~800*16384}!{Calc~1200*16384}
99-1000,{Calc~466*16384}!{Calc~933*16384}!{Calc~1400*16384}

# Bipeds Lx2 Hx4 Gx8 Cx16 Sx3/4 Tx1/2 Dx1/4 Fx1/8
:CCSizeMod
1,|CCL\8||CCM\8||CCH\8|
2,|CCL\4||CCM\4||CCH\4|
3,|CCL\2||CCM\2||CCH\2|
4,|CCL*3||CCM*3||CCH*3||CCL\4||CCM\4||CCH\4|
5,
6,|CCL*2||CCM*2||CCH*2|
7,|CCL*4||CCM*4||CCH*4|
8,|CCL*8||CCM*8||CCH*8|
9,|CCL*16||CCM*16||CCH*16|

:PrintCCSingle
1,<b>Carrying Capacity:</b> Light 0-%CCL% lbs / {If~%CCMV%=2?{Color~OrangeRed,Medium %CCM% lbs [FontB=1](max Dex +3, -3 check, reduced MV)[FontE]}/Medium %CCM% lbs} / {If~%CCMV%=3?{Color~Red,Heavy %CCH% lbs [FontB=1](max Dex +1, -6 check, reduced MV, run x3)[FontE]}/Heavy %CCH% lbs}; Lift over head: %CCH% lbs, Lift heavy load: {Calc~%CCH%*2} [FontB=1](FULL; 5' MV, lose DEX to AC)[FontE], {If~%CCOver%=Yes?{Color~Red,Drag: {Calc~%CCH%*5} lbs}/Drag: {Calc~%CCH%*5} lbs}{If~%CCOverDrag%=Yes?, {Color~Red,too much weight, cannot move}/{If~%CCOver%=Yes?, {Color~Red,must drag some equipment}}}.
_[PrintCCMount]

:PrintCCGroup
1,<b>CC (lbs):</b> %CCL% / {IIf~%CCMV%=2?{Color~OrangeRed,%CCM%}:%CCM%} / {IIf~%CCMV%=32?{Color~Red,%CCH%}:%CCH%}, lift %CCH% / {Calc~%CCH%*2} [FontB=1](FULL 5' No DEX)[FontE], drag {If~%CCOver%=Yes?{Color~Red,{Calc~%CCH%*5}}/{Calc~%CCH%*5}}{If~%CCOverDrag%=Yes?, {Color~Red,too much weight, cannot move}/{If~%CCOver%=Yes?, {Color~Red,must drag some equipment}}}.
_[PrintCCMount]

:PrintCCMount
1,{If~%Mount%!=0?{If~%GroupFlag%=2?<br>{Space~7}{Bold~Mount Carrying Capacity:}/ {Bold~Mount CC:}} {Cap~[PrintCCMount2=%Mount%]}[PrintCCMountWarning]}

:PrintCCMountWarning
1,{If~%CCMV%>1? {Bold~Note:} the mount can carry some gear to lower the carrying capacity penalties.}

:PrintCCMount2
1,pony (100/200/300; drag 1500)
2,warpony (100/200/300; drag 1500)
3,light horse (240/460/700; drag 3500)
4,light warhorse (240/460/700; drag 3500)
5,heavy horse (400/800/1600; drag 8000)
6,heavy warhorse (400/800/1600; drag 8000)
7,donkey (50/100/150; drag 750)
8,mule (230/460/690; drag 3450)
9,stonebred pony (100/200/300; drag 1500)
10,riding dog (100/200/300; drag 1500)

:DetermineCarryingCapacityPenalties
1,|CCOver=No||CCOverDrag=No||CCMaxDex=100||CCMV=1||CCCP=0|
_{If~%TestCostWeight%=1?|TestTableNote= WtCarr=%WtTotalCarried% / CCap: %CCL%; %CCM%; %CCH%|[TestTable]}
_{If~%WtTotalCarried%>%CCH%?|CCOver=Yes||CCMaxDex=1||CCCP=-6||CCMV=3|
_   /{If~%WtTotalCarried%>%CCM%?|CCMaxDex=1||CCCP=-6||CCMV=3|
_   /{If~%WtTotalCarried%>%CCL%?|CCMaxDex=3||CCCP=-3||CCMV=2|
_}}}
_{If~%CCOver%=Yes?{If~%WtTotalCarried%>{Calc~%CCH%*5}?|CCOverDrag=Yes|/|CCOverDrag=No|}}

:DetermineCarryingCapacityPenaltiesFINAL
1,{If~{Calc~%WtTotalCarried%+%MundaneEQWt%}>%CCH%?|CCOver=Yes||CCMaxDex=1||CCCP=-6||CCMV=3|
_   /{If~{Calc~%WtTotalCarried%+%MundaneEQWt%}>%CCM%?|CCMaxDex=1||CCCP=-6||CCMV=3|
_   /{If~{Calc~%WtTotalCarried%+%MundaneEQWt%}>%CCL%?|CCMaxDex=3||CCCP=-3||CCMV=2|
_}}}
_{If~%CCOver%=Yes?{If~{Calc~%WtTotalCarried%+%MundaneEQWt%}>{Calc~%CCH%*5}?|CCOverDrag=Yes|/|CCOverDrag=No|}}

# ---------------------------------------------------------------------------
# Height / Weight

# 8=Aasimar  9=Drow  10=Duergar  11=Goblin  12=Hobgoblin  13=Kobold  14=Merfolk  15=Orc  16=Svirfneblin  17=Tengu  18=Tiefling
# 19=RANDOM

# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
### NEW RACE ###
:DetermineHeight
1,[HumanHeight=%Gender%]
2,[DwarfHeight=%Gender%]
3,[ElfHeight=%Gender%]
4,[GnomeHeight=%Gender%]
5,[HalfElfHeight=%Gender%]
6,[HalfOrcHeight=%Gender%]
7,[HalflingHeight=%Gender%]
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
8,[AasimarHeight=%Gender%]
9-10,[DrowHeight=%Gender%]
11,[DwarfHeight=%Gender%]
12,[HalflingHeight=%Gender%]
13,[HobgoblinHeight=%Gender%]
14,[KoboldHeight=%Gender%]
15,[MerfolkHeight=%Gender%]
16,[OrcHeight=%Gender%]
17,[GnomeHeight=%Gender%]
18,[TenguHeight=%Gender%]
19,[HumanHeight=%Gender%]
20,{Stop~ERROR DetermineHeight}

:HumanHeight
1,|BaseHeight=58||HeightModifier={Dice~2d10}||ShortSize=65||TallSize=75|
2,|BaseHeight=53||HeightModifier={Dice~2d10}||ShortSize=60||TallSize=70|

:AasimarHeight
1,|BaseHeight=62||HeightModifier={Dice~2d8}||ShortSize=68||TallSize=78|
2,|BaseHeight=60||HeightModifier={Dice~2d8}||ShortSize=66||TallSize=76|

:DrowHeight
1,|BaseHeight=64||HeightModifier={Dice~2d6}||ShortSize=68||TallSize=73|
2,|BaseHeight=64||HeightModifier={Dice~2d8}||ShortSize=68||TallSize=77|

:DwarfHeight
1,{If~%Subrace%=Mountain?|BaseHeight=49||HeightModifier={Dice~2d4}||ShortSize=53||TallSize=55|
_/|BaseHeight=45||HeightModifier={Dice~2d4}||ShortSize=49||TallSize=51|
_}
2,{If~%Subrace%=Mountain?|BaseHeight=47||HeightModifier={Dice~2d4}||ShortSize=51||TallSize=53|
_/|BaseHeight=43||HeightModifier={Dice~2d4}||ShortSize=47||TallSize=49|
_}

:ElfHeight
1,{If~%Subrace%=Gray?|BaseHeight=68||HeightModifier={Dice~2d8}||ShortSize=72||TallSize=81|
_/|BaseHeight=64||HeightModifier={Dice~2d8}||ShortSize=68||TallSize=77|
_}
2,{If~%Subrace%=Gray?|BaseHeight=68||HeightModifier={Dice~2d6}||ShortSize=72||TallSize=77|
_/|BaseHeight=64||HeightModifier={Dice~2d6}||ShortSize=68||TallSize=73|
_}

:GnomeHeight
1,{If~%Subrace%=Forest?|BaseHeight=30||HeightModifier={Dice~2d4}||ShortSize=33||TallSize=36|
_/|BaseHeight=36||HeightModifier={Dice~2d4}||ShortSize=39||TallSize=42|
_}
2,{If~%Subrace%=Forest?|BaseHeight=28||HeightModifier={Dice~2d4}||ShortSize=31||TallSize=34|
_/|BaseHeight=34||HeightModifier={Dice~2d4}||ShortSize=37||TallSize=40|
_}

:HalfElfHeight
1,|BaseHeight=62||HeightModifier={Dice~2d8}||ShortSize=66||TallSize=75|
2,|BaseHeight=60||HeightModifier={Dice~2d8}||ShortSize=64||TallSize=73|

:HalfOrcHeight
1,|BaseHeight=58||HeightModifier={Dice~2d12}||ShortSize=66||TallSize=76|
2,|BaseHeight=53||HeightModifier={Dice~2d12}||ShortSize=65||TallSize=75|

:HalflingHeight
1,|BaseHeight=32||HeightModifier={Dice~2d4}||ShortSize=36||TallSize=38|
2,|BaseHeight=30||HeightModifier={Dice~2d4}||ShortSize=34||TallSize=36|

:HobgoblinHeight
1,|BaseHeight=50||HeightModifier={Dice~2d8}||ShortSize=57||TallSize=67|
2,|BaseHeight=48||HeightModifier={Dice~2d8}||ShortSize=55||TallSize=65|

:KoboldHeight
1,|BaseHeight=30||HeightModifier={Dice~2d4}||ShortSize=34||TallSize=36|
2,|BaseHeight=28||HeightModifier={Dice~2d4}||ShortSize=32||TallSize=34|

:MerfolkHeight
1,|BaseHeight=70||HeightModifier={Dice~2d10}||ShortSize=77||TallSize=87|
2,|BaseHeight=68||HeightModifier={Dice~2d10}||ShortSize=75||TallSize=85|

:OrcHeight
1,|BaseHeight=61||HeightModifier={Dice~2d12}||ShortSize=69||TallSize=79|
2,|BaseHeight=57||HeightModifier={Dice~2d12}||ShortSize=65||TallSize=75|

:TenguHeight
1,|BaseHeight=48||HeightModifier={Dice~2d6}||ShortSize=52||TallSize=57|
2,|BaseHeight=46||HeightModifier={Dice~2d6}||ShortSize=50||TallSize=55|

:FinishHeight
1,|HeightVariable={Calc~(%BaseHeight%+%HeightModifier%)}|
_{If~%CohortGen%=No?
_|HeightFlag=1|
_{If~%HeightVariable%>%TallSize%?|HeightFlag=2|}
_{If~%HeightVariable%<%ShortSize%?|HeightFlag=3|}
_}
_{If~%CohortGen%=No?|HeightInFeet=%HeightVariable%||HeightInFeet\12||HeightInInches={Mod~%HeightVariable%,12}|
_/|HeightInFeetCohort=%HeightVariable%||HeightInFeetCohort\12||HeightInInchesCohort={Mod~%HeightVariable%,12}|
_}
#xxx_{Trunc~%HeightInFeet%} ft. {Trunc~%HeightInInches%} in. tall
_{If~%CohortGen%=No?
_{If~%GroupFlag%=2?%HeightInFeet% ft.{If~%HeightInInches%>0? %HeightInInches% in.} tall
_/%HeightInFeet%'{If~%HeightInInches%>0? %HeightInInches%"}}
_/
_{If~%GroupFlag%=2?%HeightInFeetCohort% ft.{If~%HeightInInchesCohort%>0? %HeightInInchesCohort% in.} tall
_/%HeightInFeetCohort%'{If~%HeightInInchesCohort%>0? %HeightInInchesCohort%"}}
_}
#xxx_%HeightInFeet% ft.{If~%HeightInInches%>0? %HeightInInches% in.} tall

# --------------
# Weight Section 

# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
### NEW RACE ###
:DetermineWeight
1,[HumanWeight=%Gender%]
2,[DwarfWeight=%Gender%]
3,[ElfWeight=%Gender%]
4,[GnomeWeight=%Gender%]
5,[HalfElfWeight=%Gender%]
6,[HalfOrcWeight=%Gender%]
7,[HalflingWeight=%Gender%]
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
8,[AasimarWeight=%Gender%]
9-10,[DrowWeight=%Gender%]
11,[DwarfWeight=%Gender%]
12,[HalflingWeight=%Gender%]
13,[HobgoblinWeight=%Gender%]
14,[HalflingWeight=%Gender%]
15,[MerfolkWeight=%Gender%]
16,[OrcWeight=%Gender%]
17,[SvirfneblinWeight=%Gender%]
18,[TenguWeight=%Gender%]
19,[HumanWeight=%Gender%]
20,{Stop~ERROR DetermineWeight}

# 2d10 (11) L9/H13 ; 2d4 (5) L4/H6 : L9x4+120=156 H13x6+120=198
#                                        +85 =121 H    +85 =163
:HumanWeight
1,|BaseWeight=120||WeightModifier={Dice~2d4}||Underweight=156||Overweight=198|
2,|BaseWeight=85||WeightModifier={Dice~2d4}||Underweight=121||Overweight=163|

# 2d8 (9) L6/H12 ; 2d4 (5) L4/H6 : L6x4+110=134 H12x6+110=182
#                                      +90 =114 H    +90 =162
:AasimarWeight
1,|BaseWeight=110||WeightModifier={Dice~2d4}||Underweight=134||Overweight=182|
2,|BaseWeight=90||WeightModifier={Dice~2d4}||Underweight=114||Overweight=162|

:DrowWeight
1,|BaseWeight=90||WeightModifier={Dice~2d2}||Underweight=100||Overweight=126|
2,|BaseWeight=110||WeightModifier={Dice~2d2}||Underweight=112||Overweight=148|

# 2d5 (6) L4/H8 ; 2d6 (7) L5/H9 : L4x5+150=170 H8x9+150=222
#                                     +120=140 H   +120=192
:DwarfWeight
1,{If~%Subrace%=Mountain?|BaseWeight=170||WeightModifier={Dice~2d6}||Underweight=192||Overweight=250|
_/{If~%Subrace%=Deep?|BaseWeight=150||WeightModifier={Dice~2d4}||Underweight=170||Overweight=222|
_/|BaseWeight=150||WeightModifier={Dice~2d6}||Underweight=166||Overweight=198|
_}}
2,{If~%Subrace%=Mountain?|BaseWeight=135||WeightModifier={Dice~2d6}||Underweight=157||Overweight=216|
_/{If~%Subrace%=Deep?|BaseWeight=120||WeightModifier={Dice~2d4}||Underweight=136||Overweight=168|
_/|BaseWeight=120||WeightModifier={Dice~2d6}||Underweight=140||Overweight=192|
_}}

# 2d8 (9) L6/H12 ; 2d2 L2/H4 : L=6x2+100=112 H=12x4+100=148
# 2d6 (7) L5/H9  ; 2d2 L2/H4 : L=5x2+90 =100 H=9x4 +90 =126
:ElfWeight
1,{If~%Subrace%=Gray?|BaseWeight=106||WeightModifier={Dice~2d2}||Underweight=118||Overweight=154|
_/|BaseWeight=100||WeightModifier={Dice~2d2}||Underweight=112||Overweight=148|
_}
2,{If~%Subrace%=Gray?|BaseWeight=95||WeightModifier={Dice~2d2}||Underweight=105||Overweight=131|
_/|BaseWeight=90||WeightModifier={Dice~2d2}||Underweight=100||Overweight=126|
_}

# 2d4 (5) L4/H6 ; 1d3 L1/H3 : L4x1+30=34 H6x3+30=48
#                                 +25=29     +25=43
:GnomeWeight
1,{If~%Subrace%=Forest?|BaseWeight=25||WeightModifier={Dice~1d3}||Underweight=29||Overweight=43|
_/|BaseWeight=30||WeightModifier={Dice~1d3}||Underweight=34||Overweight=48|
_}
2,{If~%Subrace%=Forest?|BaseWeight=20||WeightModifier={Dice~1d3}||Underweight=24||Overweight=38|
_/|BaseWeight=25||WeightModifier={Dice~1d3}||Underweight=29||Overweight=43|
_}

# 2d8 (9) L6/H12 ; 2d4 (5) L4/H6 : L6x4+110=134 H12x6+110=182
#                                      +90 =114      +90 =162
:HalfElfWeight
1,|BaseWeight=110||WeightModifier={Dice~2d4}||Underweight=134||Overweight=182|
2,|BaseWeight=90||WeightModifier={Dice~2d4}||Underweight=114||Overweight=162|

# 2d12 (13) L10/H16 ; 2d6 (7) L5/H9 : L10x5+130=180 H16x9+130=274
#                                          +90 =140      +90 =234
:HalfOrcWeight
1,|BaseWeight=130||WeightModifier={Dice~2d6}||Underweight=180||Overweight=274|
2,|BaseWeight=90||WeightModifier={Dice~2d6}||Underweight=140||Overweight=234|

# 2d4 (5) L4/H6 ; 1d3 (2) L1/H3 : L4x1+25=29 H6x3+25=43
#                                     +20=24     +20=38
:HalflingWeight
1,|BaseWeight=25||WeightModifier={Dice~1d3}||Underweight=29||Overweight=43|
2,|BaseWeight=20||WeightModifier={Dice~1d3}||Underweight=24||Overweight=38|

# 2d8 (9) L6/H12 ; 2d4 (5) L4/H6 : L6x4+165=189 H12x6+165=237
#                                      +145=169      +145=217
:HobgoblinWeight
1,|BaseWeight=165||WeightModifier={Dice~2d4}||Underweight=189||Overweight=237|
2,|BaseWeight=145||WeightModifier={Dice~2d4}||Underweight=169||Overweight=217|

# 2d10 (11) L8/H14 ; 2d4 (5) L4/H6 : L8x4+145=177 H14x6+145=229
#                                        +135=167      +135=219
:MerfolkWeight
1,|BaseWeight=145||WeightModifier={Dice~2d4}||Underweight=177||Overweight=229|
2,|BaseWeight=135||WeightModifier={Dice~2d4}||Underweight=167||Overweight=219|

# 2d12 (13) L10/H16 ; 2d6 (7) L5/H9 : L10x5+160=210 H16x9+160=304
#                                          +120=170      +120=264
:OrcWeight
1,|BaseWeight=160||WeightModifier={Dice~2d6}||Underweight=210||Overweight=304|
2,|BaseWeight=120||WeightModifier={Dice~2d6}||Underweight=170||Overweight=264|

# 2d4 (5) L4/H6 ; 1d3 L1/H3 : L4x1+35=39 H6x3+35=53
#                                 +30=34     +30=48
:SvirfneblinWeight
1,|BaseWeight=35||WeightModifier={Dice~1d3}||Underweight=39||Overweight=53|
2,|BaseWeight=30||WeightModifier={Dice~1d3}||Underweight=34||Overweight=48|

# 2d6 (7) L5/H9 ; 1d3 L1/H3 : L5x1+65=70 H9x3+65=92
#                                 +55=60     +55=82
:TenguWeight
1,|BaseWeight=35||WeightModifier={Dice~1d3}||Underweight=70||Overweight=92|
2,|BaseWeight=30||WeightModifier={Dice~1d3}||Underweight=60||Overweight=82|

:FinishWeight
1,{If~%TestHtWt%=1?{Color~HotPink,BEFORE: HM:%HeightModifier%  WM:%WeightModifier%}}
_|WeightModifier+%STRBonus%||WeightModifier+%CONBonus%||WeightModifier+{Calc~(-1*%DEXBonus%)}|
_{If~%CohortGen%=Yes?|WeightFlagMaster=%WeightFlag%|}
_|WeightFlag=1|
_{If~%CohortGen%=No?
_|Weight={Calc~((%HeightModifier%*%WeightModifier%)+%BaseWeight%)}|
_/
_|WeightCohort={Calc~((%HeightModifier%*%WeightModifier%)+%BaseWeight%)}|
_}
_{If~%TestHtWt%=1?{Color~HotPink, --- AFTER: HM:%HeightModifier%  WM:%WeightModifier%}}
_{If~%Weight%>%Overweight%?|WeightFlag=2|
_  /{If~%Weight%<%Underweight%?|WeightFlag=3|
_}}
_{If~%CohortGen%=No? %Weight%/ %WeightCohort%} lbs

# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
### NEW RACE ###
:DetermineAge
1,|Age=15||AgeMid=35||AgeOld=53||AgeVen=70||AgeMax=%AgeVen%||AgeMax+{Dice~2d20}||AgeLevelMult=1|[DetermineAgeClass=%Class%]
2,|Age=40||AgeMid=125||AgeOld=188||AgeVen=250||AgeMax=%AgeVen%||AgeMax+{Dice~2d100}||AgeLevelMult=3.5|[DetermineAgeClass=%Class%]
3,|Age=110||AgeMid=175||AgeOld=263||AgeVen=350||AgeMax=%AgeVen%||AgeMax+{Dice~4d100}||AgeLevelMult=5|[DetermineAgeClass=%Class%]
4,{If~%Subrace%=Forest?|Age=60||AgeMid=150||AgeOld=225||AgeVen=350||AgeMax=%AgeVen%||AgeMax+{Dice~3d100}||AgeLevelMult=5|[DetermineAgeClass=%Class%]
_/|Age=40||AgeMid=100||AgeOld=150||AgeVen=200||AgeMax=%AgeVen%||AgeMax+{Dice~3d100}||AgeLevelMult=3|[DetermineAgeClass=%Class%]
_}
5,|Age=20||AgeMid=62||AgeOld=93||AgeVen=125||AgeMax=%AgeVen%||AgeMax+{Dice~3d20}||AgeLevelMult=1.5|[DetermineAgeClass=%Class%]
6,|Age=14||AgeMid=30||AgeOld=45||AgeVen=60||AgeMax=%AgeVen%||AgeMax+{Dice~2d10}||AgeLevelMult=1|[DetermineAgeClass=%Class%]
7,|Age=20||AgeMid=50||AgeOld=75||AgeVen=100||AgeMax=%AgeVen%||AgeMax+{Dice~5d20}||AgeLevelMult=1.5|[DetermineAgeClass=%Class%]
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
8,|Age=20||AgeMid=35||AgeOld=53||AgeVen=70||AgeMax=%AgeVen%||AgeMax+{Dice~2d20}||AgeLevelMult=1|[DetermineAgeClass=%Class%]
9-10,[DetermineAge=3]
11,[DetermineAge=2]
12,|Age=12||AgeMid=20||AgeOld=30||AgeVen=40||AgeMax=%AgeVen%||AgeMax+{Dice~1d20}||AgeLevelMult=1|[DetermineAgeClass=%Class%]
13,[DetermineAge=6]
14,[DetermineAge=12]
15,[DetermineAge=1]
16,[DetermineAge=12]
17,[DetermineAge=4]
18,[DetermineAge=1]
19,[DetermineAge=8]
20,{Stop~ERROR Determine Age}

### NEW CLASS ###
:DetermineAgeClass
1,[DetermineAgeClass2=%Race%]
2,[DetermineAgeClass1=%Race%]
3,[DetermineAgeClass2=%Race%]
4-6,[DetermineAgeClass3=%Race%]
7-8,[DetermineAgeClass2=%Race%]
9-10,[DetermineAgeClass1=%Race%]
11-12,[DetermineAgeClass3=%Race%]
13,[DetermineAgeClass2=%Race%]
14,[DetermineAgeClass1=%Race%]
15-16,[DetermineAgeClass2=%Race%]

# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
### NEW CLASS ### NEW RACE ###
# Bbn, Rog, Sor, Com
:DetermineAgeClass1
1,|Age+{Dice~1d4}|[AgeMod1]
2,|Age+{Dice~3d6}|[AgeMod1]
3,|Age+{Dice~4d6}|[AgeMod1]
4,|Age+{Dice~4d6}|[AgeMod1]
5,|Age+{Dice~1d6}|[AgeMod1]
6,|Age+{Dice~1d4}|[AgeMod1]
7,|Age+{Dice~2d4}|[AgeMod1]
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
8,[DetermineAgeClass1=1]
9-10,[DetermineAgeClass1=3]
11,[DetermineAgeClass1=2]
12,[DetermineAgeClass1=1]
13,[DetermineAgeClass1=6]
14,[DetermineAgeClass1=6]
15,[DetermineAgeClass1=6]
16,[DetermineAgeClass1=6]
17,[DetermineAgeClass1=4]
18,[DetermineAgeClass1=6]
19,[DetermineAgeClass1=1]
20,{Stop~ERROR DetermineAgeClass1}

:AgeMod1
#1,|Age+{Trunc~{Calc~{Dice~2d%CharacterLevel%-2}*%AgeLevelMult%}}|
1,|Temp1={Trunc~{Calc~{Dice~2d%CharacterLevel%-2}*%AgeLevelMult%}}|{If~{Param~Heroic,%Heroic%}=Heroic?|Temp1\2|}|Age+%Temp1%|

# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
### NEW CLASS ### NEW RACE ###
# Brd, Ftr, Pal, Rng, Ari, Exp, War
:DetermineAgeClass2
1,|Age+{Dice~1d6}|[AgeMod2]
2,|Age+{Dice~5d6}|[AgeMod2]
3,|Age+{Dice~6d6}|[AgeMod2]
4,|Age+{Dice~6d6}|[AgeMod2]
5,|Age+{Dice~2d6}|[AgeMod2]
6,|Age+{Dice~1d6}|[AgeMod2]
7,|Age+{Dice~3d6}|[AgeMod2]
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
8,[DetermineAgeClass2=1]
9-10,[DetermineAgeClass2=3]
11,[DetermineAgeClass2=2]
12,[DetermineAgeClass2=1]
13,[DetermineAgeClass2=6]
14,[DetermineAgeClass2=6]
15,[DetermineAgeClass2=6]
16,[DetermineAgeClass2=6]
17,[DetermineAgeClass2=4]
18,[DetermineAgeClass2=6]
19,[DetermineAgeClass2=1]
20,{Stop~ERROR DetermineAgeClass2}

:AgeMod2
#1,|Age+{Trunc~{Calc~{Dice~3d%CharacterLevel%-3}*%AgeLevelMult%}}|
1,|Temp1={Trunc~{Calc~{Dice~3d%CharacterLevel%-3}*%AgeLevelMult%}}|{If~{Param~Heroic,%Heroic%}=Heroic?|Temp1\2|}|Age+%Temp1%|

# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
### NEW CLASS ### NEW RACE ###
# Clr, Drd, Mnk, Wiz, Adp
:DetermineAgeClass3
1,|Age+{Dice~2d6}|[AgeMod3]
2,|Age+{Dice~7d6}|[AgeMod3]
3,|Age+{Dice~10d6}|[AgeMod3]
4,|Age+{Dice~9d6}|[AgeMod3]
5,|Age+{Dice~3d6}|[AgeMod3]
6,|Age+{Dice~2d6}|[AgeMod3]
7,|Age+{Dice~4d6}|[AgeMod3]
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
8,[DetermineAgeClass3=1]
9-10,[DetermineAgeClass3=3]
11,[DetermineAgeClass3=2]
12,[DetermineAgeClass3=1]
13,[DetermineAgeClass3=6]
14,[DetermineAgeClass3=6]
15,[DetermineAgeClass3=6]
16,[DetermineAgeClass3=6]
17,[DetermineAgeClass3=4]
18,[DetermineAgeClass3=6]
19,[DetermineAgeClass3=1]
20,{Stop~ERROR DetermineAgeClass3}

:AgeMod3
#1,|Age+{Trunc~{Calc~{Dice~4d%CharacterLevel%-4}*%AgeLevelMult%}}|
1,|Temp1={Trunc~{Calc~{Dice~4d%CharacterLevel%-4}*%AgeLevelMult%}}|{If~{Param~Heroic,%Heroic%}=Heroic?|Temp1\2|}|Age+%Temp1%|

:DetermineAgeMod
1,|AgeModAttributes=1|
_[FontB=2]
_{If~%Age%>=%AgeVen%?{If~%TimelessBody%=No?|AgeModAttributes=4|}
_/{If~%Age%>=%AgeOld%?{If~%TimelessBody%=No?|AgeModAttributes=3|}
_/{If~%Age%>=%AgeMid%?{If~%TimelessBody%=No?|AgeModAttributes=2|}
_}}}[FontE]

:PrintAge
1,{If~%GroupFlag%=2?Age: }
_{If~%Age%>=%AgeVen%?{Color~Red,%Age%}/{If~%Age%>=%AgeOld%?{Color~HotPink,%Age%}/{If~%Age%>=%AgeMid%?{Color~BurlyWood,%Age%}/%Age%}}}
_[ShowAgeMod]
_{If~%TimelessBody%=Yes? [FontB=1]{Color~DarkCyan,Timeless Body}[FontE]}

:ShowAgeMod
1,[FontB=2]
_{If~%Age%>=%AgeVen%?{Color~Red, venerable (max %AgeMax%)}
_/{If~%Age%>=%AgeOld%?{Color~HotPink, old}
_/{If~%Age%>=%AgeMid%?{Color~BurlyWood, mid}
_}}}[FontE]

# ---------------------------------------------------------------------------
#

:FavClassBonus
1,{Loop~%CharacterLevel%,{If~{Dice~1d2}=1?|FavClassSP+1|/|FavClassHP+1|}}
2,|FavClassSP=%CharacterLevel%|
3,|FavClassHP=%CharacterLevel%|
4,[FavClassBonus={Dice~1d2+1}]

# Added March 2006 to Support D&D Non-Standard Point Buy Method (Larry)
# ---------------------------------------------------------------------------
# Attribute Generation Options

:SetAttributes
1,{If~%PointBuyFlag%=5?{If~{Param~Heroic,%Heroic%}=Basic?|PointBuyFlag=6|}
_   /{If~%PointBuyFlag%=6?{If~{Param~Heroic,%Heroic%}=Heroic?|PointBuyFlag=5|}
_}}
_{Reset~RandomAttribute}|WpnSp=0|
_[AttributeGenerationOptions=%PointBuyFlag%]

:AttributeGenerationOptions
1,|Attribute1={Dice~5d3+3}||Attribute2={Dice~5d3+3}||Attribute3={Dice~5d3+3}||Attribute4={Dice~5d3+3}||Attribute5={Dice~5d3+3}||Attribute6={Dice~5d3+3}|
_[AssignAbilities]
# Best 3 of 4d6
2,|Attribute1=[RollScore]||Attribute2=[RollScore]||Attribute3=[RollScore]||Attribute4=[RollScore]||Attribute5=[RollScore]||Attribute6=[RollScore]|
_[AssignAbilities]
# All 3d6
3,|Attribute1={Dice~3d6}||Attribute2={Dice~3d6}||Attribute3={Dice~3d6}||Attribute4={Dice~3d6}||Attribute5={Dice~3d6}||Attribute6={Dice~3d6}|
_[AssignAbilities]
# Point Buy Method
#4,|Points={InputText~25,Input the Desired Point Buy Value for the Campaign:<br>Low-Power (15), Challenging (22), Standard (25), Tough (28), High-Power (32)}|
4,|Points={InputText~25,Input the Desired Point Buy Value for the Campaign:<br>Low Fantasy (10), Standard Fantasy (15), High Fantasy (20), Epic Fantasy (25)}|
_[GenerateAttributesByPointBuyMethod]
# Elite Array (15 14 13 12 10 8)
5,|Attribute1=15||Attribute2=14||Attribute3=13||Attribute4=12||Attribute5=10||Attribute6=8|
_[AssignAbilities]
# NPC Array (13 12 11 10 9 8)
6,|Attribute1=13||Attribute2=12||Attribute3=11||Attribute4=10||Attribute5=9||Attribute6=8|
_[AssignAbilities]
# All 10's
7,|Attribute1=10||Attribute2=10||Attribute3=10||Attribute4=10||Attribute5=10||Attribute6=10|
_[AssignAbilities]

:RollScore
1,|Die1={Dice~1d6}||Die2={Dice~1d6}||Die3={Dice~1d6}||Die4={Dice~1d6}|
_|LowRoll={Min~%Die1%,%Die2%,%Die3%,%Die4%}|
_|TotalDie=0|
_|TotalDie+%Die1%||TotalDie+%Die2%||TotalDie+%Die3%||TotalDie+%Die4%|
_|TotalDie-%LowRoll%|
_%TotalDie%

:GenerateAttributesByPointBuyMethod
1,|TempNumber=0||TempPoints=%Points%||AttributeCount=6||CostValue=0|
_|Attribute1=0||Attribute2=0||Attribute3=0||Attribute4=0||Attribute5=0||Attribute6=0|
_|RunningTotal=%Points%|
_{While~%AttributeCount%,[GenAttribute]}
_{If~%RunningTotal%=0?[AssignAbilities]/[GenerateAttributesByPointBuyMethod]}

:GenAttribute
1,|TempPoints+1||TempNumber={Dice~1d%TempPoints%}|
_{If~{And~%AttributeCount%>=5,{Dice~1d3}=1}=1?[DetermineCostValueLowAbility={Dice~1d7}]/[DetermineCostValue=%TempNumber%]}
_|TempPoints-%CostValue%||AttributeCount-1||TempPoints-1||RunningTotal-%CostValue%|

:GenAttribute3E
1,|TempPoints+1||TempNumber={Dice~1d%TempPoints%}|[DetermineCostValue=%TempNumber%]|TempPoints-%CostValue%|
_|AttributeCount-1||TempPoints-1||RunningTotal-%CostValue%|

:DetermineCostValue
1,|CostValue=0||Attribute%AttributeCount%=10|
2,|CostValue=1||Attribute%AttributeCount%=11|
3,|CostValue=2||Attribute%AttributeCount%=12|
4-5,|CostValue=3||Attribute%AttributeCount%=13|
6-7,|TempNumber=7||CostValue=5||Attribute%AttributeCount%=14|
8-10,|TempNumber=9||CostValue=7||Attribute%AttributeCount%=15|
11-13,|TempNumber=11||CostValue=10||Attribute%AttributeCount%=16|
14-17,|TempNumber=14||CostValue=13||Attribute%AttributeCount%=17|
18-100,|TempNumber=17||CostValue=17||Attribute%AttributeCount%=18|

:DetermineCostValue3E
1,|CostValue=0||Attribute%AttributeCount%=8|
2,|CostValue=1||Attribute%AttributeCount%=9|
3,|CostValue=2||Attribute%AttributeCount%=10|
4,|CostValue=3||Attribute%AttributeCount%=11|
5,|CostValue=4||Attribute%AttributeCount%=12|
6,|CostValue=5||Attribute%AttributeCount%=13|
7-8,|TempNumber=7||CostValue=6||Attribute%AttributeCount%=14|
9-10,|TempNumber=9||CostValue=8||Attribute%AttributeCount%=15|
11-13,|TempNumber=11||CostValue=10||Attribute%AttributeCount%=16|
14-16,|TempNumber=14||CostValue=13||Attribute%AttributeCount%=17|
17-100,|TempNumber=17||CostValue=16||Attribute%AttributeCount%=18|

:DetermineCostValueLowAbility
1,|CostValue=-4||Attribute%AttributeCount%=7|
2-3,|CostValue=-2||Attribute%AttributeCount%=8|
4-7,|CostValue=-1||Attribute%AttributeCount%=9|

# ------------------------
# Attributes are sorted from highest to lowest (1 to 6)
:AssignAbilities
1,|TempSort=%Attribute1%;%Attribute2%;%Attribute3%;%Attribute4%;%Attribute5%;%Attribute6%|
_|TempSort={OrderDesc~";",%TempSort%}|
_{Split~TempSort,";",Attribute1,Attribute2,Attribute3,Attribute4,Attribute5,Attribute6}
_[AssignAbilitiesbyClass=%Class%]
_[AdjustAbilitiesbyRace=%Race%]
# Add +1 at level 4, 8, 12, 16, 20
_|LevelMod=|
_{If~%CharacterLevel%>=4?|AddAb=1|[AddOneAb_{Param~Class,%Class%}]
_   {If~%CharacterLevel%>=8?|LevelMod&, |[AddOneAb_{Param~Class,%Class%}]
_   {If~%CharacterLevel%>=12?|LevelMod&, |[AddOneAb_{Param~Class,%Class%}]
_   {If~%CharacterLevel%>=16?|LevelMod&, |[AddOneAb_{Param~Class,%Class%}]
_   {If~%CharacterLevel%>=20?|LevelMod&, |[AddOneAb_{Param~Class,%Class%}]
_}}}}}

### NEW CLASS ###
# Modified to give a wider range of abilities chosen by the NPCs ... not all NPCs are created equal.
:AssignAbilitiesbyClass
# Fighter
1,|STR=[RandomAttribute]||CON=[RandomAttribute]||DEX=[RandomAttribute]||WIS=[RandomAttribute]||CHA=[RandomAttribute]||INT=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|STR+2|}
#Barbarian
2,|CON=[RandomAttribute]||STR=[RandomAttribute]||DEX=[RandomAttribute]||WIS=[RandomAttribute]||CHA=[RandomAttribute]||INT=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|CON+2|}
#Bard
3,|CHA=[RandomAttribute]||DEX=[RandomAttribute]||WIS=[RandomAttribute]||CON=[RandomAttribute]||INT=[RandomAttribute]||STR=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|CHA+2|}
#Cleric
4,|WIS=[RandomAttribute]||CHA=[RandomAttribute]||STR=[RandomAttribute]||CON=[RandomAttribute]||DEX=[RandomAttribute]||INT=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|WIS+2|}
#Druid
5,|WIS=[RandomAttribute]||DEX=[RandomAttribute]||CON=[RandomAttribute]||STR=[RandomAttribute]||CHA=[RandomAttribute]||INT=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|WIS+2|}
#Monk
6,|WIS=[RandomAttribute]||DEX=[RandomAttribute]||STR=[RandomAttribute]||CON=[RandomAttribute]||CHA=[RandomAttribute]||INT=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|WIS+2|}
#Paladin
7,|CHA=[RandomAttribute]||WIS=[RandomAttribute]||STR=[RandomAttribute]||DEX=[RandomAttribute]||CON=[RandomAttribute]||INT=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|CHA+2|}
#Ranger
8,|WIS=[RandomAttribute]||DEX=[RandomAttribute]||STR=[RandomAttribute]||CON=[RandomAttribute]||INT=[RandomAttribute]||CHA=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|WIS+2|}
#Rogue
9,|DEX=[RandomAttribute]||INT=[RandomAttribute]||CHA=[RandomAttribute]||CON=[RandomAttribute]||WIS=[RandomAttribute]||STR=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|DEX+2|}
#Sorcerer
10,|CHA=[RandomAttribute]||DEX=[RandomAttribute]||INT=[RandomAttribute]||WIS=[RandomAttribute]||CON=[RandomAttribute]||STR=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|CHA+2|}
#Wizard
11,|INT=[RandomAttribute]||DEX=[RandomAttribute]||WIS=[RandomAttribute]||CON=[RandomAttribute]||CHA=[RandomAttribute]||STR=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|INT+2|}
# Adept
12,|WIS=[RandomAttribute]||CHA=[RandomAttribute]||STR=[RandomAttribute]||INT=[RandomAttribute]||CON=[RandomAttribute]||DEX=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|WIS+2|}
# Aristocrat
13,|CHA=[RandomAttribute]||DEX=[RandomAttribute]||INT=[RandomAttribute]||STR=[RandomAttribute]||WIS=[RandomAttribute]||CON=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|CHA+2|}
# Commoner
14,|CON=[RandomAttribute]||STR=[RandomAttribute]||WIS=[RandomAttribute]||DEX=[RandomAttribute]||INT=[RandomAttribute]||CHA=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|CON+2|}
# Expert
15,[ExpertAbilities=%ExpertTypeCode%]
# Warrior
16,|STR=[RandomAttribute]||CON=[RandomAttribute]||DEX=[RandomAttribute]||WIS=[RandomAttribute]||CHA=[RandomAttribute]||INT=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|STR+2|}

### NEW CLASS ### Expert
:ExpertAbilities
1-2,|INT=[RandomAttribute]||DEX=[RandomAttribute]||STR=[RandomAttribute]||CON=[RandomAttribute]||CHA=[RandomAttribute]||WIS=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|INT+2|}
# Blacksmith
3,|STR=[RandomAttribute]||INT=[RandomAttribute]||CON=[RandomAttribute]||WIS=[RandomAttribute]||DEX=[RandomAttribute]||CHA=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|STR+2|}
# Courtesan
4,|CHA=[RandomAttribute]||DEX=[RandomAttribute]||INT=[RandomAttribute]||WIS=[RandomAttribute]||CON=[RandomAttribute]||STR=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|CHA+2|}
# Fence
5,|INT=[RandomAttribute]||CHA=[RandomAttribute]||DEX=[RandomAttribute]||WIS=[RandomAttribute]||CON=[RandomAttribute]||STR=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|INT+2|}
# Jeweller
6,|INT=[RandomAttribute]||DEX=[RandomAttribute]||WIS=[RandomAttribute]||CHA=[RandomAttribute]||CON=[RandomAttribute]||STR=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|INT+2|}
# Pawnbroker
7,|CHA=[RandomAttribute]||INT=[RandomAttribute]||STR=[RandomAttribute]||WIS=[RandomAttribute]||DEX=[RandomAttribute]||CON=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|CHA+2|}
# Sage_Scholar
8,|INT=[RandomAttribute]||WIS=[RandomAttribute]||DEX=[RandomAttribute]||CON=[RandomAttribute]||STR=[RandomAttribute]||CHA=[RandomAttribute]|
_{If~{And~%CohortGen%=Yes,{And~{Param~Race,%RaceMaster%}=Human,%SubraceMaster%=Imperious}=1}=1?|INT+2|}

;!RandomAttribute
50,%Attribute1%
25,%Attribute2%
12,%Attribute3%
7,%Attribute4%
4,%Attribute5%
2,%Attribute6%

# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
### NEW RACE ###
### NEW SUBRACE ###
:AdjustAbilitiesbyRace
1,|AddAb=2|[AddOneAb_{Param~Class,%Class%}]
2,{If~%Subrace%=Aquatic?|STR+2||DEX-2||CON+2||WIS+2||CHA-2||RacialMod=+2 Str/Con/Wis, -2 Dex/Cha|
_/{If~%Subrace%=Arctic?|STR+2||DEX-2||CON+2||WIS+2||CHA-2||RacialMod=+2 Str/Con/Wis, -2 Dex/Cha|
_/{If~%Subrace%=Desert?|CON+2||WIS+2||DEX-2||RacialMod=+2 Con/Wis, -2 Dex|
_/|CON+2||WIS+2||CHA-2||RacialMod=+2 Con/Wis, -2 Cha|
_}}}
3,{If~%Subrace%=Desert?|DEX+2||STR-2||CON+2||RacialMod=+2 Dex/Con, -2 Str|
_/{If~%Subrace%=Gray?|STR-2||DEX+2||CON-2||INT+4||RacialMod=+2 Dex, +4 Int, -2 Str/Con|
_/{If~%Subrace%=Wild?|DEX+2||CON+2||INT-2||RacialMod=+2 Con/Dex, -2 Int|
_/{If~%Subrace%=Wood?|STR+2||DEX+2||CON-2||RacialMod=+2 Str/Dex, -2 Con|
_/|DEX+2||CON-2||INT+2||RacialMod=+2 Dex/Int, -2 Con|
_}}}}
4,|STR-2||CON+2||CHA+2||RacialMod=+2 Con/Cha, -2 Str|
5,|AddAb=2|[AddOneAb_{Param~Class,%Class%}]
6,|AddAb=2|[AddOneAb_{Param~Class,%Class%}]
7,|STR-2||DEX+2||CHA+2||RacialMod=+2 Dex/Cha, -2 Str|
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
8,|WIS+2||CHA+2||RacialMod=+2 Wis/Cha|
9,|DEX+2||CON-2||CHA+2||RacialMod=+2 Dex/Cha, -2 Con|
10,|DEX+4||CON-2||INT+2||WIS+2||CHA+2||RacialMod=+4 Dex, +2 Int/Wis/Cha, -2 Con|
11,|CON+2||WIS+2||CHA-4||RacialMod=+2 Con/Wis, -4 Cha|
12,{If~%Subrace%=Aquatic?|STR-2||CON+2||DEX+2||CHA-2||RacialMod=+2 Con/Dex, -2 Str/Cha|
_/{If~%Subrace%=Arctic?|STR-2||CON+2||DEX+2||CHA-2||RacialMod=+2 Con/Dex, -2 Str/Cha|
_/|STR-2||DEX+4||CHA-2||RacialMod=+4 Dex, -2 Str/Cha|
_}}
13,|DEX+2||CON+2||RacialMod=+2 Dex/Con|
14,{If~%Subrace%=Uwe's Clan?|STR-4||CON-2||INT+2||WIS+2||RacialMod=+2 Int/Wis, -4 Str, -2 Con|
_/{If~%Subrace%=Arctic?|STR-2||DEX+2||CON-2||WIS-2||RacialMod=+2 Dex, -2 Str/Con/Wis|
_/{If~%Subrace%=Desert?|STR-4||DEX+2||WIS-2||RacialMod=+2 Dex, -4 Str, -2 Wis|
_/|STR-4||DEX+2||CON-2||RacialMod=+2 Dex, -4 Str, -2 Con|
_}}}
15,|DEX+2||CON+2||CHA+2||RacialMod=+2 Dex/Con/Cha|
16,|STR+4||INT-2||WIS-2||CHA-2||RacialMod=+4 Str, -2 Int/Wis/Cha|
17,|STR-2||DEX+2||WIS+2||CHA-4||RacialMod=+2 Dex/Wis, -2 Str, -4 Cha|
18,|DEX+2||CON-2||WIS+2||RacialMod=+2 Dex/Wis, -2 Con|
19,|DEX+2||INT+2||CHA-2||RacialMod=+2 Dex/Int, -2 Cha|
#X,|STR+||DEX+||CON+||INT+||WIS+||CHA+||RacialMod=|
20,{Stop~ERROR AdjustAbilitiesbyRace}

### NEW CLASS ###
;AddOneAb_XXX
1,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
1,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
1,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
1,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Fighter
3,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
2,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
2,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
1,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}
1,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}

;AddOneAb_Adept
1,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
1,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
5,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
3,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Aristocrat
1,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
2,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
2,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
1,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
5,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Barbarian
2,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
2,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
3,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
1,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
1,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Bard
1,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
2,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
2,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
5,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Cleric
2,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
1,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
5,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
2,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Commoner
1,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
1,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
1,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
1,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Druid
1,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
2,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
2,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
5,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
1,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Expert
1,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
1,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
3,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
1,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
1,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Monk
2,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
2,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
3,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
1,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Paladin
2,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
1,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
4,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
4,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Ranger
2,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
2,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
4,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
1,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Rogue
1,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
3,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
2,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
1,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
2,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Sorcerer
1,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
2,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
2,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
1,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
5,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

;AddOneAb_Warrior
3,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
2,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
2,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
1,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
1,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}
1,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}

;AddOneAb_Wizard
1,|STR+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Str|/|LevelMod&+1 Str|}
2,|DEX+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Dex|/|LevelMod&+1 Dex|}
1,|CON+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Con|/|LevelMod&+1 Con|}
5,|INT+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Int|/|LevelMod&+1 Int|}
2,|WIS+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Wis|/|LevelMod&+1 Wis|}
1,|CHA+%AddAb%|{If~%AddAb%=2?|RacialMod=+2 Cha|/|LevelMod&+1 Cha|}

:CasterMinStatChoice
1,|CasterMinStatSet=No|[CasterMinStatChoice{Param~Class,%Class%}=%CharacterLevel%]
2,|CasterMinStatSet=No|{If~{Param~Heroic,%Heroic%}=Heroic?[CasterMinStatChoice=3]/[CasterMinStatChoice{Param~Class,%Class%}=%CharacterLevel%]}
3,|CasterMinStatSet=No|{If~{Dice~1d100}<=%CasterMinStatChance%?|CasterMinStatSet=Yes|}
_[CasterMinStatChoice{Param~Class,%Class%}=%CharacterLevel%]

### NEW CLASS ###
:CasterMinStatChoiceFighter
1-100,

:CasterMinStatChoiceAdept
1-3,|CasterMinStat=11|{If~%CasterMinStatSet%=Yes?|WIS>12|/|WIS>12|}
4-7,|CasterMinStat=12|{If~%CasterMinStatSet%=Yes?|WIS>12|/|WIS>12|}
8-11,|CasterMinStat=13|{If~%CasterMinStatSet%=Yes?|WIS>13|/|WIS>12|}
12-15,|CasterMinStat=14|{If~%CasterMinStatSet%=Yes?|WIS>14|/|WIS>12|}
16-100,|CasterMinStat=15|{If~%CasterMinStatSet%=Yes?|WIS>15|/|WIS>12|}

:CasterMinStatChoiceAristocrat
1-100,

:CasterMinStatChoiceBarbarian
1-100,

:CasterMinStatChoiceBard
1-3,|CasterMinStat=11|{If~%CasterMinStatSet%=Yes?|CHA>12|/|CHA>12|}
4-6,|CasterMinStat=12|{If~%CasterMinStatSet%=Yes?|CHA>12|/|CHA>12|}
7-9,|CasterMinStat=13|{If~%CasterMinStatSet%=Yes?|CHA>13|/|CHA>12|}
10-12,|CasterMinStat=14|{If~%CasterMinStatSet%=Yes?|CHA>14|/|CHA>12|}
13-15,|CasterMinStat=15|{If~%CasterMinStatSet%=Yes?|CHA>15|/|CHA>12|}
16-100,|CasterMinStat=16|{If~%CasterMinStatSet%=Yes?|CHA>16|/|CHA>12|}

:CasterMinStatChoiceCleric
1-2,|CasterMinStat=11|{If~%CasterMinStatSet%=Yes?|WIS>12|/|WIS>12|}
3-4,|CasterMinStat=12|{If~%CasterMinStatSet%=Yes?|WIS>12|/|WIS>12|}
5-6,|CasterMinStat=13|{If~%CasterMinStatSet%=Yes?|WIS>13|/|WIS>12|}
7-8,|CasterMinStat=14|{If~%CasterMinStatSet%=Yes?|WIS>14|/|WIS>12|}
9-10,|CasterMinStat=15|{If~%CasterMinStatSet%=Yes?|WIS>15|/|WIS>12|}
11-12,|CasterMinStat=16|{If~%CasterMinStatSet%=Yes?|WIS>16|/|WIS>12|}
13-14,|CasterMinStat=17|{If~%CasterMinStatSet%=Yes?|WIS>17|/|WIS>12|}
15-16,|CasterMinStat=18|{If~%CasterMinStatSet%=Yes?|WIS>18|/|WIS>12|}
17-100,|CasterMinStat=19|{If~%CasterMinStatSet%=Yes?|WIS>19|/|WIS>12|}

:CasterMinStatChoiceCommoner
1-100,

:CasterMinStatChoiceDruid
1-100,[CasterMinStatChoiceCleric=%CharacterLevel%]

:CasterMinStatChoiceExpert
1-100,

:CasterMinStatChoiceMonk
1-100,

:CasterMinStatChoicePaladin
1-4,
5-7,|CasterMinStat=11|{If~%CasterMinStatSet%=Yes?|WIS>12|/|WIS>12|}
8-10,|CasterMinStat=12|{If~%CasterMinStatSet%=Yes?|WIS>12|/|WIS>12|}
11-13,|CasterMinStat=13|{If~%CasterMinStatSet%=Yes?|WIS>13|/|WIS>12|}
14-100,|CasterMinStat=14|{If~%CasterMinStatSet%=Yes?|WIS>14|/|WIS>12|}

:CasterMinStatChoiceRanger
1-100,[CasterMinStatChoicePaladin=%CharacterLevel%]

:CasterMinStatChoiceRogue
1-100,

:CasterMinStatChoiceSorcerer
1-3,|CasterMinStat=11|{If~%CasterMinStatSet%=Yes?|CHA>12|/|CHA>12|}
4-5,|CasterMinStat=12|{If~%CasterMinStatSet%=Yes?|CHA>12|/|CHA>12|}
6-7,|CasterMinStat=13|{If~%CasterMinStatSet%=Yes?|CHA>13|/|CHA>12|}
8-9,|CasterMinStat=14|{If~%CasterMinStatSet%=Yes?|CHA>14|/|CHA>12|}
10-11,|CasterMinStat=15|{If~%CasterMinStatSet%=Yes?|CHA>15|/|CHA>12|}
12-13,|CasterMinStat=16|{If~%CasterMinStatSet%=Yes?|CHA>16|/|CHA>12|}
14-15,|CasterMinStat=17|{If~%CasterMinStatSet%=Yes?|CHA>17|/|CHA>12|}
16-17,|CasterMinStat=18|{If~%CasterMinStatSet%=Yes?|CHA>18|/|CHA>12|}
18-100,|CasterMinStat=19|{If~%CasterMinStatSet%=Yes?|CHA>19|/|CHA>12|}

:CasterMinStatChoiceWarrior
1-100,

:CasterMinStatChoiceWizard
1-2,|CasterMinStat=11|{If~%CasterMinStatSet%=Yes?|INT>12|/|INT>12|}
3-4,|CasterMinStat=12|{If~%CasterMinStatSet%=Yes?|INT>12|/|INT>12|}
5-6,|CasterMinStat=13|{If~%CasterMinStatSet%=Yes?|INT>13|/|INT>12|}
7-8,|CasterMinStat=14|{If~%CasterMinStatSet%=Yes?|INT>14|/|INT>12|}
9-10,|CasterMinStat=15|{If~%CasterMinStatSet%=Yes?|INT>15|/|INT>12|}
11-12,|CasterMinStat=16|{If~%CasterMinStatSet%=Yes?|INT>16|/|INT>12|}
13-14,|CasterMinStat=17|{If~%CasterMinStatSet%=Yes?|INT>17|/|INT>12|}
15-16,|CasterMinStat=18|{If~%CasterMinStatSet%=Yes?|INT>18|/|INT>12|}
17-100,|CasterMinStat=19|{If~%CasterMinStatSet%=Yes?|INT>19|/|INT>12|}

# ------------------------
:DetermineAttributesAgeMod
1,
2,|STR-1||DEX-1||CON-1||INT+1||WIS+1||CHA+1|
3,|STR-3||DEX-3||CON-3||INT+2||WIS+2||CHA+2|
4,|STR-6||DEX-6||CON-6||INT+3||WIS+3||CHA+3|

:DetermineAttributeBonuses
1,|STRBonus={IIf~%STR%>=10?{Trunc~{Calc~(%STR%-10)/2}}:{Floor~{Calc~(%STR%-10)/2}}}|
_|DEXBonus={IIf~%DEX%>=10?{Trunc~{Calc~(%DEX%-10)/2}}:{Floor~{Calc~(%DEX%-10)/2}}}|
_|CONBonus={IIf~%CON%>=10?{Trunc~{Calc~(%CON%-10)/2}}:{Floor~{Calc~(%CON%-10)/2}}}|
_|INTBonus={IIf~%INT%>=10?{Trunc~{Calc~(%INT%-10)/2}}:{Floor~{Calc~(%INT%-10)/2}}}|
_|WISBonus={IIf~%WIS%>=10?{Trunc~{Calc~(%WIS%-10)/2}}:{Floor~{Calc~(%WIS%-10)/2}}}|
_|CHABonus={IIf~%CHA%>=10?{Trunc~{Calc~(%CHA%-10)/2}}:{Floor~{Calc~(%CHA%-10)/2}}}|

:DetermineFAMAttributeBonuses
1,{If~{And~{Param~Race,%Race%}=Human,%Subrace%=Imperious}=1?[AddPlusTwoModifier]}
_[DetermineAttributeBonuses]

;AddPlusTwoModifier
1,|STR+2|
5,|DEX+2|
1,|CON+2|
5,|INT+2|
3,|WIS+2|
1,|CHA+2|

# ---------------------------------------------------------------------------
# Alignment Determination

### NEW CLASS ### 
#  1=Fighter     2=Barbarian  3=Bard     4=Cleric     5=Druid    6=Monk  
#  7=Paladin     8=Ranger     9=Rogue   10=Sorcerer  11=Wizard  12=Adept
# 13=Aristocrat 14=Commoner  15=Expert  16=Warrior   17=Random
:DetermineAlignment
1,[MainAlignmentBranch=1]
2,[MainAlignmentBranch=5]
3-4,[MainAlignmentBranch=1]
5,[MainAlignmentBranch=9]
6,[MainAlignmentBranch=4]
7,|AlignmentChoice=1||AlignmentType=Good|
8-16,[MainAlignmentBranch=1]

:MainAlignmentBranch
#(Any)
1,|TempNumber={Dice~1d9}|
_{If~%RacialAL%=0?[AlignmentBranchAny=%TempNumber%]/|TempNumber=[ENC Ultimate Random Encounter.%RacialAL%]|[SetAlignmentChoice]}
#(Lawful Good)
2,|TempNumber=1|[AlignmentBranchGood=%TempNumber%]
#(Good)
3,|TempNumber={Dice~1d3}|[AlignmentBranchGood=%TempNumber%]
#(Any Lawful)
4,{If~{Find~1,E,%RacialAL%}>0?{If~{Dice~1d6}=1?|TempNumber={Dice~1d3}|/|TempNumber=3|}
_/{If~{Find~1,G,%RacialAL%}>0?{If~{Dice~1d6}=1?|TempNumber={Dice~1d3}|/|TempNumber=1|}
_/|TempNumber={Dice~1d3}|
_}}
_[AlignmentBranchLawful=%TempNumber%]
#(Any non-lawful)
5,{If~{Find~1,E,%RacialAL%}>0?{If~{Dice~1d6}=1?|TempNumber={Dice~1d6+3}|/|TempNumber={IIf~{Dice~1d2}=1?6:9}|}
_/{If~{Find~1,G,%RacialAL%}>0?{If~{Dice~1d6}=1?|TempNumber={Dice~1d6+3}|/|TempNumber={IIf~{Dice~1d2}=1?4:7}|}
_/|TempNumber={Dice~1d6+3}|
_}}
_[AlignmentBranchAny=%TempNumber%]
#(Any)
6,|TempNumber={Dice~1d9}|
_{If~%RacialAL%=0?[AlignmentBranchAny=%TempNumber%]/|TempNumber=[ENC Ultimate Random Encounter.%RacialAL%]|[SetAlignmentChoice]}
#(Neutral) 
7,{If~{Find~1,E,%RacialAL%}>0?{If~{Dice~1d6}=1?|TempNumber={Dice~1d3}|/|TempNumber=3|}
_/{If~{Find~1,G,%RacialAL%}>0?{If~{Dice~1d6}=1?|TempNumber={Dice~1d3}|/|TempNumber=1|}
_/|TempNumber={Dice~1d3}|
_}}
_[AlignmentBranchNeutral=%TempNumber%]
#(Any but Lawful Good)
8,{If~{Find~1,E,%RacialAL%}>0?{If~{Dice~1d6}=1?|TempNumber={Dice~1d8+1}|[AlignmentBranchAny=%TempNumber%]/[AlignmentBranchEvil]}
_/{If~{Find~1,G,%RacialAL%}>0?{If~{Dice~1d6}=1?|TempNumber={Dice~1d8+1}|[AlignmentBranchAny=%TempNumber%]/|TempNumber={Dice~1d2+1}|[AlignmentBranchGood=%TempNumber%]}
_/|TempNumber={Dice~1d8+1}|[AlignmentBranchAny=%TempNumber%]
_}}
#(Any Neutral) 
9,{If~{Find~1,E,%RacialAL%}>0?{If~{Dice~1d6}=1?|TempNumber={Dice~1d5}|/|TempNumber=4|}
_/{If~{Find~1,G,%RacialAL%}>0?{If~{Dice~1d6}=1?|TempNumber={Dice~1d5}|/|TempNumber=2|}
_/|TempNumber={Dice~1d5}|
_}}
_[AlignmentBranchAnyNeutral=%TempNumber%]

:AlignmentBranchGood
1,|AlignmentChoice=1||AlignmentType=Good|
2,|AlignmentChoice=4||AlignmentType=Good|
3,|AlignmentChoice=7||AlignmentType=Good|

:AlignmentBranchLawful
1,|AlignmentChoice=1||AlignmentType=Good|
2,|AlignmentChoice=2|
3,|AlignmentChoice=3||AlignmentType=Evil|

:AlignmentBranchChaotic
1,|AlignmentChoice=7||AlignmentType=Good|
2,|AlignmentChoice=8|
3,|AlignmentChoice=9||AlignmentType=Evil|

:AlignmentBranchEvil
1,|AlignmentChoice=3||AlignmentType=Evil|
2,|AlignmentChoice=6||AlignmentType=Evil|
3,|AlignmentChoice=9||AlignmentType=Evil|

:AlignmentBranchNeutral
1,|AlignmentChoice=2|
2,|AlignmentChoice=5|
3,|AlignmentChoice=8|

:AlignmentBranchAnyNeutral
1,|AlignmentChoice=2|
2,|AlignmentChoice=4||AlignmentType=Good|
3,|AlignmentChoice=5|
4,|AlignmentChoice=6||AlignmentType=Evil|
5,|AlignmentChoice=8|

:AlignmentBranchAny
# LG LN LW
1,|AlignmentChoice=1||AlignmentType=Good|
2,|AlignmentChoice=2|
3,|AlignmentChoice=3||AlignmentType=Evil|
# NG NN NE
4,|AlignmentChoice=4||AlignmentType=Good|
5,|AlignmentChoice=5|
6,|AlignmentChoice=6||AlignmentType=Evil|
# CG CN CE
7,|AlignmentChoice=7||AlignmentType=Good|
8,|AlignmentChoice=8|
9,|AlignmentChoice=9||AlignmentType=Evil|

:SetAlignmentChoice
1,{If~%TempNumber%=LG?[AlignmentBranchAny=1]
_/{If~%TempNumber%=LN?[AlignmentBranchAny=2]
_/{If~%TempNumber%=LE?[AlignmentBranchAny=3]
_/{If~%TempNumber%=NG?[AlignmentBranchAny=4]
_/{If~%TempNumber%=NN?[AlignmentBranchAny=5]
_/{If~%TempNumber%=NE?[AlignmentBranchAny=6]
_/{If~%TempNumber%=CG?[AlignmentBranchAny=7]
_/{If~%TempNumber%=CN?[AlignmentBranchAny=8]
_/{If~%TempNumber%=CE?[AlignmentBranchAny=9]
_}}}}}}}}}

:ShortAlignment
1,LG
2,LN
3,LE
4,NG
5,NN
6,NE
7,CG
8,CN
9,CE

### XXX UNUSED
:Alignment
1,Lawful Good
2,Lawful Neutral
3,Lawful Evil
4,Neutral Good
5,Neutral
6,Neutral Evil
7,Chaotic Good
8,Chaotic Neutral
9,Chaotic Evil

### XXX UNUSED
:AlignmentSpellType
1,Law
2,Chaos
3,Good
4,Evil

# ---------------------------------------------------------------------------
# Random Feats Related (linked with "Pathfinder Feats.tab")
#    Class Feats = Feats generated in this table and forced into "Pathfinder Feats" (ex: Ranger/Monk Class Feats)

:GenerateFeats
1,|ProficientWeapons=0||ExtraFeatsAny=0|
_[GenerateClassFeats=%Class%]
_{If~{And~{Param~Race,%Race%}=Elf,%Subrace%=Savage}=1?{If~{Length~%ClassFeats%}<2?|ClassFeats=Run BONUS|/|ClassFeats&;Run BONUS|}}
### NEW CLASS ### If you want a non-Heroic to have the Leadership feat, add it here.
_{If~%GroupFlag%=1?|LeadershipFeat=2|
_/{If~{And~{Param~Heroic,%Heroic%}=Basic,{Param~Class,%Class%}!=Aristocrat}=1?|LeadershipFeat=2|}
_}
_{If~{Param~Class,%Class%}=Commoner?|LeadershipFeat=2|}
_{If~{Length~%ClassFeats%}<2?|ClassFeats=99|}
### NEW CLASS ### NEW RACE ###
# 99,99 ... 2 = NO to Choose the weapon of Weapon Focus
_|TempString=[Pathfinder Feats.GenerateFeats(%Race%,%Subrace%,%Class%,%CharacterLevel%,%STR%,%DEX%,%CON%,%INT%,%WIS%,%CHA%,%MeleeWeaponID%,99,99,2,%ExtraFeatsAny%,%ClassFeats%,%LeadershipFeat%,%ExpertTypeCode%,%FeatOptionTemp%,%AL%,%Valminder%)]|
_{Split~TempString,"!",FeatsString,StartingFeats,ProficientWeapons}
_|FeatsAll=%FeatsString%|{If~%StartingFeats%!=None?|FeatsAll&!! %StartingFeats%|}
_|FeatsString={Replace~BONUS,[FontB=1](B)[FontE],%FeatsString%}|
### XXX REMOVE
_|FeatsString={Replace~RACIAL,[FontB=1]{Color~Orange,(R)}[FontE],%FeatsString%}|
_
_|FeatsString={Replace~BSkSF2,(%BSkSF2%),%FeatsString%}|
_|FeatsString={Replace~BSkSF,(%BSkSF%),%FeatsString%}|

### NEW CLASS ###
#  1=Fighter     2=Barbarian  3=Bard    4=Cleric     5=Druid    6=Monk  
#  7=Paladin     8=Ranger     9=Rogue  10=Sorcerer  11=Wizard  12=Adept
# 13=Aristocrat 14=Commoner  15=Expert 16=Warrior   17=Random
:GenerateClassFeats
1-5,
6,[GenerateClassFeatsMonk]
7,
8,[GenerateClassFeatsRanger=%CharacterLevel%]
9,
10,[GenerateClassFeatsSorcerer]
11,[GenerateClassFeatsWizard]
12-16,

# Improved Unarmed Strike is already calculated in "Pathfinder Feats.tab" so it's not included here.
:GenerateClassFeatsMonk
1,|TempNumber=[MonkBonusFeatsNumber=%CharacterLevel%]||Temp2=%TempNumber%|
_|Temp1=[MonkBonusFeats]||MonkFeats=%Temp1%|
_{If~{Length~%ClassFeats%}<2?|ClassFeats=%Temp1% BONUS|/|ClassFeats&;%Temp1% BONUS|}
_|ClassFeats&;Improved Unarmed Strike BONUS;Stunning Fist BONUS|
_|TempNumber-1|
_{While~%TempNumber%,|Temp1=[MonkBonusFeats]||TempNumber-1||MonkFeats&;%Temp1%||ClassFeats&;%Temp1% BONUS|}
_|MonkFeats={OrderAsc~";",%MonkFeats%}|
_|MonkFeats={Replace~;,; ,%MonkFeats%}|
_|MonkFeats={CommaReplace~1,;,%MonkFeats%}|
_|MonkFeats=%Temp2%; %MonkFeats%|

:GenerateClassFeatsRanger
1,
2,|TempNumber={Trunc~{Calc~(((%CharacterLevel%-2)/4)+1)}}||Temp2=%TempNumber%|
_{Reset~RNGCombatStyleBranch2}{Reset~RNGCombatStyleBranch3}
_{Lockout~RNGCombatStyleBranch2,2-8}{Lockout~RNGCombatStyleBranch3,4-11}
_|Temp1=[RNGCombatStyleBranch%RNGCombatStyle%]||RangerFeats=%Temp1%|
_{If~{Length~%ClassFeats%}<2?|ClassFeats=%Temp1% BONUS|/|ClassFeats&;%Temp1% BONUS|}
_|TempNumber-1|
_{While~%TempNumber%,|Temp1=[RNGCombatStyleBranch%RNGCombatStyle%]||TempNumber-1||RangerFeats&;%Temp1%||ClassFeats&;%Temp1% BONUS|}
_|RangerFeats={OrderAsc~";",%RangerFeats%}|
_|RangerFeats={Replace~;,; ,%RangerFeats%}|
_|RangerFeats={CommaReplace~1,;,%RangerFeats%}|
_|RangerFeats=%Temp2%; %RangerFeats%|
3-100,[GenerateClassFeatsRanger=2]
_|ClassFeats&;Endurance BONUS|

# SorcererSpecialQualities
:GenerateClassFeatsSorcerer
1,|BloodlineFeats=|
_{Reset~BF_Aberrant}{Reset~BF_Abyssal}{Reset~BF_Arcane}{Reset~BF_Celestial}{Reset~BF_Destined}
_{Reset~BF_Draconic}{Reset~BF_Elemental}{Reset~BF_Fey}{Reset~BF_Infernal}{Reset~BF_Undead}
_{Lockout~BF_Aberrant,8-9}{Lockout~BF_Abyssal,6-9}{Lockout~BF_Celestial,7-8}{Lockout~BF_Destined,8}
_{Lockout~BF_Fey,7-8}{Lockout~BF_Infernal,8}{Lockout~BF_Undead,8}
_{If~%CharacterLevel%>=7?[GenerateClassFeatsSorcerer2]}

:GenerateClassFeatsSorcerer2
1,|TempNumber=[SorcererSpecialQualitiesFeat=%CharacterLevel%]|
_{While~%TempNumber%,|Temp1=[BF_%Bloodline%]||TempNumber-1|
_{If~{Length~%ClassFeats%}<2?|ClassFeats=%Temp1% BONUS|/|ClassFeats&;%Temp1% BONUS|}
_{If~{Length~%BloodlineFeats%}<2?|BloodlineFeats=%Temp1%|/|BloodlineFeats&;%Temp1%|}
_}
_|BloodlineFeats={OrderAsc~";",%BloodlineFeats%}|
_|BloodlineFeats={Replace~;,; ,%BloodlineFeats%}|
_|BloodlineFeats={CommaReplace~1,;,%BloodlineFeats%}|
_|BloodlineFeats={Replace~$$$$,)),%BloodlineFeats%}|
_|BloodlineFeats={Replace~$$,),%BloodlineFeats%}|
_|BloodlineFeats={Replace~$,(,%BloodlineFeats%}|

# Scribe Scroll is already calculated in "Pathfinder Feats.tab" so it's not included here.
:GenerateClassFeatsWizard
1,{If~{Param~WizardSchool,%WizardSchoolTemp%}=Necromancy?[GenerateClassFeatsWizardNecro]}

:GenerateClassFeatsWizardNecro
1,{If~%AlignmentType%=Evil?|WIZNecPower=1|
_/{If~%AlignmentType%=Good?|WIZNecPower=2|
_/|WIZNecPower={Dice~1d2}|
_}}
_[GenerateClassFeatsWizardNecro2=%WIZNecPower%]
_{If~{Length~%ClassFeats%}<2?|ClassFeats=%WIZNecPowerFeat% BONUS|/|ClassFeats&;%WIZNecPowerFeat% BONUS|}

:GenerateClassFeatsWizardNecro2
1,|WIZNecPowerFeat=Command Undead|
2,|WIZNecPowerFeat=Turn Undead|

:FeatOptionTemp
1,|FeatOptionTemp=1|
2,|FeatOptionTemp=2|
3,{If~{And~%Heroic%=1,{Dice~1d100}=1}=1?|FeatOptionTemp=2|/|FeatOptionTemp=1|}
4,|FeatOptionTemp=4|
5,{If~{And~%Heroic%=1,{Dice~1d100}=1}=1?|FeatOptionTemp=4|/|FeatOptionTemp=1|}

:PrintFeats
# Feats_Special: will add a note to appropriate feats.
1,[Feats_Special]|FSPCharacter=None|{If~%Show%=1?[FeatsSpecial2]}
#XXX _ %FeatsString%.
_ {If~{Length~%FeatsString%}>0?%FeatsString%
_/{If~{And~{Param~Class,%Class%}=Expert,%ExpertTypeCode%=3}=1?Some feats are added in starting feats below/None}
_}.
_{If~%GroupFlag%=2?<br>/ }
_[Tab]<i><u>Class/Race-Granted Feats</u>:</i> %StartingFeats%.
_{If~%ProficientWeapons%!=0?{If~%GroupFlag%=2?<br>/ }[PrintWpn]}

:PrintWpn
1,[Tab]<i><u>Also Proficient with</u>:</i> %ProficientWeapons%.

### NEW FEATS ###
:Feats_Special
1,|Temp1=Deadly Aim||Temp2=[DeadlyAim=%BAB%]|[FSP]
_|Temp1=Power Attack||Temp2=[PowerAttack=%BAB%]|[FSP]
_|Temp1=Power Attack||Temp2=[PowerAttack=%BAB%]|[FSP2]

### NEW FEATS ### Description
:FeatsSpecial2
1,|Temp1=Arcane Armor Mastery||Temp2=SWIFT -20[Percent]|
_{IIf~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1% {Color~Green,[FontB=2](%Temp2%)[FontE]},%FeatsString%}|
_   :|Temp1=Arcane Armor Training||Temp2=SWIFT -10[Percent]|[FSP]
_}
_|Temp1=Arcane Strike||Temp2=SWIFT +{IIf~%CharacterLevel%<5?1:{Trunc~{Calc~((%CharacterLevel%/5)+1)}}} dmg; 1r|[FSP]
_|Temp1=Augment Summoning||Temp2=+4 STR/CON|[FSP]
_|Temp1=Awakened Blood||Temp2=You can activate one more blood power (QKob)|[FSP]
_|Temp1=Bleeding Critical||Temp2=2d6 bleed/rnd; Heal DC15|[FSP]
_|Temp1=Blinding Critical||Temp2=Fort DC{Calc~10+%BAB%}|[FSP]
_|Temp1=Brewmaster||Temp2=+1 DC ingested poison you create|[FSP]
_|Temp1=Bullying Blow||Temp2=STANDARD melee attack at -2; if damage = FREE Intimidate to demoralize|[FSP]
_|Temp1=Burn Burn Burn||Temp2=+1d4 dmg with alchemical fire or non-magical fire (no splash dmg); +4 Reflex to avoid catching fire or to put yourself out when on fire|[FSP]
_|Temp1=Catch Off-Guard||Temp2=no penalties with improvised weapons; foe flat-footed if unarmed|[FSP]
_|Temp1=Cautious Fighter||Temp2=+2 dodge AC in Full Defense|[FSP]
_|Temp1=Close Quarter Fighting||Temp2=When making an AoO vs a combat maneuver = +50[Percent] to the CMB penalty|[FSP]
_|Temp1=Close Order Combat||Temp2=When both allies have this feat they can switch place using a 5-foot move|[FSP]
_|Temp1=Combat Expertise||Temp2=[CombatExpertise=%BAB%]|[FSP]
_|Temp1=Combat Reflexes||Temp2={Calc~(1+%DEXBonus%)} AO|[FSP]
_|Temp1=Cumbrous Fortitude||Temp2=+6 Fort but staggered for encounter|[FSP]
_|Temp1=Cumbrous Reflexes||Temp2=+6 Reflex but prone and dazed|[FSP]
_|Temp1=Cumbrous Will||Temp2=+6 Will but shaken for encounter|[FSP]
_|Temp1=Dazzling Display||Temp2=FULL; Intimidate = demoralize all foes within 30'|[FSP]
_|Temp1=Deadly Stroke||Temp2=STANDARD; vs Stunned[Slash]Flat-Footed = x2 dmg +1 CON bleed|[FSP]
_|Temp1=Deafening Critical||Temp2=Fort DC{Calc~10+%BAB%}; success 1r|[FSP]
_|Temp1=Deflect Arrows||Temp2=FREE 1[Slash]r|[FSP]
_|Temp1=Desperate Swing||Temp2=1/day one melee attack (AO at -4) while in Total Defense; +4 to confirm Crititals while fighting defensively or with the AO from this feat|[FSP]
_|Temp1=Devoted Tracker||Temp2=Can multiclass freely with Paladin and Ranger|[FSP]
_|Temp1=Disruptive||Temp2=+4DC vs Casting Defensively; must have AO left|[FSP]
_|Temp1=Doorkicker||Temp2=+{Bold~%CharacterLevel%} dmg vs unattended inanimate objects; If mass no greater than your own and deal min 25[Percent] = broken and stops working|[FSP]
_|Temp1=Elven Blood Bane Elf||Temp2=+1 melee[Slash]range (30') vs other elves|[FSP]
_|Temp1=Elven Accuracy||Temp2=Can reroll concealment once if you fail when attacking with a longbow or shortbow|[FSP]
_|Temp1=Empower Spell||Temp2=+2|[FSP]
_{If~{Find~1,Kobold Endurance,%FeatsString%}!=0?|Temp1=Kobold Endurance||Temp2=+4 STR/CON checks; +4 to escape from grapple/pin; +4 Swim (vs nonlethal dmg); +4 Fortitude vs heat/cold environmental nonlethal damage; +4 Fort vs suffocation; can sleep in light/medium armor|[FSP]
_   /|Temp1=Endurance||Temp2=+4 Swim (vs nonlethal dmg); +4 CON to continue ruinning/prevent nonlethal dmg vs hunger/thirst/forced march; +4 CON to keep your breath; +4 Fortitude vs heat/cold environmental nonlethal damage; +4 Fortitude vs suffocation; can sleep in light/medium armor|[FSP]
_}
_|Temp1=Enlarge Spell||Temp2=+1|[FSP]
_|Temp1=Exhausting Critical||Temp2=-6 STR/DEX; 1/2 MV no Run/Charge|[FSP]
_|Temp1=Expanded Resistance||Temp2=+2 save vs school|[FSP]
_|Temp1=Extend Spell||Temp2=+1|[FSP]
_|Temp1=Far Shot||Temp2=-1/range increment|[FSP]
_|Temp1=Ferocious Resolve||Temp2=Can continue fighting in negative {If~%Valminder%=2?hp/WP}|[FSP]
_|Temp1=Fire Hand||Temp2=Can wield torch in melee; +1 dmg with melee weapon dealing fire damage|[FSP]
_|Temp1=Fiendish Blood||Temp2=You are considered to have the EVIL subtype; can bypass DR as if your weapons were evil-aligned|[FSP]
_|Temp1=Gorgon's Fist||Temp2=Fort DC{Trunc~{Calc~((%CharacterLevel%/2)+10+%WISBonus%)}} or Staggered 1r|[FSP]
_|Temp1=Grasping Tail||Temp2=SWIFT to retrieve a small stowed item on yourself|[FSP]
_|Temp1=Greater Bull Rush||Temp2=No AO; +4 CMB/+2 CMD; moving opponent provokes AO from allies|
_{IIf~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1% {Color~Green,[FontB=2](%Temp2%)[FontE]},%FeatsString%}|
_   :|Temp1=Improved Bull Rush||Temp2=No AO; +2 CMB/CMD|[FSP]
_}
_|Temp1=Greater Disarm||Temp2=No AO; +4 CMB/+2 CMD; wpn lands 15' away at random|
_{IIf~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1% {Color~Green,[FontB=2](%Temp2%)[FontE]},%FeatsString%}|
_   :|Temp1=Improved Disarm||Temp2=No AO; +2 CMB/CMD; wpn falls at feet|[FSP]
_}
_|Temp1=Greater Feint||Temp2=MOVE to feint; foe loses DEX until your next turn|
_{IIf~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1% {Color~Green,[FontB=2](%Temp2%)[FontE]},%FeatsString%}|
_   :|Temp1=Improved Feint||Temp2=MOVE to feint|[FSP]
_}
_|Temp1=Greater Grapple||Temp2=No AO; +4 CMB/+2 CMD; MOVE to maintain grapple|
_{IIf~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1% {Color~Green,[FontB=2](%Temp2%)[FontE]},%FeatsString%}|
_   :|Temp1=Improved Grapple||Temp2=No AO; +2 CMB/CMD|[FSP]
_}
_|Temp1=Greater Overrun||Temp2=No AO; +4 CMB/+2 CMD; targets cannot avoid you and provoke AO if fall prone|
_{IIf~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1% {Color~Green,[FontB=2](%Temp2%)[FontE]},%FeatsString%}|
_   :|Temp1=Improved Overrun||Temp2=No AO; +2 CMB/CMD; targets cannot avoid you|[FSP]
_}
_|Temp1=Greater Penetrating Strike||Temp2=ignore 10 DR; 5 if DR/-|
_{IIf~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1% {Color~Green,[FontB=2](%Temp2%)[FontE]},%FeatsString%}|
_   :|Temp1=Penetrating Strike||Temp2=ignore 5 DR; 0 if DR/-|[FSP]
_}
_|Temp1=Greater Sunder||Temp2=No AO; +4 CMB/+2 CMD; vs weapon/shield/armor excess damage is transfered to wielder unless leave item at 1 hp|
_{IIf~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1% {Color~Green,[FontB=2](%Temp2%)[FontE]},%FeatsString%}|
_   :|Temp1=Improved Sunder||Temp2=No AO; +2 CMB/CMD|[FSP]
_}
_|Temp1=Greater Trip||Temp2=No AO; +4 CMB/+2 CMD; opponent provokes AO when falling|
_{IIf~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1% {Color~Green,[FontB=2](%Temp2%)[FontE]},%FeatsString%}|
_   :|Temp1=Improved Trip||Temp2=No AO; +2 CMB/CMD|[FSP]
_}
_|Temp1=Greater Vital Strike||Temp2=STANDARD; +3x wpn dmg|
_{IIf~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1% {Color~Green,[FontB=2](%Temp2%)[FontE]},%FeatsString%}|
_   :|Temp1=Improved Vital Strike||Temp2=STANDARD; +2x wpn dmg|{IIf~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1% {Color~Green,[FontB=2](%Temp2%)[FontE]},%FeatsString%}|
_   :|Temp1=Vital Strike||Temp2=STANDARD; +1x wpn dmg|[FSP]
_}}
_|Temp1=Hard-headed||Temp2=+1 hit/CMB with helmet; +2 save vs staggered/stunned|[FSP]
_|Temp1=Heroic Destiny||Temp2=1/day +1d6 before rolling a d20|[FSP]
_|Temp1=Hibernate||Temp2=If 8h of sleep = regain 2x Lv Total in hp and 2 points[Slash]stat; if 24h of sleep = regain 4x Lv Total in hp and 4 points[Slash]stat|[FSP]
_|Temp1=Improved Low-Light Vision||Temp2=+1x range|[FSP]
_|Temp1=Improved Precise Shot||Temp2=ignore cover/concealment (except total)|[FSP]
_|Temp1=Improved Recovery||Temp2=you can always recover through natural healing even for lack of sleep or if you were in combat|[FSP]
_|Temp1=Improved Shield Bash||Temp2=keep shield's AC|[FSP]
_{If~{Param~Class,%Class%}=Monk?|Temp1=Improved Unarmed Strike||FSPCharacter=a monk attacks with fist; elbows; knees; and feet|[FSP]}
_|Temp1=Improvised Weapon Mastery||Temp2=dmg +1 step; 19-20/x2|[FSP]
_|Temp1=Keen Vision||Temp2=ignore one range increment in range combat|[FSP]
_|Temp1=Leadership|{Reset~Leadership_Reputation}{If~%LeadershipFeat%=1?|Temp2=[Leadership_Calc]|[FSP]/|LCohLvl=0||GenCohort=2|}
_|Temp1=Lightning Stance||Temp2=2xMOVE or Withdraw = 50[Percent] concealment 1r|[FSP]
_|Temp1=Lightning Stealth||Temp2=No -5 Stealth penalty to move normal MV; -10 run[Slash]charge|[FSP]
_|Temp1=Light Bones||Temp2=-10' when falling (-20' with DC15 Acrobatics)|[FSP]
_|Temp1=Lightfeet||Temp2=+5 DC to track you (+10 if you hide your tracks) and ignore stealth penalties for noisy terrains|[FSP]
_|Temp1=Lunge||Temp2=reach +5'; -2 AC|[FSP]
_|Temp1=Magic of the Land||Temp2=In natural setting: K(Nature) DC15+spell level = each target heals 2 hp/spell level and injures undead (Will negates)|[FSP]
_|Temp1=Manyshot||Temp2=FULL; first shot fires 2 arrows|[FSP]
_|Temp1=Master Trapmaker||Temp2=+3 Craft (trapmaking); can add INT to Perception or Disable Device DC of created trap|[FSP]
_|Temp1=Maximize Spell||Temp2=+3|[FSP]
_|Temp1=Medusa's Wrath||Temp2=FULL; +2 Unarmed Attacks vs Dazed[Slash]Flat-footed[Slash]Paralyzed[Slash]Staggered[Slash]Stunned[Slash]Unconscious foe|[FSP]
_|Temp1=Mounted Archery||Temp2=1[Slash]2 range penalties while mounted|[FSP]
_|Temp1=Mounted Combat||Temp2=IMMEDIATE; 1[Slash]round; Ride = mount's AC|[FSP]
_|Temp1=Nimble Moves||Temp2=ignore 5' difficult terrain[Slash]round|[FSP]
_|Temp1=Otherworldly||Temp2=Darkvision 60' or +30|[FSP]
_|Temp1=Pack Attack||Temp2=If allies in flanking you are also considered in flanking|[FSP]
_|Temp1=Pinpoint Targeting||Temp2=STANDARD; No MV; 1 ranged attack = No armor[Slash]natural armor[Slash]shield bonuses|[FSP]
#_|Temp1=Point-Blank Shot||Temp2=+1 att[Slash]dmg; 30'|[FSP]
_|Temp1=Protected Destiny||Temp2=1/day can reroll a save of natural "1"|[FSP]
_|Temp1=Quicken Spell||Temp2=+4|[FSP]
_|Temp1=Rapid Shot||Temp2=FULL +1 range att; all at -2|[FSP]
_|Temp1=Reckless Offense||Temp2=-4 AC; +2 melee attack|[FSP]
_|Temp1=Ride-By Attack||Temp2=FULL; Mounted Charge = MV + attack + MV; straight; No AO from target|[FSP]
_|Temp1=Scavenger's Eye||Temp2=STANDARD to find the most valuable item; If you fail Appraise by 5+ treat as if failed by less than 5|[FSP]
_|Temp1=Scorpion Style||Temp2=STANDARD; Unarmed; MV=5' for {If~%WISBonus%>0?%WISBonus%/1} rounds; Fort negates DC{Trunc~{Calc~10+(%CharacterLevel%/2)+%WISBonus%}}|[FSP]
_|Temp1=Seen and Unseen||Temp2=Elves Half-Elves Humans: -4 to track you through Survival|[FSP]
_|Temp1=Selective Channeling||Temp2=ignore %CHABonus% targets|[FSP]
_|Temp1=Shatter Defenses||Temp2=Shaken[Slash]Frightened[Slash]Panicked foe = flat-footed vs your attacks|[FSP]
_|Temp1=Sickening Critical||Temp2=crit = foe sickened 1 minute; 2 Attack[Slash]Damage[Slash]Saves[Slash]Skill[Slash]Ability checks|[FSP]
_|Temp1=Shot on the run||Temp2=FULL; MV + attack at any point during MV|[FSP]
_|Temp1=Silent Spell||Temp2=+1|[FSP]
_|Temp1=Sociable Personality||Temp2=Can reroll Bluff/Diplomacy|[FSP]
_|Temp1=Spell Mastery||Temp2=%INTBonus% spells|[FSP]
_|Temp1=Spellbreaker||Temp2=AO vs failed Casting Defensively|[FSP]
_|Temp1=Spider Climber||Temp2={Italic~spider climb} 1/day; +4 save vs webs|[FSP]
_|Temp1=Spirited Charge||Temp2=Mounted charge = x2 melee dmg (x3 with lance)|[FSP]
_|Temp1=Spring Attack||Temp2=FULL; MV (min 10') + attack + MV (no AO from target); max 1xMV|[FSP]
_|Temp1=Staggering Critical||Temp2=crit = staggered 1d4+1r ([~Dice Reroll.1d4p1]r) or 1r if Fort DC{Calc~10+%BAB%}; 1 action[Slash]r|[FSP]
_|Temp1=Stand Still||Temp2=when AO vs moving foe = CMB as AO to stop MV|[FSP]
_|Temp1=Steadfast||Temp2=Immune to dazed; dazed instead of stunned|[FSP]
_|Temp1=Step Up||Temp2=IMMEDIATE; follow a 5'-step; -5' MV next round|[FSP]
_|Temp1=Still Spell||Temp2=+1|[FSP]
_|Temp1=Stonelord||Temp2=+4 Diplomacy vs dwarves[Slash]Earth creatures; +4 DC Enchantment vs Earth creatures|[FSP]
_|Temp1=Stoneblood||Temp2={IIf~{Or~{Param~Race,%Race%}=Dwarf,{Param~Race,%Race%}=Svirfneblin}=1?+2 Perception stonecunning; 20' stonecunning range; +2 Stability:Stonecunning (as dwarf); +2 Stabilty}|[FSP]
_|Temp1=Stone-Faced||Temp2=+4 bluff to lie/conceal your feelings/true motives; Sense Motive DC25 to get a hunch about you|[FSP]
_|Temp1=Stone Thrower||Temp2=+{Calc~%BAB1%+%DEXBonus%} 1d6{If~%STRBonus%>0?+}{If~%STRBonus%!=0?%STRBonus%} B; 20/x2 (10'); MOVE: find bad stone (1d4 dmg); FULL: find good stone (1d6 dmg)|[FSP]
_|Temp1=Strike Back||Temp2=READY = attack foe in melee even if out of reach|[FSP]
_|Temp1=Stunning Critical||Temp2=crit = stunned 1d4r ([~Dice Reroll.1d4]r) or staggered if Fort DC{Calc~10+%BAB%}; drop everything 2 AC lose DEX AC OR 1 action[Slash]r|[FSP]
_|Temp1=Stunning Fist||Temp2=Fort DC{Trunc~{Calc~10+(%CharacterLevel%/2)+%WISBonus%}} or Stunned 1r (drop everything 2 AC lose DEX AC){If~{And~{Param~Class,%Class%}=Monk,%CharacterLevel%>=4}=1? {Color~DarkCyan,(a monk can apply other conditions)}}; [StunningFist][Slash]day; max 1[Slash]r|[FSP]
_|Temp1=Swift and Silent||Temp2=No -5 Stealth penalty to move normal MV|[FSP]
_|Temp1=Tail Terror||Temp2=Tail is secondary weapon 1d4+STR1.5|[FSP]
_|Temp1=Throw Anything||Temp2=No penalties with improvised ranged weapon; +1 with thrown splash weapons|[FSP]
_|Temp1=Tireless||Temp2=If exhausted you are fatigued; cannot be fatigued otherwise|[FSP]
_|Temp1=Tiring Critical||Temp2=crit = foe fatigued (-2 Str[Slash]Dex; no Run[Slash]Charge|[FSP]
_|Temp1=Trample||Temp2=Mounted Overrun = foe cannot avoid; mount 1 hoof attack vs knocked down targets (+4 vs prone)|[FSP]
_|Temp1=Treetopper||Temp2=Do not lose DEX while climbing and no bonus to hit you while you climb|[FSP]
_|Temp1=Trivial Knowledge||Temp2=Roll Knowledge check twice and take highest|[FSP]
_|Temp1=Two-Weapon Defense||Temp2=+2 AC when fighting defensively or total defense|[FSP]
_|Temp1=Two-Weapon Rend||Temp2=if hit with primary + off-hand; 1[Slash]r|[FSP]
_|Temp1=Unconquerable Optimism||Temp2=1/day +1d6 before rolling a save or skill check|[FSP]
_|Temp1=Unseat||Temp2=Mounted charge with lance = FREE bull rush to knock off horse|[FSP]
_|Temp1=Urban Tracking||Temp2=Diplomacy|[FSP]
_|Temp1=Usable Tail||Temp2=Tail is a 3rd hand (-4 skill checks)|[FSP]
_|Temp1=Vermin Trainer||Temp2=Handle Animal with vermins (INT 1)|[FSP]
_|Temp1=Verminfriend||Temp2=CHA DC20 vermin will not attack you for 24h|[FSP]
_|Temp1=Whirlwind Attack||Temp2=FULL; 1 melee[Slash]foe in reach (full BAB)|[FSP]
_|Temp1=Widen Spell||Temp2=+3|[FSP]
_|Temp1=Wind Stance||Temp2=MV>5' = 20[Percent] concealment vs ranged attacks 1r|[FSP]
#
_|Temp1=Craft Charged Items||Temp2=Craft Wand; Craft Wondrous Item; Forge Ring (level 7+)|[FSP]
_|Temp1=Craft Constant Items||Temp2={If~{Find~1,Craft Magic Arms and Armor,%FeatsAll%}!=0?Craft Construct; }Craft Rod; Craft Staff (level 11+); Craft Wondrous Items; Forge Ring (level 7+)|[FSP]
_|Temp1=Craft Magic Arms and Armor||Temp2={If~{Find~1,Craft Constant Items,%FeatsAll%}!=0?Craft Construct/None}|[FSP]
_|Temp1=Craft Single-Use Items||Temp2=Attune Gem; Brew Potion; Craft Wondrous Items; Manufacture Magic Poison (level 5+)|[FSP]
_|Temp1=Craft Spell Completion Items||Temp2=Craft Wondrous Items; Scribe Scroll|[FSP]
_|Temp1=Craft Spell Completion Items||Temp2=Craft Wondrous Items; Scribe Scroll|[FSP2]
#_|Temp1=||Temp2=|[FSP]

:StunningFist
1,{IIf~{Param~Class,%Class%}=Monk?%CharacterLevel%:|TempNumber=%CharacterLevel%||TempNumber\4|{If~%TempNumber%<1?1/%TempNumber%}}

:FSP
1,{If~{Find~1,%Temp1%,%FeatsString%}!=0?|FeatsString={Replace~%Temp1%,%Temp1%[FSPReplace],%FeatsString%}|
# Leadership reset if it's not found.
_/{If~%Temp1%=Leadership?|LCohLvl=0|}
_}
_|Temp2=None||FSPCharacter=None|

:FSP2
1,{If~{Find~1,%Temp1%,%StartingFeats%}!=0?|StartingFeats={Replace~%Temp1%,%Temp1%[FSPReplace],%StartingFeats%}|
# Leadership reset if it's not found.
_/{If~%Temp1%=Leadership?|LCohLvl=0|}
_}
_|Temp2=None||FSPCharacter=None|

:FSPReplace
1,{If~%Temp2%!=None? {Color~Green,[FontB=2](%Temp2%)[FontE]}}
_{If~%FSPCharacter%!=None? {Color~DarkCyan,[FontB=2](%FSPCharacter%)[FontE]}}

:CombatExpertise
1-3,-1/+1
4-7,-2/+2
8-11,-3/+3
12-15,-4/+4
16-19,-5/+5
20-100,-6/+6
 
:DeadlyAim
1-3,-1/+2
4-7,-2/+4
8-11,-3/+6
12-15,-4/+8
16-19,-5/+10
20-100,-6/+12

:Leadership_Calc
1,|Leadership=%CharacterLevel%||Leadership+%CHABonus%||LeadershipInfo=|
_|Temp3={Dice~1d4-2}|{If~%Temp3%>0?{While~%Temp3%,|LeadershipInfo& [Leadership_Reputation]||Temp3-1|{If~%Temp3%>0?|LeadershipInfo&; |}}}
_|LeadershipCoh=%Leadership%||LeadershipFol=%Leadership%||ALMaster=%AL%||ClassMaster={Param~Class,%Class%}||GenderCohort={Dice~1d2}|
# Cohorts
_{If~%FamiliarID%!=0?|LeadershipCoh-1|}
_{If~%PALAnimalCompanion%!=0?|LeadershipCoh-1|}
_{If~%AnimalCompanion%!=0?|LeadershipCoh-1|}
_{If~{And~{Dice~1d6}=1,%ClassMaster%!=Paladin}=1?|ALCohort=0||LeadershipCoh-1|{If~{Length~%LeadershipInfo%}>1?|LeadershipInfo&; |}|LeadershipInfo&Cohort has different alignment|{If~%GenCohort%=2?|LeadershipInfo&| ([~ShortAlignment])}
_/|ALCohort=%AL%|}
_{If~{Dice~1d6}=1?|LeadershipCoh-2|{If~{Length~%LeadershipInfo%}>1?|LeadershipInfo&; |}|LeadershipInfo&Caused the death of a prior Cohort|
_{If~{Dice~1d6}=1?|LeadershipCoh-2||LeadershipInfo& (x2)|}
_}
# Followers
_{If~{Dice~1d4}=1?|LeadershipFol+2|{If~{Length~%LeadershipInfo%}>1?|LeadershipInfo&; |}|LeadershipInfo&Has a base of operation ([~LeadershipBase])|}
_{If~{Dice~1d4}=1?|LeadershipFol-1|{If~{Length~%LeadershipInfo%}>1?|LeadershipInfo&; |}|LeadershipInfo&Moves around a lot|}
_{If~{Dice~1d6}=1?|LeadershipFol-1|{If~{Length~%LeadershipInfo%}>1?|LeadershipInfo&; |}|LeadershipInfo&Caused the death of other followers|}
_|LCohLvl=0||LFolLvl1=0||LFolLvl2=0||LFolLvl3=0||LFolLvl4=0||LFolLvl5=0||LFolLvl6=0|
_{If~%LeadershipCoh%>=2?|LCohLvl=[LeadershipCohortLevel=%LeadershipCoh%]|}
_{If~%LeadershipFol%>=10?[LeadershipFollowers=%LeadershipFol%]}
_%Leadership%{If~%LeadershipCoh%!=%Leadership%? [Slash] vs Cohort: %LeadershipCoh%}{If~%LeadershipFol%!=%Leadership%? [Slash] vs Followers: %LeadershipFol%}{If~{Length~%LeadershipInfo%}>1?; %LeadershipInfo%}
_{If~%LCohLvl%>0?; Cohort {Ordinal~%LCohLvl%}}
_{If~%LFolLvl1%>0?; Followers %LFolLvl1% x1st}
_{If~%LFolLvl2%>0?; %LFolLvl2% x2nd}
_{If~%LFolLvl3%>0?; %LFolLvl3% x3rd}
_{If~%LFolLvl4%>0?; %LFolLvl4% x4th}
_{If~%LFolLvl5%>0?; %LFolLvl5% x5th}
_{If~%LFolLvl6%>0?; %LFolLvl6% x6th}

:LeadershipCohortLevel
1,0
2,1
3,2
4-5,3
6,4
7-8,5
9,6
10-11,7
12,8
13,9
14-15,10
16,11
17-18,12
19,13
20,14
21-22,15
23,16
24-100,17

:LeadershipFollowers
1-9,
10,|LFolLvl1=5|
11,|LFolLvl1=6|
12,|LFolLvl1=8|
13,|LFolLvl1=10||LFolLvl2=1|
14,|LFolLvl1=15||LFolLvl2=1|
15,|LFolLvl1=20||LFolLvl2=2||LFolLvl3=1|
16,|LFolLvl1=25||LFolLvl2=2||LFolLvl3=1|
17,|LFolLvl1=30||LFolLvl2=3||LFolLvl3=1||LFolLvl4=1|
18,|LFolLvl1=35||LFolLvl2=3||LFolLvl3=1||LFolLvl4=1|
19,|LFolLvl1=40||LFolLvl2=4||LFolLvl3=2||LFolLvl4=1||LFolLvl5=1|
20,|LFolLvl1=50||LFolLvl2=5||LFolLvl3=3||LFolLvl4=2||LFolLvl5=1|
21,|LFolLvl1=60||LFolLvl2=6||LFolLvl3=3||LFolLvl4=2||LFolLvl5=1||LFolLvl6=1|
22,|LFolLvl1=75||LFolLvl2=7||LFolLvl3=4||LFolLvl4=2||LFolLvl5=2||LFolLvl6=1|
23,|LFolLvl1=90||LFolLvl2=9||LFolLvl3=5||LFolLvl4=3||LFolLvl5=2||LFolLvl6=1|
24,|LFolLvl1=110||LFolLvl2=11||LFolLvl3=6||LFolLvl4=3||LFolLvl5=2||LFolLvl6=1|
25-100,|LFolLvl1=135||LFolLvl2=13||LFolLvl3=7||LFolLvl4=4||LFolLvl5=2||LFolLvl6=2|

;LeadershipBase
10,Stronghold
3,Fort
5,Manor
2,Tower
2,Town House
2,Small Cottage
10,Guildhouse ([~Miscellaneous.Occupations])
5,Hidden guildhouse in a [Miscellaneous.Shop]
1,Cave
1,Plane ([~Countries.Planes_%WorldNeededName%])

;!Leadership_Reputation
1,Great Renown|Leadership+2|
1,{If~{Find~1,G,%AL%}!=0?Fairness and Generosity|Leadership+1|/[Leadership_Reputation]}
#1,Special Power|Leadership+1|
1,Failure|Leadership-1|
1,Aloofness|Leadership-1|
1,{If~{Find~1,G,%AL%}=0?Cruelty|Leadership-2|/[Leadership_Reputation]}

:PowerAttack
1-3,-1/+2
4-7,-2/+4
8-11,-3/+6
12-15,-4/+8
16-19,-5/+10
20-100,-6/+12

# ---------------------------------------------------------------------------
# Skills Section (linked with "Pathfinder Skills.tab")

:GenerateSkills
1,[FeatsSkill]
_{If~%WIZEncSmile%>0?|FeatsSkill&;WizEnchanter%WIZEncSmile%|}
_{If~%ChooseRanks%=1?|ChooseRanks={Dice~1d3+1}|}
### NEW FAMILIAR ###
_{If~%FamiliarID%=0?|FamiliarID=13|}
_{If~%TestLog%=1?{Log~E:\log.txt,}
_{Log~E:\log.txt,FeatsSkill= %FeatsSkill%}
_{Log~E:\log.txt,Bsk=%BSk%, FavClassSP=%FavClassSP%, Commoner=%CommonerTypeCode%, Expert=%ExpertTypeCode%, Fly=%Fly%, World=%WorldNeeded%}
_}
### NEW CLASS ###
_|TempString=[Pathfinder Skills.Start(%Race%,%Subrace%,%Class%,%CharacterLevel%,%FamiliarID%,%STR%,%DEX%,%CON%,%INT%,%WIS%,%CHA%,%Size%,%ChooseRanks%,%FeatsSkill%,%BSk%,%FavClassSP%,%CommonerTypeCode%,%ExpertTypeCode%,%Fly%,%WorldNeeded%)]|
_{Split~TempString,"!",SkillsString,TotalSkillPoints,FamSkillBonus,LanguageString,Profession}
### NEW FAMILIAR ###
_{If~%FamiliarID%=13?|FamiliarID=0|}

:PrintSkills
1,{If~{And~%Show%=1,%GroupFlag%=2}=1? ({If~%FavClassSP%>0?{Calc~%TotalSkillPoints%-%FavClassSP%}{Color~DarkCyan,+%FavClassSP%}/%TotalSkillPoints%})}
# Armor Check Penalty is reduced based on carrying capacity
_|ACPOriginal=%ACP%||ACPOriginal+%FTR_ACP%||ACPOriginal<0||ACP+%FTR_ACP%||ACP<0||ACP<%CCCP%|
_{If~{Calc~%ACP%+%ACPSh%}<0?[FontB=1] {Color~Red,(ACP{If~{And~%ACP%<0,%ACPSh%<0}=1? {Calc~%ACP%+%ACPSh%}}: {If~%ACP%<0?Armor: %ACPOriginal%{If~{And~%CCCP%<0,%CCCP%<%ACPOriginal%}=1? or Weight: %CCCP%}{If~%ACPSh%<0?; }}{If~%ACPSh%<0?Shield: %ACPSh%})}[FontE]}
_{If~{And~{Calc~%ACP%+%ACPSh%}<0,%Show%=1}=1?[ModifySkillsACP]}
_ %SkillsString%.
_{If~%FamSkillBonus%!=0[PrintFamiliarSkillBonus]}
_{If~%Show%=1?[Skill_Special]/[Skill_Special2]}
_{If~%GroupFlag%=2?<br>/ }
_<i><u>Languages</u>:</i> %LanguageString%
_{If~%FavoredEnemies%>0?,{Color~DarkCyan, +Favored enemies languages}}
_{If~%SORCelestialAsc%=Yes?,{Color~DarkCyan, +any creature with a language (as {Italic~tongues})}}
_.

:ModifySkillsACP
1,|ACPNote=|
_{If~{Find~1,Acrobatics,%SkillsString%}!=0?|SkillsString={Replace~Acrobatics,Acrobatics [ACPNote],%SkillsString%}|/|ACPNote&; Acrobatics|}
_{If~{Find~1,Climb,%SkillsString%}!=0?|SkillsString={Replace~Climb,Climb [ACPNote],%SkillsString%}|/|ACPNote&; Climb|}
_{If~{Find~1,Disable Device,%SkillsString%}!=0?|SkillsString={Replace~Disable Device,Disable Device [ACPNote],%SkillsString%}|/|ACPNote&; Disable Device|}
_{If~{Find~1,Escape Artist,%SkillsString%}!=0?|SkillsString={Replace~Escape Artist,Escape Artist [ACPNote],%SkillsString%}|/|ACPNote&; Escape Artist|}
_{If~{Find~1,Fly,%SkillsString%}!=0?|SkillsString={Replace~Fly,Fly [ACPNote],%SkillsString%}|/|ACPNote&; Fly|}
_{If~{Find~1,Ride,%SkillsString%}!=0?|SkillsString={Replace~Ride,Ride [ACPNote],%SkillsString%}|/|ACPNote&; Ride|}
_{If~{Find~1,Sleight of Hand,%SkillsString%}!=0?|SkillsString={Replace~Sleight of Hand,Sleight of Hand [ACPNote],%SkillsString%}|/|ACPNote&; Sleight of Hand|}
_{If~{Find~1,Stealth,%SkillsString%}!=0?|SkillsString={Replace~Stealth,Stealth [ACPNote],%SkillsString%}|/|ACPNote&; Stealth|}
_{If~{Find~1,Swim,%SkillsString%}!=0?|SkillsString={Replace~Swim,Swim [ACPNote],%SkillsString%}|/|ACPNote&; Swim|}

:ACPNote
1,[FontB=1]{Color~Red,ACP}[FontE]

:PrintFamiliarSkillBonus
1,{If~%GroupFlag%=2?<br>/ }<i>Familiar Skill Bonus:</i> %FamSkillBonus%.

### NEW FEATS ### For "Pathfinder Skills"
### NEW SKILL FEATS ###
:FeatsSkill
1,{If~%GnomeObsessive%!=0?|FeatsSkill&;GnomeObsessive%GnomeObsessive%|}
_{If~%GnomeAcademican%!=0?|FeatsSkill&;GnomeAcademican%GnomeAcademican%|}
_{If~{Find~1,aquatic,%RaceSubtype%}!=0?|FeatsSkill&;AQUATIC|}
_{If~%Climb%!=0?|FeatsSkill&;CLIMBING|}
_{If~%Swim%!=0?|FeatsSkill&;SWIMMING|}
_{IIf~{Find~1,Acrobatic,%FeatsAll%}!=0?|FeatsSkill&;Acrobatic|}
_{IIf~{Find~1,Agile Athlete,%FeatsAll%}!=0?|FeatsSkill&;Agile Athlete|}
_{IIf~{Find~1,Alertness,%FeatsAll%}!=0?|FeatsSkill&;Alertness|}
_{IIf~{Find~1,Animal Affinity,%FeatsAll%}!=0?|FeatsSkill&;Animal Affinity|}
_{IIf~{Find~1,Artist,%FeatsAll%}!=0?|FeatsSkill&;Artist|}
_{IIf~{Find~1,Athletic,%FeatsAll%}!=0?|FeatsSkill&;Athletic|}
_{IIf~{Find~1,Blooded,%FeatsAll%}!=0?|FeatsSkill&;Blooded|}
_{IIf~{Find~1,Burn Burn Burn,%FeatsAll%}!=0?|FeatsSkill&;Burn Burn Burn|}
_{IIf~{Find~1,Burrow Friend,%FeatsAll%}!=0?|FeatsSkill&;Burrow Friend|}
_{IIf~{Find~1,Brewmaster,%FeatsAll%}!=0?|FeatsSkill&;Brewmaster|}
_{IIf~{Find~1,Bullheaded,%FeatsAll%}!=0?|FeatsSkill&;Bullheaded|}
_{IIf~{Find~1,Bullying Blow,%FeatsAll%}!=0?|FeatsSkill&;Bullying Blow|}
_{IIf~{Find~1,Carrion Feeder,%FeatsAll%}!=0?|FeatsSkill&;Carrion Feeder|}
_{IIf~{Find~1,Dazzling Display,%FeatsAll%}!=0?|FeatsSkill&;Dazzling Display|}
_{IIf~{Find~1,Deceitful,%FeatsAll%}!=0?|FeatsSkill&;Deceitful|}
_{IIf~{Find~1,Deft Hands,%FeatsAll%}!=0?|FeatsSkill&;Deft Hands|}
_{IIf~{Find~1,Dexterous Climb,%FeatsAll%}!=0?|FeatsSkill&;Dexterous Climb|}
_{IIf~{Find~1,Discipline,%FeatsAll%}!=0?|FeatsSkill&;Discipline|}
_{IIf~{Find~1,Dog Killer Horse Hunter,%FeatsAll%}!=0?|FeatsSkill&;Dog Killer Horse Hunter|}
_{IIf~{Find~1,Education,%FeatsAll%}!=0?|FeatsSkill&;Education|}
_{IIf~{Find~1,Evil Brand,%FeatsAll%}!=0?|FeatsSkill&;Evil Brand|}
_{IIf~{Find~1,Eye for Detail,%FeatsAll%}!=0?|FeatsSkill&;Eye for Detail|}
_{IIf~{Find~1,Human Spirit,%FeatsAll%}!=0?|FeatsSkill&;Human Spirit|}
_{IIf~{Find~1,Hunter,%FeatsAll%}!=0?|FeatsSkill&;HUNTER|}
_{IIf~{Find~1,Intimidating Prowess,%FeatsAll%}!=0?|FeatsSkill&;Intimidating Prowess|}
_{IIf~{Find~1,Keen Vision,%FeatsAll%}!=0?|FeatsSkill&;Keen Vision|}
_{IIf~{Find~1,Knowledge (Dungeoneering,%FeatsAll%}!=0?|FeatsSkill&;SFKNOWDUNGEON|}
_{IIf~{Find~1,Lightning Stealth,%FeatsAll%}!=0?|FeatsSkill&;Lightning Stealth|}
_{IIf~{Find~1,Magical Aptitude,%FeatsAll%}!=0?|FeatsSkill&;Magical Aptitude|}
_{IIf~{Find~1,Magic of the Land,%FeatsAll%}!=0?|FeatsSkill&;Magic of the Land|}
_{IIf~{Find~1,Master Craftsman,%FeatsAll%}!=0?|FeatsSkill&;Master Craftsman|}
_{IIf~{Find~1,Master Trapmaker,%FeatsAll%}!=0?|FeatsSkill&;Master Trapmaker|}
_{IIf~{Find~1,Menacing Demeanor,%FeatsAll%}!=0?|FeatsSkill&;Menacing Demeanor|}
_{IIf~{Find~1,Mounted Combat,%FeatsAll%}!=0?|FeatsSkill&;Mounted Combat|}
_{IIf~{Find~1,Nimbus of Light,%FeatsAll%}!=0?|FeatsSkill&;Nimbus of Light|}
_{IIf~{Find~1,Oath of Uwe,%FeatsAll%}!=0?|FeatsSkill&;Oath of Uwe|}
_{IIf~{Find~1,Open Minded,%FeatsAll%}!=0?|FeatsSkill&;Open Minded|}
_{IIf~{Find~1,Otherworldly,%FeatsAll%}!=0?|FeatsSkill&;Otherworldly|}
_{IIf~{Find~1,Peak Hopper,%FeatsAll%}!=0?|FeatsSkill&;Peak Hopper|}
_{IIf~{Find~1,Persuasive,%FeatsAll%}!=0?|FeatsSkill&;Persuasive|}
_{IIf~{Find~1,Quick Reconnoiter,%FeatsAll%}!=0?|FeatsSkill&;Quick Reconnoiter|}
_{IIf~{Find~1,Sacred Vow,%FeatsAll%}!=0?|FeatsSkill&;Sacred Vow|}
_{IIf~{Find~1,Sage Wisdom,%FeatsAll%}!=0?|FeatsSkill&;Sage Wisdom|}
_{IIf~{Find~1,Scavenger's Eye,%FeatsAll%}!=0?|FeatsSkill&;Scavenger's Eye|}
_{IIf~{Find~1,Seen and Unseen,%FeatsAll%}!=0?|FeatsSkill&;Seen and Unseen|}
_{IIf~{Find~1,Selective Spell,%FeatsAll%}!=0?|FeatsSkill&;Selective Spell|}
_{IIf~{Find~1,Self-Sufficient,%FeatsAll%}!=0?|FeatsSkill&;Self-Sufficient|}
_{IIf~{And~{Param~Race,%Race%}=Dwarf,{Find~1,Skill Focus (Craft,%FeatsAll%}!=0}=1?|FeatsSkill&;SFCRAFTSKILL|}
_{IIf~{Find~1,Shadow,%FeatsAll%}!=0?|FeatsSkill&;Shadow|}
_{IIf~{Find~1,Stealthy,%FeatsAll%}!=0?|FeatsSkill&;Stealthy|}
_{IIf~{Find~1,Stonelord,%FeatsAll%}!=0?|FeatsSkill&;Stonelord|}
_{IIf~{Find~1,Street Smart,%FeatsAll%}!=0?|FeatsSkill&;Street Smart|}
_{IIf~{Find~1,Survivor,%FeatsAll%}!=0?|FeatsSkill&;Survivor|}
_{IIf~{Find~1,Swift and Silent,%FeatsAll%}!=0?|FeatsSkill&;Swift and Silent|}
_{IIf~{Find~1,Thug,%FeatsAll%}!=0?|FeatsSkill&;Thug|}
_{IIf~{Find~1,Treefriend,%FeatsAll%}!=0?|FeatsSkill&;Treefriend|}
_{IIf~{Find~1,Treetopper,%FeatsAll%}!=0?|FeatsSkill&;Treetopper|}
_{IIf~{Find~1,Urban Tracking,%FeatsAll%}!=0?|FeatsSkill&;Urban Tracking|}
_{IIf~{Find~1,Wisdom of Ages,%FeatsAll%}!=0?|FeatsSkill&;Wisdom of Ages|}
_{IIf~{Find~1,Willing Deformity,%FeatsAll%}!=0?|FeatsSkill&;Willing Deformity|}
_{IIf~{Find~1,Wolf Master,%FeatsAll%}!=0?|FeatsSkill&;Wolf Master|}

:Skill_Special
1,[FontB=1]
### NEW FEATS ### To add uncalculated skill information.
### NEW SKILL FEATS ###
_{Color~Green,
_{If~{Find~1,Combat Casting,%FeatsAll%}!=0? +4 Concentration when casting defensively or grappling;}
_{IIf~{Find~1,Master Craftsman,%FeatsAll%}!=0? Can craft Magic Arms-Armors and {If~%Valminder%=2?Wondrous/Constant} Items;}
_{If~{Find~1,Wisdom of Ages,%FeatsAll%}!=0? +1 all non-listed Knowledge (choose 2 Knowledge to be used "untrained": [~Pathfinder Skills.KnowledgeList], [~Pathfinder Skills.KnowledgeList]{Reset~Pathfinder Skills.KnowledgeList});}
_{If~{Find~1,Wolf Master,%FeatsAll%}!=0? +2 all CHA skills vs dog-like creatures;}
_{IIf~{Find~1,Scavenger's Eye,%FeatsAll%}!=0? +2 Appraise to determine the most valuable item;}
_{IIf~{Find~1,Fire Tamer,%FeatsAll%}!=0? +2 Diplomacy/Intimidate vs goblins;}
_{If~{Find~1,Ferocious Resolve,%FeatsAll%}!=0? +2 Intimidate if negative {If~%Valminder%=2?hp/WP};}
_{If~{Find~1,Street Smart,%FeatsAll%}!=0? +2 Knowledge (Streetwise);}
_{If~{Find~1,Discerning Eye,%FeatsAll%}!=0? +2 Linguistics to detect Forgeries (can use untrained);}
_{If~{Find~1,Carrion Feeder,%FeatsAll%}!=0? +2 Survival to find food for yourself only;}
_{IIf~{Find~1,Oath of Uwe,%FeatsAll%}!=0? +2{If~%CharacterLevel%>=10? or +4} Diplomacy[Slash]Sense Motive vs those with bonuses vs kobolds;}
_{IIf~{Find~1,Skill Focus,%FeatsAll%}!=0? +3{If~%CharacterLevel%>=10? or +6} Skill Focus;}
_{IIf~{Find~1,Skill Mastery,%FeatsAll%}!=0? +6{If~%CharacterLevel%>=10? or +9} Skill Mastery;}
_{IIf~{Find~1,Skill Perfection,%FeatsAll%}!=0? +9{If~%CharacterLevel%>=10? or +12} Skill Perfection;}
_{IIf~{Find~1,Stone-Faced,%FeatsAll%}!=0? +4 Bluff to lie[Slash]conceal feeligns[Slash]true motives; DC25 to get hunch from you;}
_{IIf~{Find~1,Evil Brand,%FeatsAll%}!=0? +4{If~%CharacterLevel%>=10? or +8} Diplomacy[Slash]Intimidate vs Evil;}
_{IIf~{Find~1,Nimbus of Light,%FeatsAll%}!=0? +4{If~%CharacterLevel%>=10? or +8} Diplomacy[Slash]Sense Motive vs Good;}
_{If~{Find~1,Stonelord,%FeatsAll%}!=0? +4 Diplomacy vs dwarf[Slash]Earth creatures;}
_{If~{Find~1,Kobold Endurance,%FeatsAll%}!=0? Kobold Endurance: +4 Swim; +4 Str[Slash]Con checks;
_/{If~{Find~1,Endurance,%FeatsAll%}!=0? Endurance: +4 Swim;}
_}
_{If~{Find~1,Feint,%FeatsAll%}!=0? +Feint with Bluff;}
_{IIf~{Find~1,Sociable Personality,%FeatsAll%}!=0? Can reroll Bluff/Diplomacy;}
_{If~{Find~1,Cosmopolitain,%FeatsAll%}!=0? Cosmopolitain (add 1 class skill with +3 bonus);}
_{If~{Find~1,Trivial Knowledge,%FeatsAll%}!=0? Roll 2x Knowledge checks;}
_}
_{Color~Peru,
_{If~{And~{Param~Race,%Race%}=Elf,%Subrace%=Arctic}=1? +Desert Runner;}
_{If~{And~{Param~Race,%Race%}=Elf,{Or~%Subrace%=Dusk,%Subrace%=Shadow}=1}=1? +Silent Hunter (Stealth);}
_{IIf~%Greed%=Yes? +2 Appraise vs nonmagical items with precious metals/gems{IIf~%Subrace%=Arctic?/ice items};}
_{IIf~{And~{Param~Race,%Race%}=Elf,%Subrace%=Tower}=1? +2 Concentration (Arcane spells defensively); +2 Diplomacy (gather info); +2 Sense Motive (hunch);
_   :{IIf~{And~{Param~Race,%Race%}=Elf,{Or~%Subrace%=Dusk,%Subrace%=Shadow}=1}=1? +2 Concentration (Arcane spells defensively); +2 Diplomacy (gather info); +2 Sense Motive (hunch);
_   :{IIf~{And~{Param~Race,%Race%}=Goblin,%Subrace%=Desert}=1? +2 Gather Information;
_   :{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Elder}=1? +2 Knowledge (History) vs dwarves or their enemies (can use untrained);
_   :{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Exiled}=1? +2 vs Knowledge (Arcana) vs dragons (can use untrained);
_   :{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Arctic}=1? +2 Craft vs Ice items;
_   :{IIf~{And~{Param~Race,%Race%}=Gnome,%Subrace%=Dread}=1? +2 Craft (alchemy) to make poisons;
_   :{IIf~{And~{Param~Race,%Race%}=Human,%Subrace%=Imperious}=1? +Silver Tongue (Diplomacy);
_}}}}}}}}
# Stonecunning
_{IIf~%Stonecunning%=Yes? +{IIf~{Find~1,Stoneblood,%FeatsAll%}=0?2:4} Perception vs unusual stonework{IIf~%Subrace%=Arctic?/Icework} (auto.check {IIf~{Find~1,Stoneblood,%FeatsAll%}=0?10:20}');
_   :{IIf~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Deep}=1? +2 Appraise/Craft vs stone/metal; +2 Perception vs unusual stonework (auto.check 10');
_   :{IIf~{And~{Param~Race,%Race%}=Gnome,%Subrace%=Forest}=1? +4 Stealth in a wooded area;
_   :{IIf~%ElvenMagic%=Yes? +2 Spellcraft to identify magic items;
_   :{IIf~{Param~Race,%Race%}=Svirfneblin? +2 Stealth underground; +{If~{Find~1,Stoneblood,%FeatsAll%}=0?2/4} Perception vs unusual stonework (auto.check {If~{Find~1,Stoneblood,%FeatsAll%}=0?10/20}');
_}}}}}
_}
_{Color~DarkCyan,
_{If~%BrdBardicKnowledge%>0? +%BrdBardicKnowledge% Knowledge not listed;}
_{If~{And~{Param~Class,%Class%}=Bard,%CharacterLevel%>=2}=1? +Versatile Performance;}
_{IIf~{And~{Param~Class,%Class%}=Bard,%CharacterLevel%>=5}=1? +{IIf~%CharacterLevel%>=19?Take 10 all skills:Take 10 on Knowledge with ranks} ([BardSpecialQualitiesLoremaster=%CharacterLevel%]/day Take 20{If~%CharacterLevel%>=19? on Knowledge});}
_{If~{And~{Param~Class,%Class%}=Bard,%CharacterLevel%>=10}=1? +Use all skills;}
_{If~{And~{Param~Class,%Class%}=Bard,%CharacterLevel%>=19}=1? +Take 10 all skills;}
_{If~%BbnRagingClimber%>0? +%BbnRagingClimber% Climb in Rage;}
_{If~%BbnRagingLeaper%>0? +%BbnRagingLeaper% Acrobatics (Jump) in Rage;}
_{If~%MonkHighJump%>0? +%MonkHighJump% Acrobatics (Jump; no running start needed);}
_{If~%BbnRagingSwimmer%>0? +%BbnRagingSwimmer% Swim in Rage;}
_{IIf~%AnimalCompanion%!=0? +4 Handle Animal/Wild Empathy with his animal companion;}
_{If~%FavoredEnemies%>0? +Favored enemy bonus;}
_{If~%FavoredTerrains%>0? +Favored terrain bonus;}
_{If~%RNGTrack%>0? +%RNGTrack% Survival (Track);}
_{IIf~%ROGTrap%>0? +%ROGTrap% Perception (vs traps)/Disable Device;}
_{If~%ROGFastStealth%=Yes? +Fast Stealth;}
_{If~%ROGLedgeWalker%=Yes? +Ledge Walker;}
_{If~%ROGQuickDisable%=Yes? +Quick Disable;}
_}
_[FontE]
_[FontB=1]
_{Color~Red,
#_{If~{Calc~%ACP%+%ACPSh%}<0? (ACP) to be added to these skill checks%ACPNote%;}
_{If~{Calc~%ACP%+%ACPSh%}<0? ACP not included;}
_{If~%ArmorShieldPenalty%<0? %ArmorShieldPenalty% skills checks that involve moving;}
_}
_[FontE]

:Skill_Special2
1,[FontB=2]{Color~DarkCyan,
_{If~%BrdBardicKnowledge%>0? +%BrdBardicKnowledge% Knowledge not listed;}
_}
_[FontE]

# ---------------------------------------------------------------------------
# REPLACE .. Replace informations
# Beware not to put "," in the replaced informations.

:ReplaceInfo
1,|SA={Replace~RageTOREPLACE,[BarbarianRageTOREPLACE],%SA%}|
_|SA={Replace~CHABONUSSMITE,[CHABONUSSMITE],%SA%}|
_|SA={Replace~CHAWillDCReplace,Will DC[CHAWillDCReplace],%SA%}|
_|SQ={Replace~CHAWillDCReplace,Will DC[CHAWillDCReplace],%SQ%}|
_|SQ={Replace~CHADCReplace,[CHAWillDCReplace],%SQ%}|
_|SQ={Replace~CHAPERDAYREPLACETIEFLING,[CHAPERDAYREPLACETIEFLING],%SQ%}|
_|SQ={Replace~CHAPERDAYREPLACE,[CHAPERDAYREPLACE],%SQ%}|
_|SA={Replace~ClericChannelSpecialReplace,[Channel_Special],%SA%}|
_|SA={Replace~ClericChannelDCReplace,Will DC[ClericChannelDCReplace],%SA%}|
_|SA={Replace~INTBONUSREPLACE,[INTBONUSREPLACE],%SA%}|
_|SA={Replace~INTPERDAYREPLACE,[INTPERDAYREPLACE],%SA%}|
_|SQ={Replace~INTPERDAYREPLACE,[INTPERDAYREPLACE],%SQ%}|
_|MonkFeats={CommaReplace~0,;,%MonkFeats%}||SA={Replace~MONKFEATS,%MonkFeats%,%SA%}||MonkFeats={CommaReplace~1,;,%MonkFeats%}|
_|SA={Replace~MONKKIPOOL,[MonkKiPoolReplace],%SA%}|
_|SQ={Replace~PALADDMercy,[PALADDMercy],%SQ%}|
_|SA={Replace~PALCHANNELENERGY,[PALCHANNELENERGY],%SA%}|
_|SA={Replace~PALHCLoH,[PALHCLoH],%SA%}|
_|SQ={Replace~PALHCLoH,[PALHCLoH],%SQ%}|
_|SA={Replace~PALHOLYCHAMPION,[PALHOLYCHAMPION],%SA%}|
_|SQ={Replace~PALLayOnHands,[PALLayOnHands],%SQ%}|
_|SQ={Replace~PALMercy,[PALMercy],%SQ%}|
_|SA={Replace~PALSmiteBAnish,[PALSmiteBAnish],%SA%}|
_|RangerFeats={CommaReplace~0,;,%RangerFeats%}||SA={Replace~RNGFEATS,%RangerFeats%,%SA%}|
_|SA={Replace~RNGMasterHunter,[RNGMasterHunter],%SA%}|
_|SA={Replace~ROGMASTERSTRIKE1,[ROGMASTERSTRIKE1],%SA%}|
_|SA={Replace~ROGMASTERSTRIKE,[ROGMASTERSTRIKE],%SA%}|
_|SQ={Replace~SORBLOODLINEFEATS,[SORBLOODLINEFEATS],%SQ%}|
_|SA={Replace~WISDCReplace,[WISDCReplace],%SA%}|
_|SA={Replace~WIZNecPerDay,[WIZNecPerDay],%SA%}|
_|SA={Replace~WIZNecSave,Will DC[WIZNecSave],%SA%}|
_|SA={Replace~WIZNecPowerFeatDescription,[WIZNecPowerFeatDescription=%WIZNecPower%],%SA%}|
_|SA={Replace~WIZNecPowerFeat,[WIZNecPowerFeat],%SA%}|
_|SQ={Replace~WISBONUS,[WISBONUSReplace],%SQ%}|
_|SA={Replace~DRUWildArmor,[DRUWildArmor],%SA%}|
_|SA={Replace~BARDICPERFORMROUNDS,[BARDICPERFORMROUNDS],%SA%}|
#
_{If~{Find~1,ADDGNOMEMAGIC,%RaceTraits%}!=0?|RaceTraits={Replace~ADDGNOMEMAGIC,[ADDGNOMEMAGIC],%RaceTraits%}|}
_{If~{Find~1,ADDFELLMAGIC,%RaceTraits%}!=0?|RaceTraits={Replace~ADDFELLMAGIC,[ADDFELLMAGIC],%RaceTraits%}|}
_{If~{Find~1,ADDPYROMANIAC,%RaceTraits%}!=0?|RaceTraits={Replace~ADDPYROMANIAC,[ADDPYROMANIAC],%RaceTraits%}|}
_{If~{Find~1,ADDMAGICALLINGUIST,%RaceTraits%}!=0?|RaceTraits={Replace~ADDMAGICALLINGUIST,[ADDMAGICALLINGUIST],%RaceTraits%}|}
_{If~{Find~1,ADDDROWMAGIC,%RaceTraits%}!=0?|RaceTraits={Replace~ADDDROWMAGIC,[ADDDROWMAGIC],%RaceTraits%}|}
_|RaceTraits={Replace~CONBONUSREPLACE,{If~%CONBonus%>0?-%CONBonus% WP/0 WP},%RaceTraits%}|
_|RaceTraits={Replace~CONREPLACE,%CON%,%RaceTraits%}|

:ADDFELLMAGIC
1,|Rule=+1 DC for Necromantic spells{If~%WIS%>=11?[AddFellMagicRule]}|[PrRule]

:AddFellMagicRule
1,; |Temp1=[MagicBlood]; {Italic~bleed; chill touch; detect poison; touch of fatigue;} CL%CharacterLevel% (DC{Calc~10+%WISBonus%}+spell level)|
_%Temp1%[AddExtraRacialSpells]

:ADDGNOMEMAGIC
1,|Rule=+1 DC for Illusion spells{If~%CHA%>=11?[AddGnomeMagicRule]}|[PrRule]

:AddGnomeMagicRule
1,; |Temp1=[MagicBlood]; {Italic~dancing light; ghost sound; presdidigitation; [GnomeBurrowFriend]speak with animals}; CL%CharacterLevel% (DC{Calc~10+%CHABonus%}+spell level)|
_%Temp1%[AddExtraRacialSpells]

:ADDMAGICALLINGUIST
1,|Rule=+1 DC for language-dependent spells or spells creating glyph/symbol/writing; +2 save vs such spells{If~%CHA%>=11?[AddGnomeLinguistRule]}|[PrRule]

:AddGnomeLinguistRule
1,; |Temp1=[MagicBlood]; {Italic~arcane mark; comprehend languages; message; read magic}; CL%CharacterLevel% (DC{Calc~10+%CHABonus%}+spell level)|
_%Temp1%[AddExtraRacialSpells]

:ADDPYROMANIAC
1,|Rule=+1 CL for some fire spells and alchemist bomb dmg{If~%CHA%>=11?[AddGnomePyroRule]}|[PrRule]

:AddGnomePyroRule
1,; |Temp1=[MagicBlood]; {Italic~dancing lights; flare; prestidigitation; produce flame;} CL%CharacterLevel% (DC{Calc~10+%CHABonus%}+spell level)|
_%Temp1%[AddExtraRacialSpells]

:ADDDROWMAGIC
1,|Rule=[Adddrowmagicrule]|[PrRule]

:Adddrowmagicrule
1,|Temp1=1[Slash]day {Italic~dancing lights; darkness; faerie fire;} CL%CharacterLevel%|
_%Temp1%[AddExtraRacialSpells]

:GnomeBurrowFriend
1,{If~{And~{Find~1,Burrow Friend,%FeatsAll%}!=0,{Find~1,Magic in the Blood,%FeatsAll%}=0}=1?2[Slash]day; }

:MagicBlood
1,{If~{Find~1,Magic in the Blood,%FeatsAll%}!=0?At will/1[Slash]day}

:BarbarianRageTOREPLACE
1,Rage|BbnRageRounds={Calc~((%CharacterLevel%*2)+%CONBonus%+2)}|
_ [FontB=2]({IIf~{Find~1,Extra Rage,%FeatsAll%}!=0?|BbnRageRounds+6|{Color~Green,%BbnRageRounds%}:%BbnRageRounds%} rounds/day)[FontE]
_|Rule=[BarbarianRage]|[PrRule]

:BarbarianRage
1,{IIf~%CharacterLevel%>=20?+8 STR/CON; +4 Will
_:{IIf~%CharacterLevel%>=11?+6 STR/CON; +3 Will
_:+4 STR/CON; +2 Will
_}}
_; -2 AC{If~%CharacterLevel%<17?; fatigued x2 rounds of rage}

:BARDICPERFORMROUNDS
1,|Temp1={Calc~((%CharacterLevel%*2)+2+%CHABonus%)}|
_|ExtraPerformanceFeat=0|
_{If~{Find~1,Extra Performance,%FeatsAll%}!=0?|Temp1+6||ExtraPerformanceFeat=1|}
_{If~{Find~1,Artist,%FeatsAll%}!=0?|Temp1+3||ExtraPerformanceFeat=1|}
_{If~%ExtraPerformanceFeat%=1?{Color~Green,%Temp1%}/%Temp1%}

:CHABONUSSMITE
1,{If~%CHABonus%>=0?%CHABonus%/0}

:CHAPERDAYREPLACE
1,{If~%CHABonus%>0?{Calc~3+%CHABonus%}/3}

:CHAPERDAYREPLACETIEFLING
1,{If~{Param~Race,%Race%}=Tiefling?{If~%CHABonus%>0?{Calc~4+%CHABonus%}/4}
_/{If~%CHABonus%>0?{Calc~3+%CHABonus%}/3}
_}

:CHAWillDCReplace
1,{Trunc~{Calc~((%CharacterLevel%/2)+10+%CHABonus%)}}

:ClericChannelDCReplace
1,Will DC|Temp1={Trunc~{Calc~((%CharacterLevel%/2)+10+%CHABonus%)}}|
_{If~{Find~1,Improved Channel,%FeatsAll%}!=0?|Temp1+2|{Color~Green,%Temp1%}/%Temp1%}

:DRUWildArmor
1,{If~%DRUWildArmor%=1?{BOld~; Wild Armor or Shield= keep the AC bonus in wild shape}/}

:INTBONUSREPLACE
1,INT ({If~%INTBonus%>0?%INTBonus%/1})

:INTPERDAYREPLACE
1,{If~%INTBonus%>0?{Calc~3+%INTBonus%}/3}

:MonkKiPoolReplace
1,|Temp1={Trunc~{Calc~((%CharacterLevel%/2)+%WISBonus%)}}|{If~{Find~1,Extra Ki,%FeatsAll%}!=0?|Temp1+2|{Color~Green,%Temp1%}/%Temp1%}

:PALADDMercy
1,{If~%CharacterLevel%>=3? +Mercy/}

:PALCHANNELENERGY
1,{Trunc~{Calc~(%CharacterLevel%/2)}}d6PALHCLoH;
_ Will DC|Temp1={Trunc~{Calc~((%CharacterLevel%/2)+10+%CHABonus%)}}|
_{If~{Find~1,Improved Channel,%FeatsAll%}!=0?|Temp1+2|{Color~Green,%Temp1%}/%Temp1%}
_; uses 2 Lay on Hands
_{If~{Find~1,Extra Channel,%FeatsAll%}!=0?; [FontB=2]{Color~Green,+4 LoH to Channel Energy}[FontE]}

:PALHCLoH
1,{If~%PALHolyChampion%=Yes? (always heal the maximum)/}

:PALHOLYCHAMPION
1,{IIf~%PALHolyChampion%=Yes?; {Bold~{Italic~banishment}} vs evil outsiders (max {Bold~{Calc~2*%CharacterLevel%}}HD CL{Bold~%CharacterLevel%}; DC{Bold~{Calc~17+%WISBonus%} or {Calc~17+%WISBonus%+4}} +2 vs SR/+4 DC with weapon and holy symbol)
_:}

:PALLayOnHands
1,|Temp1=%CharacterLevel%||Temp1\2||Temp1+%CHABonus%|
_{If~{Find~1,Extra Lay on Hands,%FeatsAll%}!=0?|Temp1+2|{Color~Green,%Temp1%}/%Temp1%}

:PALMercy
1,|Temp1={Trunc~{Calc~(%CharacterLevel%/3)}}|
_{If~{Find~1,Extra Mercy,%FeatsAll%}!=0?|Temp1+1|{Color~Green,%Temp1%}/%Temp1%}
_; with Lay on Hands (FREE) removes = {While~%Temp1%,[PaladinSpecialQualitiesMercy]|Temp1-1|{If~%Temp1%>0?; }}

:PALSmiteBAnish
1,{If~%PALHolyChampion%=Yes? +Banishment/}

:RNGMasterHunter
1,DC{Bold~{Trunc~{Calc~((%CharacterLevel%/2)+%WISBonus%+10)}}}

:ROGMASTERSTRIKE1
1,{If~%ROGMasterStrike%=Yes?Master Strike /}

:ROGMASTERSTRIKE
1,|Temp1=%CharacterLevel%||Temp1\2||Temp1+10||Temp1+%INTBonus%|
_{IIf~%ROGMasterStrike%=Yes?|Rule=can add sleep 1d4h; paralyzed 2d6r or slain; Fort DC{Bold~%Temp1%}; 1/target/24h|[PrRuleAlways]:}

:SORBLOODLINEFEATS
1,{CommaReplace~0,;,%BloodlineFeats%}

:WISBONUSReplace
1,{Bold~{If~%WISBonus%>0?%WISBonus%/1}}

:WISDCReplace
1,{Trunc~{Calc~((%CharacterLevel%/2)+10+%WISBonus%)}}

:WIZNecPerDay
1,|TempNumber=[INTPERDAYREPLACE]|{If~{Find~1,Extra Channel,%FeatsAll%}>1?|TempNumber+2|}%TempNumber%

:WIZNecSave
1,|TempNumber=[CHAWillDCReplace]|{If~{Find~1,Improved Channel,%FeatsAll%}>1?|TempNumber+2|}%TempNumber%

:WIZNecPowerFeat
1,{Bold~%WIZNecPowerFeat%}

:WIZNecPowerFeatDescription
1,STANDARD (30') Undeads obey your commands (as {Italic~control undead}); new save each day if intelligent undead; max {Bold~%CharacterLevel%} HD; opposed CHA checks if under control of another
2,STANDARD (30' radius) Undeads flee as if panicked 1 minute (drop anything; flee top speed away; -2 save/skill/ability; if corner = cower = Total Defense; can use SA or spells to flee); new save each round for intelligent undead

# ---------------------------------------------------------------------------
:SetArmor
# Set Armor / Shield / SpellAC
1,|MagicPlussesMage1=0||MagicPlussesMage2=0||SpellImprovement=0||ACSpellID=0||NormalPlusses=0||ArmorType=0||ArmorPlusses=0||MonkACBonus=0|
_|AdjustedAC=10||ACFF=10||ACTouch=10||SpellACImprovementFlag=0||ACBArm=0||ACBDef=0||ACBIns=0||ACBNat=0||ACBShi=0|
_|FeatsSkill=||ArmorShieldPenalty=0|
# For Wealth value, roll either the Shield or the Armor first, depending on the feats chosen.
_{If~{And~{Find~1,Armor Proficiency,%FeatsAll%}!=0,{Find~1,Shield Proficiency,%FeatsAll%}!=0}=1?{If~{Dice~1d2}=1?[SetArmorType][SetShieldType]/[SetShieldType][SetArmorType]}
_/{If~{And~{Find~1,Armor Proficiency,%FeatsAll%}=0,{Find~1,Shield Proficiency,%FeatsAll%}!=0}=1?[SetShieldType][SetArmorType]
_/{If~{And~{Find~1,Armor Proficiency,%FeatsAll%}!=0,{Find~1,Shield Proficiency,%FeatsAll%}=0}=1?[SetArmorType][SetShieldType]
_/{If~{Dice~1d2}=1?[SetArmorType][SetShieldType]/[SetShieldType][SetArmorType]}
_}}}
_|SaveResistBonus=0||Haste=0|[SetSpellAC=%Class%]

# ARMOR
### NEW CLASS ###
:SetArmorType
1,[SetArmorType2=%Class%]
_{If~%WealthPROT%>=2000?[SetArmorTypeExtra=%Class%]}

:SetArmorType2
1-5,[SetArmorType_Others]
6,[SetArmorType_Monk]
7-9,[SetArmorType_Others]
10-11,[SetArmorType_SorWiz]
12,[SetArmorType_SorWiz]
13-16,[SetArmorType_Others]

:SetArmorType_Monk
1,|NoFeat=1||ArmorType=0|[DetermineMonkArmorClass]
### TEST ###
_{If~{And~%ArmorType%!=0,%TestCostWeight%=1}=1?|TestTableNote= %Cost%gp %Wt%lb %ACP% %ASF% %AMV%||ArmorType& [TestTable]|}

:SetArmorType_Others
1,|NoFeat=1||ArmorType=0|
# NO Armor Proficiency: 1% to wear an armor anyway (with the penalties).
_{If~{Dice~1d100}=1?|NoFeat=NoFeat|[DetermineNormalArmor]
# Armor Proficiency: 5% not to wear armor.
_/{If~{Find~1,Armor Proficiency,%FeatsAll%}!=0?{If~{Dice~1d20}>1?[DetermineNormalArmor]}
_}}
### TEST ### 
_{If~{And~%ArmorType%!=0,%TestCostWeight%=1}=1?|TestTableNote= %Cost%gp %Wt%lb %ACP% %ASF% %AMV%||ArmorType& [TestTable]|}

:SetArmorType_SorWiz
1,|NoFeat=1||ArmorType=0|
# SOR/WIZ with Armor Proficiency: 95% to wear an armor. I not, 95% to wear an item counting as an armor.
_{If~{Find~1,Armor Proficiency,%FeatsAll%}!=0?{If~{Dice~1d20}>1?[DetermineNormalArmor]/{If~{And~{Dice~1d20}>1,%WealthPROT%>=1000}=1?|MAB12=1|[DetermineMageArmor]}}
# SOR/WIZ NO Armor Proficiency: 1% to wear an armor anyway. If not, 95% to have an item counting has an armor.
_       /{If~{Dice~1d100}=1?|NoFeat=NoFeat|[DetermineNormalArmor]/{If~{And~{Dice~1d20}>1,%WealthPROT%>=1000}=1?|MAB12=1|[DetermineMageArmor]}}
_}
### TEST ###
_{If~{And~%ArmorType%!=0,%TestCostWeight%=1}=1?|TestTableNote= %Cost%gp %Wt%lb %ACP% %ASF% %AMV%||ArmorType& [TestTable]|}

# ---------------------------
:DetermineMonkArmorClass
1,[MonkACBonus=%CharacterLevel%]|NormalPlusses={Calc~(%AdjustedAC%+%MonkACBonus%-10)}|
_{If~%WISBonus%>0?|NormalPlusses+%WISBonus%||ACFF+%WISBonus%||ACTouch+%WISBonus%|}
_|AdjustedAC+%NormalPlusses%||ACFF+%MonkACBonus%||ACTouch+%MonkACBonus%|
_|PrintArmor=4|

:MonkACBonus
1-3,|MonkACBonus=0|
4-7,|MonkACBonus=1|
8-11,|MonkACBonus=2|
12-15,|MonkACBonus=3|
16-19,|MonkACBonus=4|
20-100,|MonkACBonus=5|

# ---------------------------
:DetermineNormalArmor
1,|Material=0||ChoiceMod=0||NoFeatTemp=%NoFeat%|
_{If~{Find~1,Dwarven Armor Proficiency,%FeatsAll%}!=0?|ChoiceMod=3|
_/{If~{Find~1,Armor Proficiency (Heavy),%FeatsAll%}!=0?|ChoiceMod=2|
_/{If~{Find~1,Armor Proficiency (Medium),%FeatsAll%}!=0?|ChoiceMod=1|
_}}}
_{If~{Find~1,Fleet,%FeatsAll%}!=0?[DetermineNormalArmor%NoFeat%=1]/[DetermineNormalArmor%NoFeat%+%ChoiceMod%]}

;DetermineNormalArmorNoFeat
3,{If~{Find~1,Armor Proficiency (Light),%FeatsAll%}!=0?|NoFeatTemp=1|}|Temp1=Light|[DetermineNormalArmor2]
2,{If~{Find~1,Armor Proficiency (Medium),%FeatsAll%}!=0?|NoFeatTemp=1|}|Temp1=Medium|[DetermineNormalArmor2]
1,{If~{Find~1,Armor Proficiency (Heavy),%FeatsAll%}!=0?|NoFeatTemp=1|}|Temp1=Heavy|[DetermineNormalArmor2]

;DetermineNormalArmor1
3,{If~{Find~1,Armor Proficiency (Light),%FeatsAll%}!=0?|Temp1=Light|[DetermineNormalArmor2]/[DetermineNormalArmor1+%ChoiceMod%]}
2,{If~{Find~1,Armor Proficiency (Medium),%FeatsAll%}!=0?|Temp1=Medium|[DetermineNormalArmor2]/[DetermineNormalArmor1+%ChoiceMod%]}
1,{If~{Find~1,Dwarven Armor Proficiency,%FeatsAll%}!=0?|Temp1=Dwarf|[DetermineNormalArmor2]
_/{If~{Find~1,Armor Proficiency (Heavy),%FeatsAll%}!=0?|Temp1=Heavy|[DetermineNormalArmor2]
_/[DetermineNormalArmor1+%ChoiceMod%]
_}}

:DetermineNormalArmor2
1,|Ironwood=0||MW=0||AdamDR=0|
_{If~{Param~Class,%Class%}=Druid?[DruidArmor]}
_[FindArmor]

# Ironwood 5 lbs/level; if 1/2 wt +1 enhancement
:DruidArmor
1,|Temp1&_Druid|{If~{And~{Dice~1d2}=1,%CharacterLevel%>=11}=1?|Ironwood=%CharacterLevel%||Ironwood*5||Temp1&_Ironwood|}

:FindArmor
1,|TempString=[Equipment.Armors_%Temp1%(,,,%Size%)]|
_{Split~TempString,"!",ArmorType,Cost,Wt,Book,NormalPlusses,MaxDex,ACP,ASF,AMV,Note}
# Bard with Light Armor have no Arcane Spell Failure
_{If~{And~{Param~Class,%Class%}=Bard,%Temp1%=Light}=1?|ASF=0|}
# NOMATERIAL : means item can't be made with a special material
# Special Material : 4%/Heroic level to have a special material, less for Basic. (if enough wealth).
_{If~{Find~1,INTERLOCK,%Note%}!=0?|Interlock=Yes|/|Interlock=No|}
_{If~{And~{Find~1,NOMATERIAL,%Note%}=0,%WealthPROT%>={Calc~(%Cost%+1000)}}=1?{If~{Param~Heroic,%Heroic%}=Heroic?{If~{Dice~1d25}<%CharacterLevel%?[ArmorMaterial]}/{If~{Dice~1d100}<%CharacterLevel%?[ArmorMaterial]}}}
_{If~{Find~1,MW2,%Note%}!=0?|MW=2|}
# 90% to generate a Masterwork Item if enough Wealth.
_{If~{And~%MW%=0,%WealthPROT%>={Calc~(%Cost%+150)}}=1?{If~{Dice~1d10}>1?|MW=1||Cost+150||ACP+1|}}
_{If~%AMV%<1?|AMV=1|}{If~%ASF%<0?|ASF=0|}{If~%ACP%>0?|ACP=0|}
# 90% to generate a Magic Armor on MW items if enough Wealth; if not, add Masterwork to ArmorType.
_|MagicPlussesArmor=0|
_{If~%MW%!=0?
_{If~%WealthPROT%>={Calc~(%Cost%+1000)}?{If~{Dice~1d10}>1?{Reset~ArmorMagic2}[ArmorMagic]/[SetArmorMW]}/[SetArmorMW]}
_}
_[VerifyArmor]

:SetArmorMW
1,{If~%MW%=1?{If~%GroupFlag%=1?|ArmorType& MW|/|ArmorType=masterwork %ArmorType%|}}

:VerifyArmor
1,{If~%Cost%<=%WealthPROT%?{If~{And~%Ironwood%>0,%Ironwood%>=%Wt%}=1?|ArmorType={Italic~ironwood} %ArmorType%|[VerifyIronwood]}[SetArmorStats]
_/[DetermineNormalArmor]}

:VerifyIronwood
1,{If~%MagicPlussesArmor%=0?{If~{Calc~(%Ironwood%/2)}>=%Wt%?|MagicPlussesArmor=1||ACP+1||Ironwood=99|{If~%ACP%>0?|ACP=0|}}}

:SetArmorStats
1,|ACBArm=1||WealthPROT-%Cost%||WtTotalCarried+%Wt%||AdjustedAC+%NormalPlusses%||ACFF+%NormalPlusses%||PrintArmor=2|
_{If~%MagicPlussesArmor%>0?|ArmorPlusses={Calc~%NormalPlusses%+%MagicPlussesArmor%}||AdjustedAC+%MagicPlussesArmor%||ACFF+%MagicPlussesArmor%||PrintArmor=3|}
_{If~%ACP%>0?|ACP=0|}{If~%NoFeatTemp%=NoFeat?|ArmorShieldPenalty+%ACP%|}
_{If~{Find~1,Gauntlet,%Note%}!=0?|ArmorGauntlet=Yes|}
_{If~{Find~1,REDUCEDDWARF,%Note%}!=0?|SlowSteady=AMV4|}

# ---------------------------
:ArmorMaterial
1,[ArmorMaterial2]|ArmorType=%Material% %ArmorType%|

;ArmorMaterial2
10,{IIf~{Find~1,Metal,%Note%}!=0?|Material=mithral||MW=2||AMV-1||ASF-10||ACP+3||MaxDex+2||Wt/2|
_{IIf~{Find~1,Light,%Note%}!=0?|Cost+1000|
_:{IIf~{Find~1,Medium,%Note%}!=0?|Cost+40000|
_:{IIf~{Find~1,Heavy,%Note%}!=0?|Cost+9000|
_}}}
_:[ArmorMaterial2]}
10,{If~{Find~1,Dragon,%Note%}!=0?|Material=[~Creatures.DragonColor] dragonhide||MW=2||ACP+1||Cost*2||Cost+300|/ [ArmorMaterial2]}
10,{If~{Find~1,Metal,%Note%}!=0?|Material=adamantine||MW=2||ACP+1|
_{If~{Find~1,Light,%Note%}!=0?|AdamDR=1||Cost+5000|
_/ {If~{Find~1,Medium,%Note%}!=0?|AdamDR=2||Cost+10000|
_/ {If~{Find~1,Heavy,%Note%}!=0?|AdamDR=3||Cost+15000|
_}}}
_/ [ArmorMaterial2]}
#1,{IIf~{Find~1,Wood,%Note%}!=0?|Material=darkwood||MW=2||ACP+1||Cost+{Calc~(10*%Wt%)}||Wt/2|:[ArmorMaterial2]}
1,{If~{Find~1,Metal,%Note%}!=0?|Material=cold iron||Cost*2|/ [ArmorMaterial2]}

# Druids: Dragonhide Hide, banded mail, breastplate, half-plate, full plate, shield = x2 cost (MW+item)
# Adamantine (MW): items with metal parts; Ammo +60 gp/missile, Armor L+5000 (DR1/-) M+10000 (DR2/-) H+15000 (DR3/-) Wpn +3000
# Darkwood (MW): all wood items only; 1/2 wt; shield lessen ACP by 2; +10gp/lb of original item
# Cold Iron (not considered MW): items with metal parts; +2000 gp if add magical enhancements on it; x2 cost (+50% for double weapons with one head only)
# Mithral (MW): items made primarly of metal; Armor: one category lighter for MV penalties, -10 percept ASF, -3 ACP, +2 maxdex; 1/2 wt
#               Armor L:+1000 M:+4000 H:+9000 Shield+1000 Other +500/lb (original weight)
# Silver Alchemical (not considered MW): items made primarly of metal; S/P weapon -1 damage
#               Ammo +2gp; Wpn Light +20gp one-handed/one-head double +90, 2-handed or 2 heads of double +180

# ---------------------------
:ArmorMagic
1,|ArmorMagicSpecial=|[ArmorMagic2]
# Set at 3750 to lower the chances of glamered armors. 
_{If~%WealthPROT%>={Calc~(%Cost%+3750)}?{If~{Param~Heroic,%Heroic%}=Heroic?{If~{Dice~1d25}<%CharacterLevel%?[ArmorMagicSpecial]}/{If~{Dice~1d100}<%CharacterLevel%?[ArmorMagicSpecial]}}}
_{If~{Length~%ArmorMagicSpecial%}>3?|ArmorType=%ArmorMagicSpecial%%ArmorType%|}

;!ArmorMagic2
1,|MagicPlussesArmor=1||Cost+1000|
2,{If~%WealthPROT%>={Calc~(%Cost%+4000)}?[ArmorMagic2_2]/[ArmorMagic2]}
3,{If~%WealthPROT%>={Calc~(%Cost%+9000)}?[ArmorMagic2_3]/[ArmorMagic2]}
4,{If~%WealthPROT%>={Calc~(%Cost%+16000)}?[ArmorMagic2_4]/[ArmorMagic2]}
5,{If~%WealthPROT%>={Calc~(%Cost%+25000)}?[ArmorMagic2_5]/[ArmorMagic2]}
6,{If~%WealthPROT%>={Calc~(%Cost%+36000)}?[ArmorMagic2_6]/[ArmorMagic2]}
7,{If~%WealthPROT%>={Calc~(%Cost%+49000)}?[ArmorMagic2_7]/[ArmorMagic2]}
8,{If~%WealthPROT%>={Calc~(%Cost%+64000)}?[ArmorMagic2_8]/[ArmorMagic2]}
9,{If~%WealthPROT%>={Calc~(%Cost%+81000)}?[ArmorMagic2_9]/[ArmorMagic2]}
10,{If~%WealthPROT%>={Calc~(%Cost%+100000)}?[ArmorMagic2_10]/[ArmorMagic2]}

;ArmorMagic2_2
75,|MagicPlussesArmor=2||Cost+4000|
25,|MagicPlussesArmor=1||Cost+4000|[ArmorBonus1]

;ArmorMagic2_3
75,|MagicPlussesArmor=3||Cost+9000|
15,|MagicPlussesArmor=2||Cost+9000|[ArmorBonus1]
10,|MagicPlussesArmor=1||Cost+9000|[ArmorBonus2]

;ArmorMagic2_4
75,|MagicPlussesArmor=4||Cost+16000|
10,|MagicPlussesArmor=3||Cost+16000|[ArmorBonus1]
8,|MagicPlussesArmor=2||Cost+16000|[ArmorBonus2]
7,|MagicPlussesArmor=1||Cost+16000|[ArmorBonus3]

;ArmorMagic2_5
75,|MagicPlussesArmor=5||Cost+25000|
10,|MagicPlussesArmor=4||Cost+25000|[ArmorBonus1]
5,|MagicPlussesArmor=3||Cost+25000|[ArmorBonus2]
5,|MagicPlussesArmor=2||Cost+25000|[ArmorBonus3]
5,|MagicPlussesArmor=1||Cost+25000|[ArmorBonus4]

;ArmorMagic2_6
1,|MagicPlussesArmor=5||Cost+36000|[ArmorBonus1]
1,|MagicPlussesArmor=4||Cost+36000|[ArmorBonus2]
1,|MagicPlussesArmor=3||Cost+36000|[ArmorBonus3]
1,|MagicPlussesArmor=2||Cost+36000|[ArmorBonus4]
1,|MagicPlussesArmor=1||Cost+36000|[ArmorBonus5]

;ArmorMagic2_7
1,|MagicPlussesArmor=5||Cost+49000|[ArmorBonus2]
1,|MagicPlussesArmor=4||Cost+49000|[ArmorBonus3]
1,|MagicPlussesArmor=3||Cost+49000|[ArmorBonus4]
1,|MagicPlussesArmor=2||Cost+49000|[ArmorBonus5]

;ArmorMagic2_8
1,|MagicPlussesArmor=5||Cost+64000|[ArmorBonus3]
1,|MagicPlussesArmor=4||Cost+64000|[ArmorBonus4]
1,|MagicPlussesArmor=3||Cost+64000|[ArmorBonus5]

;ArmorMagic2_9
1,|MagicPlussesArmor=5||Cost+81000|[ArmorBonus4]
1,|MagicPlussesArmor=4||Cost+81000|[ArmorBonus5]

;ArmorMagic2_10
1,|MagicPlussesArmor=5||Cost+100000|[ArmorBonus5]

;ArmorBonus1
1,|ArmorMagicSpecial&light fortification ||Fortification>25|

;ArmorBonus2
1,|ArmorMagicSpecial&spell resistance 13 ||SR>13|

:ArmorBonus3
1,|ArmorMagicSpecial&moderate fortification ||Fortification>50|
2,|ArmorMagicSpecial&ghost touch |
3,|ArmorMagicSpecial&invulnerability |
4-8,{If~{Param~Class,%Class%}=Druid?|ArmorMagicSpecial&wild ||DRUWildArmor=1|/[ArmorBonus3]}
9,|ArmorMagicSpecial&spell resistance 15 ||SR>15|
# 1+2
10,|ArmorMagicSpecial&light fortification spell resistance 13 ||SR>13||Fortification>25|

:ArmorBonus4
1,|ArmorMagicSpecial&spell resistance 17 ||SR>17|
# 1+3
1,|ArmorMagicSpecial&light fortification ghost touch ||Fortification>25|
2,|ArmorMagicSpecial&light fortification invulnerability ||Fortification>25|
3,|ArmorMagicSpecial&light fortification spell resistance 15 ||SR>15||Fortification>25|
4-8,{If~{Param~Class,%Class%}=Druid?|ArmorMagicSpecial&light fortification wild ||DRUWildArmor=1||Fortification>25|/[ArmorBonus4]}

:ArmorBonus5
1,|ArmorMagicSpecial&heavy fortification ||Fortification>75|
2,|ArmorMagicSpecial&spell resistance 19 ||SR>19|
# 1+4
3,|ArmorMagicSpecial&light fortification spell resistance 17 ||SR>17||Fortification>25|
# 2+3
4,|ArmorMagicSpecial&spell resistance 13 moderate fortification ||SR>13||Fortification>50|
5,|ArmorMagicSpecial&spell resistance 13 ghost touch ||SR>13|
6,|ArmorMagicSpecial&spell resistance 13 invulnerability ||SR>13|
7-11,{If~{Param~Class,%Class%}=Druid?|ArmorMagicSpecial&spell resistance 13 wild ||SR>13||DRUWildArmor=1|/[ArmorBonus5]}

;ArmorMagicSpecial
1,{If~%WealthPROT%>={Calc~(%Cost%+66000)}?|TempNumber=66000||ArmorMagicSpecial&[EnergyType] resistance 30 ||Cost+%TempNumber%|
_/{If~%WealthPROT%>={Calc~(%Cost%+42000)}?|TempNumber=42000||ArmorMagicSpecial&[EnergyType] resistance 20 ||Cost+%TempNumber%|
_/{If~%WealthPROT%>={Calc~(%Cost%+18000)}?|TempNumber=18000||ArmorMagicSpecial&[EnergyType] resistance 10 ||Cost+%TempNumber%|
_/ [ArmorMagicSpecial]}}}
1,{If~%WealthPROT%>={Calc~(%Cost%+49000)}?|ArmorMagicSpecial&etherealness ||Cost+49000|/[ArmorMagicSpecial]}
1,{If~%WealthPROT%>={Calc~(%Cost%+2700)}?|ArmorMagicSpecial&glamered ||Cost+2700|/[ArmorMagicSpecial]}
1,{If~%WealthPROT%>={Calc~(%Cost%+33750)}?|ArmorMagicSpecial&greater shadow ||Cost+33750||FeatsSkill&;greater shadow|
_/{If~%WealthPROT%>={Calc~(%Cost%+15000)}?|ArmorMagicSpecial&improved shadow ||Cost+15000||FeatsSkill&;improved shadow|
_/{If~%WealthPROT%>={Calc~(%Cost%+3750)}?|ArmorMagicSpecial&shadow ||Cost+3750||FeatsSkill&;shadow|
_/ [ArmorMagicSpecial]}}}
1,{If~%WealthPROT%>={Calc~(%Cost%+33750)}?|ArmorMagicSpecial&greater slick ||Cost+33750||FeatsSkill&;greater slick|
_/{If~%WealthPROT%>={Calc~(%Cost%+15000)}?|ArmorMagicSpecial&improved slick ||Cost+15000||FeatsSkill&;improved slick|
_/{If~%WealthPROT%>={Calc~(%Cost%+3750)}?|ArmorMagicSpecial&slick ||Cost+3750||FeatsSkill&;slick|
_/ [ArmorMagicSpecial]}}}
1,{If~{And~%AlignmentType%=Evil,%WealthPROT%>={Calc~(%Cost%+49000)}}=1?|ArmorMagicSpecial&undead controlling ||Cost+49000|/[ArmorMagicSpecial]}
# Added new skills
# Acrobatics, Climb, Intimidate, Ride, Swim
1,{If~%WealthPROT%>={Calc~(%Cost%+33750)}?|ArmorMagicSpecial&greater nimble ||Cost+33750||FeatsSkill&;greater nimble|
_/{If~%WealthPROT%>={Calc~(%Cost%+15000)}?|ArmorMagicSpecial&improved nimble ||Cost+15000||FeatsSkill&;improved nimble|
_/{If~%WealthPROT%>={Calc~(%Cost%+3750)}?|ArmorMagicSpecial&nimble ||Cost+3750||FeatsSkill&;nimble|
_/ [ArmorMagicSpecial]}}}
1,{If~%WealthPROT%>={Calc~(%Cost%+33750)}?|ArmorMagicSpecial&greater climbing ||Cost+33750||FeatsSkill&;greater climbing|
_/{If~%WealthPROT%>={Calc~(%Cost%+15000)}?|ArmorMagicSpecial&improved climbing ||Cost+15000||FeatsSkill&;improved climbing|
_/{If~%WealthPROT%>={Calc~(%Cost%+3750)}?|ArmorMagicSpecial&climbing ||Cost+3750||FeatsSkill&;climbing|
_/ [ArmorMagicSpecial]}}}
1,{If~%WealthPROT%>={Calc~(%Cost%+33750)}?|ArmorMagicSpecial&greater fear ||Cost+33750||FeatsSkill&;greater fear|
_/{If~%WealthPROT%>={Calc~(%Cost%+15000)}?|ArmorMagicSpecial&improved fear ||Cost+15000||FeatsSkill&;improved fear|
_/{If~%WealthPROT%>={Calc~(%Cost%+3750)}?|ArmorMagicSpecial&fear ||Cost+3750||FeatsSkill&;fear|
_/ [ArmorMagicSpecial]}}}
1,{If~%WealthPROT%>={Calc~(%Cost%+33750)}?|ArmorMagicSpecial&greater horseman ||Cost+33750||FeatsSkill&;greater horseman|
_/{If~%WealthPROT%>={Calc~(%Cost%+15000)}?|ArmorMagicSpecial&improved horseman ||Cost+15000||FeatsSkill&;improved horseman|
_/{If~%WealthPROT%>={Calc~(%Cost%+3750)}?|ArmorMagicSpecial&horseman ||Cost+3750||FeatsSkill&;horseman|
_/ [ArmorMagicSpecial]}}}
1,{If~%WealthPROT%>={Calc~(%Cost%+33750)}?|ArmorMagicSpecial&greater wave ||Cost+33750||FeatsSkill&;greater wave|
_/{If~%WealthPROT%>={Calc~(%Cost%+15000)}?|ArmorMagicSpecial&improved wave ||Cost+15000||FeatsSkill&;improved wave|
_/{If~%WealthPROT%>={Calc~(%Cost%+3750)}?|ArmorMagicSpecial&wave ||Cost+3750||FeatsSkill&;wave|
_/ [ArmorMagicSpecial]}}}

:EnergyType
1,acid{If~%Material%=black dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=green dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=copper dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=silver dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=brine dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=nightmare dragonhide?|TempNumber*3||TempNumber\4|
_}}}}}}
2,cold{If~%Material%=white dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=silver dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=umbral dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=lunar dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=time dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=void dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=occult dragonhide?|TempNumber*3||TempNumber\4|
_}}}}}}}
3,electricity{If~%Material%= blue dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=bronze dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=cloud dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=sea dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=sky dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=dream dragonhide?|TempNumber*3||TempNumber\4|
_}}}}}}
4,fire{If~%Material%=red dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=brass dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=gold dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=magma dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=underworld dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=solar dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=vortex dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=occult dragonhide?|TempNumber*3||TempNumber\4|
_}}}}}}}}
5,sonic{If~%Material%=crystal dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=sovereign dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=emerald dragonhide?|TempNumber*3||TempNumber\4|
_/{If~%Material%=sapphire dragonhide?|TempNumber*3||TempNumber\4|
_}}}}

# ---------------------------
:DetermineMageArmor
1,|MageArmorBonus1=0||MageArmorBonus2=0||MagicPlussesMage1=0||MagicPlussesMage2=0||TempEQ=0||MageArmorType1=0||MageArmorType2=0|
_[DetermineMageArmor2]|PrintArmor=1||AdjustedAC+%MagicPlussesMage1%||ACFF+%MagicPlussesMage1%|

:DetermineMageArmor2
# Bracers of Armor
1-40,{If~%ACBArm%=0?
_|MageArmorType%MAB12%=1||TempEQ=1||MageArmorBonus%MAB12%=armor|
_{If~%WealthPROT%>=64000?|MagicPlussesMage%MAB12%=8||WealthPROT-64000|[SetWt]|ACBArm=1|
_/{If~%WealthPROT%>=49000?|MagicPlussesMage%MAB12%=7||WealthPROT-49000|[SetWt]|ACBArm=1|
_/{If~%WealthPROT%>=36000?|MagicPlussesMage%MAB12%=6||WealthPROT-36000|[SetWt]|ACBArm=1|
_/{If~%WealthPROT%>=25000?|MagicPlussesMage%MAB12%=5||WealthPROT-25000|[SetWt]|ACBArm=1|
_/{If~%WealthPROT%>=16000?|MagicPlussesMage%MAB12%=4||WealthPROT-16000|[SetWt]|ACBArm=1|
_/{If~%WealthPROT%>=9000?|MagicPlussesMage%MAB12%=3||WealthPROT-9000|[SetWt]|ACBArm=1|
_/{If~%WealthPROT%>=4000?|MagicPlussesMage%MAB12%=2||WealthPROT-4000|[SetWt]|ACBArm=1|
_/{If~%WealthPROT%>=1000?|MagicPlussesMage%MAB12%=1||WealthPROT-1000|[SetWt]|ACBArm=1|
_/[DetermineMageArmor2]
_}}}}}}}}
_/[DetermineMageArmor2]}
# Cloak of Protection
41-50,{If~%ACBDef%=0?|MageArmorType%MAB12%=2||TempEQ=1||MageArmorBonus%MAB12%=deflection||ACBDef=1|[Bonus2]/[DetermineMageArmor2]}
# Cloak of Natural Armor
51-60,{If~%ACBNat%=0?|MageArmorType%MAB12%=3||TempEQ=1||MageArmorBonus%MAB12%=natural||ACBNat=1|[Bonus1]/[DetermineMageArmor2]}
# Ring of Protection
61-95,{If~%ACBDef%=0?|MageArmorType%MAB12%=4||TempEQ=0||MageArmorBonus%MAB12%=deflection||ACBDef=1|[Bonus2]/[DetermineMageArmor2]}
# Cloak of Battle (Only a cloak giving +4 armor bonus as Mage Armor)
96-105,{If~{And~%ACBArm%=0,%WealthPROT%>=22000}=1?|WealthPROT-22000||MageArmorType%MAB12%=5||MagicPlussesMage%MAB12%=4||TempEQ=1||MageArmorBonus%MAB12%=armor||ACBArm=1|/[DetermineMageArmor2]}
# Amulet of Natural Armor
106-130,{If~%ACBNat%=0?|MageArmorType%MAB12%=6||TempEQ=0||MageArmorBonus%MAB12%=natural||ACBNat=1|[Bonus1]/[DetermineMageArmor2]}
### 1d130 stops here
### Below is for wizards only
# Robe of the Archmagi
131-139,{If~{And~%ACBArm%=0,%WealthPROT%>=75000}=1?|WealthPROT-75000||MageArmorType%MAB12%=7||TempEQ=1|[SetWt]|MagicPlussesMage%MAB12%=5||MageArmorBonus%MAB12%=armor||ACBArm=1|/[DetermineMageArmor2]}
# Staff of Defense
140,{If~{And~%ACBDef%=0,%WealthPROT%>=62000}=1?|WealthPROT-62000||MageArmorType%MAB12%=8||MagicPlussesMage%MAB12%=4||TempEQ=5||ACBDef=1|[SetWt][ACTouch_MAB=%MAB12%]|MageArmorBonus%MAB12%=deflection|/[DetermineMageArmor2]}
# Dusty Rose Ioun Stone
141-150,{If~{And~%ACBIns%=0,%WealthPROT%>=5000}=1?|WealthPROT-5000||MageArmorType%MAB12%=9||MagicPlussesMage%MAB12%=1|[ACTouch_MAB=%MAB12%]|MageArmorBonus%MAB12%=insight||ACBIns=1|/[DetermineMageArmor2]}
# Cloak of Battle Improved (Only a cloak giving +4 armor bonus as Mage Armor)
151-155,{If~{And~%ACBArm%=0,%WealthPROT%>=49500}=1?|WealthPROT-49500||MageArmorType%MAB12%=10||MagicPlussesMage%MAB12%=6||TempEQ=1||MageArmorBonus%MAB12%=armor||ACBArm=1|/[DetermineMageArmor2]}
# Cloak of Battle Improved (Only a cloak giving +4 armor bonus as Mage Armor)
156,{If~{And~%ACBArm%=0,%WealthPROT%>=88000}=1?|WealthPROT-88000||MageArmorType%MAB12%=11||MagicPlussesMage%MAB12%=8||TempEQ=1||MageArmorBonus%MAB12%=armor||ACBArm=1|/[DetermineMageArmor2]}
# Ghost Shroud
157-161,{If~{And~%ACBDef%=0,%WealthPROT%>=5000}=1?|WealthPROT-5000||MageArmorType%MAB12%=12||MagicPlussesMage%MAB12%=1||TempEQ=1||MageArmorBonus%MAB12%=deflection||ACBDef=1||GhostShroud=Yes|/[DetermineMageArmor2]}

:ACTouch_MAB
1,|ACTouch+%MagicPlussesMage1%|
2,|ACTouch+%MagicPlussesMage2%|

:Bonus1
1,{If~%WealthPROT%>=50000?|MagicPlussesMage%MAB12%=5||WealthPROT-50000|[SetWt]
_/{If~%WealthPROT%>=32000?|MagicPlussesMage%MAB12%=4||WealthPROT-32000|[SetWt]
_/{If~%WealthPROT%>=18000?|MagicPlussesMage%MAB12%=3||WealthPROT-18000|[SetWt]
_/{If~%WealthPROT%>=8000?|MagicPlussesMage%MAB12%=2||WealthPROT-8000|[SetWt]
_/{If~%WealthPROT%>=2000?|MagicPlussesMage%MAB12%=1||WealthPROT-2000|[SetWt]
_/[DetermineMageArmor2]
_}}}}}

:Bonus2
1,{If~%WealthPROT%>=50000?|MagicPlussesMage%MAB12%=5||WealthPROT-50000|[SetWt][ACTouch_MAB=%MAB12%]
_/{If~%WealthPROT%>=32000?|MagicPlussesMage%MAB12%=4||WealthPROT-32000|[SetWt][ACTouch_MAB=%MAB12%]
_/{If~%WealthPROT%>=18000?|MagicPlussesMage%MAB12%=3||WealthPROT-18000|[SetWt][ACTouch_MAB=%MAB12%]
_/{If~%WealthPROT%>=8000?|MagicPlussesMage%MAB12%=2||WealthPROT-8000|[SetWt][ACTouch_MAB=%MAB12%]
_/{If~%WealthPROT%>=2000?|MagicPlussesMage%MAB12%=1||WealthPROT-2000|[SetWt][ACTouch_MAB=%MAB12%]
_/[DetermineMageArmor2]
_}}}}}

### NEW CLASS ###
:SetArmorTypeExtra
1-10,{If~{Dice~1d4}=1?|MAB12=2|[DetermineMageArmor2={Dice~1d130}]|AdjustedAC+%MagicPlussesMage2%||ACFF+%MagicPlussesMage2%|}
11-13,{If~{Dice~1d2}=1?|MAB12=2|[DetermineMageArmor2]|AdjustedAC+%MagicPlussesMage2%||ACFF+%MagicPlussesMage2%|}
14-16,[SetArmorTypeExtra=1]

:MageArmorDescription
1,[MageArmorDescription2=%MageArmorType1%]
2,[MageArmorDescription2=%MageArmorType2%]

:MageArmorDescription2
1,<i>bracers of armor</i>
2,<i>cloak of protection</i>
3,<i>cloak of natural armor</i>
4,<i>ring of protection</i>
5,<i>cloak of battle</i>
6,<i>amulet of natural armor</i>
7,<i>robe of the archmagi</i>
8,<i>staff of defense</i>
9,<i>dusty rose ioun stone</i>
10,<i>improved cloak of battle</i>
11,<i>superior cloak of battle</i>
12,<i>ghost shroud</i>

# ---------------------------------------------------------------------
# SHIELDS

:SetShieldType
1,|ShieldFlag=0||MW=0||ShieldWorn=0||ShieldACPlus=0||NoFeat=1||SkipShield=No|
_{If~{Find~1,Ancestral Weapon Mastery,%FeatsAll%}!=0?
_   {If~{Param~Race,%Race%}=Gnome?|SkipShield=Yes|
_   /{If~{Param~Race,%Race%}=Half Orc?|SkipShield=Yes|
_   /{If~{Param~Race,%Race%}=Halfling?|SkipShield=Yes|
_   /{If~{Param~Race,%Race%}=Orc?|SkipShield=Yes|
_   }}}}
_}
_{If~%TestLog%=1?{Log~E:\log.txt,----- SetArmor >>>>> SkipShield= %SkipShield%  WealthPROT=%WealthPROT%}}
_{If~{And~%WealthPROT%>=3,%SkipShield%!=Yes}=1?
# Shield Proficiency; With Two-Weapon Fighting = if NPC has Shield Focus or Improved Shield Bash, we'll look for a shield to be used.
_{If~{Find~1,Shield Proficiency,%FeatsAll%}!=0?|NoFeat=1|{If~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?{If~{Or~{Find~1,Shield Focus,%FeatsAll%}!=0,{Find~1,Improved Shield Bash,%FeatsAll%}!=0}=1?[ShieldPossibility][SetShieldType2]/{If~{Dice~1d30}=1?[ShieldPossibility=1][SetShieldType2]}}
_                                                                                                      /[ShieldPossibility][SetShieldType2]}
# NO Shield Proficiency : in a rare case for a non-proficient user to wear a shield (and suffer its penalties).
_/{If~{Dice~1d100}=1?|NoFeat=NoFeat|[ShieldPossibility=1][SetShieldType2]}
_}
_}
_{If~{And~%ShieldFlag%>0,%TestCostWeight%=1}=1?|TestTableNote= %Cost%gp %Wt%lb %ACPSh% %ASFSh% %AMVSh%||ShieldWorn& [TestTable]|}

#9-10-11
#:ShieldPossibility

:ShieldPossibility
# With Shield Proficiency
1-25,|ShieldFlag=1|
_{If~{Find~1,Improved Shield Bash,%FeatsAll%}!=0?|ShieldFlag=2|}
# None, unless with Shield Proficiency and something special (like classes without Shield Proficiency usually : Rog Sor Wiz)
26-50,{If~{Or~{Param~Class,%Class%}=Fighter,{Param~Class,%Class%}=Paladin}=1?|ShieldFlag=1|/{If~{Find~1,Tower Shield Proficiency,%FeatsAll%}!=0?|ShieldFlag=1||TowerFlag=1|}}
_{If~{And~{Find~1,Shield Proficiency,%FeatsAll%}!=0,{Or~{Param~Class,%Class%}=Sorcerer,{Param~Class,%Class%}=Wizard}=1}=1?|ShieldFlag=1|
_   /{If~{And~{Find~1,Shield Proficiency,%FeatsAll%}!=0,{Or~{Param~Class,%Class%}=Rogue,{Param~Class,%Class%}=Barbarian}=1}=1?|ShieldFlag=1|
_}}
_{If~{Find~1,Improved Shield Bash,%FeatsAll%}!=0?|ShieldFlag=2||TowerFlag=0|
_/{If~{Find~1,Shield Focus,%FeatsAll%}!=0?|ShieldFlag=1|
_}}
# Two-Weapon Fighting = NO Tower Shield.
_{If~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?|TowerFlag=0|}
# None, unless Tower Shield Proficiency (not a fighter) or a Shield Feat (if no Tower Shield) and Classes with Shield Proficiency who do not have it normally (Rog Sor Wiz)
51-90,{If~{And~{Param~Class,%Class%}!=Fighter,{Find~1,Tower Shield Proficiency,%FeatsAll%}!=0}=1?|ShieldFlag=1||TowerFlag=1|
_/{If~{And~{Find~1,Shield Proficiency,%FeatsAll%}!=0,{Or~{Param~Class,%Class%}=Sorcerer,{Param~Class,%Class%}=Wizard}=1}=1?|ShieldFlag=1|
_/{If~{And~{Find~1,Shield Proficiency,%FeatsAll%}!=0,{Param~Class,%Class%}=Rogue}=1?|ShieldFlag=1|
_/{If~{Find~1,Improved Shield Bash,%FeatsAll%}!=0?|ShieldFlag=2||TowerFlag=0|
_/{If~{Find~1,Shield Focus,%FeatsAll%}!=0?|ShieldFlag=1|
_}}}}}
# Two-Weapon Fighting = NO Tower Shield.
_{If~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?|TowerFlag=0|}
# None (whatever feat he has)
91-100,

:SetShieldType2
1,{If~%TestLog%=1?{Log~E:\log.txt,----- SetShieldType2 >>>>> ShieldFlag=%ShieldFlag%   TowerFlag=%TowerFlag%}}
_{If~%ShieldFlag%>0?
_{If~%TowerFlag%=1?[ShieldDetermination=1]
_/{If~%ShieldFlag%=2?[ShieldDetermination={Dice~1d6+1}]
_/[ShieldDetermination]
_}}}

# Leave the "line numbers" as found below.
# If you modify them, look for ShieldDetermination={Dice~1d6+1} and modify it so the tower shield and buclker are NOT included
;ShieldDetermination
# Tower / Two-Weapon Fighting = NO Tower Shield.
1,{If~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?|TowerFlag=0||ShieldBash=0|[ShieldDetermination]
_/{If~{Find~1,Tower Shield Proficiency,%FeatsAll%}!=0?|Temp1=Shield_Tower||ShieldBash=0|[FindShield]/[ShieldDetermination]}
_}
# Light
4,|Temp1=Shield_Light|{If~{Param~Class,%Class%}=Druid?|Temp1&_Druid|}|ShieldBash=1|[FindShield]
# Heavy
3,|Temp1=Shield_Heavy|{If~{Param~Class,%Class%}=Druid?|Temp1&_Druid|}|ShieldBash=2|[FindShield]
# Buckler
2,|Temp1=Shield_Buckler||ShieldBash=0|[FindShield]

:FindShield
1,|TempString=[Equipment.Armors_%Temp1%(,,,%Size%)]|
_{Split~TempString,"!",ShieldWorn,Cost,Wt,Book,ShieldACPlus,MaxDexSh,ACPSh,ASFSh,AMVSh,Note}
_{If~%TestLog%=1?{Log~E:\log.txt,----- FindShield >>>>> %ShieldWorn%}}
# Bard with shields (not tower shields) have no Arcane Spell Failure
_{If~{And~{Param~Class,%Class%}=Bard,%ShieldWorn%!=tower shield}=1?|ASFSh=0|}
_|SpikeSh=0|{If~{Find~1,with spikes,%ShieldWorn%}!=0?|SpikeSh=1|}
#### Removed ... added in Equipment.tab
#### Spiked shield (5%)
####_|SpikeSh=0|{If~{And~%ShieldWorn%!=buckler,%ShieldWord%!=tower shield}=1?{If~{Dice~1d20}=1?|ShieldWorn& with spikes||Wt+5||Cost+10||SpikeSh=1|}}
####_|TempEQ=%Wt%|[SetEQSizeWeight=%Size%]|Wt=%TempEQ%|
# Special Material : 4%/Heroic level to have a special material, less for Basic. (if enough wealth).
_{If~{And~{Find~1,NOMATERIAL,%Note%}=0,%WealthPROT%>={Calc~(%Cost%+1000)}}=1?[ShieldMaterial]}
_{If~{Find~1,MW2,%Note%}!=0?|MW=2|}
# 90% to generate a Masterwork Item if enough Wealth.
_{If~{And~%MW%=0,%WealthPROT%>={Calc~(%Cost%+150)}}=1?{If~{Dice~1d10}>1?|MW=1||Cost+150||ACPSh+1|}}
_{If~%AMVSh%<1?|AMVSh=1|}{If~%ASFSh%<0?|ASFSh=0|}
# 90% to generate a Magic Shield on MW items if enough Wealth; if not, add Masterwork to ShieldWorn.
_|MagicPlussesShield=0|
_{If~%MW%!=0?
_{If~%WealthPROT%>={Calc~(%Cost%+1000)}=1?{If~{Dice~1d10}>1?{Reset~ShieldMagic2}[ShieldMagic]/[SetShieldMW]}/[SetShieldMW]}
_}
_{If~%Cost%<=%WealthPROT%?[SetShieldStats]/[SetShieldType]}

:SetShieldMW
1,{If~%MW%=1?{If~%GroupFlag%=1?|ShieldWorn& MW|/|ShieldWorn=masterwork %ShieldWorn%|}}

# -------------
:ShieldMaterial
1,{If~{Param~Heroic,%Heroic%}=Heroic?{If~{Dice~1d25}<%CharacterLevel%?[ShieldMaterial2][ShieldMaterial3]}/{If~{Dice~1d100}<%CharacterLevel%?[ShieldMaterial2][ShieldMaterial3]}}

;ShieldMaterial2
10,{IIf~{Find~1,Metal,%Note%}!=0?|Material=mithral||MW=2||AMVSh-1||ASFSh-10||ACPSh+3||MaxDexSh+2||Wt/2||Cost+1000|:[ShieldMaterial2]}
10,{If~{Find~1,Dragon,%Note%}!=0?|Material=[~Creatures.DragonColor] dragonhide||MW=2||ACPSh+1||Cost*2||Cost+300|/[ShieldMaterial2]}
10,{IIf~{Find~1,Wood,%Note%}!=0?|Material=darkwood||MW=2||ACPSh+2||Cost+{Calc~(10*%Wt%)}||Wt/2|:[ShieldMaterial2]}
1,{If~{Find~1,Metal,%Note%}!=0?|Material=cold iron||Cost*2|/[ShieldMaterial2]}

:ShieldMaterial3
1,{If~{And~%Material%=darkwood,{Find~1,wooden,%ShieldWorn%}!=0}=1?|ShieldWorn={Replace~wooden,%Material%,%ShieldWorn%}|
_/{If~{And~%Material%=cold iron,{Find~1,steel,%ShieldWorn%}!=0}=1?|ShieldWorn={Replace~steel,%Material%,%ShieldWorn%}|
_/{If~{And~%Material%=mithral,{Find~1,steel,%ShieldWorn%}!=0}=1?|ShieldWorn={Replace~steel,%Material%,%ShieldWorn%}|
_/{If~{And~{Find~1,dragonhide,%Material%}!=0,{Find~1,steel,%ShieldWorn%}!=0}=1?|ShieldWorn={Replace~steel,%Material%,%ShieldWorn%}|
_/|ShieldWorn=%Material% %ShieldWorn%|
_}}}}

# ----------
:ShieldMagic
1,|ShieldMagicSpecial=|[ShieldMagic2]
_{If~%WealthPROT%>={Calc~(%Cost%+18000)}?{If~{Param~Heroic,%Heroic%}=Heroic?{If~{Dice~1d25}<%CharacterLevel%?[ShieldMagicSpecial]}/{If~{Dice~1d100}<%CharacterLevel%?[ShieldMagicSpecial]}}}
_{If~{Length~%ShieldMagicSpecial%}>3?|ShieldWorn=%ShieldMagicSpecial%%ShieldWorn%|}

;!ShieldMagic2
1,|MagicPlussesShield=1||Cost+1000|
2,{If~%WealthPROT%>={Calc~(%Cost%+4000)}?[ShieldMagic2_2]/[ShieldMagic2]}
3,{If~%WealthPROT%>={Calc~(%Cost%+9000)}?[ShieldMagic2_3]/[ShieldMagic2]}
4,{If~%WealthPROT%>={Calc~(%Cost%+16000)}?[ShieldMagic2_4]/[ShieldMagic2]}
5,{If~%WealthPROT%>={Calc~(%Cost%+25000)}?[ShieldMagic2_5]/[ShieldMagic2]}
6,{If~%WealthPROT%>={Calc~(%Cost%+36000)}?[ShieldMagic2_6]/[ShieldMagic2]}
7,{If~%WealthPROT%>={Calc~(%Cost%+49000)}?[ShieldMagic2_7]/[ShieldMagic2]}
8,{If~%WealthPROT%>={Calc~(%Cost%+64000)}?[ShieldMagic2_8]/[ShieldMagic2]}
9,{If~%WealthPROT%>={Calc~(%Cost%+81000)}?[ShieldMagic2_9]/[ShieldMagic2]}
10,{If~%WealthPROT%>={Calc~(%Cost%+100000)}?[ShieldMagic2_10]/[ShieldMagic2]}

;ShieldMagic2_2
75,|MagicPlussesShield=2||Cost+4000|
25,|MagicPlussesShield=1||Cost+4000|[ShieldBonus1]

;ShieldMagic2_3
75,|MagicPlussesShield=3||Cost+9000|
15,|MagicPlussesShield=2||Cost+9000|[ShieldBonus1]
10,|MagicPlussesShield=1||Cost+9000|[ShieldBonus2]

;ShieldMagic2_4
75,|MagicPlussesShield=4||Cost+16000|
10,|MagicPlussesShield=3||Cost+16000|[ShieldBonus1]
10,|MagicPlussesShield=2||Cost+16000|[ShieldBonus2]
5,|MagicPlussesShield=1||Cost+16000|[ShieldBonus3]

;ShieldMagic2_5
75,|MagicPlussesShield=5||Cost+25000|
10,|MagicPlussesShield=4||Cost+25000|[ShieldBonus1]
5,|MagicPlussesShield=3||Cost+25000|[ShieldBonus2]
5,|MagicPlussesShield=2||Cost+25000|[ShieldBonus3]
5,|MagicPlussesShield=1||Cost+25000|[ShieldBonus4]

;ShieldMagic2_6
1,|MagicPlussesShield=5||Cost+36000|[ShieldBonus1]
1,|MagicPlussesShield=4||Cost+36000|[ShieldBonus2]
1,|MagicPlussesShield=3||Cost+36000|[ShieldBonus3]
1,|MagicPlussesShield=2||Cost+36000|[ShieldBonus4]
1,|MagicPlussesShield=1||Cost+36000|[ShieldBonus5]

;ShieldMagic2_7
1,|MagicPlussesShield=5||Cost+49000|[ShieldBonus2]
1,|MagicPlussesShield=4||Cost+49000|[ShieldBonus3]
1,|MagicPlussesShield=3||Cost+49000|[ShieldBonus4]
1,|MagicPlussesShield=2||Cost+49000|[ShieldBonus5]

;ShieldMagic2_8
1,|MagicPlussesShield=5||Cost+64000|[ShieldBonus3]
1,|MagicPlussesShield=4||Cost+64000|[ShieldBonus4]
1,|MagicPlussesShield=3||Cost+64000|[ShieldBonus5]

;ShieldMagic2_9
1,|MagicPlussesShield=5||Cost+81000|[ShieldBonus4]
1,|MagicPlussesShield=4||Cost+81000|[ShieldBonus5]

;ShieldMagic2_10
1,|MagicPlussesShield=5||Cost+100000|[ShieldBonus5]

:!ShieldBonus1
1,{If~%ACBDef%=0?|ShieldMagicSpecial&arrow catching ||ACBDef=1|/[ShieldBonus1]}
2,{If~{And~%ShieldWorn%!=buckler,%ShieldWorn%!=tower shield}=1?|ShieldMagicSpecial&bashing |/[ShieldBonus1]}
3,|ShieldMagicSpecial&blinding |
4,|ShieldMagicSpecial&light fortification ||Fortification>25|

:!ShieldBonus2
1,{If~%TowerFlag%=0?|ShieldMagicSpecial&animated |/[ShieldBonus2]}
2,|ShieldMagicSpecial&arrow deflection |
# 1+1
3,[ShieldBonus1][ShieldBonus1]

:!ShieldBonus3
1,{If~{Find~1,fortification,%ShieldMagicSpecial%}=0?|ShieldMagicSpecial&moderate fortification ||Fortification>50|/[ShieldBonus3]}
2,|ShieldMagicSpecial&ghost touch |
3-7,{If~{Param~Class,%Class%}=Druid?|ShieldMagicSpecial&wild ||DRUWildArmor=1|/[ShieldBonus3]}
# 1+2 or 1+1+1
8,[ShieldBonus1][ShieldBonus2]

:ShieldBonus4
#1,|ShieldMagicSpecial& |
# 1+3
1,[ShieldBonus1]{Lockout~ShieldBonus3,8}[ShieldBonus3]
#1,[ShieldBonus2][ShieldBonus2]

:!ShieldBonus5
1,{If~{Find~1,fortification,%ShieldMagicSpecial%}=0?|ShieldMagicSpecial&heavy fortification ||Fortification>75|/[ShieldBonus5]}
2,|ShieldMagicSpecial&reflecting |
3,[ShieldBonus2]{Lockout~ShieldBonus3,8}[ShieldBonus3]

;ShieldMagicSpecial
1,{If~%WealthPROT%>={Calc~(%Cost%+66000)}?|TempNumber=66000||ShieldMagicSpecial&[EnergyType] resistance 30 ||Cost+%TempNumber%|
_/{If~%WealthPROT%>={Calc~(%Cost%+42000)}?|TempNumber=42000||ShieldMagicSpecial&[EnergyType] resistance 20 ||Cost+%TempNumber%|
_/{If~%WealthPROT%>={Calc~(%Cost%+18000)}?|TempNumber=18000||ShieldMagicSpecial&[EnergyType] resistance 10 ||Cost+%TempNumber%|
_/ [ShieldMagicSpecial]}}}
1,{If~{And~%AlignmentType%=Evil,%WealthPROT%>={Calc~(%Cost%+49000)}}=1?|ShieldMagicSpecial&undead controlling ||Cost+49000|/[ShieldMagicSpecial]}

:SetShieldStats
1,|ACBShi=1||WealthPROT-%Cost%||WtTotalCarried+%Wt%|[ShieldFocus]|AdjustedAC+%ShieldACPlus%|{If~%UncannyDodge%>0?|ACFF+%ShieldACPlus%|}
_|ShieldMaster=0|{If~{Find~1,Shield Master,%FeatsAll%}!=0?|ShieldMaster=%MagicPlussesShield%|/{If~{Find~1,bashing,%ShieldMagicSpecial%}!=0?|ShieldMaster=1|}}
_{If~%MagicPlussesShield%>0?|ShieldACPlus+%MagicPlussesShield%||AdjustedAC+%MagicPlussesShield%|{If~%UncannyDodge%>0?|ACFF+%MagicPlussesShield%|}
#|ACFF+%MagicPlussesShield%|
_}
_{If~%ACPSh%>0?|ACPSh=0|}{If~%NoFeat%=NoFeat?|ArmorShieldPenalty+%ACPSh%|}

:ShieldFocus
1,{If~{Find~1,Shield Focus,%FeatsAll%}!=0?|ShieldACPlus+1|{If~{Find~1,Greater Shield Focus,%FeatsAll%}!=0?|ShieldACPlus+1|}}

# ---------------------------------------------------------------------------
### NEW CLASS ###
#  Class:  1=Fighter    2=Barbarian   3=Bard     4=Cleric
#          5=Druid      6=Monk        7=Paladin  8=Ranger  9=Rogue
#         10=Sorcerer  11=Wizard     12=Adept   13=Aristocrat
#         14=Commoner  15=Expert     16=Warrior 17=Random
:SetSpellAC
1-3,[SetSpellACRandom]
4,[SetSpellAC_Cleric]
5,[SetSpellAC_Druid]
6,[SetSpellACRandom]
7,[SetSpellAC=4]
8,[SetSpellAC=5]
9,[SetSpellACRandom]
10-11,[SetSpellAC_Arcane]
12-16,[SetSpellACRandom]

;SetSpellAC_Arcane
25,[SetSpellACRandom]
20,{If~%ACBShi%=0?[ACImprovementSpells=1]/[SetSpellAC_Arcane]}
20,{If~%ACBArm%=0?[ACImprovementSpells=2]/[SetSpellAC_Arcane]}
15,{If~%ACBDef%=0?[ACImprovementSpells=8]/[SetSpellAC_Arcane]}
15,{If~{And~%CharacterLevel%>=5,%ACBDef%=0}=1?[ACImprovementSpells=9]/[SetSpellAC_Arcane]}
5,{If~%CharacterLevel%>=5?[ACImprovementSpells=13]/[SetSpellAC_Arcane]}

;SetSpellAC_Cleric
25,[SetSpellACRandom]
20,{If~%CharacterLevel%>=5?[ACImprovementSpells=3]/[SetSpellAC_Cleric]}
20,{If~%ACBDef%=0?[ACImprovementSpells=4]/[SetSpellAC_Cleric]}
5,{If~{And~%CharacterLevel%>=5,%ACBDef%=0}=1?[ACImprovementSpells=5]/[SetSpellAC_Cleric]}
5,{If~{And~%CharacterLevel%>=5,%ACBDef%=0}=1?[ACImprovementSpells=6]/[SetSpellAC_Cleric]}
5,{If~{And~%CharacterLevel%>=5,%ACBDef%=0}=1?[ACImprovementSpells=7]/[SetSpellAC_Cleric]}
10,{If~%ACBDef%=0?[ACImprovementSpells=8]/[SetSpellAC_Cleric]}
10,{If~{And~%CharacterLevel%>=5,%ACBDef%=0}=1?[ACImprovementSpells=9]/[SetSpellAC_Cleric]}

;SetSpellAC_Druid
25,[SetSpellACRandom]
75,{If~%ACBNat%=0?[ACImprovementSpells=12]/[SetSpellAC_Druid]}

;SetSpellACRandom
1,[ACImprovementSpells=13]
10,[SetSpellAC_Arcane]
10,[SetSpellAC_Cleric]
5,[SetSpellAC_Druid]
74,|SpellACImprovementFlag=0|

:ACImprovementSpells
# Shield spell : Shield bonus
1,|SpellACImprovementFlag=1||SpellImprovement=4||AdjustedAC+%SpellImprovement%||ACSpellID=1||ACFF+%SpellImprovement%||ACBShi=1|
# Mage Armor : Armor bonus
2,|SpellACImprovementFlag=1||SpellImprovement=4||AdjustedAC+%SpellImprovement%||ACSpellID=2||ACFF+%SpellImprovement%||ACBArm=1|
# Magic vestment : enhancement bonus on Armor bonus
3,|SpellACImprovementFlag=1||SpellImprovement=[Magic vestment=%CharacterLevel%]||AdjustedAC+%SpellImprovement%||ACSpellID=3||ACFF+%SpellImprovement%|
# Shield of faith : deflection
4,|SpellACImprovementFlag=1||SpellImprovement=[ShieldFaith=%CharacterLevel%]||AdjustedAC+%SpellImprovement%||ACSpellID=4||ACFF+%SpellImprovement%||ACTouch+%SpellImprovement%||ACBDef=1|
# shield other : deflection
5,|SpellACImprovementFlag=1||SpellImprovement=1||AdjustedAC+%SpellImprovement%||ACSpellID=5||ACFF+%SpellImprovement%||ACTouch+%SpellImprovement%|{If~%SaveResistBonus%<1?|SaveResistBonus=1|}|ACBDef=1|
# shield of law/holy aura/unholy aura/cloak of chaos: deflection
6,|SpellACImprovementFlag=1||SpellImprovement=4||AdjustedAC+%SpellImprovement%||ACSpellID=6||ACFF+%SpellImprovement%||ACTouch+%SpellImprovement%|{If~%SaveResistBonus%<4?|SaveResistBonus=4|}|ACBDef=1|
# dispel evil/g/c/l : deflection
7,|SpellACImprovementFlag=1||SpellImprovement=4||AdjustedAC+%SpellImprovement%||ACSpellID=7||ACFF+%SpellImprovement%||ACTouch+%SpellImprovement%||ACBDef=1|
# protection vs e/g/c/l :  deflection
8,|SpellACImprovementFlag=1||SpellImprovement=2||AdjustedAC+%SpellImprovement%||ACSpellID=8||ACFF+%SpellImprovement%||ACTouch+%SpellImprovement%||ACBDef=1|
# magic circle vs e/g/c/l :  deflection
9,|SpellACImprovementFlag=1||SpellImprovement=2||AdjustedAC+%SpellImprovement%||ACSpellID=9||ACFF+%SpellImprovement%||ACTouch+%SpellImprovement%||ACBDef=1|
# cloak of chaos:  deflection
10,|SpellACImprovementFlag=1||SpellImprovement=4||AdjustedAC+%SpellImprovement%||ACSpellID=10||ACFF+%SpellImprovement%||ACTouch+%SpellImprovement%||ACBDef=1|
# holy/unholy aura:  deflection
11,|SpellACImprovementFlag=1||SpellImprovement=4||AdjustedAC+%SpellImprovement%||ACSpellID=11||ACFF+%SpellImprovement%||ACTouch+%SpellImprovement%||ACBDef=1|
# Barkskin : enhancement to natural armor
12,|SpellACImprovementFlag=1||SpellImprovement=[Barkskin=%CharacterLevel%]||AdjustedAC+%SpellImprovement%||ACSpellID=12||ACFF+%SpellImprovement%||ACBNat=1|
# Haste : dodge
13,|SpellACImprovementFlag=1||SpellImprovement=1||AdjustedAC+%SpellImprovement%||ACSpellID=13||ACTouch+%SpellImprovement%||Haste=1|

:Barkskin
1-5,2
6-8,3
9-11,4
12-100,5

:AddHasteSpeedM
1,{If~%Haste%=1?{Color~Purple,[Slash]{If~%Temp1%>=0?+/ }%Temp1%}
_/{If~%SpeedM%=1?{Color~Orange,[Slash]{If~%Temp1%>=0?+/ }%Temp1%}
_}}

:AddHasteSpeedR
1,{If~%Haste%=1?{Color~Purple,[Slash]{If~%Temp1%>=0?+/ }%Temp1%}
_/{If~%SpeedR%=1?{Color~Orange,[Slash]{If~%Temp1%>=0?+/ }%Temp1%}
_}}

:AddHasteSpeedU
1,{If~%Haste%=1?{Color~Purple,[Slash]{If~%Temp1%>=0?+/ }%Temp1%}}

:Magic vestment
1-7,1
8-11,2
12-15,3
16-19,4
20-100,5

:ShieldFaith
1-5,2
6-11,3
12-17,4
18-100,5

:ACAdjustingSpellNames
1,<i>shield</i> spell
2,<i>mage armor</i> spell
3,enhancement <i>magic vestment</i> spell
4,deflection <i>shield of faith</i> spell
5,deflection <i>shield other</i> spell
6,[AlignmentSpecificSpellBranch=%AlignmentChoice%]deflection <i>{If~%TempString%=law?shield of law}{If~%TempString%=good?holy aura}{If~%TempString%=evil?unholy aura}{If~%TempString%=chaos?cloak of chaos}</i> spell
7,[AlignmentSpecificSpellBranch=%AlignmentChoice%]deflection <i>dispel %TempString%</i> spell
8,[AlignmentSpecificSpellBranch=%AlignmentChoice%]deflection <i>protection from %TempString%</i> spell
9,[AlignmentSpecificSpellBranch=%AlignmentChoice%]deflection <i>magic circle vs %TempString%</i> spell
10,deflection <i>cloak of chaos</i> spell
11,deflection <i>{If~%AlignmentType%=Evil?unholy/holy} aura</i> spell
12,natural <i>barkskin</i> spell
13,dodge <i>haste</i> spell

:AlignmentSpecificSpellBranch
#Lawful or Good
1,|TempNumber={Dice~1d2}|{If~%TempNumber%=1?|TempString=chaos|/|TempString=evil|}
#Lawful or Neutral
2,|TempString=chaos|
#Lawful or Evil
3,|TempNumber={Dice~1d2}|{If~%TempNumber%=1?|TempString=chaos|/|TempString=good|}
#Neutral or Good
4,|TempString=evil|
#Neutral
5,|TempNumber={Dice~1d4}|[AnythingGoes]
#Neutral or Evil
6,|TempString=good|
#Chaotic or Good
7,|TempNumber={Dice~1d2}|{If~%TempNumber%=1?|TempString=law|/|TempString=evil|}
#Chaotic or Neutral
8,|TempString=law|
#Chaotic or Evil
9,|TempNumber={Dice~1d2}|{If~%TempNumber%=1?|TempString=law|/|TempString=good|}

:AnythingGoes
1,|TempString=law|
2,|TempString=chaos|
3,|TempString=good|
4,|TempString=evil|

# ---------------------------------------------------------------------------
# Hit Point Related / HP HD

:WriteHD
1,|Count=0|[HDType=%Class%]|HDMod={Calc~%CONBonus%*%CharacterLevel%}|
_%CharacterLevel%d%HDBase%{If~%HDMod%!=0?{If~%HDMod%>0?+}%HDMod%}
_{If~{Find~1,Toughness,%FeatsAll%}!=0?+{Color~Green,{If~%CharacterLevel%<4?3/%CharacterLevel%}}}
_{If~%FavClassHP%>0?{Color~DarkCyan,+%FavClassHP%{If~%Valminder%=1? VP}}}
_{If~%Valminder%=2?
_{If~%GroupFlag%=1? (dies -{Calc~%CON%+%HeartWilderness%}) {Bold~hp:} [GenerateHitPoints][HP_Special]
_/[GenerateHitPoints] (dies -{Calc~%CON%+%HeartWilderness%}) ({If~{Find~1,Toughness,%FeatsAll%}!=0?{Color~Green,%HitPoints%}/%HitPoints%} hp{If~%InsertHPField%=1?: _____________________________ })[HP_Special];
_}
_/[WriteValminderVPWP]
_}
#_{If~{Find~1,Toughness,%FeatsAll%}!=0?+{If~%Show%=1?{Color~Green,{If~%CharacterLevel%<3?3/%CharacterLevel%}}/{If~%CharacterLevel%<3?3/%CharacterLevel%}}}
#_{If~%GroupFlag%=1? {Bold~hp:} [GenerateHitPoints][HP_Special]/[GenerateHitPoints] ({If~{And~%Show%=1,{Find~1,Toughness,%FeatsAll%}!=0}=1?{Color~Green,%HitPoints%}/%HitPoints%} hp)[HP_Special];}

:WriteValminderVPWP
# Valminder's VP/WP rule
1,|VP=0||WP=0| {Bold~VP:} {If~%GroupFlag%=1? [GenerateHitPointsVal] /[GenerateHitPointsVal] %VP%{If~{And~%InsertHPField%=1,%VP%>0}=1? ( _____________________________ BR)}; }
_Breather: {If~%VP%>0?|Temp1={Calc~%CharacterLevel%+%CONBonus%}||Temp1>1|%Temp1% VP/none}; 
_{Bold~WP:} {If~{Find~1,Toughness,%FeatsAll%}!=0?{Color~Green,%WP%}/%WP%}/{If~%CONBonus%>0?-%CONBonus%/0}/-{Calc~%CON%+%HeartWilderness%}{If~%InsertHPField%=1?{If~%NA%<1?|NA=1|}{Loop~%NA%, ({If~%NA%>1?%WP%:} _____________________________ )}}
_[HP_Special]; 

### NEW CLASS ###
:HDType
1,|HDBase=10|
2,|HDBase=12|
3,|HDBase=8|
4-6,|HDBase=8|
7-8,|HDBase=10|
9,|HDBase=8|
10-12,|HDBase=6|
13,|HDBase=8|
14,|HDBase=6|
15,|HDBase=8|
16,|HDBase=10|

:GenerateHitPoints
1,{If~%GroupFlag%=1?{Loop~%NA%,|Count+1|[GenerateHitPoints2]{If~{Find~1,Toughness,%FeatsAll%}!=0?{Color~Green,%HitPoints%}/%HitPoints%}{If~%InsertHPField%=1?: _____________________________ }{If~%Count%=%NA%?; /, }}
_                  /[GenerateHitPoints2]
_}

:GenerateHitPoints2
1,{If~%NPCClass%=Yes?|HitPoints={Dice~%CharacterLevel%d%HDBase%}|
_/|HitPoints=%HDBase%|{If~%CharacterLevel%>1?|HitPoints+{Dice~{Calc~%CharacterLevel%-1}d%HDBase%}|}
_}
_|HitPoints+%HDMod%|
### NEW FAMILIAR ###
_{If~%FamiliarID%=9?|HitPoints+3|}
_{If~{Find~1,Toughness,%FeatsAll%}!=0?{If~%CharacterLevel%<3?|HitPoints+3|/|HitPoints+%CharacterLevel%|}}
_|HitPoints+%FavClassHP%|

:GenerateHitPointsVal
1,{If~%GroupFlag%=1?{Loop~%NA%,|Count+1|[GenerateHitPointsVal2]%VP%{If~{And~%InsertHPField%=1,%VP%>0}=1? ( _____________________________ BR)}{If~%Count%=%NA%?; /, }}
_                  /[GenerateHitPointsVal2]
_}

:GenerateHitPointsVal2
1,{If~%Heroic%=1?[SetWPHeroic]/[SetWPBasic]}
### NEW FAMILIAR ###
_{If~%FamiliarID%=9?|WP+3|}
_{If~{Find~1,Toughness,%FeatsAll%}!=0?{If~%CharacterLevel%<3?|WP+3|/|WP+%CharacterLevel%|}}
_|VP+%FavClassHP%|

### TEST ###
:SetWPHeroic
1,{If~%NPCClass%=Yes?|VP={Dice~%CharacterLevel%d%HDBase%}|{If~%TestVPWP%=1? --Z1 %VP% Tot:{Calc~%VP%+%HDMod%+%FavClassHP%+%CON%}--}
_/|VP=%HDBase%|{If~%CharacterLevel%>1?|VP+{Dice~{Calc~%CharacterLevel%-1}d%HDBase%}|}{If~%TestVPWP%=1? --Z1 %VP% Tot:{Calc~%VP%+%HDMod%+%FavClassHP%+%CON%}--}
_}
_|WP=%CON%|
_{If~%HDMod%<0?|VP+%HDMod%|/|WP+%HDMod%|}{If~%VP%<0?|VP=0|}

### TEST ###
:SetWPBasic
1,{If~%NPCClass%=Yes?|Temp1={Dice~%CharacterLevel%d%HDBase%}|{If~%TestVPWP%=1? --X %Temp1% Tot:{Calc~%Temp1%+%HDMod%+%FavClassHP%}--}
_/|Temp1=%HDBase%|{If~%CharacterLevel%>1?|Temp1+{Dice~{Calc~%CharacterLevel%-1}d%HDBase%}|}{If~%TestVPWP%=1? --Y %Temp1% Tot:{Calc~%Temp1%+%HDMod%+%FavClassHP%}--}
_}
_|WP=0||VP=0||Temp1+%HDMod%||Temp2=%CON%||Temp2+%HDMod%||Temp2>%CON%|
_{If~%TestVPWP%=1? <br>%Temp1% %WP%}
_{While~{And~%Temp1%>0,%WP%<%Temp2%}=1,|Temp1-1||WP+1|{If~%TestVPWP%=1? <br>%Temp1% %WP%}}
_{If~%Temp1%>0?|VP=%Temp1%|}|WP>%CON%|

:HP_Special
1,{If~%Show%=1?[FontB=1]
_{Color~DarkCyan,
_{IIf~%FTR_ArmorMastery%=Yes? +DR5/- with armor;}
_{IIf~%BbnDR%>0? {IIf~%BbnIncreaseDR%>0?+DR%BbnDR%/- (DR{Calc~%BbnDR%+%BbnIncreaseDR%}/- in Rage);:+DR%BbnDR%/-;}
_:{IIf~%BbnIncreaseDR%>0? (DR%BbnIncreaseDR%/- in Rage);}
_}
_{IIf~%MonkPerfectSelf%=Yes? +DR10/Chaotic;}
_{IIf~%PALHolyChampion%=Yes? +DR10/evil;:{IIf~%PALAuraRight%=Yes? +DR5/evil;}}
_{If~%ROGDefensiveRoll%=Yes? +Defensive Roll;}
_{If~%ROGResiliency%=Yes? +Resiliency;}
_{If~%SORUnusualAnatomy%=Yes? +Unusual Anatomy;/{If~%SORUnusualAnatomy%=AberrantForm? +Aberrant Form;}}
_{If~%SORDemResist%=4? {If~%CharacterLevel%>=20? +Electricity Immunity; +Resist Acid-Cold-Fire 10;/+Electric Resist 10;}/{If~%SORDemResist%=2? +Electric Resist 5;}}
_{If~%SORCelestialResist%!=0?{If~%CharacterLevel%>=20? +Immune Acid-Cold-Petrification; +Resist Electric-Fire 10;/ +Resist Acid-Cold %SORCelestialResist%;}}
_{IIf~%SorDestinedWR%=Yes? +Within Reach 1/day;}
_{If~%SORDraconicResist%>0? +{If~%CharacterLevel%<20?Resist {Cap~%DraconicEnergy%} %SORDraconicResist%/{Cap~%DraconicEnergy%} Immunity};}
_{If~%SORElementalResist%>0? +{If~%CharacterLevel%<20?Resist {Cap~%ElementalEnergy%} %SORElementalResist%/{Cap~%ElementalEnergy%} Immunity};}
_{IIf~%SORElementalBody%=Yes? +Immune sneak/criticals;}
_{IIf~%SORFeySoul%=Yes? +DR10/cold iron;}
_{If~%SORFeySoul%=Yes? +Poison Immunity;}
_{IIf~%SORInfernalResist%>0?{IIf~%CharacterLevel%<20? +Resist Fire {Calc~5*%SORInfernalResist%};: +Fire/Poison Immunity; +Resist Acid/Cold 10;}}
_{IIf~%SORUndeadResist%>0?{IIf~%CharacterLevel%<20? +Resist Cold %SORUndeadResist%; +DR%SORUndeadResist%/-- vs nonlethal: + Cold/Nonlethal Immunity; DR 5/--;}}
_{If~%WIZAbjResist%>0? +{If~%CharacterLevel%>=20?Immunity to ENERGY/Resist ENERGY %WIZAbjResist%};}
_{IIf~%WIZAbjAbsorption%>0? +Energy Absorption %WIZAbjAbsorption%/day;}
_}
### NEW FEATS ### HP
_{Color~Green,
_{If~{Find~1,Diehard,%FeatsAll%}!=0? +Diehard;}
_{If~{Find~1,Hibernate,%FeatsAll%}!=0? +Hibernate;}
_{If~{Find~1,Improved Recovery,%FeatsAll%}!=0? +Improved Recovery;}
_{If~{Find~1,Draconic Aspect (Black),%FeatsAll%}!=0? +Resist Acid 5;}
_{If~{Find~1,Draconic Aspect (Blue),%FeatsAll%}!=0? +Resist Electricity 5;}
_{If~{Find~1,Draconic Aspect (Green),%FeatsAll%}!=0? +Resist Acid 5;}
_{If~{Find~1,Draconic Aspect (Red),%FeatsAll%}!=0? +Resist Fire 5;}
_{If~{Find~1,Draconic Aspect (White),%FeatsAll%}!=0? +Resist Cold 5;}
_}
_{Color~SaddleBrown,
_{If~%AdamDR%!=0? +DR%AdamDR% from Armor;}
_}
_{Color~Peru,
_{IIf~{Param~Race,%Race%}=Aasimar? +Resist Acid/Cold/Electricity 5;
_   :{IIf~{Param~Race,%Race%}=Tiefling? +Resist Cold/Electricity/Fire 5;
_   :{IIf~{And~{Param~Race,%Race%}=Elf,%Subrace%=Arctic}=1? +Resist Cold 5;
_   :{IIf~{And~{Param~Race,%Race%}=Human,%Subrace%=Trailblazer}=1? +5 to stabilize;
_}}}}
_}
_{Color~Orange,
_{IIf~%Fortification%>0? +Fortification %Fortification%[Percent];}
_{IIf~{Find~1,invulnerability,%ArmorMagicSpecial%}!=0? +DR 5/magic;}
_{IIf~{Or~{Find~1,resistance 10,%ArmorMagicSpecial%}!=0,{Find~1,resistance 10,%ShieldMagicSpecial%}!=0}=1? +Resist Energy 10;
_   :{IIf~{Or~{Find~1,resistance 20,%ArmorMagicSpecial%}!=0,{Find~1,resistance 20,%ShieldMagicSpecial%}!=0}=1? +Resist Energy 20;
_      :{IIf~{Or~{Find~1,resistance 30,%ArmorMagicSpecial%}!=0,{Find~1,resistance 30,%ShieldMagicSpecial%}!=0}=1? +Resist Energy 30;
_}}}
_}
_[FontE]}

# ---------------------------------------------------------------------------
# Initiative

:WriteINIT
1,|Temp1=%DEXBonus%|
_{If~%WIZDivInit%>0?|Temp1+%WIZDivInit%|}
_|InitiativeFeat=0||InitiativeRace=0|
### NEW FEATS ### Initiative
_{If~{Find~1,Improved Initiative,%FeatsAll%}>0?|Temp1+4||InitiativeFeat+4|}
_{If~{Find~1,Quick Reconnoiter,%FeatsAll%}>0?|Temp1+2||InitiativeFeat+2|}
_{If~{Find~1,Blooded,%FeatsAll%}>0?|Temp1+2||InitiativeFeat+2|}
_{If~{Find~1,Thug,%FeatsAll%}>0?|Temp1+2||InitiativeFeat+2|}
_{If~{And~{Param~Race,%Race%}=Elf,%Subrace%=Savage}=1?|Temp1+2||InitiativeRace+2|
_   /{If~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Slave Born}=1?|Temp1+1||InitiativeRace+1|
_}}
_{If~{Find~1,Yondalla's Sense,%FeatsAll%}>0?|Temp1+%WISBonus%||InitiativeFeat+%WISBonus%|}
_{If~%InitiativeFeat%>0?{Color~Green,{If~%Temp1%>=0?+}%Temp1%}
_   /{If~%WIZDivInit%>0?{Color~DarkCyan,{If~%Temp1%>=0?+}%Temp1%}
_   /{If~%InitiativeRace%>0?{Color~Peru,{If~%Temp1%>=0?+}%Temp1%}
_   /{If~%Temp1%>=0?+}%Temp1%
_}}}
#
_{If~%GroupFlag%=2?
_{If~%Temp1%!=0? (}
_{If~%DEXBonus%!=0?{If~%DEXBonus%<0?{Color~Red,Dex}/Dex}}
_{If~%InitiativeFeat%>0?{If~%DEXBonus%!=0?, }+%InitiativeFeat% feat}
_{If~%WIZDivInit%>0?{If~{Or~%DEXBonus%!=0,%InitiativeFeat%>0}=1?, }{Color~DarkCyan,+%WIZDivInit% Diviner{If~%CharacterLevel%>=20? *ALWAYS ROLL 20*}}}
_{If~%InitiativeRace%>0?{If~{Or~%WIZDivInit%>0,{Or~%DEXBonus%!=0,%InitiativeFeat%>0}=1}=1?, }{Color~Peru,+%InitiativeRace% racial}}
_{If~%Temp1%!=0?)}
_}
#
_{If~%Show%=1?[INIT_Special]}
_;

:INIT_Special
1,[FontB=1]
_{Color~DarkCyan,
_{If~%FavoredTerrains%>0? +Favored terrain bonus}
_}
_[FontE]

# ---------------------------------------------------------------------------
# Movement

:WriteMOVE
1,
#_{If~%TestCostWeight%=1?|TestTableNote= BEFORE AMV:%AMV% / AMVSH:%AMVSh% / CCMV:%CCMV% / MV:%Movement%'|[TestTable]}
_{If~{And~%FTR_ACP%=1,%AMV%<=2}?|AMV=1|
_/{If~%FTR_ACP%>=2?|AMV=1|}
_}
_{If~%SlowSteady%=Yes?|AMV=1||CCMV=1|
_/{If~%SlowSteady%=AMV4?|AMV=4|
_}}
_|AMV>%AMVSh%||AMV>%CCMV%||AMV>1|
# Barbarian / Monk Fast Movement
###_--- %Movement% / %BbnFastMV% / %MonkFastMV% ---
_{If~%BbnFastMV%>0?{If~%AMV%<3?{If~%CCMV%!=3?|Movement+%BbnFastMV%|}}}
_{If~%MonkFastMV%>0?{If~%AMV%<=1?{If~%CCMV%<=1?|Movement+%MonkFastMV%|}}}
###_--- %Movement% ---
_|MovementOriginal=%Movement%|
_{If~%AMV%>1?[SetNewMovement=%Movement%]}{If~%AMV%=4?|Movement-5|}
#_{If~%TestCostWeight%=1?|TestTableNote= // AFTER AMV:%AMV% / AMVSH:%AMVSh% / CCMV:%CCMV% / MV:%Movement%'|[TestTable]}
_{If~%ElementalBaseMV%>0?|Movement+%ElementalBaseMV%|}
#
_{If~{And~{Find~1,Fleet,%FeatsAll%}!=0,%AMV%<=1}=1?|Movement+5|[HasteMV]{Color~Green,%Movement%}
_/{If~%Haste%>0?[HasteMV]{Color~Purple,%Movement%}
_/{If~%Movement%<%MovementOriginal%?{Color~Red,%Movement%}/{If~%Movement%>%MovementOriginal%?{Color~Green,%Movement%}/{If~{Or~%BbnFastMV%>0,%MonkFastMV%>0}=1?{Color~DarkCyan,%Movement%}/%Movement%}}}
_}}
#
_ {If~%AMV%>1?{Color~Red,ft.}/{If~%Movement%>%MovementOriginal%?{Color~Green,ft.}/ft.}}
#
_{If~%AMV%=3? [FontB=1]{Color~Red,Run x3}[FontE]
_/{If~%AMV%=4? [FontB=1]{Color~Red,No Run}[FontE]
_}}
_{If~%Fly%!=0? Fly %Fly%' (%FlyMan%)}
_{If~%Climb%!=0? Climb %Climb%'}
_{If~%Swim%!=0? Swim %Swim%'}
_{If~%Show%=1?[MV_Special]}
_;

:SetNewMovement
1-9,|Movement=5|
10-15,|Movement=10|
16-20,|Movement=15|
21-30,|Movement=20|
31-35,|Movement=25|
36-45,|Movement=30|
46-50,|Movement=35|
51-60,|Movement=40|
61-65,|Movement=45|
66-75,|Movement=50|
76-80,|Movement=55|
81-90,|Movement=60|
91-95,|Movement=65|
96-105,|Movement=70|
106-110,|Movement=75|
111-120,|Movement=80|
121-1000,|Movement=85|

:HasteMV
1,{If~%Haste%>0?{If~%Movement%<30?|Movement*2|/|Movement+30|}}

:MV_Special
1,[FontB=1]
_{Color~Peru,
_{IIf~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Slave Born}=1? Fear Effect = +10'MV;}
_{IIf~%HumanHeartStreet%=Yes? Crowds are NOT difficult terrain;}
_}
_{Color~DarkCyan,
_{If~%ElementalNewMV%=Yes?[FontB=3], %ElementalMV%[FontE]}
_{If~%BbnSwiftFoot%>0? +%BbnSwiftFoot%' in Rage;}
_{If~%ROGCrawl%=Yes? +Rogue Crawl;}
_{If~%ROGStandUP%=Yes? +Stand Up;}
_}
### NEW FEATS ### MV
_{Color~Green,
_{IIf~{Find~1,Fleet,%FeatsAll%}>0? -5'MV if medium/heavy load;}
_{If~{Find~1,Lightning Stance,%FeatsAll%}>0? +Lightning Stance;}
_{If~{Find~1,Nimble Moves,%FeatsAll%}>0? +Nimble Moves;}
_{If~{Find~1,Run,%FeatsAll%}>0? +Run;}
_{If~{Find~1,Shot on the run,%FeatsAll%}>0? +Shot on the run;}
_{If~{Find~1,Spring Attack,%FeatsAll%}>0? +Spring Attack;}
_{If~{Find~1,Step Up,%FeatsAll%}>0? +Step Up;}
_{If~{Find~1,Wind Stance,%FeatsAll%}>0? +Wind Stance;}
_}
_[FontE]

# ---------------------------------------------------------------------------
# Armor Class / AC

:WriteAC
1,|ColorAdjustedAC=No||ColorACFF=No||ColorACTouch=No|
_|AdjustedAC+[DetermineAttackBonusesSize=%Size%]||ACFF+[DetermineAttackBonusesSize=%Size%]||ACTouch+[DetermineAttackBonusesSize=%Size%]|
### NEW FEATS ### AC
# Set Feats
_{If~{Find~1,Dodge,%FeatsAll%}!=0?|AdjustedAC+1||ACTouch+1|{If~%UncannyDodge%>0?|ACFF+1|}}
_{If~{And~%ShieldFlag%=0,{Find~1,Two-Weapon Defense,%FeatsAll%}!=0}=1?|AdjustedAC+1|{If~%UncannyDodge%>0?|ACFF+1|}}
#
# Max Dex bonus of armor is reduced based on carrying capacity
_|MaxDex+%FTR_ACP%||MaxDex<%CCMaxDex%|
# Sets DEXBonus based on armor/shield. DEXBonus lowered to MaxDex of Armor/Shield.
_|DEXBonusArmorMod=%DEXBonus%||DEXBonusArmorMod<%MaxDex%||DEXBonusArmorMod<%MaxDexSh%|
_|AdjustedAC+%DEXBonusArmorMod%||ACTouch+%DEXBonusArmorMod%|{If~%DEXBonusArmorMod%<0?|ACFF+%DEXBonusArmorMod%|/{If~%UncannyDodge%>0?|ACFF+%DEXBonusArmorMod%|}}
#
_{If~%UncannyDodge%>0?|ColorACFF=Yes|}
_{If~%NaturalArmorRacial%>0?|AdjustedAC+%NaturalArmorRacial%||ACFF+%NaturalArmorRacial%||ColorAdjustedAC=Race||ColorACFF=Race|}
_{If~%DodgeRacial%>0?|AdjustedAC+%DodgeRacial%||ACTouch+%DodgeRacial%|{If~%UncannyDodge%>0?|ACFF+%DodgeRacial%|}|ColorAdjustedAC=Race||ColorACFF=Race|}
_{If~%SORDraconicAC%>0?|AdjustedAC+%SORDraconicAC%||ACFF+%SORDraconicAC%||ColorAdjustedAC=Yes||ColorACFF=Yes|}
#
# Write AC / Touch / FF
_{If~%ColorAdjustedAC%=Yes?{Color~DarkCyan,%AdjustedAC%}/{If~%ColorAdjustedAC%=Race?{Color~Peru,%AdjustedAC%}/%AdjustedAC%}}[WriteAC3],
_ {If~%GroupFlag%=2?touch/T} {If~%ColorACTouch%=Yes?{Color~DarkCyan,%ACTouch%}/{If~%ColorACTouch%=Race?{Color~Peru,%ACTouch%}/%ACTouch%}}[WriteAC3],
_ {If~%GroupFlag%=2?flat-footed/FF} {If~%ColorACFF%=Yes?{Color~DarkCyan,%ACFF%}/{If~%ColorACFF%=Race?{Color~Peru,%ACFF%}/%ACFF%}}{If~%SORDestinedFated%>0?{Color~DarkCyan,*}}[WriteAC3]
#
_|Comma=0||ACInfo=||ACInfo=[WriteAC2]|
# Write AC information
_ ({If~{Length~%ACInfo%}>=2?%ACInfo%/---})[ArcaneFailure]{If~%Show%=1?[AC_Special]}
_;

:WriteAC2
1,{If~%Size%!=5?{If~%Size%<5?+}[DetermineAttackBonusesSize=%Size%] size|Comma=1|}
_{If~{Or~%DEXBonusArmorMod%!=0,%DEXBonus%!=0}=1?{If~%Comma%=1?, }{If~%DEXBonusArmorMod%=%DEXBonus%?{If~%DEXBonus%>0?+}%DEXBonus% Dex/{Color~Red,+%DEXBonusArmorMod%} Dex}|Comma=1|}
_{If~{Find~1,Dodge,%FeatsAll%}!=0?{If~%Comma%=1?, }+{Color~Green,1 dodge}|Comma=1|}
_{If~%DodgeRacial%>0?{If~%Comma%=1?, }+{Color~Peru,%DodgeRacial%} dodge|Comma=1|}
_{If~%SORDraconicAC%>0?{If~%Comma%=1?, }+{Color~DarkCyan,%SORDraconicAC%} natural|Comma=1|}
_{If~%NaturalArmorRacial%>0?{If~%Comma%=1?, }+{Color~Peru,%NaturalArmorRacial%} natural|Comma=1|}
_{If~%PrintArmor%!=0?{If~%Comma%=1?, }[ArmorBranch=%PrintArmor%]|Comma=1|}
_{If~%ShieldFlag%>0?{If~%Comma%=1?, }{If~{Find~1,Shield Focus,%FeatsAll%}!=0?{Color~Green,+%ShieldACPlus%}/+%ShieldACPlus%} {If~%MagicPlussesShield%=0?%ShieldWorn%/{Italic~[FontB=2]+%MagicPlussesShield%[FontE] %ShieldWorn%}}|Comma=1|}
_{If~%SpellACImprovementFlag%=1?{If~%Comma%=1?, }{Color~Purple,+%SpellImprovement% [ACAdjustingSpellNames=%ACSpellID%]}|SpellACImprovementFlag=0|}
_{If~{Find~1,Two-Weapon Defense,%FeatsAll%}!=0?{Color~Green,{If~%ShieldFlag%>0? or/,} +1 Two-Wpn Defense[FontB=1]{If~%ShieldFlag%>0? (if required)}[FontE]}|Comma=1|}

:WriteAC3
1,{If~%Show%=1?
_{If~%BbnTrapSense%>0?{Color~DarkCyan,*}}
_}

:ArcaneFailure
1,{If~{Calc~%ASF%+%ASFSh%}>0?[ArcaneFailure2=%Class%]}

### NEW CLASS ###
:ArcaneFailure2
#1-2,{If~{Find~1,Use Magic Device,%SkillsString%}!=0?[ASFShow]}
#3,[ASFShow]
#4-9,{If~{Find~1,Use Magic Device,%SkillsString%}!=0?[ASFShow]}
1-9,
10-11,[ASFShow]
#12-16,{If~{Find~1,Use Magic Device,%SkillsString%}!=0?[ASFShow]}
12-16,

:ASFShow
1, [FontB=2]
_{Color~Red,
_ASF {Calc~%ASF%+%ASFSh%}[Percent]
_{If~{And~%ASF%>0,%ASFSh%>0}=1?[FontB=1]; Arm %ASF%[Percent]; Shi %ASFSh%[Percent][FontE]}
_}
### NEW FEATS ### Arcane Spell Failure ASF
_{Color~Green,
_{If~{Find~1,Arcane Armor Mastery,%FeatsString%}!=0? (SWIFT -20[Percent])
_/{If~{Find~1,Arcane Armor Training,%FeatsString%}!=0? (SWIFT -10[Percent])
_}}
_}
_[FontE]

:AC_Special
1,[FontB=1]
_{Color~Saddlebrown,
_{If~%Interlock%=Yes? +2 AC if move max 5';}
_}
_{Color~Peru,
_{If~%DefensiveTraining%=Yes? +4 dodge vs giants;
_/{If~%DefensiveTraining%=Dragons? +4 dodge vs dragons;
_}}
_{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Mountain}=1? +Mountaineer (vs Climb/Acrobatics);
_   :{IIf~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Avenging}=1? +1 dodge vs larger opponent (INCLUDED);
_   :{IIf~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Slave Born}=1? Fear Effect = +1 dodge;
_}}}
_{If~%HumanHeartStreet%=Yes? +1 dodge when adjacent to 2 allies;}
_}
_{Color~DarkCyan,
_{If~%UncannyDodge%>=2? Imp.Uncanny Dodge;/{If~%UncannyDodge%=1? Uncanny Dodge;}}
_{IIf~%BbnTrapSense%>0? +%BbnTrapSense% dodge vs traps;}
_{IIf~%BbnGuardedStance%>0? +Guarded Stace [FontB=1](+%BbnGuardedStance% dodge melee, "CON" r);[FontE]}
_{IIf~%BbnRollingDodge%>0? +Rolling Dodge [FontB=1](+%BbnRollingDodge% dodge range, "CON" r);[FontE]}
_{If~%ROGTrapSense%>0? +%ROGTrapSense% dodge vs Traps;}
_{If~%SORDestinedFated%>0? [FontB=1]+%SORDestinedFated% AC in surprise rounds or if unaware of attack;[FontE]}
_}
### NEW FEATS ### AC_Special
_{Color~Green,
_{If~{Find~1,arrow catching,%ShieldMagicSpecial%}!=0? +1 deflection vs ranged;}
_{If~{Find~1,Cautious Fighter,%FeatsAll%}!=0? +2 dodge AC in Full Defense;}
_{If~{Find~1,Mobility,%FeatsAll%}!=0? +4 Mobility;}
_}
#_{Color~Orange,
#_}
_[FontE]

:DetermineAttackBonusesSize
1,8
2,4
3,2
4,1
5,0
6,-1
7,-2
8,-4
9,-8

:ArmorBranch
1,{If~%MageArmorBonus1%!=0?+%MagicPlussesMage1% %MageArmorBonus1% [MageArmorDescription=1]}[ArmorBranch2][ArmorBranchSI]
2,+%NormalPlusses% %ArmorType%[ArmorBranch2][ArmorBranchSI]
3,+%ArmorPlusses% {If~%Ironwood%!=99?[ItalicsOn]}[FontB=2]+%MagicPlussesArmor%[FontE] %ArmorType%{If~%Ironwood%!=99?[ItalicsOff]}[ArmorBranch2][ArmorBranchSI]
4,{If~%MonkACBonus%>0?+%MonkACBonus% AC Bonus}{If~%WISBonus%>0?{If~%MonkACBonus%>0?,} +%WISBonus% Wis}[ArmorBranch2][ArmorBranchSI]

:ArmorBranch2
1,{If~%MageArmorBonus2%!=0?, +%MagicPlussesMage2% %MageArmorBonus2% [MageArmorDescription=2]}

:ArmorBranchSI
1,{If~%SpellACImprovementFlag%=1?, {Color~Purple,+%SpellImprovement% [ACAdjustingSpellNames=%ACSpellID%]}|SpellACImprovementFlag=0|}

# ---------------------------------------------------------------------------
# BAB / CMB / CMD -  Combat Maneuver Tables

:SetBAB
1,[DetermineBABs=%Class%]
_[BuildCMB_Value]
_[BuildCMD_Value]

### NEW CLASS ###
:DetermineBABs
#Fighter, Barbarian + Pal, Rng, Warrior
1-2,|BAB1=%CharacterLevel%||BAB=%BAB1%|
_{If~%BAB%>15?|BAB4={Calc~(%BAB%-15)}|}
_{If~%BAB%>10?|BAB3={Calc~(%BAB%-10)}|}
_{If~%BAB%>5?|BAB2={Calc~(%BAB%-5)}|}
#Bard, Cleric, Druid, Monk + Rogue, Aristocrat, Expert
3-6,[OtherBABs=%CharacterLevel%]|BAB=%BAB1%|
#Paladin, Ranger
7-8,[DetermineBABs=1]
#Rogue
9,[DetermineBABs=3]
#Sorcerer, Wizard, Adept, Commoner
10-12,|BAB1=%CharacterLevel%||BAB1\2||BAB=%BAB1%|
_{If~%BAB%>=6?|BAB2={Calc~(%BAB1%-5)}|}
# Adept
13,[DetermineBABs=3]
# Commoner
14,[DetermineBABs=10]
# Aristocrat
15,[DetermineBABs=3]
# Warrior
16,[DetermineBABs=1]
17-100,[DetermineBABs=3]

:OtherBABs
1,|BAB1=0|
2,|BAB1=1|
3,|BAB1=2|
4-5,|BAB1=3|
6,|BAB1=4|
7,|BAB1=5|
8-9,|BAB1=6||BAB2=1|
10,|BAB1=7||BAB2=2|
11,|BAB1=8||BAB2=3|
12-13,|BAB1=9||BAB2=4|
14,|BAB1=10||BAB2=5|
15,|BAB1=11||BAB2=6||BAB3=1|
16-17,|BAB1=12||BAB2=7||BAB3=2|
18,|BAB1=13||BAB2=8||BAB3=3|
19,|BAB1=14||BAB2=9||BAB3=4|
20,|BAB1=15||BAB2=10||BAB3=5|

:BuildCMB_Value
1,{If~%MonkManeuverTraining%!=0?|CMB=%MonkManeuverTraining%|/|CMB=%BAB%|}
_{If~{Find~1,Agile Maneuvers,%FeatsAll%}!=0?|CMB+%DEXBonus%|/|CMB+%STRBonus%|}
_|CMBD_Mod=0|[DetermineCMB_ModBySize=%Size%]
_|CMB+%CMBD_Mod%|

:DetermineCMB_ModBySize
#Fine
1,|CMBD_Mod-8|
#Diminutive
2,|CMBD_Mod-4|
#Tiny
3,|CMBD_Mod-2|
#Small
4,|CMBD_Mod-1|
#Medium
5,|CMBD_Mod+0|
#Large
6,|CMBD_Mod+1|
#Huge
7,|CMBD_Mod+2|
#Gargantuan
8,|CMBD_Mod+4|
#Colossal
9,|CMBD_Mod+8|

:BuildCMD_Value
1,{If~{Find~1,Defensive Combat Training,%FeatsAll%}!=0?|CMD=%CharacterLevel%|/|CMD=%BAB%|}
_|CMD+10||CMD+%STRBonus%||CMD+%DEXBonus%||CMD+%CMBD_Mod%|

### NEW FEATS ### CMB
:CMB_Special
1,[FontB=1]
_{Color~Green,
#_{If~{Find~1,Agile Maneuvers,%FeatsAll%}!=0? Agile Maneuvers}
_{If~{Find~1,Hard-headed,%FeatsAll%}!=0? +1 with helmet}
_{If~{Find~1,Greater Bull Rush,%FeatsAll%}!=0? +4 Bull Rush (opp.provoke AO)
_/{If~{Find~1,Improved Bull Rush,%FeatsAll%}!=0? +2 Bull Rush
_}}
_{If~{Find~1,Greater Disarm,%FeatsAll%}!=0? |DisarmMod+4|+%DisarmMod% Disarm (falls at 15')
_/{If~{Find~1,Improved Disarm,%FeatsAll%}!=0? |DisarmMod+2|+%DisarmMod% Disarm
_/{If~%DisarmMod%>0? +%DisarmMod% Disarm
_}}}
_{If~{Find~1,Greater Grapple,%FeatsAll%}!=0? +4 Grapple (move to maintain)
_/{If~{Find~1,Improved Grapple,%FeatsAll%}!=0? +2 Grapple
_}}
_{If~{Find~1,Kobold Endurance,%FeatsAll%}!=0? +4 to get away from a Grapple[Slash]Pin;}
_{If~{Find~1,Greater Overrun,%FeatsAll%}!=0? +4 Overrun (AO if prone)
_/{If~{Find~1,Improved Overrun,%FeatsAll%}!=0? +2 Overrun
_}}
_{If~{Find~1,Greater Sunder,%FeatsAll%}!=0? +4 Sunder (excess dmg applied to user)
_/{If~{Find~1,Improved Sunder,%FeatsAll%}!=0? +2 Sunder
_}}
_{If~{Find~1,Greater Trip,%FeatsAll%}!=0? +4 Trip (AO if prone)
_/{If~{Find~1,Improved Trip,%FeatsAll%}!=0? +2 Trip
_}}
_}
_{Color~Peru,
_{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Exiled}=1? +2 vs bull rush/overrun on ground}
_}
_[FontE]

:CMD_Special
1,[FontB=1]
_{Color~Peru,
# NO +4 for an Exiled or Mountain dwarf
_{IIf~{Param~Race,%Race%}=Dwarf?{IIf~%Subrace%=Exiled?:{IIf~%Subrace%=Mountain?: +4 vs bull rush/trip on ground}}
_   :{IIf~{Param~Race,%Race%}=Duergar? +{IIf~{Find~1,Stoneblood,%FeatsAll%}!=0?6:4} vs bull rush/trip on ground
_}}
_}
### NEW FEATS ### CMD
_{Color~Green,
#_{If~{Find~1,Defensive Combat Training,%FeatsAll%}!=0? Def.cbt.training}
_{If~{Find~1,Improved Bull Rush,%FeatsAll%}!=0? +2 vs Bull Rush}
_{IIf~{And~{Param~Race,%Race%}=Svirfneblin,{Find~1,Stoneblood,%FeatsAll%}!=0}=1? +2 vs bull rush/trip on ground}
_{If~{Find~1,Improved Disarm,%FeatsAll%}!=0? +2 vs Disarm}
_{If~{Find~1,Improved Grapple,%FeatsAll%}!=0? +2 vs Grapple}
_{If~{Find~1,Improved Overrun,%FeatsAll%}!=0? +2 vs Overrun}
_{If~{Find~1,Improved Sunder,%FeatsAll%}!=0? +2 vs Sunder}
_{If~{Find~1,Improved Trip,%FeatsAll%}!=0? +2 vs Trip}
_}
_[FontE]

:BABDisplay
1-5,|Temp1=[BA1]|{If~%Temp1%>=0?+/ }%Temp1%[AddHasteSpeedM]
### TEST ###_<br>(BAB1=%BAB1%, DEX/STR=%DisplaySTRDEX%, WpnFocM=%WpnFocM%, Haste=%Haste%, MWAttB=%MWAttB%, +=%MagicPlussesMelee% -- 2WCP=%2WCP% 2WCOff=%2WCOff%)<br>
6-10,[BABDisplay=1][Slash]|Temp1=[BA2]|{If~%Temp1%>=0?+/ }%Temp1%
11-15,[BABDisplay=6][Slash]|Temp1=[BA3]|{If~%Temp1%>=0?+/ }%Temp1%
16-20,[BABDisplay=11][Slash]|Temp1=[BA4]|{If~%Temp1%>=0?+/ }%Temp1%

# Also see RWONE + TwoWpnChoiceGen to add the same modifiers.
:BA1
1,{Calc~%BAB1%+%DisplaySTRDEX%+%2WCP%+%WpnFocM%+%Haste%+%MWAttB%+%MagicPlussesMelee%+%ArmorShieldPenalty%+%FTR_WT_M_Bonus%}

:BA2
1,{Calc~%BAB2%+%DisplaySTRDEX%+%2WCP%+%WpnFocM%+%Haste%+%MWAttB%+%MagicPlussesMelee%+%ArmorShieldPenalty%+%FTR_WT_M_Bonus%}

:BA3
1,{Calc~%BAB3%+%DisplaySTRDEX%+%2WCP%+%WpnFocM%+%Haste%+%MWAttB%+%MagicPlussesMelee%+%ArmorShieldPenalty%+%FTR_WT_M_Bonus%}

:BA4
1,{Calc~%BAB4%+%DisplaySTRDEX%+%2WCP%+%WpnFocM%+%Haste%+%MWAttB%+%MagicPlussesMelee%+%ArmorShieldPenalty%+%FTR_WT_M_Bonus%}

:BABDisplayUnarmed
1-5,|Temp1=[BAU1]|
_{If~{And~{Param~Race,%Race%}=Kobold,%Subrace%=Sigrun's Clan}=1?|Temp1+2|}
_{If~%Temp1%>=0?+/ }%Temp1%[AddHasteSpeedU]
6-10,[BABDisplayUnarmed=1][Slash]|Temp1=[BAU2]|
_{If~{And~{Param~Race,%Race%}=Kobold,%Subrace%=Sigrun's Clan}=1?|Temp1+2|}
_{If~%Temp1%>=0?+/ }%Temp1%
11-15,[BABDisplayUnarmed=6][Slash]|Temp1=[BAU3]|
_{If~{And~{Param~Race,%Race%}=Kobold,%Subrace%=Sigrun's Clan}=1?|Temp1+2|}
_{If~%Temp1%>=0?+/ }%Temp1%
16-20,[BABDisplayUnarmed=11][Slash]|Temp1=[BAU4]|
_{If~{And~{Param~Race,%Race%}=Kobold,%Subrace%=Sigrun's Clan}=1?|Temp1+2|}
_{If~%Temp1%>=0?+/ }%Temp1%

# Also see RWONE + TwoWpnChoiceGen to add the same modifiers.
:BAU1
1,{Calc~%BAB1%+%DisplaySTRDEX%+%2WCP%+%WpnFocUnarmed%+%Haste%+%ArmorShieldPenalty%+%FTR_WT_M_BonusU%}

:BAU2
1,{Calc~%BAB2%+%DisplaySTRDEX%+%2WCP%+%WpnFocUnarmed%+%Haste%+%ArmorShieldPenalty%+%FTR_WT_M_BonusU%}

:BAU3
1,{Calc~%BAB3%+%DisplaySTRDEX%+%2WCP%+%WpnFocUnarmed%+%Haste%+%ArmorShieldPenalty%+%FTR_WT_M_BonusU%}

:BAU4
1,{Calc~%BAB4%+%DisplaySTRDEX%+%2WCP%+%WpnFocUnarmed%+%Haste%+%ArmorShieldPenalty%+%FTR_WT_M_BonusU%}

:BABDisplayFlurry
1-5,|Temp1=[FB]|{If~%Temp1%>=0?+/ }%Temp1%[Slash]{If~%Temp1%>=0?+/ }%Temp1%[AddHasteSpeedM]
6-7,[BABDisplayFlurry=1]|Temp1-5|[Slash]{If~%Temp1%>=0?+/ }%Temp1%
8-10,[BABDisplayFlurry=6][Slash]{If~%Temp1%>=0?+/ }%Temp1%
11-14,[BABDisplayFlurry=8]|Temp1-5|[Slash]{If~%Temp1%>=0?+/ }%Temp1%
15,[BABDisplayFlurry=11][Slash]{If~%Temp1%>=0?+/ }%Temp1%
16-20,[BABDisplayFlurry=15]|Temp1-5|[Slash]{If~%Temp1%>=0?+/ }%Temp1%

:FB
1,{Calc~%CharacterLevel%+%DisplaySTRDEX%+%WpnFocM%+%Haste%+%MWAttB%+%MagicPlussesMelee%+%ArmorShieldPenalty%+%FTR_WT_M_Bonus%-2}

:BABDisplayFlurryNoWpn
1-5,|Temp1=[FBNoWpn]|
_{If~{And~{Param~Race,%Race%}=Kobold,%Subrace%=Sigrun's Clan}=1?|Temp1+2|}
_{If~%Temp1%>=0?+/ }%Temp1%[Slash]{If~%Temp1%>=0?+/ }%Temp1%
_[AddHasteSpeedU]
6-7,[BABDisplayFlurryNoWpn=1]|Temp1-5|[Slash]{If~%Temp1%>=0?+/ }%Temp1%
8-10,[BABDisplayFlurryNoWpn=6][Slash]{If~%Temp1%>=0?+/ }%Temp1%
11-14,[BABDisplayFlurryNoWpn=8]|Temp1-5|[Slash]{If~%Temp1%>=0?+/ }%Temp1%
15,[BABDisplayFlurryNoWpn=11][Slash]{If~%Temp1%>=0?+/ }%Temp1%
16-20,[BABDisplayFlurryNoWpn=15]|Temp1-5|[Slash]{If~%Temp1%>=0?+/ }%Temp1%

:FBNoWpn
1,{Calc~%CharacterLevel%+%DisplaySTRDEX%+%WpnFocUnarmed%+%Haste%+%ArmorShieldPenalty%+%FTR_WT_M_Bonus%-2}

:BABDisplayR
1-5,|Temp1=[BAR1]|{If~%Temp1%>=0?+/ }%Temp1%[AddHasteSpeedR]
### TEST ###_<br>(BAB1=%BAB1%, DEX=%DEXBonus%, WpnFocR=%WpnFocR%, Haste=%Haste%, MWAttBR=%MWAttBR%, +=%MagicPlussesRange% -- 2WCP=%2WCP% 2WCOff=%2WCOff%)<br>
6-10,[BABDisplayR=1][Slash]|Temp1=[BAR2]|{If~%Temp1%>=0?+/ }%Temp1%
11-15,[BABDisplayR=6][Slash]|Temp1=[BAR3]|{If~%Temp1%>=0?+/ }%Temp1%
16-20,[BABDisplayR=11][Slash]|Temp1=[BAR4]|{If~%Temp1%>=0?+/ }%Temp1%

# Also see RWONE + TwoWpnChoiceGen to add the same modifiers.
:BAR1
1,{Calc~%BAB1%+%DEXBonus%+%WpnFocR%+%Haste%+%MWAttBR%+%MagicPlussesRange%+%FTR_WT_R_Bonus%}

:BAR2
1,{Calc~%BAB2%+%DEXBonus%+%WpnFocR%+%Haste%+%MWAttBR%+%MagicPlussesRange%+%FTR_WT_R_Bonus%}

:BAR3
1,{Calc~%BAB3%+%DEXBonus%+%WpnFocR%+%Haste%+%MWAttBR%+%MagicPlussesRange%+%FTR_WT_R_Bonus%}

:BAR4
1,{Calc~%BAB4%+%DEXBonus%+%WpnFocR%+%Haste%+%MWAttBR%+%MagicPlussesRange%+%FTR_WT_R_Bonus%}

:BABDisplayFlurryR
1-5,|Temp1=[FBR]|{If~%Temp1%>=0?+}%Temp1%[Slash]{If~%Temp1%>=0?+/ }%Temp1%[AddHasteSpeedR]
6-7,[BABDisplayFlurryR=1]|Temp1-5|[Slash]{If~%Temp1%>=0?+/ }%Temp1%
8-10,[BABDisplayFlurryR=6][Slash]{If~%Temp1%>=0?+/ }%Temp1%
11-14,[BABDisplayFlurryR=8]|Temp1-5|[Slash]{If~%Temp1%>=0?+/ }%Temp1%
15,[BABDisplayFlurryR=11][Slash]{If~%Temp1%>=0?+/ }%Temp1%
16-20,[BABDisplayFlurryR=15]|Temp1-5|[Slash]{If~%Temp1%>=0?+/ }%Temp1%

:FBR
1,{Calc~%CharacterLevel%+%DEXBonus%+%WpnFocR%+%Haste%+%MWAttBR%+%MagicPlussesRange%+%FTR_WT_R_Bonus%-2}

:SizeMod
#Fine
1,{If~%BAB1%>=0?|BAB1+8|}
_{If~%BAB2%>0?|BAB2+8|}
_{If~%BAB3%>0?|BAB3+8|}
_{If~%BAB4%>0?|BAB4+8|}
#Diminutive
2,{If~%BAB1%>=0?|BAB1+4|}
_{If~%BAB2%>0?|BAB2+4|}
_{If~%BAB3%>0?|BAB3+4|}
_{If~%BAB4%>0?|BAB4+4|}
#Tiny
3,{If~%BAB1%>=0?|BAB1+2|}
_{If~%BAB2%>0?|BAB2+2|}
_{If~%BAB3%>0?|BAB3+2|}
_{If~%BAB4%>0?|BAB4+2|}
#Small
4,{If~%BAB1%>=0?|BAB1+1|}
_{If~%BAB2%>0?|BAB2+1|}
_{If~%BAB3%>0?|BAB3+1|}
_{If~%BAB4%>0?|BAB4+1|}
#Medium
5,
#Large
6,{If~%BAB1%>=0?|BAB1-1|}
_{If~%BAB2%>0?|BAB2-1|}
_{If~%BAB3%>0?|BAB3-1|}
_{If~%BAB4%>0?|BAB4-1|}
#Huge
7,{If~%BAB1%>=0?|BAB1-2|}
_{If~%BAB2%>0?|BAB2-2|}
_{If~%BAB3%>0?|BAB3-2|}
_{If~%BAB4%>0?|BAB4-2|}
#Gargantuan
8,{If~%BAB1%>=0?|BAB1-4|}
_{If~%BAB2%>0?|BAB2-4|}
_{If~%BAB3%>0?|BAB3-4|}
_{If~%BAB4%>0?|BAB4-4|}
#Colossal
9,{If~%BAB1%>=0?|BAB1-8|}
_{If~%BAB2%>0?|BAB2-8|}
_{If~%BAB3%>0?|BAB3-8|}
_{If~%BAB4%>0?|BAB4-8|}

# ---------------------------------------------------------------------------
# WEAPONS: ALL

# WeaponChoice= Melee or Range (depending on feats chosen above) / Must choose Armor-Shield before.
# WpnFoc = Weapon Focus (Melee or Range)
# SpnSpe = Weapon Specialization (Melee or Range)
:SetWeapons
1,[DetermineWeaponChoice]|WpnFocM=0||WpnFocR=0||WpnSpeM=0||WpnSpeR=0||WpnFocUnarmed=0||WpnSpeUnarmed=0|
###TEST###_|WeaponChoice=Range|
###TEST###_|WeaponChoice=Melee|
###TEST###_<br>M=%WpnFocM% R=%WpnFocR% Choice=%WeaponChoice% / Wpn Specialization: M=%WpnSpeM% R=%WpnSpeR%<br>
# Applies Weapon Focus (+Greater) and Weapon Specialization (+Greater) to either the Melee or Range weapon (as per WeaponChoice).
_{If~{Find~1,WPNFOCUS,%FeatsAll%}!=0?|Temp1=1|{If~{Find~1,Greater Weapon Focus,%FeatsAll%}!=0?|Temp1+1|}{If~%WeaponChoice%=Melee?|WpnFocM=%Temp1%|/|WpnFocR=%Temp1%|}}
_{If~{Find~1,Weapon Specialization,%FeatsAll%}!=0?|Temp1=2|{If~{Find~1,Greater Weapon Specialization,%FeatsAll%}!=0?|Temp1+2|}{If~%WeaponChoice%=Melee?|WpnSpeM=%Temp1%|/|WpnSpeR=%Temp1%|}}
#_{If~{And~{Param~Class,%Class%}=Monk,%WeaponChoice%=Melee}=1?{If~{Dice~1d30}>1?|WpnFocUnarmed=%WpnFocM%||WpnFocM=0|}}
#_{If~{And~{Param~Class,%Class%}=Monk,%WeaponChoice%=Range}=1?{If~{Dice~1d5}>1?|WpnFocUnarmed=%WpnFocR%||WpnFocR=0||WeaponChoice=Melee|}}
_{If~{Param~Class,%Class%}=Monk?{If~%WeaponChoice%=Melee?{If~{Dice~1d30}>1?|WpnFocUnarmed=%WpnFocM%||WpnFocM=0|}
_                                                       /{If~{Dice~1d5}>1?|WpnFocUnarmed=%WpnFocR%||WpnFocR=0||WeaponChoice=Melee|}
_                               }
_}
#
# ShieldFlag required to choose the melee weapon. With a shield chosen, there won't be 2-handed melee weapons.
_|ExoticFlag=0|
# Based on WeaponChoice (above), creates either the Melee or Range weapon first : for Wealth values and if "Exotic Weapon Proficiency" was chosen.
# AL (alignment) +Armor-Shield must be chosen before.
_|TempMagicPlus=10|{If~%WeaponChoice%=Melee?[SetMelee][SetRange]/[SetRange][SetMelee]}
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After SetMelee or SetRange}}
_{If~{And~{Param~Class,%Class%}=Monk,%WeaponChoice%=Melee}=1?{If~{And~%MagicPlussesMelee%>0,{Dice~1d20}=1}=1?|WpnFocM=%WpnFocUnarmed%||WpnFocUnarmed=0|}}
_{If~{And~%Wpn%=unarmed strike,%WeaponChoice%=Melee}=1?|WpnFocUnarmed=%WpnFocM%||WpnFocM=0||WpnSpeUnarmed=%WpnSpeM%||WpnSpeM=0|}
_[SetWpnSp]
_{If~%TestLog%=1?{Log~E:\log.txt,----- SetWeapons >>>>> After SetWpnSp}}
# NOTE: For a chosen Ancestral Weapon (in SetMelee), this automatically adds Weapon Focus to the melee weapon.
# For now, only melee weapons can be chosen as Ancestral Weapons.
_{If~{And~%AncestralWeapon%=1,%WpnFocM%<1}=1?|WpnFocM=1|}
_|MonkMeleeWpn=No||MonkRangedWpn=No|{If~{Param~Class,%Class%}=Monk?[VerifyMonkMeleeWeapon][VerifyMonkRangedWeapon]}
#
# DmgModM = alchemical silver -1 dmg (only for now)
_|WpnSpeAdd=%WpnSpeM%||WpnSpeAdd+%DmgModM%||WpnSpeAdd2=%WpnSpeM%||WpnSpeAdd2+%DmgModM2%||WpnSpeAdd+%MagicPlussesMelee%||WpnSpeAdd2+%MagicPlussesMelee%|

# ---------------------------------------------------------------------------
# Determine Weapon Choice

:DetermineWeaponChoice
1,{If~%RNGCombatStyle%=2?|WeaponChoice=Range|
_   /{If~%RNGCombatStyle%=3?|WeaponChoice=Melee|
_      /{If~%STR%>%DEX%?[DetermineWeaponChoiceSTR]
_         /{If~%DEX%>%STR%?[DetermineWeaponChoiceDEX]
_            /[DetermineWeaponChoiceRandom]
_}}}}

:DetermineWeaponChoiceSTR
1,{If~{Find~1,Power Attack,%FeatsAll%}!=0?|WeaponChoice=Melee|
_   /{If~{Find~1,Combat Expertise,%FeatsAll%}!=0?|WeaponChoice=Melee|
_      /[DetermineWeaponChoiceRandom]
_}}

:DetermineWeaponChoiceDEX
1,{If~{Find~1,Deadly Aim,%FeatsAll%}!=0?|WeaponChoice=Range|
_   /{If~{Find~1,Point-Blank Shot,%FeatsAll%}!=0?|WeaponChoice=Range|
_      /{If~{Find~1,Mounted Archery,%FeatsAll%}!=0?|WeaponChoice=Range|
_         /{If~{Find~1,Rapid Reload,%FeatsAll%}!=0?|WeaponChoice=Range|
_            /[DetermineWeaponChoiceRandom]
_}}}}

:DetermineWeaponChoiceRandom
1,|WeaponChoice=Melee|
2,|WeaponChoice=Range|

# ---------------------------------------------------------------------------
# WEAPONS: Melee

:SetMelee
1,|Material=0||MW=0||HitModM=0||DmgModM=0||DmgModM2=0||ChoiceMod=0||AncestralWeapon=0||GodFavoredWeapon=No|
_{If~%TestLog%=1?{Log~E:\log.txt,----- SetWeapons >>>>> SetMelee{If~%ExtraMeleeWpn%=Yes? (Extra Melee Weapon)}}}
_{If~{And~{Param~Class,%Class%}=Cleric,%GodWpnT%=Melee}=1?{If~{Dice~1d100}<=60?|GodFavoredWeapon=Yes|}
_}
### RENDU ICI error si WealthWPN=0 XXX
_{If~{And~{Find~1,Weapon Finesse,%FeatsAll%}!=0,%WealthWPN%>=1}=1?[SetMeleeWpnFinesse]/[SetMelee1]}
#_{If~{Find~1,Weapon Finesse,%FeatsAll%}!=0?[SetMeleeWpnFinesse]/[SetMelee1]}
### TEST
_{If~%TestCostWeight%=1?|TestTableNote= %Cost%gp %Wt%lb||Wpn& [TestTable]|}

:SetMelee1
# XXX Remove below with ExoticFlag
#1,{If~{And~%ExoticFlag%=0,{Find~1,Exotic Weapon Proficiency,%FeatsAll%}!=0}=1?[SetMeleeExotic]|ExoticFlag=1|/[SetMeleeALL=%Race%]}
1,{If~{And~%WeaponChoice%=Melee,{Find~1,Exotic Weapon Proficiency,%FeatsAll%}!=0}=1?[SetMeleeExotic]
_/{If~%TestLog%=1?{Log~E:\log.txt,----- SetMelee >>>>> Normal choice}}
_[SetMeleeALL=%Race%]}

:SetMeleeExotic
1,{If~%TestLog%=1?{Log~E:\log.txt,----- SetMelee >>>>> with Exotic Weapon Proficiency}}
_|TempM=ExoticWeapons|[FindMelee]

### NEW RACE ###
### NEW SUBRACE ### Weapon Familiarity
# Here, we first look for the "Ancestral Weapon Mastery" feat, considering that if the NPC took this feat he'll want a weapon from these choices. (seee Equipment.tab)
#    Then you'll look for special "racial" weapons found in the race's description. For some races they can wield an exotic weapon if they have the "Martial Weapons Proficiency" so it will look for this in "VerifyXXX" subtable.
#    Finally, a random weapon will be chosen.
# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
# There is about 33% chances to normally generate a racial weapon (if a few racial weapons) or 16% for only one racial weapon.
:SetMeleeALL
# Human : NO Melee racial weapons
1,[SetMeleeMain]
2,{If~{Find~1,Ancestral Weapon Mastery,%FeatsAll%}!=0?|TempM=Dwarf|[FindMelee]|AncestralWeapon=1|
_/{If~{Dice~1d3}=1?|TempM=Dwarf||TempVerify=Dwarf||Temp2=1|{While~%Temp2%,[FindMelee][Verify%TempVerify%]}
_/[SetMeleeMain]
_}}
# PALWpnPowers: No Blunt Racial weapons for "disruption" ability.
3,{If~{Find~1,disruption,%PALWpnPowers%}>0?[SetMeleeMain]
_/{If~{Find~1,Ancestral Weapon Mastery,%FeatsAll%}!=0?{If~%Subrace%=Aquatic?|TempM=AquaticElf|/|TempM=Elf|}[FindMelee]|AncestralWeapon=1|
# These Elves do not have Weapon Familiarity (ElfWeaponFamiliarity)
_/{If~{And~{Param~Race,%Race%}=Elf,%Subrace%=Savage}=1?[SetMeleeMain]
_/{If~{And~{Param~Race,%Race%}=Elf,%Subrace%=Tower}=1?[SetMeleeMain]
_/{If~{And~{Param~Race,%Race%}=Elf,{Or~%Subrace%=Dusk,%Subrace%=Shadow}=1}=1?[SetMeleeMain]
# These Elves have a special weapon proficiency (se FindMeleeElfWpnFam)
_/{If~{Dice~1d3}=1?{If~%Subrace%=Aquatic?|TempM=AquaticElf|/{If~%Subrace%=Desert?|TempM=DesertElf|/{If~%Subrace%=Jungle?|TempM=JungleElf|/|TempM=Elf|}}}|TempVerify=Elf||Temp2=1|{While~%Temp2%,[FindMelee][Verify%TempVerify%]}
_/[SetMeleeMain]
_}}}}}}
# Gnome (only exotic weapons, so no VerifyGnome, the Martial W.Prof if verified here)
# PALWpnPowers: No P/S Racial weapons for "keen" ability.
4,{If~{Find~1,keen,%PALWpnPowers%}>0?[SetMeleeMain]
_/{If~{Find~1,Ancestral Weapon Mastery,%FeatsAll%}!=0?|TempM=Gnome|[FindMelee]|AncestralWeapon=1|
_/{If~{And~{Dice~1d3}=1,{Find~1,Martial Weapon Proficiency}!=0}=1?|TempM=Gnome|[FindMelee]
_/[SetMeleeMain]
_}}}
# Half-Elf : NO Melee racial weapons
5,{If~{Find~1,Ancestral Weapon Mastery,%FeatsAll%}!=0?|TempM=Elf|[FindMelee]|AncestralWeapon=1|
_/[SetMeleeMain]
_}
# PALWpnPowers: No Blunt Racial weapons for "disruption" ability.
6,{If~{Find~1,disruption,%PALWpnPowers%}>0?[SetMeleeMain]
_/{If~{Find~1,Ancestral Weapon Mastery,%FeatsAll%}!=0?|TempM=HalfOrc|[FindMelee]|AncestralWeapon=1|
_/{If~{And~{Dice~1d3}>1,%Subrace%=Arena-Bred}=1?|TempM=HalfOrcArena|[FindMelee]
_/{If~{And~{Dice~1d3}=1,%Subrace%!=Arena-Bred}=1?|TempM=HalfOrc||TempVerify=HalfOrc||Temp2=1|{While~%Temp2%,[FindMelee][Verify%TempVerify%]}
_/[SetMeleeMain]
_}}}}
# Halfling (only one exotic weapon, so no VerifyHalfling, the Martial W.Prof is verified here)
# PALWpnPowers: No P/S Racial weapons for "keen" ability.
7,{If~{Find~1,keen,%PALWpnPowers%}>0?[SetMeleeMain]
_/{If~{Find~1,Ancestral Weapon Mastery,%FeatsAll%}!=0?|TempM=Halfling|[FindMelee]|AncestralWeapon=1|
_/{If~{And~{Dice~1d3}>1,%Subrace%=Jungle}=1?|TempM=HalflingJungle|[FindMelee]
_/{If~{And~{Dice~1d6}=1,{Find~1,Martial Weapon Proficiency}!=0}=1?|TempM=Halfling|[FindMelee]
_/[SetMeleeMain]
_}}}}
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
8,[SetMeleeMain]
# PALWpnPowers: No Blunt Racial weapons for "disruption" ability.
9,{If~{Find~1,disruption,%PALWpnPowers%}>0?[SetMeleeMain]
_/{If~{Find~1,Ancestral Weapon Mastery,%FeatsAll%}!=0?|TempM=Drow|[FindMelee]|AncestralWeapon=1|
_/{If~{Dice~1d3}=1?|TempM=Drow||TempVerify=Drow||Temp2=1|{While~%Temp2%,[FindMelee][Verify%TempVerify%]}
_/[SetMeleeMain]
_}}}
10,[SetMeleeALL=9]
11-15,[SetMeleeMain]
16,[SetMeleeALL=6]
17,[SetMeleeMain]
# PALWpnPowers: No Blunt Racial weapons for "disruption" ability.
18,{If~{Find~1,disruption,%PALWpnPowers%}>0?[SetMeleeMain]
_/{If~{Dice~1d6}>1?|TempM=Tengu|[FindMelee]
_/[SetMeleeMain]
_}}
19,[SetMeleeMain]
20,{Stop~ERROR SetMeleeALL}

# For racial "named" EXOTIC weapons, Martial Weapons Proficiency is required.
# While~ : Temp2=1 = reroll another racial weapon because there is no "Martial Weapons Proficiency"
#          Temp2=0 = Weapon is OK
:VerifyDwarf
1,{If~%OriginalWpnName%=dwarven waraxe?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=dwarven urgrosh?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=dwarven boulder helmet?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=dwarven longaxe?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=dwarven longhammer?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=dwarven double waraxe?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /|Temp2=0|
_}}}}}}

:VerifyDrow
1,{If~%OriginalWpnName%=shyrlass?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=drow blade boots?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=drow razor?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /|Temp2=0|
_}}}

# Unused until adding a gnome non-exotic weapon in gnomemelee (Equipment.tab)
:VerifyGnome
1,{If~%OriginalWpnName%=gnome hooked hammer?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=gnome flickmace?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=gnome battle ladder?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=gnome flailpole?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=gnome piston maul?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /{If~%OriginalWpnName%=gnome ripsaw glaive?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /|Temp2=0|
_}}}}}}

:VerifyElf
1,{If~%OriginalWpnName%=elven curve blade?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /|Temp2=0|
_}

:VerifyHalfOrc
1,{If~%OriginalWpnName%=orc double axe?{If~{And~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0,{Find~1,Ancestral Weapon Mastery,%FeatsAll%}=0}=1?|Temp2=1|/|Temp2=0|}
_   /|Temp2=0|
_}

### NEW CLASS ###
# 50% to have the special class weapons.
# Important to have a class entry here if no Simple Weapon Proficiency nor Martial Weapon Proficiency.
:SetMeleeMain
1,{If~{Param~Class,%Class%}=Bard?|TempM=Bard|{If~{Dice~1d2}=1?[FindMelee]/[SetMeleeMain2]}
_     /{If~{Param~Class,%Class%}=Druid?|TempM=Druid|{If~{Dice~1d2}=1?[FindMelee]/[SetMeleeMain2]}
_     /{If~{Param~Class,%Class%}=Monk?|TempM=Monk|{If~{Dice~1d2}=1?[FindMelee]/[SetMeleeMain2]}
_     /{If~{Param~Class,%Class%}=Rogue?|TempM=Rogue|{If~{Dice~1d2}=1?[FindMelee]/[SetMeleeMain2]}
_     /{If~{Param~Class,%Class%}=Wizard?|TempM=Wizard|{If~{Dice~1d2}=1?[FindMelee]/[SetMeleeMain2]}
_     /[SetMeleeMain2]
_}}}}}

# All classes pass through here in case they choose Single/Martial Weapon Proficiency
;SetMeleeMain2
20,{If~{Find~1,Simple Weapon Proficiency,%FeatsAll%}!=0?|TempM=SimpleWeapons|[FindMelee]
_/{If~{Find~1,Martial Weapon Proficiency,%FeatsAll%}!=0?|TempM=MartialWeapons|[FindMelee]
_/[SetMeleeMain]}}
80,{If~{Find~1,Martial Weapon Proficiency,%FeatsAll%}!=0?|TempM=MartialWeapons|[FindMelee]
_/{If~{Find~1,Simple Weapon Proficiency,%FeatsAll%}!=0?|TempM=SimpleWeapons|[FindMelee]
_/[SetMeleeMain]}}

### UNUSED - REMOVE ### XXX
;SetMeleeMain2OLD
20,{If~{Find~1,Simple Weapon Proficiency,%FeatsAll%}!=0?|TempM=SimpleWeapons|[FindMelee]/[SetMeleeMain]}
80,{If~{Find~1,Martial Weapon Proficiency,%FeatsAll%}!=0?|TempM=MartialWeapons|[FindMelee]/[SetMeleeMain]}

# --------
# RENDU ICI ___ XXX ___ Error ___ mme si WealthWPN=5 erreur
:FindMelee
1,{If~%TestLog%=1?{Log~E:\log.txt,----- FindMelee ----- TempM= %TempM%}}
_{If~{Used~Equipment.%TempM%Melee,0}=1?{Unlock~Equipment.%TempM%Melee,1}}
#_{If~%ExtraMeleeWpn%=Yes?{Reset~Equipment.%TempM%Melee}
#_/{If~{Used~Equipment.%TempM%Melee,0}=1?{Unlock~Equipment.%TempM%Melee,1}}
#_}
#####_<hr>%TempM%<hr>
#_|TempString=[Equipment.%TempM%Melee_Output(,,,%Size%)]|
_{If~%WealthWPN%<1?
_   {If~%ShieldFlag%>0?|TempM=Club|
_   /{If~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?|TempM=Staff|
_   /|TempM=Club|}}
_}
_{If~%GodFavoredWeapon%=No?|TempString=[Equipment.%TempM%Melee_Output(,,,%Size%,%Version%)]|
_/|TempString=[Equipment.SpecificMelee_Output(,%GodWpnID%,,%Size%,%Version%)]|
_}
_{Split~TempString,"!",Wpn,Cost,Wt,Book,WpnCrit,WpnCrit2,WpnDmg,WpnDmg2,WpnDmgT,WpnDmgT2,WpnRng,WpnSp,MeleeWeaponID,2H,Lt,Note,FTR_WT_M}
_|ExoticWeaponM=%Wpn%||OriginalWpnName=%Wpn%|
### TEST_<br>%Wpn%,%Cost%,%Wt%,%Book%,%WpnCrit%,%WpnCrit2%,%WpnDmg%,%WpnDmg2%,%WpnDmgT%,%WpnDmgT2%,%WpnRng%,%WpnSp%,%MeleeWeaponID%,%2H%,%Lt%,%Note%,%FTR_WT_M%
_{If~%TestLog%=1?{Log~E:\log.txt,----- FindMelee= %Wpn%}}
_[FindMelee2]

# Used by FindMelee and FindMeleeWpnFinesse
:FindMelee2
1,|WpnNumM=0||EQWpnM=0||EQWpnM=[Equipment.MeleeDescription=%MeleeWeaponID%]|
_{If~{Find~1,!,%EQWpnM%}!=0?{Split~EQWpnM,"!",Temp1,WpnNumM}|EQWpnM=%Temp1%|}
###_|TempEQ=%Wt%|[SetEQSizeWeight=%Size%]|Wt=%TempEQ%|
_{If~{And~%WpnNumM%>1,%TestCostWeight%=1}=1?|Wpn& {Color~Red,x%WpnNumM%}|}
_{If~{Find~1,Improvised,%WpnSp%}=0?[SetWeaponMaterial]}
_{If~{Find~1,Improvised,%WpnSp%}=0?{If~%LanceSearch%=Yes?[SetMeleeVerify2]/[SetMeleeVerify]}}

:SetWeaponMaterial
1,|MWAttB=0||MW=0|
# NOMATERIAL : means item can't be made with a special material
_{If~{And~{Find~1,NOMATERIAL,%Note%}=0,%WealthWPN%>={Calc~(%Cost%+200)}}=1?[WeaponMaterial]}
_{If~{Find~1,MW2,%Note%}!=0?|MW=2|}
#####_{If~%PALWpnBonus%=0?[SetWeaponMaterial2]/[SetWeaponMaterialPaladin]}
#####:SetWeaponMaterial2
# 90% to generate a Masterwork Item if enough Wealth (rolled in SetMWOneHead and SetMWTwoHead).
_{If~{And~%MW%=0,%Wpn%!=unarmed strike}=1?{If~{Find~1,Double,%WpnSp%}!=0?[SetMWTwoHead]/[SetMWOneHead]}}
# 90% to generate a Magic Weapon on MW items if enough Wealth; if not, add Masterwork to Wpn.
_|MagicPlussesMelee=0|
####_{If~{And~{Find~1,Double,%WpnSp%}=0,%Wpn%!=unarmed strike}=1?[SetWeaponMagicSingle]/[SetWeaponMagicDouble]}
_{If~%Wpn%!=unarmed strike?{If~{Find~1,Double,%WpnSp%}=0?[SetWeaponMagicSingle]/[SetWeaponMagicDouble]}}

### UNUSED --- DELETE --- Replaces weapon ability and ++ with selected amount
:SetWeaponMaterialPaladin
1,|MagicPlussesMelee=%PALWpnBonus%||MeleeMagicSpecial=%PALWpnPowers%|
_{If~{Length~%MeleeMagicSpecial%}>3?|Wpn=%MeleeMagicSpecial% %Wpn%|}
_{If~%MagicPlussesMelee%>0?|Wpn=+%MagicPlussesMelee% %Wpn%|}

:SetMWOneHead
1,{If~%WealthWPN%>={Calc~(%Cost%+300)}?{If~{Dice~1d10}>1?|MW=1||Cost+300||MWAttB=1|}}

:SetMWTwoHead
1,{If~%WealthWPN%>={Calc~(%Cost%+600)}?{If~{Dice~1d10}>1?|MW=1||Cost+600||MWAttB=1|}}

:SetWeaponMagicDouble
1,{If~%Material%=cold iron?{If~{And~%MW%!=0,%WealthWPN%>={Calc~(%Cost%+6000)}}=1?[VerifyMagicWeapon]/[SetMW]}
_/{If~{And~%MW%!=0,%WealthWPN%>={Calc~(%Cost%+4000)}}=1?[VerifyMagicWeapon]/[SetMW]}
_}

:SetWeaponMagicSingle
1,{If~%Material%=cold iron?{If~{And~%MW%!=0,%WealthWPN%>={Calc~(%Cost%+4000)}}=1?[VerifyMagicWeapon]/[SetMW]}
_/{If~{And~%MW%!=0,%WealthWPN%>={Calc~(%Cost%+2000)}}=1?[VerifyMagicWeapon]/[SetMW]}
_}

:SetMW
1,{If~%MW%=1?{If~%GroupFlag%=1?|Wpn& MW|/|Wpn=masterwork %Wpn%|}}

:VerifyMagicWeapon
1,{If~{Dice~1d10}>1?|MWAttB=0|{Reset~MeleeMagic2}[MeleeMagic]/{If~%MW%=1?{If~%GroupFlag%=1?|Wpn& MW|/|Wpn=masterwork %Wpn%|}}}

:SetMeleeVerify
1,{If~%TestLog%=1?{Log~E:\log.txt,----- SetMelee >>>>> SetMeleeVerify: ShieldFlag= %ShieldFlag%  2H= %2H%  MagicPlussesMelee= %MagicPlussesMelee%  TempMagicPlus= %TempMagicPlus%  LOOK for Two-weapon fighting AND double (%WpnSp%)  WealthWPN=%WealthWPN% (Cost=%Cost%)   WpnNumM=%WpnNumM%}}
_{If~%TestLog%=1?{Log~E:\log.txt,----- SetMelee >>>>> PALWpnPowers= %PALWpnPowers% ({Param~Race,%Race%} {Param~Class,%Class%})}}
_{If~{And~%ShieldFlag%>0,%2H%=Always}=1?[SetMelee]
_   /{If~{And~%MagicPlussesMelee%>=%TempMagicPlus%,%MagicPlussesMelee%!=0}=1?[SetMelee]
_   /{If~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?{If~{And~%2H%=Always,{Find~1,Double,%WpnSp%}=0}=1?[SetMelee]/[SetMeleeVerify2]}
_      /{If~%PALWpnBonus%>0?{If~{And~{Find~1,disruption,%PALWpnPowers%}>0,{Find~1,B,%WpnDmgT%}=0}=1?[SetMelee]
_                                                                                                  /{If~{And~{Find~1,keen,%PALWpnPowers%}>0,{And~{Find~1,S,%WpnDmgT%}=0,{Find~1,P,%WpnDmgT%}=0}=1}=1?[SetMelee]/[SetMeleeVerify2]}}
_      /[SetMeleeVerify2]
_}}}}

:SetMeleeVerify2
1,{If~%WpnNumM%=0?{If~%Cost%<=%WealthWPN%?|WealthWPN-%Cost%||WtTotalCarried+%Wt%|/[SetMelee]}
_   /{If~{Calc~%Cost%*%WpnNumM%}<=%WealthWPN%?|WealthWPN-{Calc~%Cost%*%WpnNumM%}||WtTotalCarried+{Calc~%Wt%*%WpnNumM%}|/[SetMelee]}
_}

# ---------------------------
# Special Material : 4%/Heroic level to have a special material, less for Basic. (if enough wealth).
:WeaponMaterial
1,{If~{Param~Heroic,%Heroic%}=Heroic?{If~{Dice~1d25}<%CharacterLevel%?[WeaponMaterial2][WeaponMaterial3]}/{If~{Dice~1d100}<%CharacterLevel%?[WeaponMaterial2][WeaponMaterial3]}}

;WeaponMaterial2
5,{IIf~{Find~1,Metal,%Note%}!=0?|Material=adamantine||MW=2||Cost+3000||MWAttB=1|:[WeaponMaterial2]}
10,{IIf~{Find~1,Wood,%Note%}!=0?|Material=darkwood||MW=2||Cost={Calc~((10*%Wt%)+%Cost%)}||Wt/2||MWAttB=1|:[WeaponMaterial2]}
10,{IIf~{Find~1,Metal,%Note%}!=0?|Material=cold iron||MW=0||MWAttB=0||Cost*2|:[WeaponMaterial2]}
1,{IIf~{And~{Find~1,Metal,%Note%}!=0,{Find~1,PartMetal,%Note%}=0}=1?|Material=mithral||MW=2||Cost={Calc~((500*%Wt%)+%Cost%)}||Wt/2||MWAttB=1|:[WeaponMaterial2]}
10,{IIf~{Find~1,Metal,%Note%}!=0?|Material=alchemical silver||MW=0||MWAttB=0|[AlcSilverCostMelee][AlcSilverDmgM]:[WeaponMaterial2]}

:WeaponMaterial3
1,|Wpn=%Material% %Wpn%|

:AlcSilverDmgM
1,{IIf~{Or~%WpnDmgT%=P,{Find~1,P/S,%WpnDmgT%}!=0}=1?|DmgModM-1|
_:{If~%WpnDmgT%=S?|DmgModM-1|
_}}
_{IIf~{Or~%WpnDmgT2%=P,{Find~1,P/S,%WpnDmgT2%}!=0}=1?|DmgModM2-1|
_:{IIf~%WpnDmgT2%=S?|DmgModM2-1|
_}}

:AlcSilverCostMelee
1,{IIf~%Lt%=Yes?|Cost+20|
_:{IIf~{And~{Find~1,Double,%WpnSp%}!=0,{Find~1,TwoHeadsMetal,%Note%}!=0}=1?|Cost+180|
_:{IIf~{And~{Find~1,Double,%WpnSp%}!=0,{Find~1,OneHeadMetal,%Note%}!=0}=1?|Cost+90|
_:{IIf~%2H%=Always?|Cost+180|
_:|Cost+90|
_}}}}

# Adamantine (MW): items with metal parts; Ammo +60 gp/missile, Armor L+5000 (DR1/-) M+10000 (DR2/-) H+15000 (DR3/-) Wpn +3000
# Darkwood (MW): all wood items only; 1/2 wt; shield lessen ACP by 2; +10gp/lb of original item
# Cold Iron (not considered MW): items with metal parts; +2000 gp if add magical enhancements on it; x2 cost (+50% for double weapons with one head only)
# Mithral (MW): items made primarly of metal; Armor: one category lighter for MV penalties, -10 percept ASF, -3 ACP, +2 maxdex; 1/2 wt
#               Armor L:+1000 M:+4000 H:+9000 Shield+1000 Other +500/lb (original weight)
# Silver Alchemical (not considered MW): items made primarly of metal; S/P weapon -1 damage
#               Ammo +2gp; Wpn Light +20gp one-handed/one-head double +90, 2-handed or 2 heads of double +180

# -----------------------
:SetMeleeWpnFinesse
1,{If~%TestLog%=1?{Log~E:\log.txt,----- SetMelee >>>>> WpnFinesse}}
_{If~{And~%WeaponChoice%=Melee,{Find~1,Exotic Weapon Proficiency,%FeatsAll%}!=0}=1?[SetMeleeWpnFinesseExotic]
_/{If~%TestLog%=1?{Log~E:\log.txt,----- SetMelee >>>>> WpnFinesse >>>>> NO Exotic Weapon Prof}}
_[SetMeleeWpnFinesse1=%Race%]}

:SetMeleeWpnFinesseExotic
1,{If~%TestLog%=1?{Log~E:\log.txt,----- SetMelee >>>>> WpnFinesse >>>>> With Exotic Weapon Prof}}
_|TempM=ExoticWeapons|[FindMeleeWpnFinesse]

### NEW RACE ###
### NEW SUBRACE ### Weapon Familiarity
# Here, we first look (above in SetMeleeWpnFinesse for the "Exotic W.Prof" feat) if not we come here.
#    We look in the special "racial" weapons found in the race's description to find a weapon finesse weapon they can wield if they have the "Martial Weapons Proficiency" and it will verify in "VerifyXXX" subtable.
#    Finally, a random weapon will be chosen.
# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
# When looking in RACEMeleeWpnFinesse_Output (in Equipment.tab), you need at least one weapon the race can wield with weapon finesse.
:SetMeleeWpnFinesse1
# Human/Dwarf : NO Weapon Finesse racial weapons
1-2,[SetMeleeWpnFinesseMain]
# Elf
3,{If~{Dice~1d3}>1?{If~%Subrace%=Aquatic?|TempM=AquaticElf|/{If~%Subrace%=Desert?|TempM=DesertElf|/|TempM=Elf|}}|TempVerify=Elf||Temp2=1|{While~%Temp2%,[FindMeleeWpnFinesse][Verify%TempVerify%]}/[SetMeleeWpnFinesseMain]}
# Gnome/Half-Elf/Half-Orc/Halfling : NO Weapon Finesse racial weapons
4-6,[SetMeleeWpnFinesseMain]
7,{If~{And~%Subrace%=Jungle,{Dice~1d3}>1}=1?|TempM=HalflingJungle|[FindMeleeWpnFinesse]/[SetMeleeWpnFinesseMain]}
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
8,[SetMeleeWpnFinesseMain]
9-10,{If~{Dice~1d3}>1?|TempM=Drow||TempVerify=Drow||Temp2=1|{While~%Temp2%,[FindMeleeWpnFinesse][Verify%TempVerify%]}/[SetMeleeWpnFinesseMain]}
11-17,[SetMeleeWpnFinesseMain]
18,{If~{Dice~1d4}>1?|TempM=Tengu|[FindMeleeWpnFinesse]/[SetMeleeWpnFinesseMain]}
19,[SetMeleeWpnFinesseMain]
20,{Stop~ERROR SetMeleeWpnFinesse1}

### NEW CLASS ###
# 50% to have the special class weapons.
:SetMeleeWpnFinesseMain
1,{If~{Param~Class,%Class%}=Bard?|TempM=Bard|{If~{Dice~1d2}=1?[FindMeleeWpnFinesse]/[SetMeleeWpnFinesse2]}
_     /{If~{Param~Class,%Class%}=Druid?|TempM=Druid|{If~{Dice~1d2}=1?[FindMeleeWpnFinesse]/[SetMeleeWpnFinesse2]}
_     /{If~{Param~Class,%Class%}=Monk?|TempM=Monk|{If~{Dice~1d2}=1?[FindMeleeWpnFinesse]/[SetMeleeWpnFinesse2]}
_     /{If~{Param~Class,%Class%}=Rogue?|TempM=Rogue|{If~{Dice~1d2}=1?[FindMeleeWpnFinesse]/[SetMeleeWpnFinesse2]}
_     /{If~{Param~Class,%Class%}=Wizard?|TempM=Wizard|{If~{Dice~1d2}=1?[FindMeleeWpnFinesse]/[SetMeleeWpnFinesse2]}
_     /[SetMeleeWpnFinesse2]
_}}}}}

# All classes pass through here in case they choose Single/Martial Weapon Proficiency
# WF = light weapon, elven curve blade, rapier, whip, spiked chain, unarmed +SHIELD PENALTY
;SetMeleeWpnFinesse2
20,{If~{Find~1,Simple Weapon Proficiency,%FeatsAll%}!=0?|TempM=SimpleWeapons|[FindMeleeWpnFinesse]
_     /{If~{Find~1,Martial Weapon Proficiency,%FeatsAll%}!=0?|TempM=MartialWeapons|[FindMeleeWpnFinesse]
_     /[SetMeleeWpnFinesseMain]}
_}
80,{If~{Find~1,Martial Weapon Proficiency,%FeatsAll%}!=0?|TempM=MartialWeapons|[FindMeleeWpnFinesse]
_     /{If~{Find~1,Simple Weapon Proficiency,%FeatsAll%}!=0?|TempM=SimpleWeapons|[FindMeleeWpnFinesse]
_     /[SetMeleeWpnFinesseMain]}
_}

### UNUSED - REMOVE ### XXX
;SetMeleeWpnFinesse2OLD
20,{If~{Find~1,Simple Weapon Proficiency,%FeatsAll%}!=0?|TempM=SimpleWeapons|[FindMeleeWpnFinesse]/[SetMeleeWpnFinesseMain]}
80,{If~{Find~1,Martial Weapon Proficiency,%FeatsAll%}!=0?|TempM=MartialWeapons|[FindMeleeWpnFinesse]/[SetMeleeWpnFinesseMain]}

:FindMeleeWpnFinesse
1,{If~{Used~Equipment.%TempM%MeleeWpnFinesse,0}=1?{Unlock~Equipment.%TempM%MeleeWpnFinesse,1}}
_|TempString=[Equipment.%TempM%MeleeWpnFinesse_Output(,,,%Size%)]|
### TEST everything here seems to work fine
_{Split~TempString,"!",Wpn,Cost,Wt,Book,WpnCrit,WpnCrit2,WpnDmg,WpnDmg2,WpnDmgT,WpnDmgT2,WpnRng,WpnSp,MeleeWeaponID,2H,Lt,Note,FTR_WT_M}
_|OriginalWpnName=%Wpn%|
_{If~%TestLog%=1?{Log~E:\log.txt,----- SetMelee >>>>> WpnFinesse (%OriginalWpnName%) TempM=%TempM%}}
_[FindMelee2]
# Continues on with FindMelee above

# ---------------------------
:MeleeMagic
1,|MeleeMagicSpecial=||MagicPlussesMelee=0|[MeleeMagic2]
_{If~{Length~%MeleeMagicSpecial%}>3?|Wpn=%MeleeMagicSpecial%%Wpn%|}
_{If~%MagicPlussesMelee%>0?|Wpn=+%MagicPlussesMelee% %Wpn%|}
_{If~{And~%MagicPlussesMelee%>0,%Material%=cold iron}=1?|Cost+2000|}

;!MeleeMagic2
1,|MagicPlussesMelee=1||Cost+2000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+2000|}
2,{If~{Find~1,Double,%WpnSp%}=0?
_{If~%WealthWPN%>={Calc~(%Cost%+8000)}?[MeleeMagic2_2]/[MeleeMagic2]}
_/{If~%WealthWPN%>={Calc~(%Cost%+16000)}?[MeleeMagic2_2]/[MeleeMagic2]}
_}
3,{If~{Find~1,Double,%WpnSp%}=0?
_{If~%WealthWPN%>={Calc~(%Cost%+18000)}?[MeleeMagic2_3]/[MeleeMagic2]}
_/{If~%WealthWPN%>={Calc~(%Cost%+36000)}?[MeleeMagic2_3]/[MeleeMagic2]}
_}
4,{If~{Find~1,Double,%WpnSp%}=0?
_{If~%WealthWPN%>={Calc~(%Cost%+32000)}?[MeleeMagic2_4]/[MeleeMagic2]}
_/{If~%WealthWPN%>={Calc~(%Cost%+64000)}?[MeleeMagic2_4]/[MeleeMagic2]}
_}
5,{If~{Find~1,Double,%WpnSp%}=0?
_{If~%WealthWPN%>={Calc~(%Cost%+50000)}?[MeleeMagic2_5]/[MeleeMagic2]}
_/{If~%WealthWPN%>={Calc~(%Cost%+100000)}?[MeleeMagic2_5]/[MeleeMagic2]}
_}
6,{If~{Find~1,Double,%WpnSp%}=0?
_{If~%WealthWPN%>={Calc~(%Cost%+72000)}?[MeleeMagic2_6]/[MeleeMagic2]}
_/{If~%WealthWPN%>={Calc~(%Cost%+122000)}?[MeleeMagic2_6]/[MeleeMagic2]}
_}
7,{If~{Find~1,Double,%WpnSp%}=0?
_{If~%WealthWPN%>={Calc~(%Cost%+98000)}?[MeleeMagic2_7]/[MeleeMagic2]}
_/{If~%WealthWPN%>={Calc~(%Cost%+148000)}?[MeleeMagic2_7]/[MeleeMagic2]}
_}
8,{If~{Find~1,Double,%WpnSp%}=0?
_{If~%WealthWPN%>={Calc~(%Cost%+128000)}?[MeleeMagic2_8]/[MeleeMagic2]}
_/{If~%WealthWPN%>={Calc~(%Cost%+178000)}?[MeleeMagic2_8]/[MeleeMagic2]}
_}
9,{If~{Find~1,Double,%WpnSp%}=0?
_{If~%WealthWPN%>={Calc~(%Cost%+162000)}?[MeleeMagic2_9]/[MeleeMagic2]}
_/{If~%WealthWPN%>={Calc~(%Cost%+212000)}?[MeleeMagic2_9]/[MeleeMagic2]}
_}
10,{If~{Find~1,Double,%WpnSp%}=0?
_{If~%WealthWPN%>={Calc~(%Cost%+200000)}?[MeleeMagic2_10]/[MeleeMagic2]}
_/{If~%WealthWPN%>={Calc~(%Cost%+250000)}?[MeleeMagic2_10]/[MeleeMagic2]}
_}

#2,{If~%WealthWPN%>={Calc~(%Cost%+8000)}?[MeleeMagic2_2]/[MeleeMagic2]}
#3,{If~%WealthWPN%>={Calc~(%Cost%+18000)}?[MeleeMagic2_3]/[MeleeMagic2]}
#4,{If~%WealthWPN%>={Calc~(%Cost%+32000)}?[MeleeMagic2_4]/[MeleeMagic2]}
#5,{If~%WealthWPN%>={Calc~(%Cost%+50000)}?[MeleeMagic2_5]/[MeleeMagic2]}
#6,{If~%WealthWPN%>={Calc~(%Cost%+72000)}?[MeleeMagic2_6]/[MeleeMagic2]}
#7,{If~%WealthWPN%>={Calc~(%Cost%+98000)}?[MeleeMagic2_7]/[MeleeMagic2]}
#8,{If~%WealthWPN%>={Calc~(%Cost%+128000)}?[MeleeMagic2_8]/[MeleeMagic2]}
#9,{If~%WealthWPN%>={Calc~(%Cost%+162000)}?[MeleeMagic2_9]/[MeleeMagic2]}
#10,{If~%WealthWPN%>={Calc~(%Cost%+200000)}?[MeleeMagic2_10]/[MeleeMagic2]}

;MeleeMagic2_2
75,|MagicPlussesMelee=2||Cost+8000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+8000|}
25,|MagicPlussesMelee=1||Cost+8000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+2000|}[MeleeBonus1]

;MeleeMagic2_3
75,|MagicPlussesMelee=3||Cost+18000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+18000|}
15,|MagicPlussesMelee=2||Cost+18000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+8000|}[MeleeBonus1]
10,|MagicPlussesMelee=1||Cost+18000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+2000|}[MeleeBonus2]

;MeleeMagic2_4
75,|MagicPlussesMelee=4||Cost+32000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+32000|}
10,|MagicPlussesMelee=3||Cost+32000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+18000|}[MeleeBonus1]
10,|MagicPlussesMelee=2||Cost+32000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+8000|}[MeleeBonus2]
5,|MagicPlussesMelee=1||Cost+32000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+2000|}[MeleeBonus3]

;MeleeMagic2_5
75,|MagicPlussesMelee=5||Cost+50000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+50000|}
10,|MagicPlussesMelee=4||Cost+50000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+32000|}[MeleeBonus1]
5,|MagicPlussesMelee=3||Cost+50000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+18000|}[MeleeBonus2]
5,|MagicPlussesMelee=2||Cost+50000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+8000|}[MeleeBonus3]
5,|MagicPlussesMelee=1||Cost+50000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+2000|}[MeleeBonus4]

;MeleeMagic2_6
1,|MagicPlussesMelee=5||Cost+72000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+50000|}[MeleeBonus1]
1,|MagicPlussesMelee=4||Cost+72000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+32000|}[MeleeBonus2]
1,|MagicPlussesMelee=3||Cost+72000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+18000|}[MeleeBonus3]
1,|MagicPlussesMelee=2||Cost+72000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+8000|}[MeleeBonus4]
# Vorpal only as +5 ability, modify if adding a new +5 ability
1,{If~{Find~1,S,%WpnDmgT%}!=0?|MagicPlussesMelee=1||Cost+72000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+2000|}[MeleeBonus5]/[MeleeMagic2_6]}

;MeleeMagic2_7
1,|MagicPlussesMelee=5||Cost+98000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+50000|}[MeleeBonus2]
1,|MagicPlussesMelee=4||Cost+98000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+32000|}[MeleeBonus3]
1,|MagicPlussesMelee=3||Cost+98000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+18000|}[MeleeBonus4]
# Vorpal only as +5 ability, modify if adding a new +5 ability
1,{If~{Find~1,S,%WpnDmgT%}!=0?|MagicPlussesMelee=2||Cost+98000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+8000|}[MeleeBonus5]/[MeleeMagic2_7]}

;MeleeMagic2_8
1,|MagicPlussesMelee=5||Cost+128000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+50000|}[MeleeBonus3]
1,|MagicPlussesMelee=4||Cost+128000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+32000|}[MeleeBonus4]
# Vorpal only as +5 ability, modify if adding a new +5 ability
1,{If~{Find~1,S,%WpnDmgT%}!=0?|MagicPlussesMelee=3||Cost+128000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+18000|}[MeleeBonus5]/[MeleeMagic2_8]}

;MeleeMagic2_9
1,|MagicPlussesMelee=5||Cost+162000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+50000|}[MeleeBonus4]
# Vorpal only as +5 ability, modify if adding a new +5 ability
1,{If~{Find~1,S,%WpnDmgT%}!=0?|MagicPlussesMelee=4||Cost+162000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+32000|}[MeleeBonus5]/[MeleeMagic2_9]}

;MeleeMagic2_10
# Vorpal only as +5 ability, modify if adding a new +5 ability
1,{If~{Find~1,S,%WpnDmgT%}!=0?|MagicPlussesMelee=5||Cost+200000|{If~{Find~1,Double,%WpnSp%}!=0?|Cost+50000|}[MeleeBonus5]/[MeleeMagic2]}

:!MeleeBonus1
1,|MeleeMagicSpecial&bane ([~MeleeBonus1Bane]) |
2,|MeleeMagicSpecial&defending |
3,|MeleeMagicSpecial&flaming |{Lockout~MeleeBonus1,4,5}{Lockout~MeleeBonus2,6-8}
4,|MeleeMagicSpecial&frost |{Lockout~MeleeBonus1,3,5}{Lockout~MeleeBonus2,6-8}
5,|MeleeMagicSpecial&shock |{Lockout~MeleeBonus1,3-4}{Lockout~MeleeBonus2,6-8}
6,|MeleeMagicSpecial&ghost touch |
7,{If~{Or~{Find~1,P,%WpnDmgT%}!=0,{Find~1,S,%WpnDmgT%}!=0}=1?{If~{Find~1,Improved Critical,%FeatsAll%}=0?|MeleeMagicSpecial&keen |/{If~{And~{Find~1,Improved Critical,%FeatsAll%}!=0,%WeaponChoice%=Range}=1?|MeleeMagicSpecial&keen |/[MeleeBonus1]}}/[MeleeBonus1]}
8,{If~{Param~Class,%Class%}=Monk?|MeleeMagicSpecial&ki focus |/[MeleeBonus1]}
9,|MeleeMagicSpecial&merciful |
10,|MeleeMagicSpecial&mighty cleaving |
11,|MeleeMagicSpecial&spell storing |
12,|MeleeMagicSpecial&throwing |
13,|MeleeMagicSpecial&thundering |
14,|MeleeMagicSpecial&vicious |

:MeleeBonus1Bane
1-5,Aberrations
6-9,Animals
10-16,Constructs
17-22,Dragons
23-27,Fey
28-60,Humanoids ([MeleeBonus1Humanoid])
61-65,Magical Beasts
66-70,Monstrous Humanoids
71-72,Oozes
73-98,Outsiders ([MeleeBonus1Outsider])
99-100,Vermins

;MeleeBonus1Humanoid
1,aquatic
1,dwarf
1,elf
1,giant
1,goblinoid
1,gnoll
1,gnome
1,halfling
1,human
1,orc
1,reptilian

;MeleeBonus1Outsider
1,air
1,chaotic
1,earth
1,evil
1,fire
1,good
1,lawful
1,native
1,water

:!MeleeBonus2
1,{If~{Find~1,C,%AL%}=0?|MeleeMagicSpecial&anarchic |{Lockout~MeleeBonus2,2-4}/[MeleeBonus2]}
2,{If~{Find~1,L,%AL%}=0?|MeleeMagicSpecial&axiomatic |{Lockout~MeleeBonus2,1,3-4}/[MeleeBonus2]}
3,{If~{Find~1,E,%AL%}=0?|MeleeMagicSpecial&holy |{Lockout~MeleeBonus2,1-2,4}/[MeleeBonus2]}
4,{If~{Find~1,G,%AL%}=0?|MeleeMagicSpecial&unholy |{Lockout~MeleeBonus2,1-3}/[MeleeBonus2]}
5,{If~{Find~1,B,%WpnDmgT%}!=0?|MeleeMagicSpecial&disruption |/[MeleeBonus2]}
6,|MeleeMagicSpecial&flaming burst |{Lockout~MeleeBonus2,7-8}{Lockout~MeleeBonus1,3-5}
7,|MeleeMagicSpecial&icy burst |{Lockout~MeleeBonus2,6,8}{Lockout~MeleeBonus1,3-5}
8,|MeleeMagicSpecial&shocking burst |{Lockout~MeleeBonus2,6-7}{Lockout~MeleeBonus1,3-5}
9,|MeleeMagicSpecial&wounding |

;MeleeBonus3
1,|MeleeMagicSpecial&speed ||SpeedM=1|

;MeleeBonus4
1,|MeleeMagicSpecial&brilliant energy |
1,|MeleeMagicSpecial&dancing |

# Vorpal is the only as +5 ability, modify above (see "Vorpal") if adding a new +5 ability
;MeleeBonus5
1,|MeleeMagicSpecial&vorpal |

#-----------------------
# Verifies if the melee weapon chosen is a monk weapon
:VerifyMonkMeleeWeapon
1,{If~{Find~1,Monk,%WpnSp%}!=0?|MonkMeleeWpn=Yes|/|MonkMeleeWpn=No|}

:VerifyMonkRangedWeapon
1,{If~{Find~1,Monk,%WpnSpR%}!=0?|MonkRangedWpn=Yes|/|MonkRangedWpn=No|}

#-----------------------
# Wpn,Cost,Wt,Book,WpnCrit,WpnCrit2,WpnDmg,WpnDmg2,WpnDmgT,WpnDmgT2,WpnRng,WpnSp,MeleeWeaponID,2H,Lt
# Cost,Wt,Book,MeleeWeaponID
:PrintMelee
# Weapon Finesse: Str or Dex on attack roll.
1,{If~{Find~1,Weapon Finesse,%FeatsAll%}!=0?|DisplaySTRDEX=%DEXBonus%|/|DisplaySTRDEX=%STRBonus%|}
# 2WCP : Two-Weapon Combat Primary hand / 2WCOff : Two-Weapon Combat off-hand
_|2WCP=0||2WCOff=0|
_ {If~%ArmorShieldPenalty%<0?{Color~Red,[BABorFlurry]}/[BABorFlurry]} melee 
# Double Weapon or Two-Weapon Fighting
_{IIf~{Find~1,Double,%WpnSp%}!=0?([Equipment.SZ%WpnDmg%=%Size%][WSDM_2h] %WpnDmgT%; |TempCrit1=Melee||TempCrit2=%WpnCrit%|[WpnCritMelee],{If~%MagicPlussesMelee%=0? %Wpn%/ {Italic~%Wpn%}}{If~%WpnRng%!=0? (%WpnRng%')}) 
_:{IIf~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?([Equipment.SZ%WpnDmg%=%Size%][WSDM] %WpnDmgT%; |TempCrit1=Melee||TempCrit2=%WpnCrit%|[WpnCritMelee],{If~%MagicPlussesMelee%=0? %Wpn%/ {Italic~%Wpn%}}{If~%WpnRng%!=0? (%WpnRng%')}) }
_}
_[TwoWpnChoice]
#
_{If~%2WCP%!=0?<i>(/(}
_[Equipment.SZ%WpnDmg%=%Size%][WSDM] %WpnDmgT%
# Off-Hand / Look if need Shield Bash here or not.
_{If~{And~%ShieldFlag%!=2,%WpnDmg2%!=0}=1? and [Equipment.SZ%WpnDmg2%=%Size%][WHSDM2] %WpnDmgT2% [FontB=2](Off-hand)[FontE]
_/{If~{And~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0,%ShieldFlag%!=2}=1? and [Equipment.SZ%WpnDmg%=%Size%][WHSDM] %WpnDmgT% [FontB=2](Off-hand)[FontE]
_/{If~%ShieldFlag%=2? and [ShieldBashDMG][Equipment.SZ%TempNumber%=%Size%][WHSDMShBash] {If~%SpikeSh%=1?P/B} [FontB=2](Off-hand {If~%ShieldBash%=1?light/heavy} shield)[FontE]
_}}}
#
_; |TempCrit1=Melee||TempCrit2=%WpnCrit%|[WpnCritMelee]{If~{And~%WpnCrit2%!=0,%WpnCrit2%!=%WpnCrit%}=1? (|TempCrit1=Melee||TempCrit2=%WpnCrit2%|[WpnCritMelee] [FontB=2]Off-hand[FontE])}
_,</i>{If~%MagicPlussesMelee%=0? %Wpn%/ {Italic~%Wpn%}}
_{If~%MonkFlurryMelee%=Yes? flurry of blows}
_{If~%WpnRng%!=0? (%WpnRng%')}
_)
_{If~{Length~%WpnSp%}>2? ({Bold~Special:} {If~%WpnSp%=ThreeNoSTR?3 attack rolls/%WpnSp%})}
_{If~{And~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0,{Find~1,Double,%WpnSp%}=0}=1?[FontB=1][Tab]{Color~Grey,(You can substitute another weapon instead of the {Bold~{If~%ShieldBash%=0?%Wpn%/{If~%ShieldBash%=1?light/heavy} shield}} for two-weapon fighting)}[FontE]}
_|2WCP=0||2WCOff=0||MonkFlurry=No|
_{If~{Param~Class,%Class%}=Monk?|MonkFlurry=Yes|[PrintFlurry]|MonkFlurry=No|}
_{If~%TestLog%=1?{Log~E:\log.txt,----- END of Print Melee -----}}
_{If~%Show%=1? [Melee_Special]}

:BABorFlurry
1,|MonkFlurryMelee=No|
_{If~{And~{Param~Class,%Class%}=Monk,%MonkMeleeWpn%=Yes}=1?[BABDisplayFlurry=%CharacterLevel%]|MonkFlurryMelee=Yes|/[BABDisplay=%BAB%]}

:TwoWpnChoice
1,{If~{Find~1,Double,%WpnSp%}!=0?[TwoWpnChoiceGen]
_/{If~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?[TwoWpnChoiceGen]
_/{If~%ShieldFlag%=2?[TwoWpnChoiceGen]
_}}}

:TwoWpnChoiceGen
1,|2WCP=-6||2WCOff=-10|
_{If~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?|2WCP+2||2WCOff+6|}
# Light Weapon
_{If~{And~%ShieldFlag%=2,%ShieldBash%=1}=1?|2WCP+2||2WCOff+2|
_   /{If~{And~{Find~1,Double,%WpnSp%}!=0,%ShieldFlag%!=2}=1?|2WCP+2||2WCOff+2|
_      /{If~{And~%Lt%=Yes,%ShieldFlag%!=2}=1?|2WCP+2||2WCOff+2|
_}}}
_ {Bold~or} 
_{Italic~{If~%ArmorShieldPenalty%<0?{Color~Red,[BABDisplay=%BAB%]}/[BABDisplay=%BAB%]} and 
_{IIf~%ShieldFlag%=2?{If~{Find~1,Martial Weapon Proficiency,%FeatsAll%}=0?|2WCOff-4|}
_|Temp1={Calc~%BAB1%+{If~%ShieldBash%=1?%DisplaySTRDEX%/%STRBonus%}+%2WCOff%+%Haste%+%ShieldMaster%+%ArmorShieldPenalty%}|{If~%Temp1%>=0?+/ }{If~%ArmorShieldPenalty%<0?{Color~Red,%Temp1%}/{Color~Black,%Temp1%}}
_{If~{Find~1,Improved Two-Weapon Fighting,%FeatsAll%}!=0?[Slash]|Temp1={Calc~%BAB1%+{If~%ShieldBash%=1?%DisplaySTRDEX%/%STRBonus%}+%2WCOff%+%Haste%+%ShieldMaster%+%ArmorShieldPenalty%-5}|{If~%Temp1%>=0?+/ }{If~%ArmorShieldPenalty%<0?{Color~Red,%Temp1%}/{Color~Black,%Temp1%}}}
_{If~{Find~1,Greater Two-Weapon Fighting,%FeatsAll%}!=0?[Slash]|Temp1={Calc~%BAB1%+{If~%ShieldBash%=1?%DisplaySTRDEX%/%STRBonus%}+%2WCOff%+%Haste%+%ShieldMaster%+%ArmorShieldPenalty%-10}|{If~%Temp1%>=0?+/ }{If~%ArmorShieldPenalty%<0?{Color~Red,%Temp1%}/{Color~Black,%Temp1%}}}
#
_:
_|Temp1={Calc~%BAB1%+%DisplaySTRDEX%+%2WCOff%+%WpnFocM%+%Haste%+%MWAttB%+%MagicPlussesMelee%+%ArmorShieldPenalty%}|{If~%Temp1%>=0?+/ }%Temp1%
_{If~{Find~1,Improved Two-Weapon Fighting,%FeatsAll%}!=0?[Slash]|Temp1={Calc~%BAB1%+%DisplaySTRDEX%+%2WCOff%+%WpnFocM%+%Haste%+%MWAttB%+%MagicPlussesMelee%-5}|{If~%Temp1%>=0?+/ }%Temp1%}
_{If~{Find~1,Greater Two-Weapon Fighting,%FeatsAll%}!=0?[Slash]|Temp1={Calc~%BAB1%+%DisplaySTRDEX%+%2WCOff%+%WpnFocM%+%Haste%+%MWAttB%+%MagicPlussesMelee%-10}|{If~%Temp1%>=0?+/ }%Temp1%}
_}
_ [FontB=2](Off-hand)[FontE] 
_}
### TEST ###
####_<br>2WCP=%2WCP% 2WCOff=%2WCOff% Temp1=%Temp1% BAB=%BAB% STR-DEX=%DisplaySTRDEX% WpnFocM=%WpnFocM%<br>

:TwoWpnChoiceUnarmed
1,{If~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?[TwoWpnChoiceGenUnarmed]}

:TwoWpnChoiceGenUnarmed
1,|2WCP=-6||2WCOff=-10|
_{If~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?|2WCP+2||2WCOff+6|}
# Light Weapon
_|2WCP+2||2WCOff+2|
_ {Bold~or} 
_{Italic~
_{If~%ArmorShieldPenalty%<0?{Color~Red,[BABDisplayUnarmed=%BAB%]}/[BABDisplayUnarmed=%BAB%]} and 
_|Temp1={Calc~%BAB1%+%DisplaySTRDEX%+%2WCOff%+%WpnFocUnarmed%+%Haste%+%ArmorShieldPenalty%+%FTR_WT_M_BonusU%}|
_{If~%Temp1%>=0?+/ }%Temp1%
_{If~{Find~1,Improved Two-Weapon Fighting,%FeatsAll%}!=0?[Slash]|Temp1={Calc~%BAB1%+%DisplaySTRDEX%+%2WCOff%+%WpnFocUnarmed%+%Haste%+%ArmorShieldPenalty%+%FTR_WT_M_BonusU%-5}|{If~%Temp1%>=0?+/ }%Temp1%}
_{If~{Find~1,Greater Two-Weapon Fighting,%FeatsAll%}!=0?[Slash]|Temp1={Calc~%BAB1%+%DisplaySTRDEX%+%2WCOff%+%WpnFocUnarmed%+%Haste%+%ArmorShieldPenalty%+%FTR_WT_M_BonusU%-10}|{If~%Temp1%>=0?+/ }%Temp1%}
_}
_ [FontB=2](Off-hand)[FontE] 

:PrintFlurry
# Weapon Finesse: Str or Dex on attack roll.
1,{If~{Find~1,Weapon Finesse,%FeatsAll%}!=0?|DisplaySTRDEX=%DEXBonus%|/|DisplaySTRDEX=%STRBonus%|}
# 2WCP : Two-Weapon Combat Primary hand / 2WCOff : Two-Weapon Combat off-hand
_|2WCP=0||2WCOff=0|
_ {Bold~or}
_ {If~%ArmorShieldPenalty%<0?{Color~Red,[BABDisplayFlurryNoWpn=%CharacterLevel%]}/[BABDisplayFlurryNoWpn=%CharacterLevel%]} melee 
_([MonkSpecialAbilitiesUnarmed=%CharacterLevel%]|Temp1=%STRBonus%|{If~{And~{Param~Race,%Race%}=Kobold,%Subrace%=Sigrun's Clan}=1?|Temp1+2|}{If~%Temp1%!=0?{If~%Temp1%>=1?+}%Temp1%} B
_; |TempCrit1=Melee||TempCrit2=20/x2|[WpnCritMelee], flurry of blows{If~%MonkKiPoolDR%!=ERROR?[FontB=2]; {Color~DarkCyan,%MonkKiPoolDR%}[FontE]})
_|2WCP=0||2WCOff=0|

#-------------
:Melee_Special
# Class
1,{If~%Wpn%=unarmed strike?|UnarmedType=No|}
_[FontB=2]
_{Color~Peru,
_{IIf~%HatredGobRep%>0? +%HatredGobRep% attack rolls vs goblinoids/reptilians;}
_{IIf~%HatredOrcGob%>0? +%HatredOrcGob% attack rolls vs orcs/goblinoids;}
_{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Elder}=1? +1 attack rolls vs elves;
_   :{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Exiled}=1? +1 attack rolls vs dragons;
_   :{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Arctic}=1? +1 attack rolls vs goblinoids/reptilians;
_   :{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Desert}=1? +1 attack rolls vs dragons/reptilians;
_   :{IIf~{And~{Param~Race,%Race%}=Elf,%Subrace%=Savage}=1? +1 attack rolls vs dwarves/orcs;
_   :{IIf~{And~{Param~Race,%Race%}=Gnome,%Subrace%=Aquatic}=1? +1 attack rolls vs goblinoids;
_   :{IIf~{And~{Param~Race,%Race%}=Gnome,%Subrace%=Forest}=1? +1 attack rolls vs goblins/kobolds/orcs/reptilians;
_   :{IIf~{Param~Race,%Race%}=Svirfneblin? +1 attack roll vs dwarves/reptilians
_   :{IIf~{Param~Race,%Race%}=Tengu? +Bite 1d3+STR (primary or secondary)
_   :{IIf~{And~{Param~Race,%Race%}=Half Orc,%Subrace%=Feral}=1? +Bite attack 1d4+STR (primary or secondary);
_   :{IIf~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Avenging}=1? +1 to confirm critical vs larger opponents;
_   :{IIf~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Slave Born}=1? +1 flanking;
_}}}}}}}}}}}}
_}
_{Color~DarkCyan,
_{If~{And~{Param~Class,%Class%}=Fighter,%CharacterLevel%>=20}=1?{If~{And~%WeaponChoice%=Melee,%UnarmedType%=No}=1? *Treat=Critical{If~%Wpn%!=unarmed strike? +Can't be disarmed};}}
_{If~{And~%PALAuraFaith%=Yes,%UnarmedType%!=unarmed attack}=1? +good vs DR;}
_{If~{And~%PALWpnBonus%>0,%UnarmedType%=No}=1? can add {Italic~+%PALWpnBonus%{If~{Length~%PALWpnPowers%}>2? %PALWpnPowers%}};}
_{If~{And~%FavoredEnemies%>0,%UnarmedType%!=unarmed attack}=1? +Favored Enemies;}
_{If~%Sneak%!=0? +{If~%ROGMasterStrike%=Yes?Master }Sneak Attack (%Sneak%d6 = [SneakAttackReroll=%Sneak%]);}
_{If~{And~%WIZUniHand%=Yes,%UnarmedType%=No}=1? +Hand of the Apprentice;}
_}
### NEW FEATS ### Melee_Special
_{Color~Green,
_{If~{Find~1,Power Attack,%FeatsAll%}!=0? +PA;}
_{If~{Find~1,Fire Hand,%FeatsAll%}!=0? +1 dmg if Fire}
_{If~{Find~1,Elven Blood Bane Elf,%FeatsAll%}!=0? +1 melee vs other elves;}
_{If~{Find~1,Dog Killer Horse Hunter,%FeatsAll%}!=0? +1 attack[Slash]damage vs dog-like[Slash]horse-like;}
_{If~{Find~1,Critical Focus,%FeatsAll%}!=0? +4 confirm crit;}
_{If~{Find~1,Bullying Blow,%FeatsAll%}!=0? +Bullying Blow (-2);}
_{If~{Find~1,Close Quarter Fighting,%FeatsAll%}!=0? +Close Quarter Fighting;}
_{If~{And~{Find~1,Close Order Combat,%FeatsAll%}!=0,%UnarmedType%=No}=1? +Close Order Combat;}
_{If~{And~{Find~1,Dazzling Display,%FeatsAll%}!=0,%WeaponChoice%=Melee}=1?{If~%UnarmedType%=No? +Dazzling Display;}}
_{If~{And~{Find~1,Deadly Stroke,%FeatsAll%}!=0,%WeaponChoice%=Melee}=1?{If~%UnarmedType%=No? +Deadly Stroke;}}
_{If~{Find~1,Desperate Swing,%FeatsAll%}!=0? +Desperate Swing;}
_{If~{Find~1,Fiendish Blood,%FeatsAll%}!=0? +Fiendish Blood;}
_{If~{Find~1,Great Cleave,%FeatsAll%}!=0? +Great Cleave (-2 AC);/{If~{Find~1,Cleave,%FeatsAll%}!=0? +Cleave (-2 AC);}}
_{If~{Find~1,Hard-headed,%FeatsAll%}!=0? +Hard-headed}
_{If~{And~{Find~1,Pack Attack,%FeatsAll%}!=0,%UnarmedType%=No}=1? +Pack Attack;}
_{If~{And~{Find~1,Quick Draw,%FeatsAll%}!=0,%UnarmedType%=No}=1? +Quick Draw;}
_{IIf~{Find~1,Reckless Offense,%FeatsAll%}!=0? +Reckless Offense;}
_{If~{And~{Find~1,Shatter Defenses,%FeatsAll%}!=0,%WeaponChoice%=Melee}=1?{If~%UnarmedType%=No? +Shatter Defenses;}}
_{If~{And~{Find~1,Spirited Charge,%FeatsAll%}!=0,%UnarmedType%=No}=1? +Spirited Charge;}
_{If~{Find~1,Strike Back,%FeatsAll%}!=0? +Strike Back;}
_{If~{Find~1,Tail Terror,%FeatsAll%}!=0? +Tail Terror;}
_{If~{And~{Find~1,Two-Weapon Rend,%FeatsAll%}!=0,%UnarmedType%=No}=1? +Two-Wpn Rend 1d10{IIf~%STRBonus%>0?+{Trunc~{Calc~%STRBonus%*3/2}}:{If~%STRBonus%<0?%STRBonus%}} ([~RollRend]));}
_{If~{And~{Find~1,Whirlwind Attack,%FeatsAll%}!=0,%UnarmedType%=No}=1? +Whirlwind Attack;}
#
_{If~%UnarmedType%=No?
_{If~{Find~1,Greater Vital Strike,%FeatsAll%}!=0? +Gr. Vital Strike;
_/{If~{Find~1,Improved Vital Strike,%FeatsAll%}!=0? +Imp. Vital Strike;
_/{If~{Find~1,Vital Strike,%FeatsAll%}!=0? +Vital Strike;}}
_}
_}
#
_}
# Magic Items
_{Color~Orange,
_{If~%GhostShroud%=Yes? can affect incorporeal;}
_}
# Spells
_{Color~Purple,
_{If~%Haste%>0? Haste;}
_}[FontE]

:RollRend
1,{Calc~{Dice~1d10}+{IIf~%STRBonus%>0?{Trunc~{Calc~%STRBonus%*3/2}}:{If~%STRBonus%<0?%STRBonus%/0}}}

:SneakAttackReroll
1,[~Dice Reroll.1d6]
2,[~Dice Reroll.2d6]
3,[~Dice Reroll.3d6]
4,[~Dice Reroll.4d6]
5,[~Dice Reroll.5d6]
6,[~Dice Reroll.6d6]
7,[~Dice Reroll.7d6]
8,[~Dice Reroll.8d6]
9,[~Dice Reroll.9d6]
10,[~Dice Reroll.10d6]
11,[~Dice Reroll.11d6]
12,[~Dice Reroll.12d6]
13,[~Dice Reroll.13d6]
14,[~Dice Reroll.14d6]
15,[~Dice Reroll.15d6]
16,[~Dice Reroll.16d6]
17,[~Dice Reroll.17d6]
18,[~Dice Reroll.18d6]
19,[~Dice Reroll.19d6]
20,[~Dice Reroll.20d6]

# --------------------------------------------------------------------------
# WEAPONS: Damage + Crits

# Weapon Strength Damage Modifier
:WSDM
1,{If~%2H%=Always?{If~{Find~1,Double,%WpnSp%}!=0?[WSDM_1hMelee]/[WSDM_2h]}
_                /{If~%2H%=No?[WSDM_1hMelee]
_                            /{If~%2H%=Yes?{If~%ShieldFlag%>0?[WSDM_1hMelee]
_                                         /{If~%STR%>=14?{If~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?[WSDM_1hMelee]/[WSDM_2h]}/[WSDM_1hMelee]}
_                                          }
_}}}

:WSDM_1hMelee
1,{If~%WpnSpThreeNoSTR%=1?|Temp1=0|/|Temp1=%STRBonus%|}|Temp1+%WpnSpeAdd%|{If~%Temp1%!=0?{If~%Temp1%>=1?+}%Temp1%}{If~%WeaponChoice%=Melee?[WpnSpe]}

:WSDM_Unarmed
1,|Temp1=%STRBonus%||Temp1+%WpnSpeUnarmed%|
_{If~{And~{Param~Race,%Race%}=Kobold,%Subrace%=Sigrun's Clan}=1?|Temp1+2|}
_{If~%Temp1%!=0?{If~%Temp1%>=1?+}%Temp1%}{If~%WpnSpeUnarmed%>0?[WpnSpe]}

:WSDM_1hRange
1,|Temp1=%STRBonus%||Temp1+%WpnSpeAdd%|{If~%Temp1%!=0?{If~%Temp1%>=1?+}%Temp1%}{If~%WeaponChoice%=Range?[WpnSpe]}

:WSDM_2h
1,|Temp1=%STRBonus%|
_{IIf~%Temp1%!=0?{IIf~%Temp1%>=1?|Temp1={Trunc~{Calc~%Temp1%*3/2}}||Temp1+%WpnSpeAdd%|+%Temp1%:|Temp1+%WpnSpeAdd%|{If~%Temp1%!=0?{If~%Temp1%>=1?+}%Temp1%}}
_               :|Temp1+%WpnSpeAdd%|{If~%Temp1%!=0?{If~%Temp1%>=1?+}%Temp1%}
_}
_{If~%WeaponChoice%=Melee?[WpnSpe]} (2h)

# Weapon HALF Strength Damage Modifier
:WHSDM
1,|Temp1=%STRBonus%|{If~%Temp1%>0?{If~{Find~1,Double Slice,%FeatsAll%}=0?|Temp1\2|}}|Temp1+%WpnSpeAdd%|{If~%Temp1%!=0?{If~%Temp1%>=1?+}%Temp1%}{If~%WeaponChoice%=Melee?[WpnSpe]}

:WHSDMShBash
1,|Temp1=%STRBonus%|{If~%Temp1%>0?{If~{Find~1,Double Slice,%FeatsAll%}=0?|Temp1\2|}}|Temp1+%ShieldMaster%|{If~%Temp1%!=0?{If~%Temp1%>=1?+}%Temp1%}

:WHSDM2
1,|Temp1=%STRBonus%|{If~%Temp1%>0?{If~{Find~1,Double Slice,%FeatsAll%}=0?|Temp1\2|}}|Temp1+%WpnSpeAdd2%|{If~%Temp1%!=0?{If~%Temp1%>=1?+}%Temp1%}{If~%WeaponChoice%=Melee?[WpnSpe]}

:BowD
1,|Temp1=%STRBonus%|{If~%Temp1%>=0?|Temp1=0|}|Temp1+%WpnSpeAdd%|{If~%Temp1%!=0?{If~%Temp1%>=1?+}%Temp1%}{If~%WeaponChoice%=Range?[WpnSpe]}

:WpnSpe
1,{If~{And~%Show%=1,{Find~1,Weapon Specialization,%FeatsAll%}!=0}=1?[FontB=1]{Color~Green, {If~{Find~1,Greater Weapon Specialization,%FeatsAll%}!=0?G}WS}[FontE]}

:ShieldBashDMG
1,{If~%ShieldBash%=1?|TempNumber=1|/|TempNumber=2|}
_{If~%SpikeSh%=1?|TempNumber+1|}
_{If~{Find~1,bashing,%ShieldMagicSpecial%}!=0?|TempNumber+2|}
_[ShieldBashDMG2=%TempNumber%]

:ShieldBashDMG2
1,|TempNumber=1d3|
2,|TempNumber=1d4|
3,|TempNumber=1d6|
4,|TempNumber=1d8|
5,|TempNumber=2d6|
6,|TempNumber=3d6|
7,|TempNumber=4d6|
8,|TempNumber=5d6|
9-100,|TempNumber=6d6|

# MonkFlurry
:WpnCritMelee
#1,{If~{And~%WeaponChoice%=Melee,{Find~1,Improved Critical,%FeatsAll%}!=0}=1?[WpnCritMelee2]
1,{If~{And~%WeaponChoice%=Melee,{Find~1,Improved Critical,%FeatsAll%}!=0}=1?{If~%UnarmedType%=No?[WpnCritMelee2]/%TempCrit2%}
_/{If~{And~%UnarmedType%=No,{Find~1,keen,%MeleeMagicSpecial%}!=0}=1?[WpnCritMelee2]
# No Keen, not Improved Critical, look for Fighter 20th
_/{If~{And~{Param~Class,%Class%}=Fighter,%CharacterLevel%>=20}=1?{If~{And~%WeaponChoice%=Melee,%UnarmedType%=No}=1?[WpnCritFTRWpnMasteryImproved]{Color~DarkCyan,%TempCrit2%}/%TempCrit2%}
# No modifications to Crit
_/%TempCrit2%
_}}}

:WpnCritMelee2
# Not a Monk
1,{If~{Param~Class,%Class%}!=Monk?[WpnCritImprovedMelee]
# Monk
_/{If~%MonkFlurry%=No?
# Monk melee weapon (MonkFlurry=No)
_{If~{Find~1,keen,%MeleeMagicSpecial%}!=0?[WpnCritImprovedMelee]/%TempCrit2%}
# Monk Flurry of blows (MonkFlurry=Yes)
_/{If~{And~%WeaponChoice%=Melee,{Find~1,Improved Critical,%FeatsAll%}!=0}=1?[WpnCritImprovedMelee]/%TempCrit2%}
_}}

:WpnCritRange
1,{If~{Or~{And~%WeaponChoice%=Range,{Find~1,Improved Critical,%FeatsAll%}!=0}=1,{Find~1,keen,%RangeMagicSpecial%}!=0}=1?
_[WpnCritImprovedRange]
_/
_{If~{And~{Param~Class,%Class%}=Fighter,%CharacterLevel%>=20}=1?{If~%WeaponChoice%=Range?[WpnCritFTRWpnMasteryImproved]{Color~DarkCyan,%TempCrit2%}/%TempCrit2%}/%TempCrit2%}
_}

:WpnCritImprovedMelee
1,{If~{Find~1,18,%TempCrit2%}!=0?|TempCrit2={Replace~18,15,%TempCrit2%}|
_   /{If~{Find~1,19,%TempCrit2%}!=0?|TempCrit2={Replace~19,17,%TempCrit2%}|
_   /|TempCrit2={Replace~20,19-20,%TempCrit2%}|
_}}
_{If~{And~{Param~Class,%Class%}=Fighter,%CharacterLevel%>=20}=1?{If~%WeaponChoice%=Melee?[WpnCritFTRWpnMasteryImproved]}}
_{If~{Find~1,keen,%MeleeMagicSpecial%}!=0?{Color~Orange,%TempCrit2%}/{Color~Green,%TempCrit2%}}

:WpnCritImprovedRange
1,{If~{Find~1,18,%TempCrit2%}!=0?|TempCrit2={Replace~18,15,%TempCrit2%}|
_   /{If~{Find~1,19,%TempCrit2%}!=0?|TempCrit2={Replace~19,17,%TempCrit2%}|
_   /|TempCrit2={Replace~20,19-20,%TempCrit2%}|
_}}
_{If~{And~{Param~Class,%Class%}=Fighter,%CharacterLevel%>=20}=1?{If~%WeaponChoice%=Range?[WpnCritFTRWpnMasteryImproved]}}
_{If~{Find~1,keen,%RangeMagicSpecial%}!=0?{Color~Orange,%TempCrit2%}/{Color~Green,%TempCrit2%}}

:WpnCritFTRWpnMasteryImproved
1,{If~{Find~1,x5,%TempCrit2%}!=0?|TempCrit2={Replace~x5,x6*,%TempCrit2%}|
_   /{If~{Find~1,x4,%TempCrit2%}!=0?|TempCrit2={Replace~x4,x5*,%TempCrit2%}|
_   /{If~{Find~1,x3,%TempCrit2%}!=0?|TempCrit2={Replace~x3,x4*,%TempCrit2%}|
_   /|TempCrit2={Replace~x2,x3*,%TempCrit2%}|
_}}}

# ---------------------------------------------------------------------------
# UNARMED

:ShowUnarmed
1,{If~%ArmorGauntlet%=Yes?|UnarmedType=armor gauntlet|[PrintUnarmed]
_/|UnarmedType=unarmed strike|[PrintUnarmed]
_}
2,
3,{If~{And~{Param~Class,%Class%}=Monk,%CharacterLevel%<=4}=1?|UnarmedType=unarmed strike|[PrintUnarmed]
_/{If~{Find~1,Improved Unarmed Strike,%FeatsAll%}!=0?|UnarmedType=unarmed strike|[PrintUnarmed]
_/{If~%ArmorGauntlet%=Yes?|UnarmedType=armor gauntlet|[PrintUnarmed]
_/{If~%FTR_WT_M_BonusU%>0?|UnarmedType=unarmed strike|[PrintUnarmed]
_}}}}

:PrintUnarmed
1,{If~%Wpn%=unarmed strike?|UnarmedType=No|
_/{If~%Wpn%=spiked gauntlet?|UnarmedType=No|
_/{If~%Wpn%=gauntlet?|UnarmedType=No|
_/{If~{And~{Param~Class,%Class%}=Monk,%CharacterLevel%>4}=1?|UnarmedType=No|
_/[PrintUnarmed2]
_}}}}

:PrintUnarmed2
1,; {Bold~Full Atk Unarmed:} 
_{If~{Find~1,Weapon Finesse,%FeatsAll%}!=0?|DisplaySTRDEX=%DEXBonus%|/|DisplaySTRDEX=%STRBonus%|}
# 2WCP : Two-Weapon Combat Primary hand / 2WCOff : Two-Weapon Combat off-hand
_|2WCP=0||2WCOff=0|
_ {If~%ArmorShieldPenalty%<0?{Color~Red,[BABDisplayUnarmed=%BAB%]}/[BABDisplayUnarmed=%BAB%]} melee 
# Two-Weapon Fighting
_{IIf~{Find~1,Two-Weapon Fighting,%FeatsAll%}!=0?
_(
_{If~{Param~Class,%Class%}=Monk?[MonkSpecialAbilitiesUnarmed=%CharacterLevel%]/[Equipment.SZ1d3=%Size%]}[WSDM_Unarmed] B; |TempCrit1=Melee||TempCrit2=20/x2|[WpnCritMelee],
_{If~{And~%UnarmedType%=unarmed strike,{And~{Param~Class,%Class%}=Monk,%CharacterLevel%>=4}=1}=1? {Italic~%UnarmedType%}
_/ %UnarmedType%
_}
_) }
_[TwoWpnChoiceUnarmed]
_{If~%2WCP%!=0?<i>(/(}
_{If~{Param~Class,%Class%}=Monk?[MonkSpecialAbilitiesUnarmed=%CharacterLevel%]/[Equipment.SZ1d3=%Size%]}[WSDM_Unarmed] B
_; |TempCrit1=Melee||TempCrit2=20/x2|[WpnCritMelee]{If~{And~%WpnCrit2%!=0,%WpnCrit2%!=%WpnCrit%}=1? (|TempCrit1=Melee||TempCrit2=20/x2|[WpnCritMelee] [FontB=2]Off-hand[FontE])}
_,</i>
_{If~{And~%UnarmedType%=unarmed strike,{And~{Param~Class,%Class%}=Monk,%CharacterLevel%>=4}=1}=1? {Italic~%UnarmedType%}
_/ %UnarmedType%
_}
_)
_|2WCP=0||2WCOff=0||MonkFlurry=No|
_{If~%Show%=1? [Melee_Special]}

# ---------------------------------------------------------------------------
# WEAPONS: Range

:SetRange
1,|Manyshot=0||DmgModR=0||Material=0||MaterialAmmo=0||GodFavoredWeapon=No|
#### TEST
###_{If~%RapidReloadNotEnoughWealthFlag%=SkipRapidReload?<hr>{Color~Orange,RapidReloadNotEnoughWealthFlag=SkipRapidReload}<hr>}
_{If~%RapidReloadNotEnoughWealthFlag%!=SkipRapidReload?|RapidReloadNotEnoughWealthFlag=DoNothing|}
_{If~%TestLog%=1?{Log~E:\log.txt,----- SetWeapons >>>>> SetRange}}
_{If~{And~{Param~Class,%Class%}=Cleric,%GodWpnT%=Range}=1?{If~{Dice~1d100}<=60?|GodFavoredWeapon=Yes|}
_}
_{If~{Find~1,Manyshot,%FeatsAll%}!=0?|Manyshot=1|[SetRangeRapidShot]
_   /{If~{Find~1,Rapid Shot,%FeatsAll%}!=0?[SetRangeRapidShot]
_   /{If~{And~{Find~1,Rapid Reload,%FeatsAll%}!=0,{Find~1,Quick Draw,%FeatsAll%}!=0}=1?{If~{And~{Dice~1d10}=1,%RapidReloadNotEnoughWealthFlag%!=SkipRapidReload}=1?[SetRangeRapidReload]/[SetRangeQuickDraw]}
_   /{If~{And~{Find~1,Rapid Reload,%FeatsAll%}!=0,%RapidReloadNotEnoughWealthFlag%!=SkipRapidReload}=1?[SetRangeRapidReload]
_   /{If~{Find~1,Quick Draw,%FeatsAll%}!=0?[SetRangeQuickDraw]
# Exotic Weapon Proficiency
_   /{If~{And~%WeaponChoice%=Range,{Find~1,Exotic Weapon Proficiency,%FeatsAll%}!=0}=1?|TempR=ExoticWeapons|[FindRange]
# halfling Sling Staff (both M + R)
_   /{If~%MeleeWeaponID%=57?|WpnR=%Wpn%||CostR=0||WtR=0||BookR=0||WpnDmgR=1d8||WpnDmgTR=B||WpnCritR=20/x3||WpnDmgR2=0||WpnDmgTR2=0||WpnCritR2=0||WpnRngR=80||WpnSpR=0||RangeWeaponID=22||2HR=Yes||LtR=0||FTR_WT_R=GN|
_    {If~%Material%!=0?|Note& NOMATERIAL|}{If~%MW%=2?|Note& MW2|}{If~{And~%AncestralWeapon%=1,%WpnFocR%<1}=1?|WpnFocR=1|}
# Throwing Axe
_   /{If~%MeleeWeaponID%=12?|WpnR=%Wpn%||CostR=0||WtR=0||BookR=0||WpnDmgR=%WpnDmg%||WpnDmgTR=%WpnDmgT%||WpnCritR=%WpnCrit%||WpnDmgR2=%WpnDmg2%||WpnDmgTR2=%WpnDmgT2%||WpnCritR2=%WpnCrit2%||WpnRngR=%WpnRng%||WpnSpR=%WpnSp%||RangeWeaponID=9||2HR=%2H%||LtR=%Lt%||FTR_WT_R=AN|
_    {If~%Material%!=0?|Note& NOMATERIAL|}{If~%MW%=2?|Note& MW2|}
# Light Hammer
_   /{If~{And~%MeleeWeaponID%=13,{Dice~1d2}=1}=1?|WpnR=%Wpn%||CostR=0||WtR=0||BookR=0||WpnDmgR=%WpnDmg%||WpnDmgTR=%WpnDmgT%||WpnCritR=%WpnCrit%||WpnDmgR2=%WpnDmg2%||WpnDmgTR2=%WpnDmgT2%||WpnCritR2=%WpnCrit2%||WpnRngR=%WpnRng%||WpnSpR=%WpnSp%||RangeWeaponID=27||2HR=%2H%||LtR=%Lt%||FTR_WT_R=GN|
_    {If~%Material%!=0?|Note& NOMATERIAL|}{If~%MW%=2?|Note& MW2|}
# Trident
_   /{If~{And~%MeleeWeaponID%=26,{Dice~1d2}=1}=1?|WpnR=%Wpn%||CostR=0||WtR=0||BookR=0||WpnDmgR=%WpnDmg%||WpnDmgTR=%WpnDmgT%||WpnCritR=%WpnCrit%||WpnDmgR2=%WpnDmg2%||WpnDmgTR2=%WpnDmgT2%||WpnCritR2=%WpnCrit2%||WpnRngR=%WpnRng%||WpnSpR=%WpnSp%||RangeWeaponID=26||2HR=%2H%||LtR=%Lt%||FTR_WT_R=KN|
_    {If~%Material%!=0?|Note& NOMATERIAL|}{If~%MW%=2?|Note& MW2|}
# Starknife
_   /{If~{And~%MeleeWeaponID%=54,{Dice~1d2}=1}=1?|WpnR=%Wpn%||CostR=0||WtR=0||BookR=0||WpnDmgR=%WpnDmg%||WpnDmgTR=%WpnDmgT%||WpnCritR=%WpnCrit%||WpnDmgR2=%WpnDmg2%||WpnDmgTR2=%WpnDmgT2%||WpnCritR2=%WpnCrit2%||WpnRngR=%WpnRng%||WpnSpR=%WpnSp%||RangeWeaponID=25||2HR=%2H%||LtR=%Lt%||FTR_WT_R=CN|
_    {If~%Material%!=0?|Note& NOMATERIAL|}{If~%MW%=2?|Note& MW2|}
_   /[SetRangeMain=%Race%]
_}}}}}}}}}}}
_[SetRangeWt_WpnNumR]
_[SetWeaponMaterialRange]
_[SetRangeVerify]
### TEST ###
_{If~%TestCostWeight%=1?|TestTableNote= %CostR%gp %WtR%lb||WpnR& [TestTable]|}

### NEW CLASS ### NEW RACE ###
# Also look under "Rapid Shot" in "Pathfinder Feats" if another race or class has access to a bow.
:SetRangeRapidShot
1,{If~{And~{Find~1,Rapid Reload,%FeatsAll%}!=0,{Find~1,Quick Draw,%FeatsAll%}!=0}=1?{If~{And~{Dice~1d2}=1,%RapidReloadNotEnoughWealthFlag%!=SkipRapidReload}=1?[SetRangeRapidReload]/[SetRangeQuickDraw]}
_     /{If~{And~{Find~1,Rapid Reload,%FeatsAll%}!=0,%RapidReloadNotEnoughWealthFlag%!=SkipRapidReload}=1?[SetRangeRapidReload]
_     /{If~{And~{Find~1,Quick Draw,%FeatsAll%}!=0,%Manyshot%=0}=1?[SetRangeQuickDraw]
_     /{If~{Param~Race,%Race%}=Elf?|TempR=Elf|[FindRange]
_     /{If~{Param~Class,%Class%}=Rogue?|TempR=Shortbow|[FindRange]
_     /{If~%ManyShot%=1?|TempR=RealBows|[FindRange]
_     /|TempR=MartialWeaponsRS|[FindRange]
_}}}}}}

# ExoticFlag because there is only one Weapon that fits this category (hand crossbow) and it's expensive (100 gp)
# XXX REMOVE
#:SetRangeRapidReloadOLD
#1,{If~{Find~1,hand crossbow,%ProficientWeapons%}!=0?|TempR=LightHandCrossbow|[FindRange]/|TempR=LightCrossbow|[FindRange]}

:SetRangeRapidReload
1,{If~{And~%ExoticFlag%=0,{Find~1,Exotic Weapon Proficiency,%FeatsAll%}!=0}=1?|TempR=ExoticRapidReload||ExoticFlag=1|[FindRange]
_/{If~{Find~1,hand crossbow,%ProficientWeapons%}!=0?|TempR=LightHandCrossbow|[FindRange]/|RapidReloadNotEnoughWealthFlag=Verify||TempR=LightCrossbow|[FindRange]}
_}

# XXX REMOVE
#:SetRangeQuickDrawOLD
#1,{If~{And~{Find~1,Simple Weapon Proficiency}!=0,{Find~1,Martial Weapon Proficiency}!=0}=1?{If~{Dice~1d5}=1?[SetRangeQuickDrawSimple]/[SetRangeQuickDrawMartial]}
#_   /{If~{Find~1,Martial Weapon Proficiency}!=0?[SetRangeQuickDrawMartial]
#_   /{If~{Find~1,Simple Weapon Proficiency}!=0?[SetRangeQuickDrawSimple]
#_}}}

:SetRangeQuickDraw
1,{If~{Find~1,Exotic Weapon Proficiency,%FeatsAll%}!=0?[SetRangeQuickDrawExotic]
_   /{If~{And~{Find~1,Simple Weapon Proficiency}!=0,{Find~1,Martial Weapon Proficiency}!=0}=1?{If~{Dice~1d5}=1?[SetRangeQuickDrawSimple]/[SetRangeQuickDrawMartial]}
_   /{If~{Find~1,Martial Weapon Proficiency}!=0?[SetRangeQuickDrawMartial]
_   /{If~{Find~1,Simple Weapon Proficiency}!=0?[SetRangeQuickDrawSimple]
_}}}}

:SetRangeQuickDrawSimple
1,|TempR=SimpleWeaponsQD|[FindRange]

:SetRangeQuickDrawMartial
1,|TempR=MartialWeaponsQD|[FindRange]

:SetRangeQuickDrawExotic
1,|TempR=ExoticQD|[FindRange]

:SetSling
1,|TempR=Sling|[FindRange]

### TEST ###
#WpnR,CostR,WtR,BookR,WpnCritR,WpnCritR2,WpnDmgR,WpnDmgR2,WpnDmgTR,WpnDmgTR2,WpnRngR,WpnSpR,RangeWeaponID,2HR,LtR
#[SetRangeMain=%Race%]

#------------
# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
### NEW RACE ###
### NEW SUBRACE ### Weapon Familiarity
:SetRangeMain
# Human/Dwarf : NO Range racial weapons
1-2,[SetRangeMain2]
# Elf
3,{If~{Dice~1d3}>1?{If~%Subrace%=Aquatic?|TempR=AquaticElf|/{If~%Subrace%=Desert?|TempR=ShortbowElf|/{If~%Subrace%=Jungle?|TempR=ShortbowElf|/|TempR=Elf|}}}[FindRange]/[SetRangeMain2]}
# Gnome/Half-Elf/Half-Orc : NO Range racial weapons
4-6,[SetRangeMain2]
# Halfling
7,{If~{And~%Subrace%=Jungle,{Dice~1d3}>1}=1?|TempR=HalflingJungle|[FindRange]
_/{If~{And~{Dice~1d6}=1,{Find~1,Martial Weapon Proficiency,%FeatsAll%}!=0}=1?|TempR=Halfling|[FindRange]
_/[SetRangeMain2]
_}}
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
8,[SetRangeMain2]
9-10,{If~{Dice~1d3}>1?|TempR=Drow|[FindRange]/[SetRangeMain2]}
11-19,[SetRangeMain2]
20,{Stop~ERROR SetRangeMain}

### NEW CLASS ###
:SetRangeMain2
1,{If~{Param~Class,%Class%}=Bard?|TempR=Bard|{If~{Dice~1d2}=1?[FindRange]/[SetRange2]}
_     /{If~{Param~Class,%Class%}=Druid?|TempR=Druid|{If~{Dice~1d2}=1?[FindRange]/[SetRange2]}
_     /{If~{Param~Class,%Class%}=Monk?|TempR=Monk|{If~{Dice~1d2}=1?[FindRange]/[SetRange2]}
_     /{If~{Param~Class,%Class%}=Rogue?|TempR=Rogue|{If~{Dice~1d2}=1?[FindRange]/[SetRange2]}
_     /{If~{Param~Class,%Class%}=Wizard?|TempR=Wizard|{If~{Dice~1d2}=1?{If~%WealthWPN%>=2?[FindRange]/[FindRangeRock]}/[SetRange2]}
_     /[SetRange2]
_}}}}}
### TEST ###
#_<br>(%WpnR%, %CostR% gp, %WtR% lbs, %BookR%, %WpnDmgR% %WpnDmgTR% %WpnCritR%, %WpnDmgR2% %WpnDmgTR2% %WpnCritR2%, %WpnRngR%', %WpnSpR%, ID=%RangeWeaponID%, %2HR%, %LtR%)<br>

# All classes pass through here in case they choose Single/Martial Weapon Proficiency
;SetRange2
20,{If~{Find~1,Simple Weapon Proficiency,%FeatsAll%}!=0?|TempR=SimpleWeapons|[FindRange]
_/{If~{Find~1,Martial Weapon Proficiency,%FeatsAll%}!=0?|TempR=MartialWeapons|[FindRange]
_/[SetRangeMain2]}}
80,{If~{Find~1,Martial Weapon Proficiency,%FeatsAll%}!=0?|TempR=MartialWeapons|[FindRange]
_/{If~{Find~1,Simple Weapon Proficiency,%FeatsAll%}!=0?|TempR=SimpleWeapons|[FindRange]
_/[SetRangeMain2]}}

:FindRange
1,{If~{Used~Equipment.%TempR%Range,0}=1?{Unlock~Equipment.%TempR%Range,1}}
#_|TempString=[Equipment.%TempR%Range_Output(,,,%Size%)]|
_{If~%TestLog%=1?{Log~E:\log.txt,----- FindRange ----- TempR= %TempR%}}
_{If~%GodFavoredWeapon%=No?|TempString=[Equipment.%TempR%Range_Output(,,,%Size%)]|
_/|TempString=[Equipment.SpecificRange_Output(,%GodWpnID%,,%Size%)]|
_}
_{Split~TempString,"!",WpnR,CostR,WtR,BookR,WpnCritR,WpnCritR2,WpnDmgR,WpnDmgR2,WpnDmgTR,WpnDmgTR2,WpnRngR,WpnSpR,RangeWeaponID,2HR,LtR,Note,FTR_WT_R}
_|ExoticWeaponR=%WpnR%||OriginalWpnRName=%WpnR%|
_{If~%TestLog%=1?{Log~E:\log.txt,----- FindRange= %WpnR%}}

:FindRangeRock
1,|WpnR=%Wpn%||CostR=0||WtR=0||BookR=1||WpnDmgR=1d3||WpnDmgTR=B||WpnCritR=20/x2||WpnDmgR2=0||WpnDmgTR2=0||WpnCritR2=0||WpnRngR=10||WpnSpR=Improvised||RangeWeaponID=30||2HR=No||LtR=Yes||FTR_WT_R=N||Note=NOMATERIAL Thrown|
_|OriginalWpnRName=%WpnR%|

#------------------
:SetRangeWt_WpnNumR
1,|WpnNumR=0||EQWpnR=0||EQWpnR=[Equipment.RangeWeaponDescription=%RangeWeaponID%]|
_{If~{Find~1,!,%EQWpnR%}!=0?{Split~EQWpnR,"!",Temp1,WpnNumR}|EQWpnR=%Temp1%|}
_{If~%TestLog%=1?{Log~E:\log.txt,----- SetRangeWt_WpnNumR ----- EQWpnR=%EQWpnR%     WpnNumR=%WpnNumR%}}
###_|TempEQ=%WtR%|[SetEQSizeWeight=%Size%]|WtR=%TempEQ%|
_[Ammo]

:Ammo
1,|TempEQ=0||AmmoWt=0|
_{If~{Find~1,repeating crossbow,%WpnR%}!=0?|TempEQ+2|
_/{If~{Find~1,crossbow,%WpnR%}!=0?|TempEQ+1|
_/{If~{Find~1,arrow,%EQWpnR%}!=0?|TempEQ+1|
_/{If~{Find~1,bolt,%EQWpnR%}!=0?|TempEQ+0.5|
_/{If~{And~{Find~1,bullets,%EQWpnR%}!=0,{Find~1,pouch,%WpnR%}!=0}=1?|TempEQ+4|
_/{If~{And~{Find~1,stones,%EQWpnR%}!=0,{Find~1,pouch,%WpnR%}!=0}=1?|TempEQ+3|
_/{If~{Find~1,bullets,%EQWpnR%}!=0?|TempEQ+2|
_/{If~{Find~1,stones,%EQWpnR%}!=0?|TempEQ+1.5|
_}}}}}}}}
_{If~{Find~1,quiver,%EQWpnR%}!=0?|TempEQ+2|
_/{If~{Find~1,box,%EQWpnR%}!=0?|TempEQ+2|
_}}
_|AmmoWt=%TempEQ%|

#--------------
:SetRangeVerify
1,{If~%TestLog%=1?{Log~E:\log.txt,----- FindRange ----- SetRangeVerify : WpnNumR=%WpnNumR%   AmmoWt=%AmmoWt%   CostR=%CostR%   WealthWPN=%WealthWPN%}}
_{If~{Or~%WpnNumR%=0,%AmmoWt%>0}=1?{If~%CostR%<=%WealthWPN%?|WealthWPN-%CostR%||WtTotalCarried+%WtR%|[AmmoWt]/{If~%RapidReloadNotEnoughWealthFlag%=Verify?|RapidReloadNotEnoughWealthFlag=SkipRapidReload|}[SetRange]}
_     /{If~{Calc~%CostR%*%WpnNumR%}<=%WealthWPN%?|WealthWPN-{Calc~%CostR%*%WpnNumR%}||WtTotalCarried+{Calc~%WtR%*%WpnNumR%}|[AmmoWt]/[SetRange]}
_}

:AmmoWt
1,{If~%AmmoWt%>0?|TempEQ=%AmmoWt%|[SetEQSizeWeight=%Size%]|WtTotalCarried+%TempEQ%|}
_{If~{And~%AmmoWt%>0,%TestAmmo%=1}=1?|TestTableNote=%AmmoWt%lb||EQWpnR& [TestTable]|}

#-----------------
:SetWeaponMaterialRange
1,|MWAttBR=0||MW=0|
# NOMATERIAL : means item can't be made with a special material
_{If~{And~{Find~1,NOMATERIAL,%Note%}=0,%WealthWPN%>={Calc~(%CostR%+200)}}=1?[WeaponMaterialRange]}
_{If~{Find~1,MW2,%Note%}!=0?|MW=2|}
# 90% to generate a Masterwork Item if enough Wealth (rolled in SetMWOneHead and SetMWTwoHead).
_{If~%MW%=0?[SetMWRange]}
# 90% to generate a Magic Weapon on MW items if enough Wealth; if not, add Masterwork to WpnR.
_|MagicPlussesRange=0|
_[SetWeaponMagicRange]

:SetMWRange
1,{If~%WealthWPN%>={Calc~(%CostR%+300)}?{If~{Dice~1d10}>1?|MW=1||CostR+300||MWAttBR=1|}}

:SetWeaponMagicRange
1,{If~%Material%=cold iron?{If~{And~%MW%!=0,%WealthWPN%>={Calc~(%CostR%+4000)}}=1?[VerifyMagicWeaponRange]/[SetMWRange2]}
_/{If~{And~%MW%!=0,%WealthWPN%>={Calc~(%CostR%+2000)}}=1?[VerifyMagicWeaponRange]/[SetMWRange2]}}

:SetMWRange2
1,{If~%MW%=1?{If~%GroupFlag%=1?|WpnR& MW|/|WpnR=masterwork %WpnR%|}}

:VerifyMagicWeaponRange
1,{If~{Dice~1d10}>1?|MWAttBR=0|{Reset~RangeMagic2}[RangeMagic]/[SetMWRange2]}
#1,[SetMWRange2]

# ---------------------------
# Special Material : 4%/Heroic level to have a special material, less for Basic. (if enough wealth).
:WeaponMaterialRange
1,{If~{Param~Heroic,%Heroic%}=Heroic?{If~{Dice~1d25}<%CharacterLevel%?[WeaponMaterialRange2][WeaponMaterialRange3]}/{If~{Dice~1d100}<%CharacterLevel%?[WeaponMaterialRange2][WeaponMaterialRange3]}}

;WeaponMaterialRange2
5,{If~{And~%AmmoWt%>0,{Find~1,stones,%WpnR%}=0}=1?|MaterialAmmo=adamantine||MW=2||MWAttBR=1||CostR={Calc~((60*%WpnNumR%)+%CostR%)}|
_/{If~{Find~1,Metal,%Note%}!=0?|Material=adamantine||MW=2||CostR+3000||MWAttBR=1|
_/[WeaponMaterialRange2]
_}}
10,{IIf~{Find~1,Wood,%Note%}!=0?|Material=darkwood||MW=2||CostR={Calc~((10*%WtR%)+%CostR%)}||WtR/2||MWAttBR=1|
_:[WeaponMaterialRange2]}
10,{If~{And~%AmmoWt%>0,{Find~1,stones,%WpnR%}=0}=1?|MaterialAmmo=cold iron||MW=0||MWAttBR=0||CostR*2|
_/{If~{Find~1,Metal,%Note%}!=0?|Material=cold iron||MW=0||MWAttBR=0||CostR*2|
_/[WeaponMaterialRange2]
_}}
1,{IIf~{And~%AmmoWt%>0,{Find~1,stones,%WpnR%}=0}=1?|MaterialAmmo=mithral||MW=2||MWAttBR=0||CostR+500||AmmoWt/2|
_:{IIf~{And~{Find~1,Metal,%Note%}!=0,{Find~1,PartMetal,%Note%}=0}=1?|Material=mithral||MW=2||CostR={Calc~((500*%WtR%)+%CostR%)}||WtR/2||MWAttBR=1|
_:[WeaponMaterialRange2]
_}}
10,{IIf~{And~%AmmoWt%>0,{Find~1,stones,%WpnR%}=0}=1?|MaterialAmmo=alchemical silver||MW=0||MWAttBR=0||CostR={Calc~((2*%WpnNumR%)+%CostR%)}|[AlcSilverDmgR]
_:{IIf~{Find~1,Metal,%Note%}!=0?|Material=alchemical silver||MW=0||MWAttBR=0|[AlcSilverCostRange][AlcSilverDmgR]
_:[WeaponMaterialRange2]
_}}

:WeaponMaterialRange3
1,{If~%Material%!=0?|WpnR=%Material% %WpnR%|}
_{If~%MaterialAmmo%!=0?|WpnR=%WpnR% (%MaterialAmmo% ammo)|}

:AlcSilverDmgR
1,{IIf~{Or~%WpnDmgTR%=P,{Find~1,P/S,%WpnDmgTR%}!=0}=1?|DmgModR-1|
_:{If~%WpnDmgTR%=S?|DmgModR-1|
_}}

:AlcSilverCostRange
1,{IIf~%Lt%=Yes?|CostR+20|:|CostR+90|}

# Adamantine (MW): items with metal parts; Ammo +60 gp/missile, Armor L+5000 (DR1/-) M+10000 (DR2/-) H+15000 (DR3/-) Wpn +3000
# Darkwood (MW): all wood items only; 1/2 wt; shield lessen ACP by 2; +10gp/lb of original item
# Cold Iron (not considered MW): items with metal parts; +2000 gp if add magical enhancements on it; x2 cost (+50% for double weapons with one head only)
# Mithral (MW): items made primarly of metal; Armor: one category lighter for MV penalties, -10 percept ASF, -3 ACP, +2 maxdex; 1/2 wt
#               Armor L:+1000 M:+4000 H:+9000 Shield+1000 Other +500/lb (original weight)
# Silver Alchemical (not considered MW): items made primarly of metal; S/P weapon -1 damage
#               Ammo +2gp; Wpn Light +20gp one-handed/one-head double +90, 2-handed or 2 heads of double +180

# ---------------------------
:RangeMagic
1,|RangeMagicSpecial=||MagicPlussesRange=0|[RangeMagic2]
_{If~{Length~%RangeMagicSpecial%}>3?|WpnR=%RangeMagicSpecial%%WpnR%|}
_{If~%MagicPlussesRange%>0?|WpnR=+%MagicPlussesRange% %WpnR%|}
_{If~{And~%MagicPlussesRange%>0,%Material%=cold iron}=1?|CostR+2000|}

;!RangeMagic2
1,|MagicPlussesRange=1||CostR+2000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+2000|}
2,{If~{Find~1,Double,%WpnSpR%}=0?
_{If~%WealthWPN%>={Calc~(%CostR%+8000)}?[RangeMagic2_2]/[RangeMagic2]}
_/{If~%WealthWPN%>={Calc~(%CostR%+16000)}?[RangeMagic2_2]/[RangeMagic2]}
_}
3,{If~{Find~1,Double,%WpnSpR%}=0?
_{If~%WealthWPN%>={Calc~(%CostR%+18000)}?[RangeMagic2_3]/[RangeMagic2]}
_/{If~%WealthWPN%>={Calc~(%CostR%+36000)}?[RangeMagic2_3]/[RangeMagic2]}
_}
4,{If~{Find~1,Double,%WpnSpR%}=0?
_{If~%WealthWPN%>={Calc~(%CostR%+32000)}?[RangeMagic2_4]/[RangeMagic2]}
_/{If~%WealthWPN%>={Calc~(%CostR%+64000)}?[RangeMagic2_4]/[RangeMagic2]}
_}
5,{If~{Find~1,Double,%WpnSpR%}=0?
_{If~%WealthWPN%>={Calc~(%CostR%+50000)}?[RangeMagic2_5]/[RangeMagic2]}
_/{If~%WealthWPN%>={Calc~(%CostR%+100000)}?[RangeMagic2_5]/[RangeMagic2]}
_}
6,{If~{Find~1,Double,%WpnSpR%}=0?
_{If~%WealthWPN%>={Calc~(%CostR%+72000)}?[RangeMagic2_6]/[RangeMagic2]}
_/{If~%WealthWPN%>={Calc~(%CostR%+122000)}?[RangeMagic2_6]/[RangeMagic2]}
_}
7,{If~{Find~1,Double,%WpnSpR%}=0?
_{If~%WealthWPN%>={Calc~(%CostR%+98000)}?[RangeMagic2_7]/[RangeMagic2]}
_/{If~%WealthWPN%>={Calc~(%CostR%+148000)}?[RangeMagic2_7]/[RangeMagic2]}
_}
8,{If~{Find~1,Double,%WpnSpR%}=0?
_{If~%WealthWPN%>={Calc~(%CostR%+128000)}?[RangeMagic2_8]/[RangeMagic2]}
_/{If~%WealthWPN%>={Calc~(%CostR%+178000)}?[RangeMagic2_8]/[RangeMagic2]}
_}
9,{If~{Find~1,Double,%WpnSpR%}=0?
_{If~%WealthWPN%>={Calc~(%CostR%+162000)}?[RangeMagic2_9]/[RangeMagic2]}
_/{If~%WealthWPN%>={Calc~(%CostR%+212000)}?[RangeMagic2_9]/[RangeMagic2]}
_}
# No +5 abilities
#10,{If~{Find~1,Double,%WpnSpR%}=0?
#_{If~%WealthWPN%>={Calc~(%CostR%+200000)}?[RangeMagic2_10]/[RangeMagic2]}
#_/{If~%WealthWPN%>={Calc~(%CostR%+250000)}?[RangeMagic2_10]/[RangeMagic2]}
#_}

;RangeMagic2_2
75,|MagicPlussesRange=2||CostR+8000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+8000|}
25,|MagicPlussesRange=1||CostR+8000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+2000|}[RangeBonus1]

;RangeMagic2_3
75,|MagicPlussesRange=3||CostR+18000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+18000|}
15,|MagicPlussesRange=2||CostR+18000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+8000|}[RangeBonus1]
10,|MagicPlussesRange=1||CostR+18000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+2000|}[RangeBonus2]

;RangeMagic2_4
75,|MagicPlussesRange=4||CostR+32000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+32000|}
10,|MagicPlussesRange=3||CostR+32000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+18000|}[RangeBonus1]
10,|MagicPlussesRange=2||CostR+32000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+8000|}[RangeBonus2]
5,|MagicPlussesRange=1||CostR+32000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+2000|}[RangeBonus3]

;RangeMagic2_5
75,|MagicPlussesRange=5||CostR+50000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+50000|}
10,|MagicPlussesRange=4||CostR+50000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+32000|}[RangeBonus1]
5,|MagicPlussesRange=3||CostR+50000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+18000|}[RangeBonus2]
5,|MagicPlussesRange=2||CostR+50000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+8000|}[RangeBonus3]
5,|MagicPlussesRange=1||CostR+50000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+2000|}[RangeBonus4]

;RangeMagic2_6
1,|MagicPlussesRange=5||CostR+72000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+50000|}[RangeBonus1]
1,|MagicPlussesRange=4||CostR+72000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+32000|}[RangeBonus2]
1,|MagicPlussesRange=3||CostR+72000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+18000|}[RangeBonus3]
1,|MagicPlussesRange=2||CostR+72000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+8000|}[RangeBonus4]
#1,{If~{Or~{Find~1,P,%WpnDmgTR%}!=0,{Find~1,S,%WpnDmgTR%}!=0}=1?|MagicPlussesRange=1||CostR+72000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+2000|}[RangeBonus5]/[RangeMagic2_6]}

;RangeMagic2_7
1,|MagicPlussesRange=5||CostR+98000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+50000|}[RangeBonus2]
1,|MagicPlussesRange=4||CostR+98000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+32000|}[RangeBonus3]
1,|MagicPlussesRange=3||CostR+98000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+18000|}[RangeBonus4]
#1,{If~{Or~{Find~1,P,%WpnDmgTR%}!=0,{Find~1,S,%WpnDmgTR%}!=0}=1?|MagicPlussesRange=2||CostR+98000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+8000|}[RangeBonus5]/[RangeMagic2_7]}

;RangeMagic2_8
1,|MagicPlussesRange=5||CostR+128000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+50000|}[RangeBonus3]
1,|MagicPlussesRange=4||CostR+128000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+32000|}[RangeBonus4]
#1,{If~{Or~{Find~1,P,%WpnDmgTR%}!=0,{Find~1,S,%WpnDmgTR%}!=0}=1?|MagicPlussesRange=3||CostR+128000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+18000|}[RangeBonus5]/[RangeMagic2_8]}

;RangeMagic2_9
1,|MagicPlussesRange=5||CostR+162000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+50000|}[RangeBonus4]
#1,{If~{Or~{Find~1,P,%WpnDmgTR%}!=0,{Find~1,S,%WpnDmgTR%}!=0}=1?|MagicPlussesRange=4||CostR+162000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+32000|}[RangeBonus5]/[RangeMagic2_9]}

#;RangeMagic2_10
#1,{If~{Or~{Find~1,P,%WpnDmgTR%}!=0,{Find~1,S,%WpnDmgTR%}!=0}=1?|MagicPlussesRange=5||CostR+200000|{If~{Find~1,Double,%WpnSpR%}!=0?|CostR+50000|}[RangeBonus5]/[RangeMagic2]}

:!RangeBonus1
1,|RangeMagicSpecial&bane ([~MeleeBonus1Bane]) |
2,|RangeMagicSpecial&distance |
3,|RangeMagicSpecial&flaming |{Lockout~RangeBonus1,4,5}{Lockout~RangeBonus2,6-8}
4,|RangeMagicSpecial&frost |{Lockout~RangeBonus1,3,5}{Lockout~RangeBonus2,6-8}
5,|RangeMagicSpecial&shock |{Lockout~RangeBonus1,3-4}{Lockout~RangeBonus2,6-8}
6,{If~%Valminder%=1?|RangeMagicSpecial&ghost touch |/[RangeBonus1]}
7,{If~%Valminder%=1?{If~{Or~{Find~1,P,%WpnDmgTR%}!=0,{Find~1,S,%WpnDmgTR%}!=0}=1?{If~{Find~1,Improved Critical,%FeatsAll%}=0?|RangeMagicSpecial&keen |/{If~%WeaponChoice%=Melee?|RangeMagicSpecial&keen |/[RangeBonus1]}}/[RangeBonus1]}/[RangeBonus1]}
8,|RangeMagicSpecial&merciful |
9,{If~{Find~1,Thrown,%Note%}!=0?|RangeMagicSpecial&returning |/[RangeBonus1]}
10,|RangeMagicSpecial&seeking |
11,|RangeMagicSpecial&thundering |

:!RangeBonus2
1,{If~{Find~1,C,%AL%}=0?|RangeMagicSpecial&anarchic |{Lockout~RangeBonus2,2-4}/[RangeBonus2]}
2,{If~{Find~1,L,%AL%}=0?|RangeMagicSpecial&axiomatic |{Lockout~RangeBonus2,1,3-4}/[RangeBonus2]}
3,{If~{Find~1,E,%AL%}=0?|RangeMagicSpecial&holy |{Lockout~RangeBonus2,1-2,4}/[RangeBonus2]}
4,{If~{Find~1,G,%AL%}=0?|RangeMagicSpecial&unholy |{Lockout~RangeBonus2,1-3}/[RangeBonus2]}
5,{If~{And~%Valminder%=1,{Find~1,B,%WpnDmgTR%}!=0}=1?|RangeMagicSpecial&disruption |/[RangeBonus2]}
6,|RangeMagicSpecial&flaming burst |{Lockout~RangeBonus2,7-8}{Lockout~RangeBonus1,3-5}
7,|RangeMagicSpecial&icy burst |{Lockout~RangeBonus2,6,8}{Lockout~RangeBonus1,3-5}
8,|RangeMagicSpecial&shocking burst |{Lockout~RangeBonus2,6-7}{Lockout~RangeBonus1,3-5}
9,{If~%Valminder%=1?|RangeMagicSpecial&wounding |/[RangeBonus2]}

;RangeBonus3
1,|RangeMagicSpecial&speed ||SpeedR=1|

;RangeBonus4
9,|RangeMagicSpecial&brilliant energy |
1,{If~%Valminder%=1?|RangeMagicSpecial&dancing |/[RangeBonus4]}

#;RangeBonus5
#1,|RangeMagicSpecial&XXX |

#----------
:PrintRange
# WpnR,CostR,WtR,BookR,WpnCritR,WpnCritR2,WpnDmgR,WpnDmgR2,WpnDmgTR,WpnDmgTR2,WpnRngR,WpnSpR,RangeWeaponID,2HR,Lt,Note
#1,[RangeAtt=%RangeWeaponID%]
1,|MonkFlurryRange=No|
_{If~%MonkRangedWpn%=Yes?[BABDisplayFlurryR=%CharacterLevel%]|MonkFlurryRange=Yes| /[RangeAtt=%RangeWeaponID%]}
_(
_{If~%WpnDmgR%!=0?[Equipment.SZ%WpnDmgR%=%Size%][RangeDmg=%RangeWeaponID%]}
_{If~%WpnDmgTR%!=0? %WpnDmgTR%}
_{IIf~%WpnDmgR2%!=0? / [Equipment.SZ%WpnDmgR2%=%Size%][RangeDmg=%RangeWeaponID%] %WpnDmgTR2%}
_{If~{Or~%WpnDmgR%!=0,%WpnDmgR2%!=0}=1?;}
_{If~%WpnCritR%!=0? |TempCrit1=Range||TempCrit2=%WpnCritR%|[WpnCritRange]}
_{IIf~%WpnCritR2%!=0? / |TempCrit1=Range||TempCrit2=%WpnCritR2%|[WpnCritRange]}
_{If~{Or~%WpnCritR%!=0,%WpnCritR2%!=0}=1?, }
_{If~%MagicPlussesRange%=0?%WpnR%/{Italic~%WpnR%}}
_{If~%MonkFlurryRange%=Yes? flurry of blows}
_{If~%WpnRngR%!=0? (%WpnRngR%')}
_{If~{Length~%WpnSpR%}>2? ({Bold~Special:} %WpnSpR%)}
_)
_{If~%Show%=1?[Range_Special]}

:RangeAtt
# Light Crossbow
1,[RWRR]
# dart
2,[RWQD]
# sling
3,[RWONE]
# heavy crossbow
4,[RWONE]
# javelin
5,[RWQD]
# dagger
6,[RWQD]
# throwing dagger
7,[RWQD]
# shortspear
8,[RWONE]
# throwing axe
9,[RWQD]
# shortbow / comp shortbow / longbow / composite longbow
10-13,[RW]
# hand crossbow
14,[RWRR]
# shurikens
15,[RW]
# whip
16,[RWONE]
# light/heavy repeat crossbow
17-18,[RW]
# net
19,[RWONE]
# blowgun
20,[RWONE]
# bola
21,[RWONE]
# halfling sling staff
22,[RWONE]
# club
23,[RWQD]
# spear
24,[RWQD]
# starknife
25,[RWQD]
# trident
26,[RWQD]
# light hammer
27,[RWQD]

:RW
1, [BABDisplayR=%BAB%] ranged 
### TEST ###_<br>(BAB1=%BAB1%, DEX=%DEXBonus%, WpnFocR=%WpnFocR%, Haste=%Haste%, MWAttBR=%MWAttBR%, +=%MagicPlussesRange% -- 2WCP=%2WCP% 2WCOff=%2WCOff%)<br>

:RWQD
1,{If~{Find~1,Quick Draw,%FeatsAll%}!=0?[RW]/[RWONE]}

:RWRR
1,{If~{Find~1,Rapid Reload,%FeatsAll%}!=0?[RW]/[RWONE]}

# See BA1 BA2 BA3 BA4 to add modifiers.
:RWONE
1,|Temp1={Calc~%BAB1%+%DEXBonus%+%WpnFocR%+%Haste%+%MWAttBR%+%MagicPlussesRange%+%FTR_WT_R_Bonus%}|{If~%Temp1%>=0?+}%Temp1%[AddHasteSpeedR] ranged 
### TEST ###_<br>(BAB1=%BAB1%, DEX=%DEXBonus%, WpnFocR=%WpnFocR%, Haste=%Haste%, MWAttBR=%MWAttBR%, +=%MagicPlussesRange%)<br>

:RangeDmg
# Light Crossbow
1,{If~%WpnSpeAdd%!=0?{If~%WpnSpeAdd%>0?+}%WpnSpeAdd%}{If~%WeaponChoice%=Range?[WpnSpe]}
# dart
2,[WSDM_1hRange]
# sling
3,[WSDM_1hRange]
# heavy crossbow
4,{If~%WpnSpeAdd%!=0?{If~%WpnSpeAdd%>0?+}%WpnSpeAdd%}{If~%WeaponChoice%=Range?[WpnSpe]}
# javelin
5,[WSDM_1hRange]
# dagger
6,[WSDM_1hRange]
# throwing dagger
7,[WSDM_1hRange]
# shortspear
8,[WSDM_1hRange]
# throwing axe
9,[WSDM_1hRange]
# shortbow
10,[BowD]
# comp shortbow
11,[WSDM_1hRange]
# longbow
12,[BowD]
# composite longbow
13,[WSDM_1hRange]
# hand crossbow
14,{If~%WpnSpeAdd%!=0?{If~%WpnSpeAdd%>0?+}%WpnSpeAdd%}{If~%WeaponChoice%=Range?[WpnSpe]}
# shurikens
15,[WSDM_1hRange]
# whip
16,[WSDM_1hRange]
# light/heavy repeat crossbow
17-18,{If~%WpnSpeAdd%!=0?{If~%WpnSpeAdd%>0?+}%WpnSpeAdd%}{If~%WeaponChoice%=Range?[WpnSpe]}
# net
19,
# blowgun
20,{If~%WpnSpeAdd%!=0?{If~%WpnSpeAdd%>0?+}%WpnSpeAdd%}{If~%WeaponChoice%=Range?[WpnSpe]}
# bola
21,[WSDM_1hRange]
# halfling sling staff
22,[WSDM_1hRange]
# club
23,[WSDM_1hRange]
# spear
24,[WSDM_1hRange]
# starknife
25,[WSDM_1hRange]
# trident
26,[WSDM_1hRange]
# light hammer
27,[WSDM_1hRange]

:Range_Special
1,[FontB=2]
_{Color~Peru,
_{IIf~%HatredGobRep%>0? +%HatredGobRep% attack rolls vs goblinoids/reptilians}
_{IIf~%HatredOrcGob%>0? +%HatredOrcGob% attack rolls vs orcs/goblinoids}
_{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Elder}=1? +1 attack rolls vs elves;
_   :{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Exiled}=1? +1 attack rolls vs dragons;
_   :{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Arctic}=1? +1 attack rolls vs goblinoids/reptilians;
_   :{IIf~{And~{Param~Race,%Race%}=Elf,%Subrace%=Savage}=1? +1 attack rolls vs dwarves/orcs;
_   :{IIf~{And~{Param~Race,%Race%}=Gnome,%Subrace%=Aquatic}=1? +1 attack rolls vs goblinoids;
_   :{IIf~{And~{Param~Race,%Race%}=Gnome,%Subrace%=Forest}=1? +1 attack rolls vs goblins/kobolds/orcs/reptilians;
_   :{IIf~{Param~Race,%Race%}=Svirfneblin? +1 attack roll vs dwarves/reptilians
_   :{IIf~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Avenging}=1? +1 to confirm critical vs larger opponents;
_}}}}}}}}
_}
_{Color~DarkCyan,
_{If~{And~{Param~Class,%Class%}=Fighter,%CharacterLevel%>=20}=1?{If~%WeaponChoice%=Range? *Treat=Critical +Can't be disarmed}}
_{If~%PALAuraFaith%=Yes? +good vs DR}
_{If~%FavoredEnemies%>0? +Favored Enemies}
_{If~%Sneak%!=0? +{If~%ROGMasterStrike%=Yes?Master }Sneak Attack 30' (%Sneak%d6 = [SneakAttackReroll=%Sneak%])}
_}
### NEW FEATS ### Range_Special
_{Color~Green,
_{If~{Find~1,Deadly Aim,%FeatsAll%}!=0? +DA}
_{If~{Find~1,Point-Blank Shot,%FeatsAll%}!=0? +PBS 30'}
_{If~{Find~1,Elven Blood Bane Elf,%FeatsAll%}!=0? +1 within 30' vs other elves;}
_{If~{Find~1,Dog Killer Horse Hunter,%FeatsAll%}!=0? +1 attack[Slash]damage vs dog-like[Slash]horse-like;}
_{If~{Find~1,Critical Focus,%FeatsAll%}!=0? +4 confirm crit}
_{If~{Find~1,Burn Burn Burn,%FeatsAll%}!=0? +Burn Burn Burn (+1d4 with Fire)}
_{If~{And~{Find~1,Dazzling Display,%FeatsAll%}!=0,%WeaponChoice%=Range}=1? +Dazzling Display}
_{If~{And~{Find~1,Deadly Stroke,%FeatsAll%}!=0,%WeaponChoice%=Range}=1? +Deadly Stroke}
_{If~{Find~1,Elven Accuracy,%FeatsAll%}!=0? +Elven Accuracy}
_{If~{Find~1,Far Shot,%FeatsAll%}!=0? +Far Shot}
_{If~{Find~1,Fiendish Blood,%FeatsAll%}!=0? +Fiendish Blood;}
_{If~{And~{Find~1,Keen Vision,%FeatsAll%}!=0,%WeaponChoice%=Range}=1? +Keen Vision}
_{If~{Find~1,Manyshot,%FeatsAll%}!=0? +Manyshot}
_{If~{Find~1,Mounted Archery,%FeatsAll%}!=0? +Mounted Archery}
_{If~{Find~1,Pinpoint Targeting,%FeatsAll%}!=0? +Pinpoint Targeting}
_{If~{Find~1,Precise Shot,%FeatsAll%}!=0? +Precise Shot}
_{If~{Find~1,Quick Draw,%FeatsAll%}!=0? +Quick Draw}
_{If~{Find~1,Rapid Reload,%FeatsAll%}!=0? +Rapid Reload}
_{If~{Find~1,Rapid Shot,%FeatsAll%}!=0? +Rapid Shot}
_{If~{And~{Find~1,Shatter Defenses,%FeatsAll%}!=0,%WeaponChoice%=Range}=1? +Shatter Defenses}
#
_{If~{Find~1,Greater Vital Strike,%FeatsAll%}!=0? +Gr. Vital Strike
_/{If~{Find~1,Improved Vital Strike,%FeatsAll%}!=0? +Imp. Vital Strike
_/{If~{Find~1,Vital Strike,%FeatsAll%}!=0? +Vital Strike}}
_}
#
_}
# Spells
_{Color~Purple,
_{If~%Haste%>0? Haste}
_}[FontE]

# ---------------------------------------------------------------------------
# Weapon Extra

:SetWpnSp
1,{If~{Or~{Find~1,Brace,%WpnSp%}!=0,{Find~1,Brace,%WpnSpR%}!=0}=1?|WpnSpBrace=1||WpnSpShow=1|}
_{If~{Or~{Find~1,Disarm,%WpnSp%}!=0,{Find~1,Disarm,%WpnSpR%}!=0}=1?|DisarmMod=2||WpnSpDisarm=1||WpnSpShow=1|}
_{If~{Or~{Find~1,Double,%WpnSp%}!=0,{Find~1,Double,%WpnSpR%}!=0}=1?|WpnSpDouble=1||WpnSpShow=1|}
_{If~{Or~{Find~1,Monk,%WpnSp%}!=0,{Find~1,Monk,%WpnSpR%}!=0}=1?{If~{Param~Class,%Class%}=Monk?|WpnSpMonk=1||WpnSpShow=1|}}
_{If~{Or~{Find~1,Nonlethal,%WpnSp%}!=0,{Find~1,Nonlethal,%WpnSpR%}!=0}=1?|WpnSpNonlethal=1||WpnSpShow=1|}
##_{If~{Or~{Find~1,Reach,%WpnSp%}!=0,{Find~1,Reach,%WpnSpR%}!=0}=1?|WpnSpReach=1||WpnSpShow=1|}
_{If~{Or~{Find~1,Trip,%WpnSp%}!=0,{Find~1,Trip,%WpnSpR%}!=0}=1?|WpnSpTrip=1||WpnSpShow=1|}
_{If~{Or~{Find~1,Charge,%WpnSp%}!=0,{Find~1,Charge,%WpnSpR%}!=0}=1?|WpnSpCharge=1||WpnSpShow=1|}
_{If~{Or~{Find~1,ThreeNoSTR,%WpnSp%}!=0,{Find~1,ThreeNoSTR,%WpnSpR%}!=0}=1?|WpnSpThreeNoSTR=1||WpnSpShow=1|}

:PrintWpnSp
1,{Color~Grey,[FontB=2] (
_{If~%WpnSpBrace%=1? Brace: Readied action to set vs a charge for x2 damage.}
_{If~%WpnSpCharge%=1? Lance: x2 damage when used from back of charging mount.}
_{If~%WpnSpDisarm%=1? Disarm: +2 CMB Disarm.}
_{If~%WpnSpDouble%=1? Double: One-handed weapon and light weapon OR two-handed one end.}
_{If~{And~%WpnSpMonk%=1,{Param~Class,%Class%}=Monk}=1? Monk: Can be used in Flurry of Blows.}
_{If~%WpnSpNonlethal%=1? Nonlethal: {IIf~%Valminder%=1?1/2 dmg on WP, }-4 for Lethal.}
#_{If~%WpnSpReach%=1? Reach: 10'.}
_{If~%WpnSpThreeNoSTR%=1? Scourge: make 3 attack rolls for each attack, no STR damage.}
_{If~%WpnSpTrip%=1? Trip: can be used to trip and can drop weapon if tripped in return.}
_ )[FontE]}

# ---------------------------------------------------------------------------
# SAVING THROWS

### NEW CLASS ###
:DetermineBaseSaves
# Fighter, Barbarian, Warrior
1-2,|FortitudeSave=[GoodSave=%CharacterLevel%]|
_|ReflexSave=[PoorSave=%CharacterLevel%]|
_|WillSave=[PoorSave=%CharacterLevel%]|
# Bard
3,|FortitudeSave=[PoorSave=%CharacterLevel%]|
_|ReflexSave=[GoodSave=%CharacterLevel%]|
_|WillSave=[GoodSave=%CharacterLevel%]|
# Cleric, Druid
4-5,|FortitudeSave=[GoodSave=%CharacterLevel%]|
_|ReflexSave=[PoorSave=%CharacterLevel%]|
_|WillSave=[GoodSave=%CharacterLevel%]|
# Monk
6,|FortitudeSave=[GoodSave=%CharacterLevel%]|
_|ReflexSave=[GoodSave=%CharacterLevel%]|
_|WillSave=[GoodSave=%CharacterLevel%]|
# Paladin 
7,|FortitudeSave=[GoodSave=%CharacterLevel%]|
_|ReflexSave=[PoorSave=%CharacterLevel%]|
_|WillSave=[GoodSave=%CharacterLevel%]|
# Ranger 
8,|FortitudeSave=[GoodSave=%CharacterLevel%]|
_|ReflexSave=[GoodSave=%CharacterLevel%]|
_|WillSave=[PoorSave=%CharacterLevel%]|
# Rogue
9,|FortitudeSave=[PoorSave=%CharacterLevel%]|
_|ReflexSave=[GoodSave=%CharacterLevel%]|
_|WillSave=[PoorSave=%CharacterLevel%]|
# Wizard, Sorceror, Adept 
10-12,|FortitudeSave=[PoorSave=%CharacterLevel%]|
_|ReflexSave=[PoorSave=%CharacterLevel%]|
_|WillSave=[GoodSave=%CharacterLevel%]|
### NEW FAMILIAR ###
_{If~%FamiliarID%=6?|FortitudeSave+2|
_/{If~%FamiliarID%=10?|ReflexSave+2|
_}}
# Aristocrat, Expert
13,|FortitudeSave=[PoorSave=%CharacterLevel%]|
_|ReflexSave=[PoorSave=%CharacterLevel%]|
_|WillSave=[GoodSave=%CharacterLevel%]|
# Commoner
14,|FortitudeSave=[PoorSave=%CharacterLevel%]|
_|ReflexSave=[PoorSave=%CharacterLevel%]|
_|WillSave=[PoorSave=%CharacterLevel%]|
# Expert
15,[DetermineBaseSaves=13]
# Warrior
16,[DetermineBaseSaves=1]

:GoodSave
1,2
2-3,3
4-5,4
6-7,5
8-9,6
10-11,7
12-13,8
14-15,9
16-17,10
18-19,11
20-100,12

:PoorSave
1-2,0
3-5,1
6-8,2
9-11,3
12-14,4
15-17,5
18-100,6

#---------
:PrintSave
1,{If~%PALSaveBonus%=99?{If~%CHABonus%>0?|PALSaveBonus=%CHABonus%|/|PALSaveBonus=0|}}
# FORTITUDE
_<b>Fort</b> 
_|FortitudeSave={Calc~%FortitudeSave%+%CONBonus%+%SaveResistBonus%+%PALSaveBonus%+%AllSaveBonus%}|
_|FortitudeSaveFeat=0|
_{If~{Find~1,Great Fortitude,%FeatsAll%}!=0?|FortitudeSave+2||FortitudeSaveFeat=1|}
_{If~{Find~1,Survivor,%FeatsAll%}!=0?|FortitudeSave+2||FortitudeSaveFeat=1|}
_{If~{Find~1,Strong Soul,%FeatsAll%}!=0?|FortitudeSave+1||FortitudeSaveFeat=1|}
_{If~%FortitudeSaveFeat%=1?{Color~Green,{If~%FortitudeSave%>=0?+/}%FortitudeSave%}/{If~%FortitudeSave%>=0?+/}%FortitudeSave%}
#
_{IIf~%Show%=1?[FontB=1]
### NEW FEATS ### Fort
_{Color~Green,
_{IIf~{Find~1,Improved Great Fortitude,%FeatsAll%}!=0? (1 reroll/day)}
_{If~{Find~1,Kobold Endurance,%FeatsAll%}!=0? +4 Kobold Endurance;
_   /{If~{Find~1,Endurance,%FeatsAll%}!=0? +4 Endurance;
_}}
_{If~{Find~1,Cumbrous Fortitude,%FeatsAll%}!=0? +Cumbrous Fortitude;}
_{IIf~{Find~1,Carrion Feeder,%FeatsAll%}!=0? +2 vs diseases/ingested poisons;}
_{If~{Find~1,Resist Poison,%FeatsAll%}!=0? +4 vs poisons;}
_{If~{Find~1,Fiendish Heritage,%FeatsAll%}!=0? +4 vs poisons;}
_{If~{Find~1,Celestial Heritage,%FeatsAll%}!=0? +4 vs diseases;}
_}
_{Color~Peru,
_{IIf~{Param~Race,%Race%}=Duergar? Immune to poison/paralysis;}
_{If~{And~{Param~Race,%Race%}=Elf,%Subrace%=Arctic}=1? +Desert Runner;
_   /{If~{And~{Param~Race,%Race%}=Gnome,%Subrace%=Dread}=1? +2 vs poisons (+4 if accidental self-poisoning);
_   /{If~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Jungle}=1? +2 vs poisons;
_   /{If~{And~{Param~Race,%Race%}=Human,%Subrace%=Gutter Rat}=1? roll 2x disease save (take the best);
_}}}}
_{IIf~%Subrace%=Arctic? +4 vs cold weather/exposure}
_}
_{Color~DarkCyan,
_{IIf~%BbnInternalFortitude%=Yes? +Immune nauseated/sickened in Rage;}
_{IIf~%MonkPurity%=Yes? +Immune diseases (+su/magical);}
_{IIf~%MonkDiamondBody%=Yes? +Immune poisons (all);}
_{IIf~%PALDivineHealth%=Yes? +Immune diseases (+su/magical and mummy rot);}
_{If~%SORCelestialAsc%=Yes? +4 vs poisons;}
_{If~%SORDemResist%!=0? +%SORDemResist% vs poisons;}
_}
_[FontE]}
_[SaveMod]
_, 
# REFLEX
_<b>Ref</b> 
_|ReflexSave={Calc~%ReflexSave%+%DEXBonus%+%SaveResistBonus%+%Haste%+%PALSaveBonus%+%AllSaveBonus%}|
_|ReflexSaveFeat=0|
_{If~{Find~1,Lightning Reflexes,%FeatsAll%}!=0?|ReflexSave+2||ReflexSaveFeat=1|}
_{If~{Find~1,Steadfast,%FeatsAll%}!=0?|ReflexSave+1||ReflexSaveFeat=1|}
_{If~%HumanHeartStreet%=Yes?|ReflexSave+1|}
_{If~%ReflexSaveFeat%=1?{Color~Green,{If~%ReflexSave%>=0?+/}%ReflexSave%}/{If~%ReflexSave%>=0?+/}%ReflexSave%}
_{IIf~%Show%=1?[FontB=1]
### NEW FEATS ### Reflex
_{Color~Green,
_{IIf~{Find~1,Improved Lightning Reflexes,%FeatsAll%}!=0? (1 reroll/day)}
_{IIf~{Find~1,Fire Tamer,%FeatsAll%}!=0? +2 vs Fire;}
_{IIf~{Find~1,Burn Burn Burn,%FeatsAll%}!=0? +4 vs Catching on Fire;}
_{IIf~{Find~1,Cumbrous Reflexes,%FeatsAll%}!=0? +Cumbrous Reflexes;}
_}
_{Color~Peru,
_{If~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Avenging}=1? +1 vs Trample;}
_}
_{Color~DarkCyan,
_{IIf~%BbnTrapSense%>0? +%BbnTrapSense% vs traps;}
# MONK: Evasion only works with light armor or no armor.
# OTHER: Light or Medium armors.
_{If~{Param~Class,%Class%}=Monk?
_{If~%Evasion%=Yes? {If~%AMV%>1?{Color~Red,Evasion (Full or 0) NOT with {If~%AMV%=2?medium/heavy} armor}/Evasion (Full or 0);}
_/{If~%Evasion%=Improved? {If~%AMV%>1?{Color~Red,Improved Evasion (Half or 0) NOT with {If~%AMV%=2?medium/heavy} armor}/Improved Evasion (Half or 0);}
_}}
# Other classes
_/
_{If~%Evasion%=Yes? {If~%AMV%>2?{Color~Red,Evasion (Full or 0) NOT with heavy armor}/Evasion (Full or 0);}
_/{If~%Evasion%=Improved? {If~%AMV%>2?{Color~Red,Improved Evasion (Half or 0) NOT with heavy armor}/Improved Evasion (Half or 0);}
_}}
_}
_{If~%ROGTrapSense%>0? +%ROGTrapSense% vs Traps;}
_}
_{Color~Purple,
_{IIf~%Haste%>0? Haste;}
_}
_[FontE]}
_[SaveMod]
_, 
# WILL
_<b>Will</b> 
_|WillSaveFeat=0|
_|WillSave={Calc~%WillSave%+%SaveResistBonus%+%PALSaveBonus%+%AllSaveBonus%}|
_{If~{Find~1,Force of Personality,%FeatsAll%}=0?|WillSave+%WISBonus%|/|WillSave+%CHABonus%||WillSaveFeat=1|}
_{If~{Find~1,Iron Will,%FeatsAll%}!=0?|WillSave+2||WillSaveFeat=1|}
_{If~{Find~1,Bullheaded,%FeatsAll%}!=0?|WillSave+1||WillSaveFeat=1|}
_{If~{Find~1,Discipline,%FeatsAll%}!=0?|WillSave+2||WillSaveFeat=1|}
_{If~{Find~1,Strong Soul,%FeatsAll%}!=0?|WillSave+1||WillSaveFeat=1|}
_{If~%WillSaveFeat%=1?{Color~Green,{If~%WillSave%>=0?+/}%WillSave%}/{If~%WillSave%>=0?+/}%WillSave%}
#
_{IIf~%Show%=1?[FontB=1]
### NEW FEATS ### Will
_{Color~Green,
_{IIf~{Find~1,Improved Iron Will,%FeatsAll%}!=0? (1 reroll/day)}
_{IIf~{Find~1,Cumbrous Will,%FeatsAll%}!=0? +Cumbrous Will;}
_{IIf~{Find~1,Exile's Path,%FeatsAll%}!=0? (1 enchantment reroll/day)}
_{IIf~{Find~1,Unconquerable Optimism,%FeatsAll%}!=0? +2 vs fear;}
_{IIf~{Find~1,Discerning Eye,%FeatsAll%}!=0? +2 vs illusions;}
_{IIf~{Find~1,Piercing Sight,%FeatsAll%}!=0? +5 vs illusions;}
_{IIf~{Find~1,Seen and Unseen,%FeatsAll%}!=0? +2 vs scrying/divination;}
_{IIf~{Find~1,Channeled Rage,%FeatsAll%}!=0? IMMEDIATE use 1 Rage for +STR (+%STRBonus%);}
_}
_{Color~Peru,
_{If~%ElvenImmunities%=Yes? +2 vs Enchantments; Immune magic sleep;}
_{If~%GnomeIllusion%=Yes? +2 vs Illusions;}
_{If~{Param~Race,%Race%}=Duergar? Immune to phantasms;
_   /{If~{Param~Race,%Race%}=Halfling?
_       {If~%Subrace%=Jungle?/{If~%Subrace%=Nomadic?/{If~%Subrace%=Slave Born?-2 vs Fear (NO morale bonus);/+2 vs Fear;}}}
_}}
_{IIf~%Hardy%=Exiled? +2 vs Enchantments (charm/compulsion) +2nd save in 1r;}
_}
_{Color~DarkCyan,
_{IIf~%BbnRPClearMind%=Yes? (1 reroll/rage);}
_{IIf~%BbnWillRage%>0? +%BbnWillRage% in Rage;}
_{IIf~%BbnIndomitableWill%=Yes? +4 vs enchantment spells in Rage;}
_{IIf~%BbnFearlessRage%=Yes? +Immune skaken/frightened in Rage;}
_{IIf~%BbnSuperstition%>0? +%BbnSuperstition% vs spells/su/sp in Rage (must resist all saves even allies);}
_{If~%MonkStillMind%=Yes? +2 vs enchantments;}
_{If~%PALAuraCourage%=Yes? +Immune fear;}
_{If~%PALAuraResolve%=Yes? +Immune charm;}
_{If~%PALAuraRight%=Yes? +Immune compulsion;}
_{If~%ROGSlippery%=Yes? +Slippery Mind;}
_{If~{And~%WIZEncSmile%>0,%CharacterLevel%>=20}=1? +Enchantment spells are reflected back at caster (as {Italic~spell turning});}
_}
_[FontE]}
_[SaveMod]
#
_[FontB=1]{Color~Green,
_{If~{Find~1,Expanded Resistance,%FeatsAll%}!=0? +2 vs [~ExpandedResistance];}
_}[FontE]
_{IIf~%Show%=1?[SaveAll]}

;!ExpandedResistance
1,Abjuration
10,Conjuration
1,Divination
100,Enchantment
100,Evocation
100,Necromancy
1,Transmutation

:SaveMod
1,{If~%Show%=1?[FontB=1]
_{Color~Purple,
_{If~%SaveResistBonus%=0?{If~{Or~%ACSpellID%=8,%ACSpellID%=9}=1? +2 vs AL;}}
_}
_[FontE]}

:SaveAll
1,[FontB=1]
### NEW FEATS ### All saves
_{Color~Green,
_{IIf~{Find~1,Protected Destiny,%FeatsAll%}!=0? 1/day reroll "1";}
_{IIf~{Find~1,Celestial Heritage,%FeatsAll%}!=0? +1 vs effects from {Italic~evil} creatures;}
_{IIf~{Find~1,Fiendish Heritage,%FeatsAll%}!=0? +1 vs effects from {Italic~good} creatures;}
_{IIf~{Find~1,Hobgoblin Discipline,%FeatsAll%}!=0? +1 save if 2 other hobgoblins within 30';}
_{IIf~{Find~1,Lichloved,%FeatsAll%}!=0? +1 vs mind-affecting[Slash]poison[Slash]sleep[Slash]paralysis[Slash]stun[Slash]diseases;}
_{IIf~{Find~1,Unquenchable Flame of Life,%FeatsAll%}!=0? +2 vs EX/SU of undeads;}
_{IIf~{Find~1,Hard-headed,%FeatsAll%}!=0? +2 vs staggered/stunned}
_{IIf~{Find~1,Strong Soul,%FeatsAll%}!=0? +3 vs taint, death, energy drain, ability drain;}
_{IIf~{Find~1,Resist Poison,%FeatsAll%}!=0? +4 vs poisons;}
_{IIf~{Find~1,Spider Climber,%FeatsAll%}!=0? +4 vs webs;}
_{IIf~{Find~1,Pure Soul,%FeatsAll%}!=0? +5 vs taint;}
_}
# Races
_{Color~Peru,
_{IIf~%Hardy%=Yes? +{If~%Subrace%=Deep?3/2} vs poisons/spells/spell-like;
_   :{IIf~{Param~Race,%Race%}=Duergar? +2 vs spells/spell-like;
_}}
_{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Deep}=1? {Color~Red,-2} vs light spells;
_   :{IIf~{And~{Param~Race,%Race%}=Dwarf,%Subrace%=Exiled}=1? +2 vs ex/spells/sp of dragons;
_   :{IIf~{And~{Param~Race,%Race%}=Gnome,%Subrace%=Traveler}=1? +2 vs language-dependent spells or spells creating glyph/symbol/writing;
_}}}
_{If~%SpellResistanceRacial%>0? [FontB=2]SR%SpellResistanceRacial%;[FontE]}
_}
# Classes
_{Color~DarkCyan,
_{If~{And~%FTR_Bravery%!=ERROR,%FTR_Bravery%>0}=1? +%FTR_Bravery% Will vs fear;}
_{If~%BrdWellVersed%=Yes? +4 vs bardic performance, sonic, and language-dependent effects;}
_{IIf~{And~{Param~Class,%Class%}=Druid,%CharacterLevel%>=4}=1? +4 save vs sp/su of feys and "plant" spells/effects;}
_{IIf~{And~{Param~Class,%Class%}=Druid,%CharacterLevel%>=9}=1? Immune to poisons;}
_{If~%SORDestinedBA%=Yes? +Bloodline Arcana;}
_{If~%SORDestinedTouch%>0? +%SORDestinedFated% in surprise rounds or if unaware of attack;}
_{IIf~{And~%SORDraconicResist%>0,%CharacterLevel%<=20}=1? +Immune paralysis/sleep;}
_{If~{And~%SORInfernalResist%>0,%CharacterLevel%<20}=1? +{Calc~2*%SORInfernalResist%} vs Poison;}
_{IIf~%SORUndeadOneOfUs%=Yes? +Immune paralysis/sleep; +4 vs undead spells/sp;}
_{If~%SpellResistance%>0? [FontB=2]SR%SpellResistance%;[FontE]}
_}
# Magic Items
_{Color~Purple,
_{If~%SaveResistBonus%>0? INCLUDES +%SaveResistBonus% resistance for ALL saves;}
_[FontE]
_{If~%SR%>0? [FontB=2]SR%SR%[FontE]}
_}

# ---------------------------------------------------------------------------
# Action Points
# @ActionPoints,1,Do you use Action Points?,Yes (everyone),No,Only for Heroic NPCs,Only for Heroes

:ActionPointsChoice
1,|ActionPointsChoice=1|
2,|ActionPointsChoice=0|
3,{If~%Heroic%=1?|ActionPointsChoice=1|/|ActionPointsChoice=0|}
4,{If~%Heroic%=1?|ActionPointsChoice=2|/|ActionPointsChoice=0|}

:PrintActionPoints
1,|Temp1=5||Temp1+%CharacterLevel%||Temp2={Dice~1d%Temp1%}|
_{If~{And~{Param~Race,%RaceMaster%}=Human,%Subrace%=Trailblazer}=1?|Temp2+2|{If~%Temp2%>%Temp1%?|Temp2=%Temp1%|}}
_ {Bold~AP:} {If~%Heroic%=1?%Temp2%/|Temp1\2||Temp2\2|%Temp2%} ({If~%GroupFlag%=2?max %Temp1%; }[SetAPDice=%CharacterLevel%]);

:SetAPDice
1-6,1d6
7-12,2d6
13-18,3d6
20-100,4d6

# ---------------------------------------------------------------------------
# Gods

:SetGod
1,{If~%GroupFlag%=2?[SetGod2]
_/{If~%GodGenGroup%=2?[SetGod2]
_/{If~%GodName%=0?[SetGod2]
_}}}

:SetGod2
1,|Temp1=Find God|
#_|GodName=0||GodLand=0||GodAL=0||GodRank=0||GodSphere=0||GodWAL=0||GodPriAL=0||GodPortfolio=0||GodDomains=0||GodSym=0||GodWpnT=0||GodWpn=0||GodWpnID=0||GodWpnMag=0|
# Only 20% of druids/rangers have a god.
_{If~{Or~{Param~Class,%Class%}=Druid,{Param~Class,%Class%}=Ranger}=1?{If~{Dice~1d2}=1?|Temp1=OK||GodName=Nature|}}
_{If~%Temp1%=Find God?
_{While~%Temp1%=Find God,[ChooseGod]}
_}

# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
### NEW RACE ### TO DO XXX PFB1
# Left to do: Dragon Gods, Giant Gods, Gnoll Gods, Kender Gods, Lizardfolk Gods, LizardMen Gods,Orc Gods
:ChooseGod
1,{If~{Param~Race,%Race%}=Dwarf?|Temp2=Dwarf Gods|
_/{If~{Param~Race,%Race%}=Elf?|Temp2=Elf Gods|
_/{If~{Param~Race,%Race%}=Gnome?|Temp2=Gnome Gods|
_/{If~{Param~Race,%Race%}=Half Elf?|Temp2=Half Elf Gods|
_/{If~{Param~Race,%Race%}=Half Orc?|Temp2=Half Orc Gods|
_/{If~{Param~Race,%Race%}=Halfling?|Temp2=Halfling Gods|
_/|Temp2=Deities|
_}}}}}}
_{If~%Temp2%!=Deities?{If~{GroupExists~Religion.{Param~Race,%Race%} Gods Roll_%WorldNeededName%}=0?|Temp2=Deities|}}
_|TempString=[Religion.%Temp2%(3,%WorldNeeded%)]|
_{Split~TempString,"!",GodName,GodLand,GodAL,GodRank,GodSphere,GodWAL,GodPriAL,GodPortfolio,GodDomains,GodSym,GodWpnT,GodWpn,GodWpnID,GodWpnMag}
_{If~%WorldNeededName%=Mystara?|GodDomains={Replace~Sphere,Sphere of %GodSphere%,%GodDomains%}|}
#_[TestGod]
# cleric druid ranger paladin
_{If~{Param~Class,%Class%}=Cleric?[Divine]
_/{If~{Param~Class,%Class%}=Paladin?[Divine]
_/{If~{Param~Class,%Class%}=Druid?[Nature]
_/{If~{Param~Class,%Class%}=Ranger?[Nature]
_/{If~{Param~Class,%Class%}=Adept?[Adept]
# Only 1% of NPCs don't venerate a god.
_/{If~{And~{Dice~1d100}<=%GodPercent%,%GodGenPersonal%=1}=1?[NonDivine]/|Temp1=OK||GodName=0|}
_}}}}}
# Druid or Ranger
#_{If~{Or~{Param~Class,%Class%}=Druid,{Param~Class,%Class%}=Ranger}=1?}
# Gods not taking certain races or genders.
_{If~{And~{Find~1,Opal,%GodName%}!=0,{Param~Race,%Race%}=Human}=1?|Temp1=Find God|}
_{If~{And~{Find~1,Rathanos,%GodName%}!=0,%Gender%=2}=1?|Temp1=Find God|}
_{If~{And~{Find~1,Arnelee,%GodName%}!=0,%Gender%=1}=1?|Temp1=Find God|}

:Adept
1,{If~{Find~1,None,%GodPriAL%}=0?[Adept2]}

:Adept2
1,{If~{Find~1,Any,%GodPriAL%}!=0?|Temp1=OK|
_/{If~{Find~1,%AL%,%GodPriAL%}!=0?|Temp1=OK|
_/{If~{Find~1,Adept,%GodPriAL%}!=0?|Temp1=OK|
_}}}

:Divine
1,{If~{Find~1,None,%GodPriAL%}=0?[Divine2]}

:Divine2
#1,{If~{And~{Find~1,Any,%GodPriAL%}!=0,{Param~Class,%Class%}!=Paladin}=1?|Temp1=OK|
1,{If~{Find~1,Any,%GodPriAL%}!=0?|Temp1=OK|
_/{If~{Find~1,%AL%,%GodPriAL%}!=0?|Temp1=OK|
_}}

:Nature
1,{If~{Find~1,Druid,%GodPriAL%}!=0?|Temp1=OK|}

:NonDivine
1,{If~{Find~1,Any,%GodWAL%}!=0?|Temp1=OK|
_/{If~{Find~1,%AL%,%GodWAL%}!=0?|Temp1=OK|
_}}

:TestGod
1,<hr>
_%GodName% (%GodAL%{If~{Or~%GodRank%!=0,%GodSphere%!=0}=1?;}{If~%GodRank%!=0? %GodRank%}{If~%GodSphere%!=0? of %GodSphere%}){IIf~%GodLand%!=0?<font size=1><font color=gray> (%GodLand%)</font></font>}<br>
_[Tab]Worshippers: %GodWAL%
_[Tab]Priests: %GodPriAL%<br>
#_[Tab]Portfolio: %GodPortfolio%<br>
#_[Tab]Domains: %GodDomains%<br>
#_[Tab]Symbol: %GodSym%<br>
#_[Tab]Weapon: %GodWpnMag% %GodWpn% (%GodWpnT%; EQ Code = %GodWpnID%)
_<hr>

:PrintGod
1,{If~%GodName%=Nature?Nature (N).{If~{And~%PrintGroupGod%=Yes,%GroupFlag%=1}=1?<br><br>}
_/{If~%GodName%=0?None in particular.{If~{And~%PrintGroupGod%=Yes,%GroupFlag%=1}=1?<br><br>}
_/{If~%GodShort%=Yes?[PrintGodShort]
_/{If~%GodComplete%=Yes?[PrintGodComplete]
_/[PrintGod2]
_}}}}

:PrintGodShort
1,%GodName% (%GodAL%; %GodSym%).

:PrintGodComplete
1,%GodName% (%GodAL%{If~{Or~%GodRank%!=0,%GodSphere%!=0}=1?;}{If~%GodRank%!=0? %GodRank%}{If~%GodSphere%!=0? of %GodSphere%})
_{IIf~%GodLand%!=0?<font size=1><font color=gray> (%GodLand%)</font></font>}
_<br>[Tab]<u>Worshippers</u>: |Temp1=%GodWAL%||Temp1={Replace~NN,N,%Temp1%}||Temp1={Replace~ ,;,%Temp1%}||Temp1={Replace~;,; ,%Temp1%}|{CommaReplace~1,;,%Temp1%}.
_[Tab]<u>Priests</u>: |Temp1=%GodPriAL%||Temp1={Replace~NN,N,%Temp1%}||Temp1={Replace~ ,;,%Temp1%}||Temp1={Replace~;,; ,%Temp1%}|{CommaReplace~1,;,%Temp1%}.<br>
_[Tab]<u>Portfolio</u>: {CommaReplace~1,;,%GodPortfolio%}.
_[Tab]<u>Domains</u>: |Temp1=%GodDomains%||Temp1={Replace~;0,,%Temp1%}||Temp1={OrderAsc~";",%Temp1%}||Temp1={Replace~;,; ,%Temp1%}|{CommaReplace~1,;,%Temp1%}.<br>
_[Tab]<u>Symbol</u>: %GodSym%.[Tab]<u>Weapon</u>: %GodWpn%{If~%GodWpnMag%!=0? ({Italic~%GodWpnMag% %GodWpn%})}.

:PrintGod2
1,%GodName% (%GodAL%{If~{Or~%GodRank%!=0,%GodSphere%!=0}=1?;}{If~%GodRank%!=0? %GodRank%}{If~%GodSphere%!=0? of %GodSphere%})
_{IIf~%GodLand%!=0?<font size=1><font color=gray> (%GodLand%)</font></font>}
###
_{If~{Or~%GroupFlag%=2,%PrintGroupGod%=Yes}=1?<br>[Tab]/ }
_<u>Worshippers</u>: |Temp1=%GodWAL%||Temp1={Replace~NN,N,%Temp1%}||Temp1={Replace~ ,;,%Temp1%}||Temp1={Replace~;,; ,%Temp1%}|{CommaReplace~1,;,%Temp1%}.
_[Tab]<u>Priests</u>: |Temp1=%GodPriAL%||Temp1={Replace~NN,N,%Temp1%}||Temp1={Replace~ ,;,%Temp1%}||Temp1={Replace~;,; ,%Temp1%}|{CommaReplace~1,;,%Temp1%}.
###
_{If~{Or~%GroupFlag%=2,%PrintGroupGod%=Yes}=1?<br>[Tab]/ }
_<u>Portfolio</u>: {CommaReplace~1,;,%GodPortfolio%}.
_{If~{Or~%GroupFlag%=2,%PrintGroupGod%=Yes}=1?<br>[Tab]/ }
_<u>Symbol</u>: %GodSym%.
_{If~{Or~%GroupFlag%=2,%PrintGroupGod%=Yes}=1?[Tab]/ }
_<u>Weapon</u>: %GodWpn%.
_{If~%PrintGroupGod%=Yes?<br><br>}

# ---------------------------------------------------------------------------
#

:SpaceReach
1,1/2 ft./0 ft.
2,1 ft./0 fy.
3,2-1/2 ft./0 ft.
4,5 ft./5 ft.
5,5 ft./5 ft.
6,(tall) 10 ft./10 ft. (long) 10 ft./5 ft.
7,(tall) 15 ft./15 ft. (long) 15 ft./10 ft.
8,(tall) 20 ft./20 ft. (long) 20 ft./15 ft.
9,(tall) 30 ft./30 ft. (long) 30 ft./20 ft.

# ---------------------------------------------------------------------------
#
# ---------------------------------------------------------------------------
#
# ---------------------------------------------------------------------------
#
# ---------------------------------------------------------------------------
#
# ---------------------------------------------------------------------------
#
# ---------------------------------------------------------------------------
#
#
#
#
#
#
#
#
#
#
#
#
#
#
#
#
#
#


# Character Generation Tables

### NEW CLASS ###
:MagicUserClassIdentification
#Fighter, Barbarian
1-2,|MagicUserClass=0|
#Bard
3,|MagicUserClass=1|
#Cleric
4,|MagicUserClass=2|
#Druid
5,|MagicUserClass=3|
#Monk
6,|MagicUserClass=0|
#Paladin
7,|MagicUserClass=4|
#Ranger
8,|MagicUserClass=5|
#Rogue
9,|MagicUserClass=0|
#Sorcerer
10,|MagicUserClass=6|
#Wizard
11,|MagicUserClass=7|
#Adept
12,{If~%AdeptTypeChosen%=Seer?|MagicUserClass=13|
_/{If~%AdeptTypeChosen%=Smiter?|MagicUserClass=14|
_/|MagicUserClass=8|
_}}
# Aristocrat, Commoner, Expert, Warrior
13-16,|MagicUserClass=0|
# To continue: 9=Assassin, 10=Blackguard

### NEW CLASS ###
# This works with the MagicUserClass
:SetAttribute
#Bard
1,%CHA%|PrimeAttribute=%CHA%|
#Cleric
2,%WIS%|PrimeAttribute=%WIS%|
#Druid
3,%WIS%|PrimeAttribute=%WIS%|
#Paladin
4,%WIS%|PrimeAttribute=%WIS%|
#Ranger
5,%WIS%|PrimeAttribute=%WIS%|
#Sorcerer
6,%CHA%|PrimeAttribute=%CHA%|
#Wizard
7,%INT%|PrimeAttribute=%INT%|
#Adept
8,%WIS%|PrimeAttribute=%WIS%|
9-12,
#Adept Seer
13,%WIS%|PrimeAttribute=%WIS%|
#Adept Amiter
14,%WIS%|PrimeAttribute=%WIS%|
# To continue: 9=Assassin, 10=Blackguard

# -------------------------------------------------------------------------------
# Special Abilities

### NEW CLASS ###
:SetSpecialAbilities
1,|SA=[SpecialAbilitiesBranch=%Class%]|

:SpecialAbilitiesBranch
1,[FighterSpecialAbilities=%CharacterLevel%]
2,[BarbarianSpecialAbilities=%CharacterLevel%].[BarbarianSpecialAbilities2]
3,[BardSpecialAbilities=%CharacterLevel%]
4,[ClericSpecialAbilities=%CharacterLevel%]
5,[DruidSpecialAbilities=%CharacterLevel%]
6,[MonkSpecialAbilities=%CharacterLevel%]
7,[PaladinSpecialAbilities=%CharacterLevel%]
8,[RangerSpecialAbilities=%CharacterLevel%]
9,[RogueSpecialAbilities=%CharacterLevel%]
10,[SorcererSpecialAbilities=%CharacterLevel%]
11,[WizardSpecialAbilities=%CharacterLevel%]
12,[AdeptSpecialAbilities=%CharacterLevel%]
13-16,None

# ----------------------
:FighterSpecialAbilities
1-2,|TempNumber=[FighterBonusFeats=%CharacterLevel%]|%TempNumber% Fighter Bonus Feats
3-4,[FighterSpecialAbilities=1], Armor Training |FTR_ACP=[FighterSpecialAbilitiesArmor=%CharacterLevel%]|%FTR_ACP% (Ex)|Rule=-%FTR_ACP% armor check penalty, +%FTR_ACP% max Dex, normal MV with medium{IIf~%CharacterLevel%>=7?/heavy} armors|[PrRule]
5-18,[FighterSpecialAbilities=3], Weapon Training
19,[FighterSpecialAbilities=5], Armor Mastery|FTR_ArmorMastery=Yes||Rule=DR5/- when wearing armor or using a shield|[PrRule]
20-100,[FighterSpecialAbilities=19], Weapon Mastery|Rule=choose one weapon, automatically confirm critical threats, +1x crit, cannot be disarmed|[PrRule]

:FighterBonusFeats
1,1
2-3,2
4-5,3
6-7,4
8-9,5
10-11,6
12-13,7
14-15,8
16-17,9
18-19,10
20-100,11

:FighterSpecialAbilitiesArmor
1-2,{Stop~ERROR FighterSpecialAbilitiesArmor}
3-6,1
7-10,2
11-14,3
15-100,4

:FighterWeaponTrainingReplace
1,{Reset~Fighter_Find_WT_Melee2}{Reset~Fighter_Find_WT_Range}{Reset~Fighter_WT_All}
_{If~%TestLog%=1?{Log~E:\log.txt,----- FighterWeaponTrainingReplace ----- WeaponChoice= %WeaponChoice% / FTR_WT_M=%FTR_WT_M% / FTR_WT_R=%FTR_WT_R%}}
_{If~%TestLog%=1?{Log~E:\log.txt,WeaponChoice= %WeaponChoice%, SA= %SA%}}
_|SA={Replace~Weapon Training,[FighterWeaponTrainingReplace2],%SA%}|
# Set Weapon TrainingModifiers (%FTR_WT_M_Bonus%, %FTR_WT_R_Bonus%)
_{If~%CharacterLevel%>=9?{If~%WeaponChoice%=Melee?|FTR_WT_M_Bonus=%FTR_WT1%||FTR_WT_R_Bonus=%FTR_WT2%|/|FTR_WT_M_Bonus=%FTR_WT2%||FTR_WT_R_Bonus=%FTR_WT1%|}
_                       /{If~%WeaponChoice%=Melee?|FTR_WT_M_Bonus=%FTR_WT1%|/|FTR_WT_R_Bonus=%FTR_WT1%|}
_}

:FighterWeaponTrainingReplace2
1,|FTRWTUnarmed=No|
_Weapon Training [FighterSpecialAbilitiesWeapon=%CharacterLevel%] (Ex) [FontB=2]{Color~Grey,(att/dmg/CMB/CMD [FighterSpecialAbilitiesWeapon2=%CharacterLevel%])}[FontE]

:FighterSpecialAbilitiesWeapon
1-4,{Stop~ERROR FighterSpecialAbilitiesWeapon}
5-8,1
9-12,2
13-16,3
17-100,4

:FighterSpecialAbilitiesWeapon2
1-4,{Stop~ERROR FighterSpecialAbilitiesWeapon2}
5-8,|FTR_WT1=1||Temp3=1|+%FTR_WT1% [Fighter_Find_WT_Main]
9-12,|FTR_WT1=2||Temp3=2|+%FTR_WT1% [Fighter_Find_WT_Main] |FTR_WT2=1||Temp3=1|+%FTR_WT2% [Fighter_Find_WT_Secondary]
13-16,|FTR_WT1=3||Temp3=3|+%FTR_WT1% [Fighter_Find_WT_Main] |FTR_WT2=2||Temp3=2|+%FTR_WT2% [Fighter_Find_WT_Secondary] |FTR_WT3=1||Temp3=1|+%FTR_WT3% |FTRWTUnarmed=No|[Fighter_WT_All][FTRWTUnarmed]
17-100,|FTR_WT1=4||Temp3=4|+%FTR_WT1% [Fighter_Find_WT_Main] |FTR_WT2=3||Temp3=3|+%FTR_WT2% [Fighter_Find_WT_Secondary] |FTR_WT3=2||Temp3=2|+%FTR_WT3% |FTRWTUnarmed=No|[Fighter_WT_All][FTRWTUnarmed] |FTR_WT4=1||Temp3=1|+%FTR_WT4% |FTRWTUnarmed=No|[Fighter_WT_All][FTRWTUnarmed]

:Fighter_Find_WT_Main
1,{If~%WeaponChoice%=Melee?[Fighter_Find_WT_Melee]/[Fighter_Find_WT_Range]}

:Fighter_Find_WT_Secondary
1,{If~%WeaponChoice%=Melee?[Fighter_Find_WT_Range]/[Fighter_Find_WT_Melee]}

# Based on the Weapon Training categories (FTR_WT_R or FTR_WT_M - imported from Equipment.tab)
# -- MELEE: 1(A)= Axes, 2(B)= Heavy Blades, 3(C)= Light Blades, 4(D)= Close, 5(E)= Double, 
# 6(F)= Flails, 7(G)= Hammers, 8(H)= Monk, 9(I)= Natural, 10(J)= Polearms, 11(K)= Spears 
# -- RANGE: 12(L)= Bows, 13(M)= Crossbows, 14(N)= Thrown

:Fighter_Find_WT_Melee
#1,|FTRWTUnarmed=No|[Fighter_Find_WT_Melee2]
1,[Fighter_Find_WT_Melee2]
_{If~{And~%FTRWTUnarmed%=Yes,%FTR_WT_M_BonusU%=0}=1?|FTR_WT_M_BonusU=%Temp3%|}

:FTRWTUnarmed
1,{If~{And~%FTRWTUnarmed%=Yes,%FTR_WT_M_BonusU%=0}=1?|FTR_WT_M_BonusU=%Temp3%|}

:!Fighter_Find_WT_Melee2
1,{If~{Find~1,A,%FTR_WT_M%}!=0?[Fighter_WT_All=1]/{Unlock~Fighter_Find_WT_Melee2,1}[Fighter_Find_WT_Melee]}
2,{If~{Find~1,B,%FTR_WT_M%}!=0?[Fighter_WT_All=2]/{Unlock~Fighter_Find_WT_Melee2,2}[Fighter_Find_WT_Melee]}
3,{If~{Find~1,C,%FTR_WT_M%}!=0?[Fighter_WT_All=3]/{Unlock~Fighter_Find_WT_Melee2,3}[Fighter_Find_WT_Melee]}
4,{If~{Find~1,D,%FTR_WT_M%}!=0?[Fighter_WT_All=4]/{Unlock~Fighter_Find_WT_Melee2,4}[Fighter_Find_WT_Melee]}
5,{If~{Find~1,E,%FTR_WT_M%}!=0?[Fighter_WT_All=5]/{Unlock~Fighter_Find_WT_Melee2,5}[Fighter_Find_WT_Melee]}
6,{If~{Find~1,F,%FTR_WT_M%}!=0?[Fighter_WT_All=6]/{Unlock~Fighter_Find_WT_Melee2,6}[Fighter_Find_WT_Melee]}
7,{If~{Find~1,G,%FTR_WT_M%}!=0?[Fighter_WT_All=7]/{Unlock~Fighter_Find_WT_Melee2,7}[Fighter_Find_WT_Melee]}
8,{If~{Find~1,H,%FTR_WT_M%}!=0?[Fighter_WT_All=8]/{Unlock~Fighter_Find_WT_Melee2,8}[Fighter_Find_WT_Melee]}
9,{If~{Find~1,I,%FTR_WT_M%}!=0?[Fighter_WT_All=9]/{Unlock~Fighter_Find_WT_Melee2,9}[Fighter_Find_WT_Melee]}
10,{If~{Find~1,J,%FTR_WT_M%}!=0?[Fighter_WT_All=10]/{Unlock~Fighter_Find_WT_Melee2,10}[Fighter_Find_WT_Melee]}
11,{If~{Find~1,K,%FTR_WT_M%}!=0?[Fighter_WT_All=11]/{Unlock~Fighter_Find_WT_Melee2,11}[Fighter_Find_WT_Melee]}

:!Fighter_Find_WT_Range
1,{If~{Find~1,L,%FTR_WT_R%}!=0?[Fighter_WT_All=12]/{Unlock~Fighter_Find_WT_Range,1}[Fighter_Find_WT_Range]}
2,{If~{Find~1,M,%FTR_WT_R%}!=0?[Fighter_WT_All=13]/{Unlock~Fighter_Find_WT_Range,2}[Fighter_Find_WT_Range]}
3,{If~{Find~1,N,%FTR_WT_R%}!=0?[Fighter_WT_All=14]/{Unlock~Fighter_Find_WT_Range,3}[Fighter_Find_WT_Range]}

:!Fighter_WT_All
1,axes
2,heavy blades
3,light blades
4,close|FTRWTUnarmed=Yes|
5,double
6,flails
7,hammers
8,monk|FTRWTUnarmed=Yes|
9,natural|FTRWTUnarmed=Yes|
10,polearms
11,spears
12,bows
13,crossbows
14,thrown

# ------------------------
:BarbarianSpecialAbilities
1,{Reset~BarbarianSpecialAbilitiesRagePower}
_RageTOREPLACE
_{IIf~%CharacterLevel%>=20?|BbnWillRage=4|:{IIf~%CharacterLevel%>=11?|BbnWillRage=3|:|BbnWillRage=2|}}
2-10,[BarbarianSpecialAbilities=1], Rage Power{If~%CharacterLevel%>=4?s} (Ex) 
_{Lockout~BarbarianSpecialAbilitiesRagePower,31}
_|TempNumber=%CharacterLevel%||TempNumber\2|
_{Italic~(%TempNumber%; 
_{While~%TempNumber%,|Temp2=[BarbarianSpecialAbilitiesRagePower]||BbnRagePower&%Temp2%||BbnRagePowerLight&%Temp2%||TempNumber-1|{If~%Rule%!=0?|BbnRagePower& {Color~Grey,[FontB=2](%Rule%)[FontE]}|}{If~%TempNumber%>0?|BbnRagePower&, ||BbnRagePowerLight&, |}}
_{If~%GroupFlag%=2?%BbnRagePowerLight%/%BbnRagePower%})
_}
11-13,[BarbarianSpecialAbilities=2], Greater Rage
14-16,[BarbarianSpecialAbilities=11], Indomitable Will|BbnIndomitableWill=Yes||Rule=+4 Will vs enchantments|[PrRule]
17-19,[BarbarianSpecialAbilities=14], Tireless Rage|Rule=no longer fatigued after rage|[PrRule]
20-100,[BarbarianSpecialAbilities=17], Mighty Rage

:BarbarianSpecialAbilities2
1,{If~%GroupFlag%=2?{If~%CharacterLevel%>=2?{CR~}[Tab]{If~%Show%=1?[BarbarianSpecialAbilitiesShowRP]
_                                                                 /{Generate~0,Rage Powers,BarbarianSpecialAbilitiesShowRP}
_}}}

:BarbarianSpecialAbilitiesShowRP
1,{Bold~Rage Power(s):} %BbnRagePower%

:!BarbarianSpecialAbilitiesRagePower
1,Animal Fury|Rule=Bite -5 [Equipment.SZ1d4=%Size%]+{Trunc~{Calc~(%STRBonus%/2)}}, FREE to bite to maintain/break Grapple, +2 Grapple if bite hits|
2,{If~%CharacterLevel%>=8?Clear Mind|Rule=reroll Will save, 1/rage||BbnRPClearMind=Yes|/[BarbarianSpecialAbilitiesRagePower]}
3,{If~%CharacterLevel%>=12?Fearless Rage|Rule=immune shaken/frightened||BbnFearlessRage=Yes|/[BarbarianSpecialAbilitiesRagePower]}
4,Guarded Stance|BbnGuardedStance={Trunc~{Calc~((%CharacterLevel%/6)+1)}}||Rule=MOVE, +%BbnGuardedStance% dodge AC in melee, "CON" rounds|
5,{If~%CharacterLevel%>=8?Increase DR|BbnIncreaseDR+1||Rule=DR +1/-|/[BarbarianSpecialAbilitiesRagePower]}
6,{If~%CharacterLevel%>=8?Increase DR|BbnIncreaseDR+1||Rule=DR +1/-|/[BarbarianSpecialAbilitiesRagePower]}
7,{If~%CharacterLevel%>=8?Increase DR|BbnIncreaseDR+1||Rule=DR +1/-|/[BarbarianSpecialAbilitiesRagePower]}
8,{If~%CharacterLevel%>=8?Internal Fortitude|BbnInternalFortitude=Yes||Rule=immune sickened/nauseated|/[BarbarianSpecialAbilitiesRagePower]}
9,Intimidating Glare|Rule=MOVE to Intimidate, shaken 1d4+1r/5DC|{Unlock~BarbarianSpecialAbilitiesRagePower,31}
10,Knockback|Rule=bull rush instead of melee attack, "STR" damage, no AO, 1/round|
11,Low-Light Vision|Rule=0||VisionLowLight=Yes|
12,{If~%CharacterLevel%>=12?Mighty Swing|Rule=IMMEDIATE, auto. confirm critical threat, 1/rage|/[BarbarianSpecialAbilitiesRagePower]}
13,Moment of Clarity|Rule=SWIFT, lose bonuses/penalties of rage, 1r, 1/rage|
14,{If~{And~%VisionDark%<60,%VisionLowLight%=Yes}=1?Night Vision|Rule=darkvision 60'||VisionDark>60|/[BarbarianSpecialAbilitiesRagePower]}
15,No Escape|Rule=IMMEDIATE to follow withdrawing foe, x2 MV, AO, 1/rage|
16,Powerful Blow|Rule=SWIFT +{Trunc~{Calc~((%CharacterLevel%/4)+1)}} dmg, 1/rage|
17,Quick Reflexes|Rule=+1 AO/round|
18,Raging Climber|BbnRagingClimber=%CharacterLevel%||Rule=+%BbnRagingClimber% Climb|
19,Raging Leaper|BbnRagingLeaper=%CharacterLevel%||Rule=+%BbnRagingLeaper% Acrobatics (Jump), considered to have a running start|
20,Raging Swimmer|BbnRagingSwimmer=%CharacterLevel%||Rule=+%BbnRagingSwimmer% Swim|
21,{If~%CharacterLevel%>=4?Renewed Vigor|Rule=STANDARD, cure {Trunc~{Calc~(%CharacterLevel%/4)}}d8, 1/day|/[BarbarianSpecialAbilitiesRagePower]}
22,Rolling Dodge|BbnRollingDodge={Trunc~{Calc~((%CharacterLevel%/6)+1)}}||Rule=MOVE, +%BbnRollingDodge% dodge AC vs range, "CON" rounds|
23,Roused Anger|Rule=can enter rage even if fatigued, immune to fatigue but exhausted 10 min/r of rage|
24,Scent|Rule=0|
25,Strength Surge|Rule=IMMEDIATE, +%CharacterLevel% on 1 STR check/CMB/CMD, 1/rage|
26,Superstition|BbnSuperstition={Trunc~{Calc~((%CharacterLevel%/4)+1)}}||Rule=+%BbnSuperstition% vs spells/su/sp, must resist all saves even allies'|
27,Surprise Accuracy|Rule=SWIFT +{Trunc~{Calc~((%CharacterLevel%/4)+1)}} attack roll, 1/rage|
28,Swift Foot|BbnSwiftFoot+5||Rule=+5' MV|
29,Swift Foot|BbnSwiftFoot+5||Rule=+5' MV|
30,Swift Foot|BbnSwiftFoot+5||Rule=+5' MV|
31,{If~%CharacterLevel%>=8?Terrifying Howl|Rule=STANDARD, 30', shaken = Will or panicked 1d4+1r, immune 24hr if save or not|/[BarbarianSpecialAbilitiesRagePower]}
32,{If~%CharacterLevel%>=8?Unexpected Strike|Rule=can make AO whenever opponent moves in threatened square|/[BarbarianSpecialAbilitiesRagePower]}

:BardSpecialAbilities
1-2,Cast Arcane Spells, Cantrips
_, Bardic Performance (BF) (BARDICPERFORMROUNDS rounds/day)
_|Rule={If~%CharacterLevel%>=13?SWIFT/{If~%CharacterLevel%>=7?MOVE/STANDARD}}|[PrRule]
_, Fascinate (su) (BF)|Rule=90', [BardFascinate=%CharacterLevel%] target{If~%CharacterLevel%>=4?s}, CHAWillDCReplace or sits and observe bard (-4 Perception/reaction skills)|[PrRule]
_, Inspire Courage (su) (BF) +[BardSpecialAbilitiesCourage=%CharacterLevel%]|Rule=allies at 30' vs charm/fear and attack/damage|[PrRule]
3-7,[BardSpecialAbilities=1], Suggestion (sp)|Rule=STANDARD on one fascinated creature; CHAWillDCReplace|[PrRule]
8,[BardSpecialAbilities=3], Dirge of Doom (su) (BF)|Rule=enemies at 30' are shaken (-2 attack/save/skill/ability)|[PrRule]
9-13,[BardSpecialAbilities=8], Inspire Greatness (su) (BF)|Rule=himself or [BardSpecialAbilitiesInspireGreatness=%CharacterLevel%] at 30'; +2HD (2d10+CON) +2 attack +1 Fortitude|[PrRule]
14,[BardSpecialAbilities=9], Frightening Tune (sp) (BF)|Rule=enemies at 30' are frightened (flees as long as they hear; -2 attack/save/skill/ability); CHAWillDCReplace|[PrRule]
15-17,[BardSpecialAbilities=14], Inspire Heroics (su) (BF)|Rule=himself or [BardSpecialAbilitiesInspireHeroics=%CharacterLevel%] at 30'; +4 morale save; +4 dodge AC|[PrRule]
18-19,[BardSpecialAbilities=15], Mass Suggestion (sp)|Rule=STANDARD on ALL fascinated creature; CHAWillDCReplace|[PrRule]
20-100,[BardSpecialAbilities=18], Deadly Performance (su) (BF)|Rule=FULL; one enemy at 30' dies of sorrow or joy; CHAWillDCReplace or staggered 1d4r (1 action/r)|[PrRule]

:BardSpecialAbilitiesCourage
1-4,1
5-10,2
11-16,3
17-100,4

:BardSpecialAbilitiesCompetence
1-2,{Stop~ERROR BardSpecialAbilitiesCompetence}
3-6,2
7-10,3
11-14,4
15-18,5
19-100,6

:BardSpecialAbilitiesInspireGreatness
1-8,{Stop~ERROR BardSpecialAbilitiesInspireGreatness}
9-11,1 ally
12-13,2 allies
15-17,3 allies
18-100,4 allies

:BardSpecialAbilitiesInspireHeroics
1-14,{Stop~ERROR BardSpecialAbilitiesInspireHeroics}
15-17,1 ally
18-20,2 allies
21-23,3 allies
24-26,4 allies
27-29,5 allies
30-32,6 allies
33-35,7 allies
36-38,8 allies
39-100,9 allies

# ---------------------
:ClericSpecialAbilities
1-100,Cast Divine Spells, Orisons, 
_Channel Energy [FontB=2]({Ceil~{Calc~(%CharacterLevel%/2)}}d6; 
_{If~{Find~1,Extra Channel,%FeatsAll%}!=0?{Color~Green,{If~{Param~Race,%Race%}=Tiefling?{Calc~6+%CHABonus%}/{Calc~5+%CHABonus%}}}
_   /{If~{Param~Race,%Race%}=Tiefling?{Color~Peru,{Calc~4+%CHABonus%}}/{Calc~3+%CHABonus%}
_}}
_/day; ClericChannelDCReplace)[FontE]
_ClericChannelSpecialReplace

:Channel_Special
1,{If~%Show%=1?{Color~Green,[FontB=1]
_{If~{Find~1,Alignment Channel,%FeatsAll%}!=0? or Outsiders (C;E;G;L choose each time)}
_{If~{Find~1,Channel Smite,%FeatsAll%}!=0? or Channel Smite (SWIFT; 1 attack)}
_{If~{Find~1,Elemental Channel,%FeatsAll%}!=0? or Elementals (A;E;F;W choose each time)}
_{If~{Find~1,Command Undead,%FeatsAll%}!=0? +Command Undead (CHAWillDCReplace; max %CharacterLevel% HD)}
_{If~{Find~1,Turn Undead,%FeatsAll%}!=0? +Turn Undead (CHAWillDCReplace; panicked 1 minute (drop anything; flee at random max MV; -2 Saves[Slash]Skill[Slash]Ability checks; cowers if cornered with Total Defense))}
_[FontE]}}

# --------------------
:DruidSpecialAbilities
1-3,Divine Spells
4-100,[DruidSpecialAbilities=1], Wild Shape |Rule=[WildShapeDescription=%CharacterLevel%]DRUWildArmor|[PrRule]

:WildShapeDescription
1-3,
4-5,S-M animal; 1/day; {Bold~%CharacterLevel%} hours; as {Italic~beast shape I}|BeastShape>1|
6-7,T-S-M-L animal; S elemental; 2/day; {Bold~%CharacterLevel%} hours; as {Italic~beast shape II, elemental body I}|BeastShape>2||ElementalBody>1|
8-9,D-T-S-M-L-H animal; S-M elemental; S-M plant; 3/day; {Bold~%CharacterLevel%} hours; as {Italic~beast shape III, elemental body II, plant shape I}|BeastShape>3||ElementalBody>2||PlantShape>1|
10-11,D-T-S-M-L-H animal; S-M-L elemental; S-M-L plant; 4/day; {Bold~%CharacterLevel%} hours; as {Italic~beast shape III, elemental body III, plant shape II}|BeastShape>3||ElementalBody>3||PlantShape>2|
12-13,D-T-S-M-L-H animal; S-M-L-H elemental; S-M-L-H plant; 5/day; {Bold~%CharacterLevel%} hours; as {Italic~beast shape III, elemental body IV, plant shape III}|BeastShape>3||ElementalBody>4||PlantShape>3|
14-15,D-T-S-M-L-H animal; S-M-L-H elemental; S-M-L-H plant; 6/day; {Bold~%CharacterLevel%} hours; as {Italic~beast shape III, elemental body IV, plant shape III}|BeastShape>3||ElementalBody>4||PlantShape>3|
16-17,D-T-S-M-L-H animal; S-M-L-H elemental; S-M-L-H plant; 7/day; {Bold~%CharacterLevel%} hours; as {Italic~beast shape III, elemental body IV, plant shape III}|BeastShape>3||ElementalBody>4||PlantShape>3|
18-19,D-T-S-M-L-H animal; S-M-L-H elemental; S-M-L-H plant; 8/day; {Bold~%CharacterLevel%} hours; as {Italic~beast shape III, elemental body IV, plant shape III}|BeastShape>3||ElementalBody>4||PlantShape>3|
20-100,D-T-S-M-L-H animal; S-M-L-H elemental; S-M-L-H plant; At Will; {Bold~%CharacterLevel%} hours; as {Italic~beast shape III, elemental body IV, plant shape III}|BeastShape>3||ElementalBody>4||PlantShape>3|

# -------------------
:MonkSpecialAbilities
1-2,{Reset~MonkBonusFeats}
_Unarmed Strike ([MonkSpecialAbilitiesUnarmed=%CharacterLevel%])
#_, Flurry of Blows ([MonkSpecialAbilitiesFlurry=%CharacterLevel%])
_, Flurry of Blows|Rule=can substitute with disarm; sunder; or trip|[PrRule]
_, Bonus Feats|Rule=MONKFEATS; NO prerequisites required|[PrRule]
_, Stunning Fist{If~%CharacterLevel%>=4?|Rule=Stun {Bold~or} [MonkSpecialAbilitiesStunningFist=%CharacterLevel%]|[PrRule]}
3,[MonkSpecialAbilities=1], Maneuver Training|MonkManeuverTraining=%CharacterLevel%|
4-14,[MonkSpecialAbilities=3], Ki Pool|Rule=[MonkKiPool]|[PrRuleAlways]
15-100,[MonkSpecialAbilities=4], Quivering Palm|Rule=(su) 1/day; can try to kill (FREE) within {Bold~%CharacterLevel%} days; Fort DC{Bold~WISDCReplace}; max 1 active|[PrRule]

:MonkKiPool
1,|MonkKiPoolDR=[KiPoolDetermination=%CharacterLevel%]|%MonkKiPoolDR% (must have at least 1+KP); 
_MONKKIPOOL KP/day; 
_1 KP (SWIFT) = +1 att on Flurry; +20' MV 1r; +4 dodge AC 1r

:MonkBonusFeatsNumber
1,1
2-5,2
6-9,3
10-13,4
14-17,5
18-100,6

:!MonkBonusFeats
1,Catch Off-Guard
2,Combat Reflexes
3,Deflect Arrows
4,Dodge
5,Improved Grapple
6,Scorpion Style
7,Throw Anything
# Level 6
8,{If~%CharacterLevel%>=6?Gorgons Fist/[MonkBonusFeats]}
9,{If~%CharacterLevel%>=6?Improved Bull Rush/[MonkBonusFeats]}
10,{If~%CharacterLevel%>=6?Improved Disarm/[MonkBonusFeats]}
11,{If~%CharacterLevel%>=6?Improved Feint/[MonkBonusFeats]}
12,{If~%CharacterLevel%>=6?Improved Trip/[MonkBonusFeats]}
13,{If~%CharacterLevel%>=6?Mobility/[MonkBonusFeats]}
# Level 10
14,{If~%CharacterLevel%>=10?Improved Critical/[MonkBonusFeats]}
15,{If~%CharacterLevel%>=10?Medusas Wrath/[MonkBonusFeats]}
16,{If~%CharacterLevel%>=10?Snatch Arrows/[MonkBonusFeats]}
17,{If~%CharacterLevel%>=10?Spring Attack/[MonkBonusFeats]}

:MonkSpecialAbilitiesUnarmed
#1-3,1d4/1d6/1d8
1-3,[Equipment.SZ1d6=%Size%]
#4-7,1d6/1d8/2d6
4-7,[Equipment.SZ1d8=%Size%]
#8-11,1d8/1d10/2d8
8-11,[Equipment.SZ1d10=%Size%]
#12-15,1d10/2d6/3d6
12-15,[Equipment.SZ2d6=%Size%]
#16-19,2d6/2d8/3d8
16-19,[Equipment.SZ2d8=%Size%]
#20-100,2d8/2d10/4d8
20-100,[Equipment.SZ2d10=%Size%]

### UNUSED XXX
:MonkSpecialAbilitiesFlurry
1,-1/-1
2,+0/+0
3,+1/+1
4,+2/+2
5,+3/+3
6,+4/+4/-1
7,+5/+5/+0
8,+6/+6/+1/+1
9,+7/+7/+2/+2
10,+8/+8/+3/+3
11,+9/+9/+4/+4/-1
12,+10/+10/+5/+5/+0
13,+11/+11/+6/+6/+1
14,+12/+12/+7/+7/+2
15,+13/+13/+8/+8/+3/+3
16,+14/+14/+9/+9/+4/-1
17,+15/+15/+10/+10/+5/+5/+0
18,+16/+16/+11/+11/+6/+6/+1
19,+17/+17/+12/+12/+7/+7/+2
20-100,+18/+18/+13/+13/+8/+8/+3

:MonkSpecialAbilitiesStunningFist
1-3,{Stop~ERROR MonkSpecialAbilitiesStunningFist}
4-7,fatigued
8-11,fatigued, sickened
12-15,fatigued, sickened (1 min), staggered (1d6+1r)
16-19,fatigued, sickened (1 min), staggered (1d6+1r), blind or deaf (permanent)
20-100,fatigued, sickened (1 min), staggered (1d6+1r), blind or deaf (permanent), paralyzed (1d6+1r)

:KiPoolDetermination
1-3,{Stop~ERROR KiPoolDetermination}
4-6,magic
7-9,magic, cold iron, silver
10-15,magic, cold iron, silver, lawful
16-100,magic, cold iron, silver, adamantine

# ----------------------
:PaladinSpecialAbilities
1-3,Smite EvilPALSmiteBAnish ([PaladinSpecialAbilitiesSmite=%CharacterLevel%]/day)|Rule=SWIFT vs ONE target= +{Bold~CHABONUSSMITE} AC vs target; +{Bold~CHABONUSSMITE} attack/+{Bold~%CharacterLevel%} dmg vs evil (all attacks) or +{Bold~{Calc~2*%CharacterLevel%}} dmg vs evil outsiders/dragon/undead (only 1st successful attack; normal +%CharacterLevel% after); bypass DR; lasts until target is dead or you restPALHOLYCHAMPION|[PrRule]
4,[PaladinSpecialAbilities=1], Channel Positive Energy |Rule=PALCHANNELENERGY|[PrRuleAlways]
_[Channel_Special], Divine Spells |Rule=CL{Bold~{Calc~%CharacterLevel%-3}}|[PrRuleAlways]
5-100,[PaladinSpecialAbilities=4], Divine Bond |Rule=[PaladinSpecialAbilitiesBond=%PaladinDivineBond%]|[PrRuleAlways]

:PaladinSpecialAbilitiesSmite
1-3,1
4-6,2
7-9,3
10-12,4
13-15,5
16-18,6
19-100,7

:PaladinSpecialAbilitiesBond
1,|PaladinDivineBond={Dice~1d2+1}|[PaladinSpecialAbilitiesBond=%PaladinDivineBond%]
2,Enhanced weapon; |PALWpnPowers=0||PALWpnBonus=1||TempNumber={Trunc~{Calc~((%CharacterLevel%-5)/3)}}|{Calc~%TempNumber%+1} powers; {While~%TempNumber%,[PaladinSpecialAbilitiesBondWpn]}
_STANDARD; [PaladinSpecialAbilitiesBondMountDay=%CharacterLevel%]/day; {Bold~%CharacterLevel%} min; +%PALWpnBonus%{If~%PALWpnPowers%!=0? {Italic~(%PALWpnPowers%)}}
3,{If~%CharacterLevel%>=11?Celestial }Mount (FULL; call [PaladinSpecialAbilitiesBondMountDay=%CharacterLevel%]/day{If~%CharacterLevel%>=15?, SR{Calc~%CharacterLevel%+11}})
_|PALAnimalCompanion=%CharacterLevel%|

:!PaladinSpecialAbilitiesBondWpn
1,|PALWpnBonus+1||TempNumber-1|
2,|PALWpnBonus+1||TempNumber-1|
3,|PALWpnBonus+1||TempNumber-1|
4,|PALWpnBonus+1||TempNumber-1|
5,|PALWpnBonus+1||TempNumber-1|
6,{If~%TempNumber%>=2?|TempNumber-2|{If~%PALWpnPowers%=0?|PALWpnPowers=axiomatic|/|PALWpnPowers&, axiomatic|}}
7,{If~%TempNumber%>=4?|TempNumber-4|{If~%PALWpnPowers%=0?|PALWpnPowers=brilliant energy|/|PALWpnPowers&, brilliant energy|}}
8,{If~%PALWpnPowers%=0?|PALWpnPowers=defending|/|PALWpnPowers&, defending|}|TempNumber-1|
9,{If~%TempNumber%>=2?|TempNumber-2|{If~%PALWpnPowers%=0?|PALWpnPowers=disruption|/|PALWpnPowers&, disruption|}{Lockout~PaladinSpecialAbilitiesBondWpn,13}}
10,{If~%PALWpnPowers%=0?|PALWpnPowers=flaming|/|PALWpnPowers&, flaming|}|TempNumber-1|
11,{If~%TempNumber%>=2?|TempNumber-2|{If~%PALWpnPowers%=0?|PALWpnPowers=flaming burst|/|PALWpnPowers&, flaming burst|}}
12,{If~%TempNumber%>=2?|TempNumber-2|{If~%PALWpnPowers%=0?|PALWpnPowers=holy|/|PALWpnPowers&, holy|}}
13,{If~%PALWpnPowers%=0?|PALWpnPowers=keen|/|PALWpnPowers&, keen|}{Lockout~PaladinSpecialAbilitiesBondWpn,9}|TempNumber-1|
14,{If~%PALWpnPowers%=0?|PALWpnPowers=merciful|/|PALWpnPowers&, merciful|}|TempNumber-1|
15,{If~%TempNumber%>=3?|TempNumber-3|{If~%PALWpnPowers%=0?|PALWpnPowers=speed|/|PALWpnPowers&, speed|}}

:PaladinSpecialAbilitiesBondMountDay
1-4,{Stop~ERROR PaladinSpecialAbilitiesBondMountDay}
5-8,1
9-12,2
13-16,3
17-100,4

:DetermineSpellCasting
1-3,
4-5,{If~%INTBonus%>0?Cast Divine Spells}
6-20,Cast Divine Spells

# ---------------------
:RangerSpecialAbilities
1,|FavoredEnemies={Trunc~{Calc~((%CharacterLevel%/5)+1)}}|
_%FavoredEnemies% Favored Enemies 
_|TempNumber=%FavoredEnemies%|
_{While~%TempNumber%,|RNGFavEnem%TempNumber%=[RangerFavoredEnemies]||RNGFavEnemB%TempNumber%+2||TempNumber-1|{If~%TempNumber%>0?|RNGFavEnemB{Dice~1d%FavoredEnemies%}+2|}}
_|Temp1=+%RNGFavEnemB1% %RNGFavEnem1%|
_{If~%RNGFavEnemB2%>0?|Temp1&;+%RNGFavEnemB2% %RNGFavEnem2%|}
_{If~%RNGFavEnemB3%>0?|Temp1&;+%RNGFavEnemB3% %RNGFavEnem3%|}
_{If~%RNGFavEnemB4%>0?|Temp1&;+%RNGFavEnemB4% %RNGFavEnem4%|}
_{If~%RNGFavEnemB5%>0?|Temp1&;+%RNGFavEnemB5% %RNGFavEnem5%|}
_|Temp1={OrderDesc~";",%Temp1%}|
_|Temp1={Replace~;,; ,%Temp1%}|
_|Temp1={CommaReplace~1,;,%Temp1%}|
_(%Temp1%)
_|Rule=+BONUS vs Bluff; Knowledge (untrained); Perception; Sense Motive; Survival; Weapon attack + damage rolls; Free language|[PrRule]
#
2-10,[RangerSpecialAbilities=1], {If~%RNGCombatStyle%=1?|RNGCombatStyle={Dice~1d2+1}|}
_[RNGCombatStyleBranch=%CharacterLevel%]: {Param~RNGCombatStyle,%RNGCombatStyle%}|Rule=RNGFEATS|[PrRule]
11-18,[RangerSpecialAbilities=2], Quarry|Rule=ex; {If~%CharacterLevel%>=19?FREE/STANDARD} (one favored enemy target in LoS) = Take{If~%CharacterLevel%>=19?20/10} Track at normal MV; +{If~%CharacterLevel%>=19?4/2} insight attack; critical treats automatically confirmed; max 1 quarry/24h unless dead (new quarry in {If~%CharacterLevel%>=19?10 min/1 hr})|[PrRule]
19,[RangerSpecialAbilities=11], Improved Quarry
20-100,[RangerSpecialAbilities=19], Master Hunter|Rule=ex; alwayx max MV to Track; STANDARD (ONE attack vs Favored Enemy) = dmg +Fort RNGMasterHunter or die/unconscious; 1/day vs each Favored Enemy type; max 1/target/24 hr|[PrRule]

;!RangerFavoredEnemies
2,Aberration
2,Animal
2,Construct
3,Dragon
2,Fey
1,Humanoid (aquatic)
1,Humanoid (dwarf)
1,Humanoid (elf)
1,Humanoid (giant)
1,Humanoid (goblinoid)
1,Humanoid (gnoll)
1,Humanoid (gnome)
1,Humanoid (halfling)
1,Humanoid (human)
1,Humanoid (orc)
1,Humanoid (reptilian)
1,Humanoid (others)
3,Magical beast
3,Monstrous humanoid
1,Ooze
1,Outsider (air)
1,Outsider (chaotic)
1,Outsider (earth)
1,Outsider (evil)
1,Outsider (fire)
1,Outsider (good)
1,Outsider (lawful)
1,Outsider (native)
1,Outsider (water)
1,Plant
3,Undead
1,Vermin

:RNGCombatStyleBranch
1-4,Combat Style
5-10,Improved Combat Style
11-100,Combat Style Mastery

# See Lockout in "GenerateClassFeatsRanger" if you add some feats
:!RNGCombatStyleBranch2
1,Point-Blank Shot{Unlock~RNGCombatStyleBranch2,2-4,8}
2,Far Shot
3,Precise Shot{Unlock~RNGCombatStyleBranch2,5}
4,Rapid Shot{Unlock~RNGCombatStyleBranch2,6}
5,{If~%CharacterLevel%>=6?Improved Precise Shot{Unlock~RNGCombatStyleBranch2,7}/[RNGCombatStyleBranch2]}
6,{If~%CharacterLevel%>=6?Many Shot/[RNGCombatStyleBranch2]}
7,{If~%CharacterLevel%>=10?Pinpoint Targeting/[RNGCombatStyleBranch2]}
8,{If~%CharacterLevel%>=10?Shot on the run/[RNGCombatStyleBranch2]}

# See Lockout in "GenerateClassFeatsRanger" if you add some feats
:!RNGCombatStyleBranch3
1,{If~%DEX%>=15?Two-Weapon Fighting{Unlock~RNGCombatStyleBranch3,4-6}/[RNGCombatStyleBranch3]}
2,Quick Draw
3,Improved Shield Bash{If~%DEX%<15?{Unlock~RNGCombatStyleBranch3,9}}
4,Double Slice{Unlock~RNGCombatStyleBranch3,8}
5,{If~%CharacterLevel%>=6?Improved Two-Weapon Fighting{Unlock~RNGCombatStyleBranch3,7-8}/[RNGCombatStyleBranch3]}
6,{If~%CharacterLevel%>=6?Two-Weapon Defense/[RNGCombatStyleBranch3]}
7,{If~%CharacterLevel%>=10?Greater Two-Weapon Fighting/[RNGCombatStyleBranch3]}
8,{If~%CharacterLevel%>=10?Two-Weapon Rend/[RNGCombatStyleBranch3]}
9,Shield Focus{Unlock~RNGCombatStyleBranch3,10}
10,Greater Shield Focus{Unlock~RNGCombatStyleBranch3,11}
11,Improved Initiative

# --------------------
:RogueSpecialAbilities
1-2,|Sneak={Ceil~{Calc~(%CharacterLevel%/2)}}| ROGMASTERSTRIKE1Sneak Attack (%Sneak%d6 = [SneakAttackReroll=%Sneak%])ROGMASTERSTRIKE
_, Trap Finding |ROGTrap={Trunc~{Calc~(%CharacterLevel%/2)}}|{If~%ROGTrap%<1?|ROGTrap=1|}+%ROGTrap%
3-19,[RogueSpecialAbilities=2], Trap Sense |ROGTrapSense={Trunc~{Calc~(%CharacterLevel%/3)}}|+%ROGTrapSense%
20-100,[RogueSpecialAbilities=3], Master Strike|ROGMasterStrike=Yes|

# -----------------------
:SorcererSpecialAbilities
1-100,|Bloodline=[SorcererBloodline=%SorcererBlood%]|Cast Arcane Spells, Cantrips

# ---------------------
# If you add another School speciality for Wizards - modify the "WizardSchoolTempWeighted" subtable.
# Also modify "WizardSchool" subtable.
:WizardSpecialAbilities
1-4,Cast Arcane Spells, Cantrips, [WizAB1=%WizardSchoolTemp%]
5,[WizardSpecialAbilities=1], [DetermineBonusWizardFeats]
6-7,[WizardSpecialAbilities=5][WizAB6=%WizardSchoolTemp%]
8-100,[WizardSpecialAbilities=6][WizAB8=%WizardSchoolTemp%]

:WizardDetermineSchool
1,{If~{Param~WizardSchool,%WizardSchool%}=Random?|WizardSchoolTemp=[WizardSchoolTempWeighted]|/|WizardSchoolTemp=%WizardSchool%|}
_|WIZSchool=[WizardSchool=%WizardSchoolTemp%]|

### WizardSchool ###
# Below, 50% of wizards are "Universalists"
;WizardSchoolTempWeighted
#abjurer
1,2
#conjurer
1,3
#diviner
1,4
#enchanter
1,5
#evoker
1,6
#illusionist
1,7
#necromancer
1,8
#transmuter
1,9
#universalist
8,10

### WizardSchool ###
:WizardSchool
1,{Stop~ERROR WizardSchool}
2,abjurer
3,conjurer
4,diviner
5,enchanter
6,evoker
7,illusionist
8,necromancer
9,transmuter
10,universalist

:DetermineBonusWizardFeats
1,|TempNumber=[DetermineBonusWizardFeats2=%CharacterLevel%]|%TempNumber% Bonus Feats

# Leave ERROR like this, for Pathfinder Feats
:DetermineBonusWizardFeats2
1-4,ERROR
5-9,1
10-14,2
15-19,3
20-100,4

# |Rule=|[PrRule]
# level 1 Ability
:WizAB1
1,{Stop~ERROR WizAB1}
2,Resistance (Ex)|WIZAbjResist={If~%CharacterLevel%>=11?10/5}||Rule=Choose ENERGY type each day; {If~%CharacterLevel%>=20?Immunity/Resist %WIZAbjResist%}|[PrRule]
_, Protective Ward (Su)|Rule=STANDARD, you and allies in 10' radius, +{Bold~[WizAbjProt=%CharacterLevel%]} deflection AC, DU={Bold~INTBONUSREPLACE} rounds, INTPERDAYREPLACE/day|[PrRule]
3,Summoner's Charm (Su)|Rule=conjuration (summoning) spells = DU +{Bold~{If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}}}r (not doubled with Extend Spell){If~%CharacterLevel%>=20?; you can change {Italic~summon monster} spells to PERMANENT but only on ONE spell at once}|[PrRule]
_, Acid Dart (Sp)|Rule=30', ranged touch, 1d6+{Trunc~{Calc~(%CharacterLevel%/2)}} dmg, ignores SR, INTPERDAYREPLACE/day|[PrRule]
4,Forewarned (Su)|WIZDivInit={If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}}||Rule=+{Bold~%WIZDivInit%} initiative{If~%CharacterLevel%>=20? (roll is always 20)}, always act in surprise round, FF until action|[PrRule]
_, Diviner's Fortune (Sp)|Rule=STANDARD, touch any creature, +{Bold~{If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}}} insight attack/skill/ability/saves for 1r, INTPERDAYREPLACE/day|[PrRule]
5,Enchanting Smile (Su)|WIZEncSmile=[WizSmile=%CharacterLevel%]||Rule=+{Bold~%WIZEncSmile%} Bluff/Diplomacy/Intimidate|[PrRule]
_, Dazing Touch (Sp)|Rule=Melee touch vs Living creature = Dazed 1r (NO actions, max HD=Level), INTPERDAYREPLACE/day|[PrRule]
6,Intense Spells (Su)|WIZEvoIntense={If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}}||Rule=+{Bold~%WIZEvoIntense%} dmg with evocation spells dealing damage (not increased by Empower Spell or similar){If~%CharacterLevel%>=20?, 2x roll vs SR and take the better}|[PrRule]
_, Force Missile (Sp)|Rule=STANDARD ({Bold~{Calc~100+(10*%CharacterLevel%)}}') (auto-hit), 1d4+{Bold~%WIZEvoIntense%}, INTPERDAYREPLACE/day|[PrRule]
7,Extended Illusion (Su)|Rule=illusion spells = DU +{Bold~{If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}}}r (not doubled with Extend Spell){If~%CharacterLevel%>=20?; you can change one illusion "Concentration" spell to PERMANENT but only on ONE spell at once}|[PrRule]
_, Blinding Ray (Sp)|Rule=STANDARD, 30', ranged touch, blinded 1r (if HD>level = dazzled (-1 attack/perception)), INTPERDAYREPLACE/day|[PrRule]
8,Power over Undead (Su)|Rule=Channel Energy WIZNecPerDay/day with WIZNecPowerFeat feat, WIZNecSave{If~%CharacterLevel%>=20? Undeads cannot add their Channel Resistance to this save}; WIZNecPowerFeatDescription|[PrRule]
_, Grave Touch (Sp)|Rule=STANDARD, touch attack vs living = shaken {If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}}r, if HD<%CharacterLevel% = frightened 1r if already shaken, INTPERDAYREPLACE/day|[PrRule]
9,Physical Enhancement (Su)|WIZTraPE=[WIZTraPE=%CharacterLevel%]|[WIZTraSetPE]{If~%CharacterLevel%>=20?[WIZTraSetPE]}|Rule=+{Bold~%WIZTraPE%} to {If~%WIZTraPESTR%=Yes?{Color~DarkCyan,STR}/STR}/{If~%WIZTraPEDEX%=Yes?{Color~DarkCyan,DEX}/DEX}/{If~%WIZTraPECON%=Yes?{Color~DarkCyan,CON}/CON} (choose {Bold~{If~%CharacterLevel%>=20?two/one}}), can change when you prepare spells|[PrRule]
_, Telekinetic Strike (Sp)|Rule=30', ranged touch, 1d4+{Trunc~{Calc~(%CharacterLevel%/2)}} blunt dmg, INTPERDAYREPLACE/day|[PrRule]
10,Hand of the Apprentice (Su)|WIZUniHand=Yes||Rule=STANDARD, attack with melee weapon at 30' (+INT instead of +STR/DEX), INTPERDAYREPLACE/day|[PrRule]

# level 6 ability
:WizAB6
1,{Stop~ERROR WizAB6}
2,, Energy Absorption (Ex)|WIZAbjAbsorption={Calc~3*%CharacterLevel%}||Rule={Bold~%WIZAbjAbsorption%}/day|[PrRule]
3-10,|Rule=0|

# level 8 ability
:WizAB8
1,{Stop~ERROR WizAB8}
2,|Rule=0|
3,, Dimensional Step (Sp)|Rule=STANDARD; teleport {Bold~{Calc~30*%CharacterLevel%}}'/day, no AO, can bring other = +1x cost/creature|[PrRule]
4,, Scrying Adept (Su)|Rule=always aware when observed by magic (as {Italic~detect scrying}), when you scry treat subjects one step more familiar (very familiar = -10)|[PrRule]
5,, Aura of Despair (Su)|Rule=30' aura; {Bold~%CharacterLevel%}r/day = Enemies -2 ability/attack/damage/save/skill, mind-affecting|[PrRule]
6,, Elemental Wall (Sp)|Rule=create wall of energy (acid, cold, electric, or fire), at {Bold~{Calc~100+(10*%CharacterLevel%)}}', max {Bold~{Calc~20*%CharacterLevel%}}' long or {Bold~{Trunc~{Calc~%CharacterLevel%/2}}}' radius, 20' high, 2d4 ([~Dice Reroll.2d4]) at 10'/1d4 ([~Dice Reroll.1d4]) 11-20', 2d6+%CharacterLevel% ([~Dice Reroll.2d6]) if pass through (x2 dmg vs undead), {Bold~%CharacterLevel%}r/day|[PrRule]
7,, Invisibility Field (Sp)|Rule=SWIFT, {Italic~greater invisibility}, {Bold~%CharacterLevel%}r/day|[PrRule]
8,, Life Sight (Su)|Rule=blindsight  [WIZNecBlindsight=%CharacterLevel%]', only detect living and undead, know whether living/undead, {Bold~%CharacterLevel%}r/day|[PrRule]
9,, Change Shape (Sp)|Rule=change shape {Bold~%CharacterLevel%}r/day as {Italic~[WIZTraChangeShape=%CharacterLevel%]}|[PrRule]
10,, Metamagic Mastery (Su)|Rule=apply metamagic feat freely, [WizMastery=%CharacterLevel%]/day (# use = increase of level)|[PrRule]

:WizAbjProt
1-4,1
5-9,2
10-14,3
15-19,4
20-24,5
25-29,6
30-34,7
35-39,8
40-100,9

:WIZNecBlindsight
1-11,10
12-15,20
16-19,30
20-23,40
24-27,50
28-31,60
32-35,70
36-39,80
40-43,90
44-100,100

:WizSmile
1-4,2
5-9,3
10-14,4
15-19,5
20-100,6

:WIZTraPE
1-4,1
5-9,2
10-14,3
15-19,4
20-100,5

:WIZTraChangeShape
1-11,beast shape II|BeastShape>2| or elemental body I|ElementalBody>1|
12-100,beast shape III|BeastShape>3| or elemental body II|ElementalBody>2|

;!WIZTraSetPE
1,|STR+%WIZTraPE%||WIZTraPESTR=Yes|
6,|DEX+%WIZTraPE%||WIZTraPEDEX=Yes|
3,|CON+%WIZTraPE%||WIZTraPECON=Yes|

:WizMastery
1-9,1
10-11,2
12-13,3
14-15,4
16-17,5
18-19,6
20-21,7
22-23,8
24-25,9
26-27,10
28-29,11
30-31,12
32-33,13
34-35,14
36-37,15
38-39,16
40-100,17

#---------------------
:AdeptSpecialAbilities
1-100,None

:AdeptTypeDetermination
1,{If~%AdeptType%=1?|AdeptTypeChosen=[AdeptTypeRandom]|/|AdeptTypeChosen={Param~AdeptType,%AdeptType%}|}

;AdeptTypeRandom
3,Adept
1,Seer
2,Smiter

#---------------------
:CommonerSpecialAbilities
1-100,None

:CommonerTypeDetermination
1,{If~{Param~CommonerType,%CommonerType%}=Random?|CommonerTypeChosen=[CommonerTypeRandom]|/|CommonerTypeChosen={Param~CommonerType,%CommonerType%}||CommonerTypeCode=%CommonerType%|}

;CommonerTypeRandom
5,Artisan ([~Pathfinder Skills.DetermineCraftRandom])|CommonerTypeCode=2|
1,Doctor|CommonerTypeCode=2|
10,[~Creatures.Animal2] farmer|CommonerTypeCode=2|
10,Farmer|CommonerTypeCode=2|
1,Militia|CommonerTypeCode=2|
1,Miner|CommonerTypeCode=2|
2,Porter|CommonerTypeCode=2|
1,Traitor|CommonerTypeCode=2|
1,{If~%CharacterLevel%>=10?Village Elder|CommonerTypeCode=2|/[CommonerTypeRandom]}
10,[~Miscellaneous.OccupationsMeanings]|CommonerTypeCode=2|
5,Townsperson|CommonerTypeCode=2|
51,Standard|CommonerTypeCode=2|
1,{Color~DarkCyan,Beggar}|CommonerTypeCode=3|
1,{Color~DarkCyan,Prostitute}|CommonerTypeCode=4|

#---------------------
:ExpertSpecialAbilities
1-100,None

:ExpertTypeDetermination
1,{If~%ExpertType%=1?|ExpertTypeChosen=[ExpertTypeRandom]|/|ExpertTypeChosen={Param~ExpertType,%ExpertType%}||ExpertTypeCode=%ExpertType%|}

### NEW CLASS ### Expert
;ExpertTypeRandom
1,Standard|ExpertTypeCode=2|
1,Blacksmith|ExpertTypeCode=3|
1,Courtesan|ExpertTypeCode=4|
1,Fence|ExpertTypeCode=5|
1,Jeweller|ExpertTypeCode=6|
1,Pawnbroker|ExpertTypeCode=7|
1,Sage_Scholar|ExpertTypeCode=8|
1,Locksmith|ExpertTypeCode=9|
1,Merchant|ExpertTypeCode=10|

#---------------------
:WarriorSpecialAbilities
1-100,None

:WarriorTypeDetermination
1,|WarriorTypeChosen=[WarriorTypeRandom]|

### NEW CLASS ### Warrior
;WarriorTypeRandom
10,Standard
1,Bodyguard
1,Militia
1,Thug
5,{Cap~[BandTypeSingle]}

# -------------------------------------------------------------------------------
# Special Qualities

### NEW CLASS ###
:SetSpecialQualities
1,|SQ=[SpecialQualitiesBranch=%Class%]|

:SpecialQualitiesBranch
1,[FighterSpecialQualities=%CharacterLevel%]
2,[BarbarianSpecialQualities=%CharacterLevel%]
3,[BardSpecialQualities=%CharacterLevel%]
4,[ClericSpecialQualities=%CharacterLevel%]
5,[DruidSpecialQualities=%CharacterLevel%]
6,[MonkSpecialQualities=%CharacterLevel%]
7,[PaladinSpecialQualities=%CharacterLevel%]
8,[RangerSpecialQualities=%CharacterLevel%]
9,[RogueSpecialQualities=%CharacterLevel%]
10,[SorcererSpecialQualities=%CharacterLevel%]
11,[WizardSpecialQualities=%CharacterLevel%]
12,[AdeptSpecialQualities=%CharacterLevel%]
13-16,None

# ----------------------
:FighterSpecialQualities
1,None
2-100,Bravery (Ex)|FTR_Bravery=[FighterSpecialQualitiesBravery=%CharacterLevel%]||Rule=+%FTR_Bravery% Will vs fear|[PrRule]

:FighterSpecialQualitiesBravery
1,{Stop~ERROR FighterSpecialQualitiesBravery}
2-5,1
6-9,2
10-13,3
14-17,4
18-100,5

# ------------------------
:BarbarianSpecialQualities
1,Fast Movement|BbnFastMV=10|
2,[BarbarianSpecialQualities=1], Uncanny Dodge|UncannyDodge+1||Rule=not FF; keep Dex vs invisible|[PrRule]
3-4,[BarbarianSpecialQualities=2], Trap Sense +[BonusesToTrapsBarbarian]
5-6,[BarbarianSpecialQualities=3], Improved Uncanny Dodge|UncannyDodge+1||Rule=not flanked; not sneak attacked (except 4+ levels)|[PrRule]
7-100,[BarbarianSpecialQualities=5], DR [DamageReductionCalculation]/-{IIf~%BbnIncreaseDR%>0? (+%BbnIncreaseDR%/- in rage)}

:BonusesToTrapsBarbarian
1,|BbnTrapSense=%CharacterLevel%||BbnTrapSense\3|%BbnTrapSense%

:DamageReductionCalculation
1,|BbnDR=%CharacterLevel%||BbnDR-7||BbnDR\3|%BbnDR%

# -------------------
:BardSpecialQualities
1,Bardic Knowledge|BrdBardicKnowledge=%CharacterLevel%||BrdBardicKnowledge\2||BrdBardicKnowledge>1||Rule=+%BrdBardicKnowledge% Knowledge checks|[PrRule]
_, Countersong (su) (BF)|Rule=30', Perform = all saves vs sonic/language-dependent or new save|[PrRule]
_, Distraction (su) (BF)|Rule=30', Perform = all saves vs illusion (pattern or figment) or new save|[PrRule]
2,[BardSpecialQualities=1], Versatile Performance|Rule=[BardSpecialQualitiesVersatile=%CharacterLevel%]; replace certain skill checks with Perform|[PrRule]
_, Well-versed|BrdWellVersed=Yes||Rule=+4 vs bardic performance, sonic, and language-dependent effects|[PrRule]
3-4,[BardSpecialQualities=2], Inspire Competence (su) (BF) +[BardSpecialAbilitiesCompetence=%CharacterLevel%]|Rule=allies at 30' (not Bard) vs particular skill|[PrRule]
5-9,[BardSpecialQualities=3], Lore Master|Rule=Take 10 all Knowledge with ranks; STANDARD [BardSpecialQualitiesLoremaster=%CharacterLevel%]/day Take 20|[PrRule]
10-11,[BardSpecialQualities=5], Jack-of-all-trades|Rule=can use any skill untrained{If~%CharacterLevel%>=16?; all skills are class skills}{If~%CharacterLevel%>=19?; Take 10 all skills}|[PrRule]
12-100,[BardSpecialQualities=10], Soothing Performance (su) (BF)|Rule=4xFULL; cures 3d8+{If~%CharacterLevel%>15?15/%CharacterLevel%} to all creatures at 30' for whole performance|[PrRule]

:BardSpecialQualitiesVersatile
1,{Stop~ERROR BardSpecialQualitiesVersatile}
2-5,1
6-9,2
10-13,3
14-17,4
18-100,5

:BardFascinate
1-3,1
4-6,2
7-9,3
10-12,4
13-15,5
16-18,6
19-100,7

:BardSpecialQualitiesLoremaster
1-4,{Stop~ERROR BardSpecialQualitiesLoremaster}
5-10,1
11-16,2
17-100,3

# ---------------------
:ClericSpecialQualities
# XXX TO DO: Domains ___ look for Class Skills
1-100,Aura|Rule=for detect evil|[PrRule], Domains

# --------------------
:DruidSpecialQualities
1,Nature Bond ([DruidSpecialQualitiesNatureBond=%DruidNatureBond%])
_, Nature Sense, Orisons
_, Wild Empathy|Rule=as Diplomacy with animals; starting attitude: domestic= indifferent; wild= unfriendly|[PrRule]
2,[DruidSpecialQualities=1], Woodland Stride|Rule=normal move/no damage through any nonmagical undergrowth|[PrRule]
3,[DruidSpecialQualities=2], Trackless Step|Rule=no trail in natural surroundings|[PrRule]
4-8,[DruidSpecialQualities=3], Resist Nature's Lure|Rule=+4 save vs sp/su of feys and "plant" spells/effects|[PrRule]
9-12,[DruidSpecialQualities=4], Venom Immunity
13-14,[DruidSpecialQualities=9], A Thousand Faces|Rule={Italic~alter self} at will in normal form|[PrRule]
15-100,[DruidSpecialQualities=13], Timeless Body|TimelessBody=Yes||Rule=no aging penalty; no magical aging|[PrRule]

:DruidSpecialQualitiesNatureBond
1,|DruidNatureBond={Dice~1d14+1}|[DruidSpecialQualitiesNatureBond=%DruidNatureBond%]
2,Air domain
3,Animal domain
4,Earth domain
5,Fire domain
6,Plant domain
7,Water domain
8,Weather domain
9-15,Animal Companion|AnimalCompanion=%CharacterLevel%|

:DruideNatureBondBranch
1,{Stop~ERROR DruideNatureBondBranch}
2,[Air domain=%CharacterLevel%][DruideNatureBondBranch2]
3,[Animal domain=%CharacterLevel%][DruideNatureBondBranch2]
4,[Earth domain=%CharacterLevel%][DruideNatureBondBranch2]
5,[Fire domain=%CharacterLevel%][DruideNatureBondBranch2]
6,[Plant domain=%CharacterLevel%][DruideNatureBondBranch2]
7,[Water domain=%CharacterLevel%][DruideNatureBondBranch2]
8,[Weather domain=%CharacterLevel%][DruideNatureBondBranch2]
9-15,

:DruideNatureBondBranch2
1,<u>{Bold~[DruidSpecialQualitiesNatureBond=%DruidNatureBond%]</u>: }
_{Bold~Domain Powers: }%DomainPower%.
_<br>{Bold~Domain Spells: }{Italic~%DomainSpell%.}

:PrintAnimalCompanion
1,{If~%TestLog%=1?{Log~E:\log.txt,>>>>> Before PrintAnimalCompanion: AC= %AnimalCompanion%, ChooseRanks= %ChooseRanks%, GroupFlag= %GroupFlag%, Sz= %Size%, Heroic= %Heroic%, Val= %Valminder%}}
_<br><br>[Animal Companion Pathfinder.Start(2,%AnimalCompanion%,%ChooseRanks%,%GroupFlag%,%Size%,%Heroic%,%SubraceMaster%,%Valminder%)]

:PrintPALMount
1,<br><br>[Animal Companion Pathfinder.Start(3,%PALAnimalCompanion%,%ChooseRanks%,%GroupFlag%,%Size%,%Heroic%,%SubraceMaster%,%Valminder%)]

:PrintRNGAnimalCompanion
1,{If~%TestLog%=1?{Log~E:\log.txt,>>>>> Before PrintRNGAnimalCompanion: RNGAC= %RNGAnimalCompanion%, ChooseRanks= %ChooseRanks%, GroupFlag= %GroupFlag%, Sz= %Size%, Heroic= %Heroic%, Val= %Valminder%}}
_<br><br>[Animal Companion Pathfinder.Start(4,%RNGAnimalCompanion%,%ChooseRanks%,%GroupFlag%,%Size%,%Heroic%,%SubraceMaster%,%Valminder%)]

# -------------------
# |Rule=0|[PrRule]
:MonkSpecialQualities
1-2,{If~%CharacterLevel%>=2?Evasion|Evasion=Yes|/None}
3,[MonkSpecialQualities=1], Fast Movement (+|MonkFastMV=[MonkSpecialQualitiesMV=%CharacterLevel%]|%MonkFastMV%')
_, Still Mind|MonkStillMind=Yes|
4,[MonkSpecialQualities=3], Slow Fall ([SlowFallDetermination=%CharacterLevel%])|Rule=within arm's reach of wall|[PrRule]
5-6,[MonkSpecialQualities=4], High Jump|MonkHighJump=%CharacterLevel%||Rule=+%MonkHighJump% Acrobatics (Jump); no running start needed; 1 KP (SWIFT) = +20 Acrobatics (Jump) 1r|[PrRule]
_, Purity of Body|MonkPurity=Yes|
7-8,[MonkSpecialQualities=5], Wholeness of Body|Rule=(su) 2 KP (STANDARD) = heals {Bold~%CharacterLevel%} {If~%Valminder%=1?WP or VP/hp}|[PrRule]
9-10,[MonkSpecialQualities=7], Improved Evasion|Evasion=Improved|
11,[MonkSpecialQualities=9], Diamond Body|MonkDiamondBody=Yes||Rule=su|[PrRule]
12,[MonkSpecialQualities=11], Abundant Step|Rule=(su) 2 KP (MOVE) = {Italic~dimension door} {Bold~{Calc~(40*%CharacterLevel%)+400}'}; personal;  CL{Bold~%CharacterLevel%}|[PrRule]
13-16,[MonkSpecialQualities=12], Diamond Soul|Temp1=10||Temp1+%CharacterLevel%||SpellResistance>%Temp1%|
17-18,[MonkSpecialQualities=13], Timeless Body|TimelessBody=Yes||Rule=no aging penalty; no magical aging|[PrRule]
_, Tongue of the Sun and Moon|Rule=can speak with any creature|[PrRule]
19,[MonkSpecialQualities=17], Empty Body|Rule=(su) 3 KP = {Italic~etherealness}; personal; 1 minute|[PrRule]
20-100,[MonkSpecialQualities=19], Perfect Self|MonkPerfectSelf=Yes|

:MonkSpecialQualitiesMV
1-2,{Stop~ERROR MonkSpecialQualitiesMV}
3-5,10
6-8,20
9-11,30
12-14,40
15-17,50
18-20,60

:SlowFallDetermination
1-3,
4-5,20 ft.
6-7,30 ft.
8-9,40 ft.
10-11,50 ft.
12-13,60 ft.
14-15,70 ft.
16-17,80 ft.
18-19,90 ft.
20-100,Any Distance

# ----------------------
:PaladinSpecialQualities
1,{Reset~PaladinSpecialQualitiesMercy}
_Aura of Good|Rule=(ex) aura strength = Paladin's level for {Italic~detect good}|[PrRule]
_, <i>Detect Evil</i>|Rule=(sp) as spell {Bold~or} MOVE= 1 target at 60'; instant 3r effect|[PrRule]
2,[PaladinSpecialQualities=1], Divine Grace|PALSaveBonus=99|
_, Lay on HandsPALADDMercy |TempNumber={Trunc~{Calc~(%CharacterLevel%/2)}}||Rule=su; STANDARD/SWIFT (on self); %TempNumber%d6 (curePALHCLoH or harm undead; no save); PALLayOnHands/day|[PrRuleAlways]
3-7,[PaladinSpecialQualities=2], Aura of Courage|PALAuraCourage=Yes||Rule=su; allies 10' +4 morale vs fear|[PrRule]
_, Divine Health|PALDivineHealth=Yes|
_, Mercy {Lockout~PaladinSpecialQualitiesMercy,8-10}|Rule=PALMercy|[PrRuleAlways]
8-9,[PaladinSpecialQualities=3], Aura of Resolve|PALAuraResolve=Yes||Rule=su; allies 10' +4 morale vs charm|[PrRule]
11-13,[PaladinSpecialQualities=8], Aura of Justice|Rule=su; FREE; use 2x Smite= non-evil allies 10' can smite evil for 1 min. using your bonuses; must use before your next turn|[PrRule]
14-16,[PaladinSpecialQualities=11], Aura of Faith|PALAuraFaith=Yes||Rule=su; any attack vs enemy within 10' is treated as "good" vs DR|[PrRule]
17-19,[PaladinSpecialQualities=14], Aura of Righteousness|PALAuraRight=Yes||Rule=su; allies 10' +4 morale vs compulsion|[PrRule]
20-100,[PaladinSpecialQualities=17], Holy Champion|PALHolyChampion=Yes|

:!PaladinSpecialQualitiesMercy
1,fatigued{Unlock~PaladinSpecialQualitiesMercy,8}
2,shaken{Unlock~PaladinSpecialQualitiesMercy,9}
3,sickened{Unlock~PaladinSpecialQualitiesMercy,10}
4,{If~%CharacterLevel%>=6?dazed/[PaladinSpecialQualitiesMercy]}
5,{If~%CharacterLevel%>=6?diseased (for 1h)/[PaladinSpecialQualitiesMercy]}
6,{If~%CharacterLevel%>=6?staggered/[PaladinSpecialQualitiesMercy]}
7,{If~%CharacterLevel%>=9?cursed (for 1h)/[PaladinSpecialQualitiesMercy]}
8,{If~%CharacterLevel%>=9?exhausted/[PaladinSpecialQualitiesMercy]}
9,{If~%CharacterLevel%>=9?frightened/[PaladinSpecialQualitiesMercy]}
10,{If~%CharacterLevel%>=9?nauseated/[PaladinSpecialQualitiesMercy]}
11,{If~%CharacterLevel%>=9?poisoned (for 1h)/[PaladinSpecialQualitiesMercy]}
12,{If~%CharacterLevel%>=12?blinded/[PaladinSpecialQualitiesMercy]}
13,{If~%CharacterLevel%>=12?deafened/[PaladinSpecialQualitiesMercy]}
14,{If~%CharacterLevel%>=12?paralyzed/[PaladinSpecialQualitiesMercy]}
15,{If~%CharacterLevel%>=12?stunned/[PaladinSpecialQualitiesMercy]}

# ---------------------
:RangerSpecialQualities
1-2,{Reset~RangerFavoredTerrains}
_Track (|RNGTrack={Trunc~{Calc~(%CharacterLevel%/2)}}|{If~%RNGTrack%<1?|RNGTrack=1|}+%RNGTrack%)
_, Wild Empathy|Rule=as Diplomacy with animals; starting attitude: domestic= indifferent; wild= unfriendly|[PrRule]
3,[RangerSpecialQualities=1], Endurance
_, |FavoredTerrains={Trunc~{Calc~((%CharacterLevel%/5)+1)}}|
_%FavoredTerrains% Favored Terrains 
_|TempNumber=%FavoredTerrains%|
_{While~%TempNumber%,|RNGFavTer%TempNumber%=[RangerFavoredTerrains]||RNGFavTerB%TempNumber%+2||TempNumber-1|{If~%TempNumber%>0?|RNGFavTerB{Dice~1d%FavoredTerrains%}+2|}}
_|Temp1=+%RNGFavTerB1% %RNGFavTer1%|
_{If~%RNGFavTerB2%>0?|Temp1&;+%RNGFavTerB2% %RNGFavTer2%|}
_{If~%RNGFavTerB3%>0?|Temp1&;+%RNGFavTerB3% %RNGFavTer3%|}
_{If~%RNGFavTerB4%>0?|Temp1&;+%RNGFavTerB4% %RNGFavTer4%|}
_{If~%RNGFavTerB5%>0?|Temp1&;+%RNGFavTerB5% %RNGFavTer5%|}
_|Temp1={OrderDesc~";",%Temp1%}|
_|Temp1={Replace~;,; ,%Temp1%}|
_|Temp1={CommaReplace~1,;,%Temp1%}|
_(%Temp1%)
_|Rule=+BONUS vs Initiative; K(Geography), Perception, Stealth, Survival; leaves no tracks|[PrRule]
4-6,[RangerSpecialQualities=3], Divine Spells CL{Calc~%CharacterLevel%-3}
_, Hunter's Bond ([RangerSpecialQualitiesBond=%RNGHunterBond%])
7,[RangerSpecialQualities=4], Woodland Stride|Rule=normal move/no damage through any nonmagical undergrowth|[PrRule]
8,[RangerSpecialQualities=7], Swift Tracker|Rule=normal MV to follow tracks (no -5); only -10 at 2xMV|[PrRule]
9-11,[RangerSpecialQualities=8], Evasion|Evasion=Yes|
12-15,[RangerSpecialQualities=9], Camouflage|Rule=can hide in Favored Terrains even without cover or concealment|[PrRule]
16,[RangerSpecialQualities=12], Improved Evasion|Evasion=Improved|
17-100,[RangerSpecialQualities=16], Hide in Plain Sight|Rule=can use Stealth even while being observed|[PrRule]

;!RangerFavoredTerrains
2,Cold
2,Desert
2,Forest
2,Jungle
2,Mountain-Hills
2,Plains
1,Planes ([~Countries.Planes_%WorldNeededName%])
2,Swamp
2,Underground
2,Urban
2,Water

:RangerSpecialQualitiesBond
1,|RNGHunterBond={Dice~1d2+1}|[RangerSpecialQualitiesBond=%RNGHunterBond%]
2,Animal Companion|RNGAnimalCompanion=%CharacterLevel%||RNGAnimalCompanion-3|
3,Companions|Rule=MOVE= grant 1/2 favored enemy bonuses vs ONE target to all allies within 30' who can see/hear you; WISBONUS rounds|[PrRule]

# --------------------
:RogueSpecialQualities
1,{If~%CharacterLevel%>=2?Evasion|Evasion=Yes|/None}
2-3,[RogueSpecialQualities=1], Rogue Talent|RogueSANum=0||RogueSA=0|
_[SpecialRogueAbility] {Italic~(%RogueSANum%; %RogueSA%)}
4-100,[RogueSpecialQualities=2], [UncannyDodgeBranchRogue=%CharacterLevel%]

:UncannyDodgeBranchRogue
1-7,Uncanny Dodge|UncannyDodge+1|{If~%UncannyDodge%>=1?|UncannyDodge=2|/|UncannyDodge=1|}
8-100,Improved Uncanny Dodge|UncannyDodge=2|

:SpecialRogueAbility
1,{Reset~RogueSpecialAbility}
_|RogueSANum={Trunc~{Calc~(%CharacterLevel%/2)}}|
_|Temp1=%RogueSANum%|
### XXX {If~%ExtraFeatsAny%>0?|Temp1-1|}
_{Lockout~RogueSpecialAbility,6,18}
#_%RogueSA%; 
_|RogueSA=[RogueSpecialAbility]||Temp1-1|{If~%Temp1%>0?|RogueSA&!|}
_{If~%Temp1%>0?
_{While~%Temp1%,|RogueSA&[RogueSpecialAbility]||Temp1-1|{If~%Temp1%>0?|RogueSA&!|}}
_}
_|RogueSA={OrderAsc~"!",%RogueSA%}|
_|RogueSA={Replace~!,! ,%RogueSA%}|
_|RogueSA={CommaReplace~1,!,%RogueSA%}|

:!RogueSpecialAbility
1,Bleeding Atttack|Rule=SNEAK; +{Bold~%Sneak%} dmg/rnd; Heal DC15|[PrRule]
2,Combat Trick|ExtraFeatsAny+1|
3,Fast Stealth|ROGFastStealth=Yes||Rule=Stealth full MV no penalty|[PrRule]
4,{If~{And~%DEX%>%STR%,%DEX%>=12}=1?Finesse Rogue
_{If~{Length~%ClassFeats%}<2?|ClassFeats=Weapon Finesse BONUS|/|ClassFeats&;Weapon Finesse BONUS|}
_/[RogueSpecialAbility]}
5,Ledge Walker|ROGLedgeWalker=Yes||Rule=on narrow surfaces = Acrobatics full MV no penalty; not FF|[PrRule]
# INT 11 already counted in Minor Magic.
6,Major Magic (sp; [~Pathfinder Spells.Wizard1], 2/day){Unlock~RogueSpecialAbility,18}{If~{And~{Dice~1d2}=1,%Temp1%>=2}=1?|Temp1-1|;[RogueSpecialAbility=18]}
7,{IIf~%INT%>=10?Minor Magic (sp; [~Pathfinder Spells.Wizard0], 3/day){If~%INT%>=11?{Unlock~RogueSpecialAbility,6}{If~{And~{Dice~1d2}=1,%Temp1%>=2}=1?|Temp1-1|;[RogueSpecialAbility=6]}}:[RogueSpecialAbility]}
8,Quick Disable|ROGQuickDisable=Yes||Rule=1/2 time to Disable Device; min 1r|[PrRule]
9,Resiliency|ROGResiliency=Yes||Rule=IMMEDIATE; +{Bold~%CharacterLevel%} temp hp; 1 min; 1/day|[PrRule]
10,Rogue Crawl|ROGCrawl=Yes||Rule=1/2 MV while prone or 5-foot step while crawling|[PrRule]
11,Slow Reaction|Rule=SNEAK; +target can't make AO; 1r|[PrRule]
12,Stand Up|ROGStandUP=Yes||Rule=FREE|[PrRule]
13,Surprise Attack|Rule=opponents always FF in surprise round|[PrRule]
14,Trap Spotter|Rule=DM rolls Perception everytime 10' of a trap|[PrRule]
15,Weapon Training
_{If~{Length~%ClassFeats%}<2?|ClassFeats=WPNFOCUS BONUS|/|ClassFeats&;WPNFOCUS BONUS|}
16,{If~%CharacterLevel%>=10?Crippling Strike|Rule=SNEAK; +2 STR dmg|[PrRule]/[RogueSpecialAbility]}
17,{If~%CharacterLevel%>=10?Defensive Roll|ROGDefensiveRoll=Yes||Rule=when reduced to <=0 hp from weapon = Reflex DC(dmg dealt) for 1/2 dmg; must not be denied Dex; not with Evasion; 1/day|[PrRule]/[RogueSpecialAbility]}
18,{If~%CharacterLevel%>=10?Dispelling Attack|Rule=SNEAK; target {Italic~dispel magic}; lowest-level spell; CL{Bold~%CharacterLevel%}|[PrRule]/[RogueSpecialAbility]}
19,{If~%CharacterLevel%>=10?Improved Evasion|Evasion=Improved|/[RogueSpecialAbility]}
20,{If~%CharacterLevel%>=10?Opportunist|Rule=AO vs enemy struck for dmg in melee by ally; 1/rnd|[PrRule]/[RogueSpecialAbility]}
21,{If~%CharacterLevel%>=10?Skill Mastery (Take 10 in 3+INT skills)/[RogueSpecialAbility]}
22,{If~%CharacterLevel%>=10?Slippery Mind|ROGSlippery=Yes||Rule=reroll failed enchantment save next round|[PrRule]/[RogueSpecialAbility]}
23,{If~%CharacterLevel%>=10?Any Feat|ExtraFeatsAny+1|/[RogueSpecialAbility]}

# NOTE: BF_XXX do NOT put parenthesis in there, it creates problems when sending to "Pathfinder Feats.tab"
#       instead ( = $ ... and ) = $$
# -----------------------
:SorcererSpecialQualities
1-2,Bloodline ({Bold~%Bloodline%{If~%Draconic%!=0? (%Draconic%)}{If~%Elemental%!=0? (%Elemental%)}})
_, Eschew Materials
_{If~{Length~%ClassFeats%}<2?|ClassFeats=Eschew Materials BONUS|/|ClassFeats&;Eschew Materials BONUS|}
_, Bloodline Powers ([BP_%Bloodline%=%CharacterLevel%])
_{If~%BSk%!=0?, Bloodline Skill ([Pathfinder Skills.SkillsList=%BSk%])}
3-6,[SorcererSpecialQualities=1], Bloodline Spells|TempNumber=1| ({Italic~{While~%TempNumber%<=%Temp2%,%TempNumber%- [BS_%Bloodline%=%TempNumber%]|TempNumber+1|{If~%TempNumber%<=%Temp2%?, }}})
7-100,[SorcererSpecialQualities=3], Bloodline Feat{If~%Show%=1?[FontB=2]{Color~Grey, (SORBLOODLINEFEATS)}[FontE]}

:SorcererBloodline
1,[SorcererBloodline={Dice~1d10+1}]
2,Aberrant|BSk=15|
3,Abyssal|BSk=22|
# Any Knowledge except Arcana (already a class skill)
4,Arcane|BSk={Dice~1d9+14}|
5,Celestial|BSk=12|
6,Destined|BSk=18|
7,Draconic|BSk=25|[SorcererBloodlineDraconic]
8,Elemental|BSk=22|[SorcererBloodlineElemental]
9,Fey|BSk=20|
10,Infernal|BSk=6|
11,Undead|BSk=23|

:SorcererSpecialQualitiesFeat
1-6,{Stop~ERROR SorcererSpecialQualitiesFeat}
7-12,1
13-18,2
19-100,3

:BS_Aberrant
1,enlarge person
2,see invisibility
3,tongues
4,black tentacles
5,feeblemind
6,veil
7,plane shift
8,mind blank
9,shapechange

# Added Combat Expertise since it's required for Improved Disarm
:!BF_Aberrant
1,Combat Casting
2,Improved Initiative
3,Iron Will
4,Silent Spell
5,Skill Focus $Knowledge $Dungeoneering$$$$
6,{If~%INT%>=13?Combat Expertise{Unlock~BF_Aberrant,9}/[BF_Aberrant]}
7,Improved Unarmed Strike{Unlock~BF_Aberrant,8}
# Lockout at beginning
8,{If~%DEX%>=13?Improved Grapple/[BF_Aberrant]}
9,Improved Disarm

:BP_Aberrant
1-2,Bloodline Arcana|Rule=+50[Percent] duration on polymorph spells, not with Extend Spell feat|[PrRule]
_, Acidic Ray (Sp)|Rule=30', ranged touch, 1d6+{Trunc~{Calc~(%CharacterLevel%/2)}}, {Calc~3+%CHABonus%}/day|[PrRule]|Temp2=0|
3-4,[BP_Aberrant=1], Long Limbs (Ex)|Rule=+{If~%CharacterLevel%>=17?15/{If~%CharacterLevel%>=11?10/5}}' reach|[PrRule]|Temp2=1|
5-6,[BP_Aberrant=3]|Temp2=2|
7-8,[BP_Aberrant=3]|Temp2=3|
9-10,[BP_Aberrant=3], Unusual Anatomy (Ex){If~%SORUnusualAnatomy%=AberrantForm?|Rule=see Aberrant Form|/|SORUnusualAnatomy=Yes||Rule={If~%CharacterLevel%>=13?50/25}[Percent] ignore crit/sneak|}[PrRule]|Temp2=4|
11-12,[BP_Aberrant=9]|Temp2=5|
13-14,[BP_Aberrant=9]|Temp2=6|
15-16,[BP_Aberrant=9], Alien Resistance (Su)|SpellResistance>{Calc~(%CharacterLevel%+10)}||Rule=SR|[PrRule]|Temp2=7|
17-18,[BP_Aberrant=15]|Temp2=8|
19,[BP_Aberrant=15]|Temp2=9|
20,|SORUnusualAnatomy=AberrantForm|[BP_Aberrant=15], Aberrant Form (Ex)|SORUnusualAnatomy=AberrantForm||Rule=immune crit/sneak, blindsight 60', DR 5/-|[PrRule]|Temp2=9|

:BS_Abyssal
1,cause fear
2,bull's strength
3,rage
4,stoneskin
5,dismissal
6,transformation
7,greater teleport
8,unholy aura
9,summon monster IX

# Added Spell Focus (Conjuration)
:!BF_Abyssal
1,Empower Spell
2,Great Fortitude
3,Skill Focus $Knowledge $Planes$$$$
4,Spell Focus $Conjuration$${Unlock~BF_Abyssal,6}
5,{If~%STR%>=13?Power Attack{Unlock~BF_Abyssal,7-9}/[BF_Abyssal]}
# Lockout at beginning
6,Augment Summoning
7,Cleave
8,Improved Bull Rush
9,Improved Sunder

:BP_Abyssal
1-2,Bloodline Arcana|Rule=Conj(su)= DR{If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}}/good|[PrRule]
_, Claws (Su)|Rule=FREE, 2x {IIf~%CharacterLevel%>=7?[Equipment.SZ1d6=%Size%]:[Equipment.SZ1d4=%Size%]}{If~%CharacterLevel%>=5?, counts as magic weapons}{If~%CharacterLevel%>=11? +{Italic~flaming} (1d6 fire)}, CHAPERDAYREPLACETIEFLING/day|[PrRule]|Temp2=0|
3-4,[BP_Abyssal=1], Demon Resistance (Ex){If~%CharacterLevel%>=9?|SORDemResist=4|/|SORDemResist=2|}|Rule=Electric Resistance {If~%SORDemResist%=2?5/10}; +%SORDemResist% vs poison|[PrRule]|Temp2=1|
5-6,[BP_Abyssal=3]|Temp2=2|
7-8,[BP_Abyssal=3]|Temp2=3|
9-10,[BP_Abyssal=3], Strength of the Abyss (Ex)|SORStrAbyss={If~%CharacterLevel%>=17?6/{If~%CharacterLevel%>=13?4/2}}||Rule=+%SORStrAbyss% STR|[PrRule]|Temp2=4|
11-12,[BP_Abyssal=9]|Temp2=5|
13-14,[BP_Abyssal=9]|Temp2=6|
15-16,[BP_Abyssal=9], Added Summoning (Su)|Rule={Italic~Summon monster} spells summon +1 creature of the demon subtype or fiendish template|[PrRule]|Temp2=7|
17-18,[BP_Abyssal=15]|Temp2=8|
19,[BP_Abyssal=15]|Temp2=9|
20,[BP_Abyssal=15], Demonic might (Su)|Rule=Electric immunity, Resist acid/cold/fire 10, Telepathy 60'|[PrRule]|Temp2=9|

:BS_Arcane
1,identify
2,invisibility
3,dispel magic
4,dimension door
5,overland flight
6,true seeing
7,greater teleport
8,power word stun
9,wish

:!BF_Arcane
1,Combat Casting
2,Improved Counterspell
3,Improved Initiative
4,Iron Will
5,{If~%Valminder%=2?Scribe Scroll/Craft Spell Completion Items}
6,Skill Focus $Knowledge $Arcana$$$$
7,Spell Focus
8,Still Spell

:BP_Arcane
1-2,Bloodline Arcana|Rule=+1 DC when applying a +1 (or more) metamagic feat, not with Heighten Spell|[PrRule]
_, Arcane Bond (Su))|Rule=[WizardSpecialQualitiesBond]|[PrRule]|Temp2=0|
3-4,[BP_Arcane=1]{If~%CharacterLevel%<20?, Metamagic Adept (Ex)|Rule=apply metamagic feat without increasing casting time, [BP_ArcaneMA=%CharacterLevel%]/day|[PrRule]}|Temp2=1|
5-6,[BP_Arcane=3]|Temp2=2|
7-8,[BP_Arcane=3]|Temp2=3|
9-10,[BP_Arcane=3], New Arcana (Ex)|Rule=add {If~%CharacterLevel%>=17?3/{If~%CharacterLevel%>=13?2/1}} known spell{If~%CharacterLevel%>=13?s}|[PrRule]|Temp2=4|
11-12,[BP_Arcane=9]|Temp2=5|
13-14,[BP_Arcane=9]|Temp2=6|
15-16,[BP_Arcane=9], School Power (Ex)|Rule=+2 DC to one school ([~MagicSchools])|[PrRule]|Temp2=7|
17-18,[BP_Arcane=15]|Temp2=8|
19,[BP_Arcane=15]|Temp2=9|
20,[BP_Arcane=15], Arcane Apotheosis (Ex)|Rule=add any metamagic feat known without increasing casting time, can expend spell slot instead of using a charge (-1 charge/3 levels)|[PrRule]|Temp2=9|

:MagicSchools
1,Abjuration
2,Conjuration
3,Divination
4,Enchantment
5,Evocation
6,Illusion
7,Necromancy
8,Transmutation

:BP_ArcaneMA
1-2,{Stop~ERROR BP_ArcaneMA}
3-6,1
7-10,2
11-14,3
15-18,4
19-100,5

:BS_Celestial
1,bless
2,resist energy
3,magic circle vs evil
4,remove curse
5,flame strike
6,greater dispel magic
7,banishment
8,sunburst
9,gate

:!BF_Celestial
1,Extend Spell
2,Iron Will
3,Skill Focus $Knowledge $Religion$$$$
4,{If~{And~%STR%<=%DEX%,%DEX%>=13}=1?Weapon Finesse/[BF_Celestial]}
5,{If~%DEX%>=13?Dodge{Unlock~BF_Celestial,7}/[BF_Celestial]}
6,Mounted Combat{Unlock~BF_Celestial,8}
# Lockout at beginning
7,Mobility
8,Ride-By Attack

:BP_Celestial
1-2,Bloodline Arcana|Rule=Conj(su)= DR{If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}}/evil|[PrRule]
_, Heavenly Fire (Sp)|Rule=30', ranged touch, 1d4+{Trunc~{Calc~(%CharacterLevel%/2)}} dmg vs evil creatures (no energy resistance) or heals good creatures (max 1/day), CHAPERDAYREPLACE/day|[PrRule]|Temp2=0|
3-4,[BP_Celestial=1], Celestial Resistances (Ex){If~%CharacterLevel%>=9?|SORCelestialResist=10|/|SORCelestialResist=5|}|Rule=Resist Acid/Cold %SORCelestialResist%|[PrRule]|Temp2=1|
5-6,[BP_Celestial=3]|Temp2=2|
7-8,[BP_Celestial=3]|Temp2=3|
9-10,[BP_Celestial=3], Wings of Heaven (Su)|Fly=60||FlyMan=good||Rule=fly 60' (good), {IIf~%CharacterLevel%<20?%CharacterLevel% minutes:Unlimited}/day|[PrRule]|Temp2=4|
11-12,[BP_Celestial=9]|Temp2=5|
13-14,[BP_Celestial=9]|Temp2=6|
15-16,[BP_Celestial=9], Conviction (Su)|Rule=reroll any d20, 1/day|[PrRule]|Temp2=7|
17-18,[BP_Celestial=15]|Temp2=8|
19,[BP_Celestial=15]|Temp2=9|
20,[BP_Celestial=15], Ascension (Su)|SORCelestialAsc=Yes||Rule=Immunity acid/cold/petrification, Resist electric/fire 10, +4 vs poison, unlimited Wings, speak with any creature that has a language (as {Italic~tongues})|[PrRule]|Temp2=9|

:BS_Destined
1,alarm
2,blur
3,protection from energy
4,freedom of movement
5,break enchantment
6,mislead
7,spell turning
8,moment of prescience
9,foresight

:!BF_Destined
1,Arcane Strike
2,{If~%CharacterLevel%>=7?Leadership/[BF_Destined]}
3,Lightning Reflexes
4,Maximize Spell
5,Skill Focus $Knowledge $History$$$$
6,Weapon Focus
7,Endurance{Unlock~BF_Destined,8}
# Lockout at beginning
8,Diehard

:BP_Destined
1-2,Bloodline Arcana|SORDestinedBA=Yes||Rule=+{Italic~spell level} luck save for 1r when casting "personal" spells|[PrRule]
_, Touch of Destiny (Sp)|SORDestinedTouch={If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}}||Rule=STANDARD (Touch) +{Bold~%SORDestinedTouch%} insight on d20 rolls for 1r, CHAPERDAYREPLACE/day|[PrRule]|Temp2=0|
3-4,[BP_Destined=1], Fated (Su)|SORDestinedFated=[BP_ArcaneMA=%CharacterLevel%]||Rule=+{Bold~%SORDestinedFated%} luck on Saves/AC during surprise rounds or if unaware of attack|[PrRule]|Temp2=1|
5-6,[BP_Destined=3]|Temp2=2|
7-8,[BP_Destined=3]|Temp2=3|
9-10,[BP_Destined=3], It Was Meant To Be (Su)|Rule=reroll attack/critical confirmation/level check vs SR, {If~%CharacterLevel%>=17?2/1}/day|[PrRule]|Temp2=4|
11-12,[BP_Destined=9]|Temp2=5|
13-14,[BP_Destined=9]|Temp2=6|
15-16,[BP_Destined=9], Within Reach (Su)|SorDestinedWR=Yes||Rule=1/day, Will DC20 when attack/spell causing damage would result in your death, success = stabilized at -1 WP, with save bonus from fated ability|[PrRule]|Temp2=7|
17-18,[BP_Destined=15]|Temp2=8|
19,[BP_Destined=15]|Temp2=9|
20,[BP_Destined=15], Destiny Realized (Su)|Rule=any critical vs you confirms only on a 20, any critical threat you score with a spell are automatically confirmed, 1/day auto success on one CL check vs SR instead of rolling|[PrRule]|Temp2=9|

:SorcererBloodlineDraconic
1,|Draconic=Black||DraconicBreath=60' line||DraconicEnergy=acid|
2,|Draconic=Blue||DraconicBreath=60' line||DraconicEnergy=electricity|
3,|Draconic=Green||DraconicBreath=30' cone||DraconicEnergy=acid|
4,|Draconic=Red||DraconicBreath=30' cone||DraconicEnergy=fire|
5,|Draconic=White||DraconicBreath=30' cone||DraconicEnergy=cold|
6,|Draconic=Brass||DraconicBreath=60' line||DraconicEnergy=fire|
7,|Draconic=Bronze||DraconicBreath=60' line||DraconicEnergy=electricity|
8,|Draconic=Copper||DraconicBreath=60' line||DraconicEnergy=acid|
9,|Draconic=Gold||DraconicBreath=30' cone||DraconicEnergy=fire|
10,|Draconic=Silver||DraconicBreath=30' cone||DraconicEnergy=cold|

:BS_Draconic
1,mage armor
2,resist energy
3,fly|Fly=60||FlyMan=good|
4,fear
5,spell resistance
6,form of the dragon 1
7,form of the dragon 2
8,form of the dragon 3
9,wish

:!BF_Draconic
1,Blind-Fight
2,Great Fortitude
3,Improved Initiative
4,{If~%STR%>=13?Power Attack/[BF_Draconic]}
5,Quicken Spell
6,Skill Focus $Fly$$
7,Skill Focus $Knowledge $Arcana$$$$
8,Toughness

:BP_Draconic
1-2,Bloodline Arcana|Rule=+1 dmg/die rolled with {Bold~{Cap~%DraconicEnergy%}} spells|[PrRule]
_, Claws (Su)|Rule=FREE, 2x {IIf~%CharacterLevel%>=7?[Equipment.SZ1d6=%Size%]:[Equipment.SZ1d4=%Size%]}{If~%CharacterLevel%>=11?+1d6 {Cap~%DraconicEnergy%}}{If~%CharacterLevel%>=5?, counts as magic weapons}, CHAPERDAYREPLACE/day|[PrRule]|Temp2=0|
3-4,[BP_Draconic=1], Dragon Resistance (Ex)|SORDraconicResist={If~%CharacterLevel%>=9?10/5}||SORDraconicAC={If~%CharacterLevel%>=15?4/{If~%CharacterLevel%>=9?2/1}}|
_|Rule={If~%CharacterLevel%<20?Resist {Cap~%DraconicEnergy%} %SORDraconicResist%/{Cap~%DraconicEnergy%} Immunity}, +%SORDraconicAC% Natural Armor|[PrRule]|Temp2=1|
5-6,[BP_Draconic=3]|Temp2=2|
7-8,[BP_Draconic=3]|Temp2=3|
9-10,[BP_Draconic=3], Breath Weapon (Su)|Rule=%CharacterLevel%d6, %DraconicBreath%, Reflex 1/2 DC{Trunc~{Calc~((10+(%CharacterLevel%/2))+%CHABonus%)}}, [SorcererSpecialQualitiesBreath=%CharacterLevel%]/day|[PrRule]|Temp2=4|
11-12,[BP_Draconic=9]|Temp2=5|
13-14,[BP_Draconic=9]|Temp2=6|
15-16,[BP_Draconic=9], Wings (Su)|Fly=60||FlyMan=average||Rule=Standard/FREE (D), Fly 60' (average)|[PrRule]|Temp2=7|
17-18,[BP_Draconic=15]|Temp2=8|
19,[BP_Draconic=15]|Temp2=9|
20,[BP_Draconic=15], Power of Wyrms (Su)|Rule=Immunity to paralysis / sleep / {Cap~%DraconicEnergy%}, blindsense 60'|[PrRule]|Temp2=9|

:SorcererSpecialQualitiesBreath
1-8,{Stop~ERROR SorcererSpecialQualitiesBreath}
9-16,1
17-19,2
20-100,3

:SorcererBloodlineElemental
1,|Elemental=Air||ElementalEnergy=electricity||ElementalMV=Fly 60' (average)||Fly=60||FlyMan=average||ElementalNewMV=Yes|
2,|Elemental=Earth||ElementalEnergy=acid||ElementalMV=Burrow 30'||ElementalNewMV=Yes|
3,|Elemental=Fire||ElementalEnergy=fire||ElementalMV=Base MV +30'||ElementalBaseMV=30|
4,|Elemental=Water||ElementalEnergy=cold||ElementalMV=Swim 60'||ElementalNewMV=Yes|

:BS_Elemental
1,burning hands (%ElementalEnergy%)
2,scorching ray (%ElementalEnergy%)
3,protection from energy
4,elemental body 1
5,elemental body 2
6,elemental body 3
7,elemental body 4
8,summon monster VIII (elementals only)
9,elemental swarm

:!BF_Elemental
1,{If~%DEX%>=13?Dodge/[BF_Elemental]}
2,Empower Spell
3,Great Fortitude
4,Improved Initiative
5,Lightning Reflexes
6,{If~%STR%>=13?Power Attack/[BF_Elemental]}
7,Skill Focus $Knowledge $Planes$$$$
8,Weapon Finesse

:BP_Elemental
1-2,Bloodline Arcana|Rule=can change energy damage spells to {Bold~{Cap~%ElementalEnergy%}}|[PrRule]
_, Elemental Ray (Sp)|Rule=STANDARD, ranged touch 30', 1d6+{Trunc~{Calc~(%CharacterLevel%/2)}} {Cap~%ElementalEnergy%}, CHAPERDAYREPLACE/day|[PrRule]|Temp2=0|
3-4,[BP_Elemental=1], Elemental Resistance (Ex)|SORElementalResist={If~%CharacterLevel%>=9?20/10}||Rule=Resist {Cap~%ElementalEnergy%} %SORElementalResist%|[PrRule]|Temp2=1|
5-6,[BP_Elemental=3]|Temp2=2|
7-8,[BP_Elemental=3]|Temp2=3|
9-10,[BP_Elemental=3], Elemental Blast (Sp)|Rule=60', 20' rad burst, %CharacterLevel%d6, Reflex 1/2 DCCHADCReplace, Failed Save= vulnerability to {Cap~%ElementalEnergy%} for 1 round, [SorcererSpecialQualitiesBreath=%CharacterLevel%]/day|[PrRule]|Temp2=4|
11-12,[BP_Elemental=9]|Temp2=5|
13-14,[BP_Elemental=9]|Temp2=6|
15-16,[BP_Elemental=9], Elemental Movement (Su)|Rule=%ElementalMV%|[PrRule]|Temp2=7|
17-18,[BP_Elemental=15]|Temp2=8|
19,[BP_Elemental=15]|Temp2=9|
20,[BP_Elemental=15], Elemental Body (Su)|SORElementalBody=Yes||Rule=Immunity sneak / criticals / {Cap~%ElementalEnergy%}|[PrRule]|Temp2=9|

:BS_Fey
1,entangle
2,hideous laughter
3,deep slumber
4,poison
5,tree stride
6,mislead
7,phase door
8,irresistible dance
9,shapechange

:!BF_Fey
1,Improved Initiative
2,Lightning Reflexes
3,Quicken Spell
4,Skill Focus $Knowledge $Nature$$$$
5,{If~%DEX%>=13?Dodge{Unlock~BF_Fey,7}/[BF_Fey]}
6,Point-Blank Shot{Unlock~BF_Fey,8}
# Lockout at beginning
7,Mobility
8,Precise Shot

:BP_Fey
1-2,Bloodline Arcana|Rule=+2DC for Compulsion spells|[PrRule]
_, Laughing Touch (Sp)|Rule=Touch, laughs 1r, one MOVE action only, 1/24h/target, CHAPERDAYREPLACE/day|[PrRule]|Temp2=0|
3-4,[BP_Fey=1], Woodland Stride (Ex)|Rule=normal move/no damage through any nonmagical undergrowth|[PrRule]|Temp2=1|
5-6,[BP_Fey=3]|Temp2=2|
7-8,[BP_Fey=3]|Temp2=3|
9-10,[BP_Fey=3], Fleeting Glance (Sp)|Rule={Italic~greater invisibility}, %CharacterLevel% rounds/day|[PrRule]|Temp2=4|
11-12,[BP_Fey=9]|Temp2=5|
13-14,[BP_Fey=9]|Temp2=6|
15-16,[BP_Fey=9], Fey Magic (Su)|Rule=can reroll all CL checks vs SR|[PrRule]|Temp2=7|
17-18,[BP_Fey=15]|Temp2=8|
19,[BP_Fey=15]|Temp2=9|
20,[BP_Fey=15], Soul of the Fey (Su)|SORFeySoul=Yes||Rule=Immunity poison, DR 10/cold iron, animals do not attack you unless compelled by magic, {Italic~shadow walk} 1/day|[PrRule]|Temp2=9|

:BS_Infernal
1,protection vs good
2,scorching ray
3,suggestion
4,charm monster
5,dominate person
6,planar binding (devils or fiendish only)
7,greater teleport
8,power word stun
9,meteor swarm

:!BF_Infernal
1,Blind-Fight
2,{If~%INT%>=13?Combat Expertise{Unlock~BF_Infernal,8}/[BF_Infernal]}
3,Deceitful
4,Extend Spell
5,Iron Will
6,Skill Focus $Knowledge $Planes$$$$
7,Spell Penetration
# Lockout at beginning
8,Improved Disarm

:BP_Infernal
1-2,Bloodline Arcana|Rule=+2DC with Charm spells|[PrRule]
_, Corrupting Touch (Sp)|Rule=Melee touch, shaken {If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}} rounds and radiates as {Italic~evil}, CHAPERDAYREPLACETIEFLING/day|[PrRule]|Temp2=0|
3-4,[BP_Infernal=1], Infernal Resistances (Ex)|SORInfernalResist={If~%CharacterLevel%>=9?2/1}||Rule=Resist Fire {Calc~5*%SORInfernalResist%}, +{Calc~2*%SORInfernalResist%} vs poison|[PrRule]|Temp2=1|
5-6,[BP_Infernal=3]|Temp2=2|
7-8,[BP_Infernal=3]|Temp2=3|
9-10,[BP_Infernal=3], Hellfire (Sp)|Rule=60', 10' rad burst, %CharacterLevel%d6 Fire, Reflex 1/2 DCCHADCReplace, Failed Save if GOOD = shaken %CharacterLevel% rounds, [SorcererSpecialQualitiesBreath=%CharacterLevel%]/day|[PrRule]|Temp2=4|
11-12,[BP_Infernal=9]|Temp2=5|
13-14,[BP_Infernal=9]|Temp2=6|
15-16,[BP_Infernal=9], On Dark Wings (Su)|Rule=Standard/FREE (D), Fly 60' (average)||Fly=60||FlyMan=average|[PrRule]|Temp2=7|
17-18,[BP_Infernal=15]|Temp2=8|
19,[BP_Infernal=15]|Temp2=9|
20,[BP_Infernal=15], Power of the Pit (Su)|Rule=Immune Fire/Poison, Resist Acid/Cold 10, See in any darkness 60'|[PrRule]|Temp2=9|

:BS_Undead
1,chill touch
2,false life
3,vampiric touch
4,animate dead
5,waves of fatigue
6,undeath to death
7,finger of death
8,horrid wilting
9,energy drain

:!BF_Undead
1,Combat Casting
2,Iron Will
3,Skill Focus $Knowledge $Religion$$$$
4,Spell Focus ${If~{Dice~1d3}=1?[MagicSchools]/Necromancy}$$
5,Still Spell
6,Toughness
7,Endurance{Unlock~BF_Undead,8}
# Lockout at beginning
8,Diehard

:BP_Undead
1-2,Bloodline Arcana|Rule=Corporeal undead who were humanoids are treated as humanoids vs your mind-affecting spells|[PrRule]
_, Grave Touch (Sp)|Rule=STANDARD, touch attack vs living = shaken {If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}}r, if HD<%CharacterLevel% = frightened if already shaken, CHAPERDAYREPLACE/day|[PrRule]|Temp2=0|
3-4,[BP_Undead=1], Death's Gift (Su)|SORUndeadResist={If~%CharacterLevel%>=9?10/5}||Rule=Resist Cold %SORUndeadResist%, DR%SORUndeadResist%/- vs nonlethal damage|[PrRule]|Temp2=1|
5-6,[BP_Undead=3]|Temp2=2|
7-8,[BP_Undead=3]|Temp2=3|
9-10,[BP_Undead=3], Grasp of the Dead (Sp)|Rule=60' on solid surface, 20' rad burst, %CharacterLevel%d6 slashing, Reflex 1/2 DCCHADCReplace, Failed Save = cannot move 1r, [SorcererSpecialQualitiesBreath=%CharacterLevel%]/day|[PrRule]|Temp2=4|
11-12,[BP_Undead=9]|Temp2=5|
13-14,[BP_Undead=9]|Temp2=6|
15-16,[BP_Undead=9], Incorporeal Form (Sp)|Rule=%CharacterLevel% rounds, 1/day|[PrRule]|Temp2=7|
17-18,[BP_Undead=15]|Temp2=8|
19,[BP_Undead=15]|Temp2=9|
20,[BP_Undead=15], One of Us (Ex)|SORUndeadOneOfUs=Yes||Rule=begin to rot, Immune Cold/Nonlethal/Paralysis/Sleep, DR 5/-, Not attacked by unintelligent undeads, +4 morale save vs spells/sp of undeads|[PrRule]|Temp2=9|

# ---------------------
:WizardSpecialQualities
1-100,Arcane Bond (Su)|Rule=[WizardSpecialQualitiesBond]|[PrRule]
_[WizOpposedSchool=%WizardSchoolTemp%][PrRule]
_, {If~%Valminder%=2?Scribe Scroll/Craft Spell Completion Items}

;WizardSpecialQualitiesBond
### NEW FAMILIAR ###
2,Familiar|FamiliarGen=Yes|
1,Object|BondedObject=Yes|

:BondedObject
1,{Bold~<u>Bonded Object</u>:} ([~BondedObjectType]) 1/day, can cast any {If~{Param~Class,%Class%}=Wizard?spell in spellbook, even if not prepared (not opposition school)/one of your spells known}, not modified by metamagic or other abilities.

;BondedObjectType
5,amulet
1,dagger
5,ring
1,staff
1,wand
1,{If~%CharacterLevel%>=9?magic item owned/[BondedObjectType]}
1,[Equipment.MiscItems]
1,weapon possessed

:WizOpposedSchool
1,{Stop~ERROR WizOpposedSchool}
2,, Opposition Schools ({Color~OrangeRed,[Opposed2], [Opposed2]})|Rule=2 slots to prepare one of these spells; -4 craft magic object|
3,, Opposition Schools ({Color~OrangeRed,[Opposed3], [Opposed3]})|Rule=2 slots to prepare one of these spells; -4 craft magic object|
4,, Opposition Schools ({Color~OrangeRed,[Opposed4], [Opposed4]})|Rule=2 slots to prepare one of these spells; -4 craft magic object|
5,, Opposition Schools ({Color~OrangeRed,[Opposed5], [Opposed5]})|Rule=2 slots to prepare one of these spells; -4 craft magic object|
6,, Opposition Schools ({Color~OrangeRed,[Opposed6], [Opposed6]})|Rule=2 slots to prepare one of these spells; -4 craft magic object|
7,, Opposition Schools ({Color~OrangeRed,[Opposed7], [Opposed7]})|Rule=2 slots to prepare one of these spells; -4 craft magic object|
8,, Opposition Schools ({Color~OrangeRed,[Opposed8], [Opposed8]})|Rule=2 slots to prepare one of these spells; -4 craft magic object|
9,, Opposition Schools ({Color~OrangeRed,[Opposed9], [Opposed9]})|Rule=2 slots to prepare one of these spells; -4 craft magic object|
10,|Rule=0|

;!Opposed2
1,conjuration|Temp1=con|[WizAddOpp]
1,divination|Temp1=div|[WizAddOpp]
1,enchantment|Temp1=enc|[WizAddOpp]
1,evocation|Temp1=evo|[WizAddOpp]
1,illusion|Temp1=ill|[WizAddOpp]
1,necromancy|Temp1=nec|[WizAddOpp]
1,transmutation|Temp1=tra|[WizAddOpp]

;!Opposed3
1,abjuration|Temp1=abj|[WizAddOpp]
1,divination|Temp1=div|[WizAddOpp]
1,enchantment|Temp1=enc|[WizAddOpp]
1,evocation|Temp1=evo|[WizAddOpp]
1,illusion|Temp1=ill|[WizAddOpp]
1,necromancy|Temp1=nec|[WizAddOpp]
1,transmutation|Temp1=tra|[WizAddOpp]

;!Opposed4
1,abjuration|Temp1=abj|[WizAddOpp]
1,conjuration|Temp1=con|[WizAddOpp]
1,enchantment|Temp1=enc|[WizAddOpp]
1,evocation|Temp1=evo|[WizAddOpp]
1,illusion|Temp1=ill|[WizAddOpp]
1,necromancy|Temp1=nec|[WizAddOpp]
1,transmutation|Temp1=tra|[WizAddOpp]

;!Opposed5
1,abjuration|Temp1=abj|[WizAddOpp]
1,conjuration|Temp1=con|[WizAddOpp]
1,divination|Temp1=div|[WizAddOpp]
1,evocation|Temp1=evo|[WizAddOpp]
1,illusion|Temp1=ill|[WizAddOpp]
1,necromancy|Temp1=nec|[WizAddOpp]
1,transmutation|Temp1=tra|[WizAddOpp]

;!Opposed6
1,abjuration|Temp1=abj|[WizAddOpp]
1,conjuration|Temp1=con|[WizAddOpp]
1,divination|Temp1=div|[WizAddOpp]
1,enchantment|Temp1=enc|[WizAddOpp]
1,illusion|Temp1=ill|[WizAddOpp]
1,necromancy|Temp1=nec|[WizAddOpp]
1,transmutation|Temp1=tra|[WizAddOpp]

;!Opposed7
1,abjuration|Temp1=abj|[WizAddOpp]
1,conjuration|Temp1=con|[WizAddOpp]
1,divination|Temp1=div|[WizAddOpp]
1,enchantment|Temp1=enc|[WizAddOpp]
1,evocation|Temp1=evo|[WizAddOpp]
1,necromancy|Temp1=nec|[WizAddOpp]
1,transmutation|Temp1=tra|[WizAddOpp]

;!Opposed8
1,abjuration|Temp1=abj|[WizAddOpp]
1,conjuration|Temp1=con|[WizAddOpp]
1,divination|Temp1=div|[WizAddOpp]
1,enchantment|Temp1=enc|[WizAddOpp]
1,evocation|Temp1=evo|[WizAddOpp]
1,illusion|Temp1=ill|[WizAddOpp]
1,transmutation|Temp1=tra|[WizAddOpp]

;!Opposed9
1,abjuration|Temp1=abj|[WizAddOpp]
1,conjuration|Temp1=con|[WizAddOpp]
1,divination|Temp1=div|[WizAddOpp]
1,enchantment|Temp1=enc|[WizAddOpp]
1,evocation|Temp1=evo|[WizAddOpp]
1,illusion|Temp1=ill|[WizAddOpp]
1,necromancy|Temp1=nec|[WizAddOpp]

;!OpposedXXX
1,abjuration|Temp1=abj|[WizAddOpp]
1,conjuration|Temp1=con|[WizAddOpp]
1,divination|Temp1=div|[WizAddOpp]
1,enchantment|Temp1=enc|[WizAddOpp]
1,evocation|Temp1=evo|[WizAddOpp]
1,illusion|Temp1=ill|[WizAddOpp]
1,necromancy|Temp1=nec|[WizAddOpp]
1,transmutation|Temp1=tra|[WizAddOpp]

:WizAddOpp
1,{If~%WizardOpposed%=99?|WizardOpposed=%Temp1%|
_/|WizardOpposed&; %Temp1%|
_}

# --------------------
:AdeptSpecialQualities
1,None
### NEW FAMILIAR ###
2-100,Summon Familiar (Su)|FamiliarGen=Yes|

# ---------------------------------------------------
# Equipment 

:SetEQSizeWeight
1,|TempEQ={Round~1,{Calc~%TempEQ%/16}}|
2,|TempEQ={Round~1,{Calc~%TempEQ%/8}}|
3,|TempEQ={Round~1,{Calc~%TempEQ%/4}}|
4,|TempEQ={Round~1,{Calc~%TempEQ%/2}}|
5,|TempEQ*1|
6,|TempEQ*2|
7,|TempEQ*4|
8,|TempEQ*8|
9,|TempEQ*16|

# Here, |TempEQ=XX| is already set and we need to add the weight to WtTotalCarried
:SetWt
1,{If~%TempEQ%>0?[SetEQSizeWeight=%Size%]|WtTotalCarried+%TempEQ%|}

#--------------
:PrintEquipment
1,{If~%GroupFlag%=2?<br><br>/<br>}|EQProt=||EQWpn=||ExtraMeleeWpn=No|
_<b>Equipment:</b> [FontB=2](carrying {Bold~{If~%CCMV%=2?{Color~OrangeRed,%WtTotalCarried% lbs}/{If~%CCMV%=3?{Color~Red,%WtTotalCarried% lbs}/%WtTotalCarried% lbs}}} of protection and weapons{If~%CCOverDrag%=Yes?, {Color~Red,too much weight, cannot move}/{If~%CCOver%=Yes?, {Color~Red,must drag some equipment}}})[FontE]
_{If~%GroupFlag%=2?{If~%CCMV%=2?{Color~OrangeRed, [FontB=1](stats include: max Dex +3, -3 check, reduced MV)[FontE]}/{If~%CCMV%=3?{Color~Red, [FontB=1](stats include: max Dex +1, -6 check, reduced MV, run x3)[FontE]}}}
_}
_{If~%ShowInitialWealth%=1?[FontB=2]
_{If~%GroupFlag%=2?<br>{Space~7}/ }{Color~OrangeRed,[WealthInfo1]: Total= {Bold~[AddComma.Start(%WealthTOTInitial%)] gp}; Weapon: [AddComma.Start(%WealthWPNInitial%)], Protection: [AddComma.Start(%WealthPROTInitial%)], Magic: [AddComma.Start(%WealthMAGInitial%)], Limited: [AddComma.Start(%WealthLIMInitial%)], Gear: [AddComma.Start(%WealthGEARInitial%)]. }
_[FontE]}
#
# Protection
_{If~{And~%PrintArmor%>0,%PrintArmor%!=4}=1?|EQProt&[ArmorAsEquipmentBranch=%PrintArmor%]|{If~%AdamDR%!=0?|EQProt& (DR%AdamDR%)|}}
_{If~%ShieldFlag%>0?{If~%PrintArmor%>0?|EQProt&, |}{If~%MagicPlussesShield%=0?|EQProt&%ShieldWorn%|/|EQProt&{Italic~+%MagicPlussesShield% %ShieldWorn%}|}}
_{If~%MageArmorBonus2%!=0?{If~{Or~%PrintArmor%>0,%ShieldFlag%>0}=1?|EQProt&, |}|EQProt&[MageArmorDescription=2] {Italic~(+%MagicPlussesMage2%)}|}
_{If~{And~%GroupFlag%=2,{Length~%EQProt%}>2}=1?<br>[Tab]{Italic~Protection:} }
_{If~{Length~%EQProt%}>2?{If~%GroupFlag%=2?|EQProt&.|}%EQProt%}
#
# Weapons
_{If~%MeleeWeaponID%!=0?
_{If~%MagicPlussesMelee%>0?|EQWpn&[ItalicsOn]|}
_{If~%Size%!=5?|EQWpn&[Miscellaneous.Size=%Size%] |}|EQWpn&%Wpn%|{If~{Length~%EQWpnM%}>2?|EQWpn&%EQWpnM%|}
_{If~%MagicPlussesMelee%>0?|EQWpn&[ItalicsOff]|}
_}
_{If~%RangeWeaponID%!=0?|EQWpn&, |
_{If~%MagicPlussesRange%>0?|EQWpn&[ItalicsOn]|}
_{If~%Size%!=5?|EQWpn&[Miscellaneous.Size=%Size%] |}|EQWpn&%WpnR%|{If~{Length~%EQWpnR%}>2?|EQWpn&%EQWpnR%|}
_{If~%MagicPlussesRange%>0?|EQWpn&[ItalicsOff]|}
_}
_{If~{Or~{Find~1,Unseat,%FeatsAll%}!=0,{And~{Find~1,Spirited Charge,%FeatsAll%}!=0,{Dice~1d3}=1}=1}=1?{If~%WealthWPN%>=10?[AddLance][SetWpnSp]}}
_{If~{And~%WealthWPN%>=1,{Dice~1d6}=1}=1?[AddMelee]}
_{If~{And~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Avenging}=1,{Dice~1d4}>1}=1?|EQWpn&, sling|}
_{If~%GroupFlag%=1?{If~{And~{Length~%EQWpn%}>2,{Length~%EQProt%}>2}=1?, }}
_{If~{And~%GroupFlag%=2,{Length~%EQWpn%}>2}=1?<br>[Tab]{Italic~Weapons:} }
_{If~{Length~%EQWpn%}>2?%EQWpn%.}
_{If~{And~%Show%=1,%WpnSpShow%=1}=1?[PrintWpnSp]}
#
_{If~{Or~{Find~1,Catch Off-Guard,%FeatsAll%}!=0,{Find~1,Throw Anything,%FeatsAll%}!=0}=1?[PrintImprovised]}
# Lost Equipment : If no armor or shield is generated, will look if the NPC has a "shield" or "armor" feat chosen.
_{If~{And~{Length~%ArmorType%}<5,{Find~1,Armor Proficiency,%FeatsAll%}!=0}=1?{CR~}[Tab]{Italic~Note:} {Cap~[HeShe]} lost [HisHer] [~ArmorDescription].}
_{If~%ShieldFlag%=0?
_{If~{And~{Param~Class,%Class%}!=Fighter,{Find~1,Tower Shield Proficiency,%FeatsAll%}!=0}=1?{CR~}[Tab]{Italic~Note:} {Cap~[HeShe]} lost [HisHer] [ShieldDescription=4].
_/{If~{Find~1,Improved Shield Bash,%FeatsAll%}!=0?{CR~}[Tab]{Italic~Note:} {Cap~[HeShe]} lost [HisHer] [ShieldDescription={Dice~1d2}].
_/{If~{Find~1,Shield Focus,%FeatsAll%}!=0?{CR~}[Tab]{Italic~Note:} {Cap~[HeShe]} lost [HisHer] [ShieldDescription={Dice~1d2}].
_}}}}
#
### TEST XXX
_{If~%TestCostWeight%=1?|TestTableNote=<br>WT CARRIED = %WtTotalCarried% lbs|[TestTable]}
_{If~{Or~%TestWealth%=1,%TestCostWeight%=1}=1?|TestTableNote=<br>WEALTH: (Heroic= {Param~Heroic,%Heroic%}) Total= [AddComma.Start(%WealthTOT%)]; Weapon: [AddComma.Start(%WealthWPN%)], Protection: [AddComma.Start(%WealthPROT%)], Magic: [AddComma.Start(%WealthMAG%)], Limited: [AddComma.Start(%WealthLIM%)], Gear: [AddComma.Start(%WealthGEAR%)]|[TestTable]}
#
_{If~{Find~1,Mounted Combat,%FeatsAll%}!=0?|MountedCombat=%Size%|/|MountedCombat=No|}
_[PrintPoison]
### NEW CLASS ###  Modify table below - ExpertType
### NEW RACE ### Only for the "Size" in "Mundane Equipment"
_|TempEQ=[Mundane Equipment.Start(%Class%,2,3,%Race%,%CharacterLevel%,%MountedCombat%,%ExpertTypeCode%,%Subrace%)]|
_{Split~TempEQ,"!!!",MundaneEQ,MundaneEQWt,MundaneEQCost,MundaneMountEQWt,Mount}%MundaneEQ%
#
_|Temp2=0|
_{If~{Find~1,Fire Hand,%FeatsAll%}!=0?[AddTorch]}
_{If~{Find~1,Burn Burn Burn,%FeatsAll%}!=0?[AddBurnEQ]}
#
_{If~%Temp2%!=0?<br>[Tab]{Italic~Extra Equipment:} %Temp2%.}
_<br>[Tab][FontB=2]{Color~Grey,(Mundane equipment's value: {Bold~%MundaneEQCost%} gp; {Bold~%MundaneEQWt%} lbs{If~%MundaneMountEQWt%>0?; Mount carries[Slash]pulls: {Bold~%MundaneMountEQWt%} lbs}).}[FontE]
_[DetermineCarryingCapacityPenaltiesFINAL]
_{If~%GroupFlag%=2?<br>{Space~5}/ }[FontB=2]{Color~Grey,(Total weight carried: {IIf~%CCMV%>1?[BoldOn]{Calc~%WtTotalCarried%+%MundaneEQWt%} lbs[BoldOff]:{Calc~%WtTotalCarried%+%MundaneEQWt%} lbs} (%WtTotalCarried% [FontB=1]arms/armors[FontE] + %MundaneEQWt% [FontB=1]other[FontE]))[FontE]}
# CARRYING CAPACITY
_{If~%Show%=1?[FontB=2]{Color~Grey,{If~%GroupFlag%=2?<br>{Space~7}[PrintCCSingle]/ ([PrintCCGroup])}[FontE]}}
_|WealthGEAR-%MundaneEQCost%|
### TEST XXX
_{If~%TestCostWeight%=1?|TestTableNote=<br>WT CARRIED = %WtTotalCarried% lbs|[TestTable]}
_{If~{Or~%TestWealth%=1,%TestCostWeight%=1}=1?|TestTableNote=<br>WEALTH: (Heroic= {Param~Heroic,%Heroic%}) Total= [AddComma.Start(%WealthTOT%)]; Weapon: [AddComma.Start(%WealthWPN%)], Protection: [AddComma.Start(%WealthPROT%)], Magic: [AddComma.Start(%WealthMAG%)], Limited: [AddComma.Start(%WealthLIM%)], Gear: [AddComma.Start(%WealthGEAR%)]|[TestTable]}
_{If~%ShowMissingWealth%=1?[FontB=2]
_<br>{Space~7}|WealthTOT={Calc~%WealthWPN%+%WealthPROT%+%WealthMAG%+%WealthLIM%+%WealthGEAR%}||WealthTOT={Round~0,%WealthTOT%}|{Color~OrangeRed,[WealthInfo2] = {Bold~[AddComma.Start(%WealthTOT%)] gp} (Spent: [AddComma.Start({Round~0,{Calc~%WealthTOTInitial%-%WealthTOT%}})] gp); Weapon: [AddComma.Start({Round~0,%WealthWPN%})], Protection: [AddComma.Start({Round~0,%WealthPROT%})], Magic: [AddComma.Start({Round~0,%WealthMAG%})], Limited: [AddComma.Start({Round~0,%WealthLIM%})], Gear: [AddComma.Start({Round~0,%WealthGEAR%})]}
_|WealthWPNMissing+%WealthWPN%||WealthPROTMissing+%WealthPROT%||WealthMAGMissing+%WealthMAG%||WealthLIMMissing+%WealthLIM%||WealthGEARMissing+%WealthGEAR%|
_[FontE]}
#

:WealthInfo1
1,<u>Initial wealth for {Param~Heroic,%Heroic%}</u>

:WealthInfo2
1,<u>{If~%WealthTOT%>0?Missing/Extra} wealth for {Param~Heroic,%Heroic%}</u>

:WealthInfo3
1,<u>{If~%WealthTOTMissing%>0?Missing/Extra} wealth for NPC Group</u>

:ArmorAsEquipmentBranch
1,[MageArmorDescription=1] <i>(+%MagicPlussesMage1%)</i>
2,%ArmorType%
3,{If~%Ironwood%!=99?[ItalicsOn]+%MagicPlussesArmor% }%ArmorType%{If~%Ironwood%!=99?[ItalicsOff]}

# USED in "He lost his" ========= XXX Replace with Equipment.Armor or something like this
:ArmorDescription
1,padded armor
2,leather armor
3,{If~{Find~1,Armor Proficiency (Medium),%FeatsAll%}!=0?hide armor/[ArmorDescription]}
4,studded leather armor[ItalicsOff]
5,{If~{And~%CharacterLevel%>=11,{Param~Class,%Class%}=Druid}=1?[ItalicsOn]ironwood} chain shirt[ItalicsOff]
6,{If~{Find~1,Armor Proficiency (Medium),%FeatsAll%}!=0?{If~{And~%CharacterLevel%>=11,{Param~Class,%Class%}=Druid}=1?[ItalicsOn]ironwood} scale mail[ItalicsOff]/[ArmorDescription]}
7,{If~{Find~1,Armor Proficiency (Medium),%FeatsAll%}!=0?{If~{And~%CharacterLevel%>=11,{Param~Class,%Class%}=Druid}=1?[ItalicsOn]ironwood} chain mail[ItalicsOff]/[ArmorDescription]}
8,{If~{Find~1,Armor Proficiency (Medium),%FeatsAll%}!=0?{If~{And~%CharacterLevel%>=11,{Param~Class,%Class%}=Druid}=1?[ItalicsOn]ironwood} breast plate[ItalicsOff]/[ArmorDescription]}
9,{If~{Find~1,Armor Proficiency (Heavy),%FeatsAll%}!=0?{If~{And~%CharacterLevel%>=11,{Param~Class,%Class%}=Druid}=1?[ItalicsOn]ironwood} splint mail[ItalicsOff]/[ArmorDescription]}
10,{If~{Find~1,Armor Proficiency (Heavy),%FeatsAll%}!=0?{If~{And~%CharacterLevel%>=11,{Param~Class,%Class%}=Druid}=1?[ItalicsOn]ironwood} banded mail[ItalicsOff]/[ArmorDescription]}
11,{If~{Find~1,Armor Proficiency (Heavy),%FeatsAll%}!=0?{If~{And~%CharacterLevel%>=11,{Param~Class,%Class%}=Druid}=1?[ItalicsOn]ironwood} half plate[ItalicsOff]/[ArmorDescription]}
12,{If~{Find~1,Armor Proficiency (Heavy),%FeatsAll%}!=0?{If~{And~%CharacterLevel%>=11,{Param~Class,%Class%}=Druid}=1?[ItalicsOn]ironwood} full plate[ItalicsOff]/[ArmorDescription]}

:ShieldDescription
1,light {If~{Param~Class,%Class%}=Druid?[Chanceof]{If~%Chance%>10?wooden/[ItalicsOn]ironwood[ItalicsOff]}/[ShieldDescriptionWM]} shield
2,heavy {If~{Param~Class,%Class%}=Druid?[Chanceof]{If~%Chance%>10?wooden/[ItalicsOn]ironwood[ItalicsOff]}/[ShieldDescriptionWM]} shield
3,{If~{Param~Class,%Class%}=Druid?[Chanceof]{If~%Chance%>10?wooden/[ItalicsOn]ironwood[ItalicsOff]}/[ShieldDescriptionWM]} buckler
4,{If~{Param~Class,%Class%}=Druid?[Chanceof]{If~%Chance%>10?wooden/[ItalicsOn]ironwood[ItalicsOff]} }tower shield

;ShieldDescriptionWM
1,wooden
1,steel

:PrintImprovised
#{If~{Or~{Find~1,Catch Off-Guard,%FeatsAll%}!=0,{Find~1,Throw Anything,%FeatsAll%}!=1?[PrintImprovised]}
1,{If~{Find~1,Catch Off-Guard,%FeatsAll%}!=0?[PrintImprovisedMelee]}
_{If~{Find~1,Throw Anything,%FeatsAll%}!=0?[PrintImprovisedRanged]}

:PrintImprovisedMelee
1,{If~%GroupFlag%=2?<br>[Tab]/ }{Italic~Improvised Melee Weapon:} 
_|TempM=ImprovisedWeapons|[FindMelee]
_{If~%WpnNumM%=0?|WealthWPN-%Cost%||WtTotalCarried+%Wt%|
_   /|WealthWPN-{Calc~%Cost%*%WpnNumM%}||WtTotalCarried+{Calc~%Wt%*%WpnNumM%}|
_}
_|Temp1=%Size%|{If~{Find~1,Improvised Weapon Mastery,%FeatsAll%}!=0?|Temp1+1||WpnCrit=19-20/x2|}
_{If~{And~{Find~1,Weapon Finesse,%FeatsAll%}!=0,%Lt%=Yes}=1?|Temp2=%DEXBonus%|/|Temp2=%STRBonus%|}
_{If~%Size%!=5? [Miscellaneous.Size=%Size%]} %Wpn%
_{Color~Grey,
_|Temp3={Calc~%BAB1%+%Temp2%}|
_ ({If~%Temp3%>=0?+}%Temp3%
_|Temp3-5|{IIf~%BAB%>5?/{If~%Temp3%>=0?+/ }%Temp3%}
_|Temp3-5|{IIf~%BAB%>10?/{If~%Temp3%>=0?+/ }%Temp3%}
_|Temp3-5|{IIf~%BAB%>15?/{If~%Temp3%>=0?+/ }%Temp3%} melee{If~{And~{Find~1,Weapon Finesse,%FeatsAll%}!=0,%Lt%=Yes}=1? [FontB=2]WF[FontE]}{If~%2H%=Always? (2h)/{If~%2H%=Yes? (can be wielded 2-handed)}}
_; [Equipment.SZ%WpnDmg%=%Temp1%]{If~%2H%=Always?[ImprovisedMeleeDmg2H]/[ImprovisedMeleeDmg1H]}{If~{Find~1,TorchFire,%WpnSp%}!=0?+1 Fire}
_ %WpnDmgT%;
_ %WpnCrit%
_{If~%WpnRng%>0? (%WpnRng%')}; unarmed opponents are always flat-footed).
_{If~{Length~%EQWpnM%}>1? {Cap~%EQWpnM%}.}
_}

:ImprovisedMeleeDmg1H
1,{If~%STRBonus%>0?+}{If~%STRBonus%!=0?%STRBonus%}

:ImprovisedMeleeDmg2H
1,|Temp3=%STRBonus%|
_{IIf~%Temp3%!=0?{IIf~%Temp3%>=1?|Temp3={Trunc~{Calc~%Temp3%*3/2}}|+%Temp3%:{If~%Temp3%!=0?{If~%Temp3%>=1?+}%Temp3%}}}

:PrintImprovisedRanged
1,{If~%GroupFlag%=2?<br>[Tab]/ }{Italic~Improvised Ranged Weapon:} 
_|TempR=ImprovisedWeapons|[FindRange][SetRangeWt_WpnNumR]
_{If~{Or~%WpnNumR%=0,%AmmoWt%>0}=1?|WealthWPN-%CostR%||WtTotalCarried+%WtR%|[AmmoWt]
_     /|WealthWPN-{Calc~%CostR%*%WpnNumR%}||WtTotalCarried+{Calc~%WtR%*%WpnNumR%}|[AmmoWt]
_}
_|Temp1=%Size%|{If~{Find~1,Improvised Weapon Mastery,%FeatsAll%}!=0?|Temp1+1||WpnCritR=19-20/x2|}
_{If~%Size%!=5? [Miscellaneous.Size=%Size%]} %WpnR%{If~{Length~%EQWpnR%}<5? %EQWpnR%}
_|Temp3={Calc~%BAB1%+%DEXBonus%}|
_{Color~Grey,
_ ({If~%Temp3%>=0?+}%Temp3%
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> PrintImprovisedRanged = bedore QuickDraw}}
_{If~{Find~1,Quick Draw,%FeatsAll%}!=0?
_|Temp3-5|{IIf~%BAB%>5?/{IIf~%Temp3%>=0?+: }%Temp3%}
_|Temp3-5|{IIf~%BAB%>10?/{IIf~%Temp3%>=0?+: }%Temp3%}
_|Temp3-5|{IIf~%BAB%>15?/{IIf~%Temp3%>=0?+: }%Temp3%}
_} ranged
_; [Equipment.SZ%WpnDmgR%=%Temp1%]{If~%STRBonus%>0?+}{If~%STRBonus%!=0?%STRBonus%}
_ %WpnDmgTR%;
_ %WpnCritR%
_{If~%WpnRngR%>0? (%WpnRngR%')}; +1 attack roll with thrown splash weapons).
_{If~{Length~%EQWpnR%}>=5? {Cap~%EQWpnR%}.}
_}

:AddLance
1,|LanceSearch=Yes|[FindMelee]|LanceSearch=No|
_{If~%MagicPlussesMelee%>0?|EQWpn&[ItalicsOn]|}
_|EQWpn&, |{If~%Size%!=5?|EQWpn&[Miscellaneous.Size=%Size%] |}|EQWpn&%Wpn%|{If~{Length~%EQWpnM%}>2?|EQWpn&%EQWpnM%|}
_{If~%MagicPlussesMelee%>0?|EQWpn&[ItalicsOff]|}

:AddMelee
1,{If~%TestLog%=1?{Log~E:\log.txt,>>>>> PrintEQ = AddMelee}}
### Was the line below to prevent having a secondary melee weapon stronger than the primary, but since I got errors, the secondary weapon can be stronger than the main weapon.
#_|TempMagicPlus=%MagicPlussesMelee%||ExtraMeleeWpn=Yes|[SetMelee]
_|TempMagicPlus=10||ExtraMeleeWpn=Yes|[SetMelee]
_{If~{Find~1,unarmed strike,%Wpn%}=0?[AddMelee2]}

:AddMelee2
1,{If~%MagicPlussesMelee%>0?|EQWpn&[ItalicsOn]|}
_|EQWpn&, |{If~%Size%!=5?|EQWpn&[Miscellaneous.Size=%Size%] |}|EQWpn&%Wpn%|{If~{Length~%EQWpnM%}>2?|EQWpn&%EQWpnM%|}
_{If~%MagicPlussesMelee%>0?|EQWpn&[ItalicsOff]|}
_[SetWpnSp]

:AddBurnEQ
1,{If~{And~{Dice~1d4}>1,{Find~1,alchemist's fire,%MundaneEQ%}=0}=1?|Temp1={Dice~1d3+1}||MundaneEQCost+{Calc~20*%Temp1%}||MundaneEQWt+%Temp1%|{If~{Length~%Temp2%}<3?|Temp2=%Temp1% vials of alchemist's fire|/|Temp2&, %Temp1% vials of alchemist's fire|}|MundaneEQ&; %Temp1% vials of alchemist's fire|}
_{If~{And~{Dice~1d4}>1,{Find~1,torch,%MundaneEQ%}=0}=1?|MundaneEQWt+1|{If~{Length~%Temp2%}<3?|Temp2=1 pitch torch [TorchDmg]|/|Temp2&, 1 pitch torch [TorchDmg]|}|MundaneEQ&; 1 pitch torch|}
_{If~{And~{Dice~1d4}>1,{Find~1,flint and steel,%MundaneEQ%}=0}=1?|MundaneEQCost+1|{If~{Length~%Temp2%}<3?|Temp2=flint and steel|/|Temp2&, flint and steel|}|MundaneEQ&; flint and steel|}

:TorchDmg
1,(Dmg= S:1d2 M:1d3; +
_{If~{And~{Find~1,Burn Burn Burn,%FeatsAll%}!=0,{Find~1,Fire Hand,%FeatsAll%}!=0}=1?{Color~Green,1d4+2}
_/{If~{Find~1,Burn Burn Burn,%FeatsAll%}!=0?{Color~Green,1d4}+1
_/{If~{Find~1,Fire Hand,%FeatsAll%}!=0?{Color~Green,2}
_/1
_}}}
_ Fire)

:AddTorch
1,{If~{Find~1,torch,%MundaneEQ%}=0?|Temp1={Dice~1d3+1}|/|Temp1=1|}|MundaneEQWt+%Temp1%|{If~{Length~%Temp2%}<3?|Temp2=%Temp1%{If~%Temp1%=1? extra} pitch {PluralIf~%Temp1%,torch} [TorchDmg]|/|Temp2&, %Temp1%{If~%Temp1%=1? extra} pitch {PluralIf~%Temp1%,torch} [TorchDmg]|}|MundaneEQ&; %Temp1% pitch {PluralIf~%Temp1%,torch}|
_{If~{And~{Dice~1d4}>1,{Find~1,flint and steel,%MundaneEQ%}=0}=1?|MundaneEQCost+1|{If~{Length~%Temp2%}<3?|Temp2=flint and steel|/|Temp2&, flint and steel|}|MundaneEQ&; flint and steel|}

# ---------------------------------------------------------------------------
# Spell List

:PrintSpells
1,<br><br>
_{If~{Find~1,Greater Spell Penetration,%FeatsString%}!=0?|SpellPenetration+4|
_/{If~{Find~1,Spell Penetration,%FeatsString%}!=0?|SpellPenetration+2|
_}}
_|GodName={Replace~),$$,%GodName%}|
_|GodName={Replace~(,$,%GodName%}|
#####_<hr>%GodName% / %GodDomains%<hr>
#_<hr>%MagicUserClass%,%CharacterLevel%,[SetAttribute=%MagicUserClass%],5,%Bonus0Level%,2,%WizardSchoolTemp%,%WizardOpposed%,%CasterMinStat%,{Calc~%ASF%+%ASFSh%},%SpellPenetration%,%GodName%,%GodDomains%<hr>
_|SpellString=[Pathfinder Random Spells.Start(%MagicUserClass%,%CharacterLevel%,[SetAttribute=%MagicUserClass%],5,%Bonus0Level%,2,%WizardSchoolTemp%,%WizardOpposed%,%CasterMinStat%,{Calc~%ASF%+%ASFSh%},%SpellPenetration%,%GodName%,%GodDomains%)]|
_{If~{Find~1,ADDSPELLCASTERLOWSTATINFO,%SpellString%}>1?{Replace~ADDSPELLCASTERLOWSTATINFO,[PrintSpells2],%SpellString%}/%SpellString%}
_{If~%SpellString%!=0?[FindTakeShapeSpells]}
_{Color~Green,
_{If~{Find~1,Water Focus,%FeatsAll%}!=0?<br>[Tab]+2 DC or +2 caster level on WATER spells.}
_}
_{Color~Peru,
_{IIf~{Param~Race,%Race%}=Svirfneblin?<br>[Tab]+1 DC for illusion spells.
_   :{IIf~{And~{Param~Race,%Race%}=Gnome,{And~%Subrace%!=Dread,%Subrace%!=Lava}}=1?<br>[Tab]+1 DC for illusion spells.
_   :{IIf~{And~{Param~Race,%Race%}=Gnome,%Subrace%=Dread}=1?<br>[Tab]+1 DC for necromantic spells.
_   :{IIf~{And~{Param~Race,%Race%}=Gnome,%Subrace%=Lava}=1?<br>[Tab]+1 CL for some fire spells (Fire domain; fire elemental bloodline; oracle's flame mystery; dmg of alchemist bombs).
_   :{IIf~{And~{Param~Race,%Race%}=Gnome,%Subrace%=Traveler}=1?<br>[Tab]+1 DC for language-dependent spells or spells creating glyph/symbol/writing.
_   :{IIf~{And~{Param~Race,%Race%}=Elf,{Or~%Subrace%=Dusk,%Subrace%=Shadow}=1}=1?<br>[Tab]+1 DC for divination/sleep spells.{IIf~%CHA%>=15?<br>[Tab]{Italic~Dream} 1/day.}
_   :{IIf~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Nomadic}=1?<br>[Tab]+1 CL for "movement" spells.
_}}}}}}}
_{If~{Find~1,Stonelord,%FeatsAll%}!=0?<br>[Tab]+4 DC Enchantment vs Earth creatures.}
_{If~{Length~%ExtraRacialSpells%}>5?<br>[Tab]{Bold~Extra Racial Spells:} %ExtraRacialSpells%.}
_}

:PrintSpells2
1,{If~%GroupFlag%=2?
_{CR~}{Space~5}{Color~Red,**Does not have access to spells of these levels. Add spells modified by Metamagic Feats for those levels.}
_/}

:FindTakeShapeSpells
1,{If~{Find~1,alter self,%SpellString%}!=0?|AlterSelf=1|}
_{If~{Find~1,beast shape 4,%SpellString%}!=0?|BeastShape>4|
_/{If~{Find~1,beast shape 3,%SpellString%}!=0?|BeastShape>3|
_/{If~{Find~1,beast shape 2,%SpellString%}!=0?|BeastShape>2|
_/{If~{Find~1,beast shape 1,%SpellString%}!=0?|BeastShape>1|
_}}}}
_{If~{Find~1,elemental body 4,%SpellString%}!=0?|ElementalBody>4|
_/{If~{Find~1,elemental body 3,%SpellString%}!=0?|ElementalBody>3|
_/{If~{Find~1,elemental body 2,%SpellString%}!=0?|ElementalBody>2|
_/{If~{Find~1,elemental body 1,%SpellString%}!=0?|ElementalBody>1|
_}}}}
_{If~{Find~1,giant form 2,%SpellString%}!=0?|GiantForm>2|
_/{If~{Find~1,giant form 1,%SpellString%}!=0?|GiantForm>1|
_}}
_{If~{Find~1,plant shape 3,%SpellString%}!=0?|PlantShape>3|
_/{If~{Find~1,plant shape 2,%SpellString%}!=0?|PlantShape>2|
_/{If~{Find~1,plant shape 1,%SpellString%}!=0?|PlantShape>1|
_}}}
_{If~{Find~1,form of the dragon 3,%SpellString%}!=0?|FormOfTheDragon>3|
_/{If~{Find~1,form of the dragon 2,%SpellString%}!=0?|FormOfTheDragon>2|
_/{If~{Find~1,form of the dragon 1,%SpellString%}!=0?|FormOfTheDragon>1|
_}}}
_{If~{Find~1,polymorph,%SpellString%}!=0?|BeastShape>2||ElementalBody>1||AlterSelf>1|}
_{If~{Find~1,greater polymorph,%SpellString%}!=0?|BeastShape>4||ElementalBody>3||PlantShape>2||AlterSelf>1||FormOfTheDragon>1|}
_{If~{Find~1,shapechange,%SpellString%}!=0?|BeastShape>4||ElementalBody>4||PlantShape>3||AlterSelf>1||FormOfTheDragon>3||GiantForm>2|}

# ---------------------------------------------------------------------------
#

:GenerateCohortFollowers
1,{If~%GenCohort%=1?[GenerateCohort]}|LeadershipFeat=2||GenCohort=2||LCohLvl=0|
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After GenerateCohort}}
_{If~{And~%GenFollowers%!=3,%LFolLvl1%>1}=1?[GenerateFollowers]}
_{If~%TestLog%=1?{Log~E:\log.txt,>>>>> After GenerateFollowers}}

### NEW CLASS --- Change "|Class=|"
:GenerateCohort
1,<hr><br>{Bold~<u>Cohort</u>:}|MID=0|
_{If~{Dice~1d100}<=%MonsterCohort%?[GenerateMonsterCohort]/[GenerateNPCCohort]}

:GenerateNPCCohort
1,|MID=0||CohortGen=Yes||NPCLevel=%LCohLvl%||LeadershipFeat=2||Class=17||VillainFlag=0||SuggestedMotivation=2|{If~{Param~Heroic,%Heroic%}=Heroic?|Heroic=3|}
_<br>[InitialCharacterSetup]

:GenerateMonsterCohort
#1,<hr> GenerateMonsterCohort <hr>
1,|MID=0|[GenerateMonsterCohort2=%LCohLvl%]
#_<hr> %CohortMonster% %ALC% %MID% (AL=%AL%   ALCohort=%ALCohort%)<hr>
_|Temp1=[Permanent_Variables.%Book%]|
_{If~%TestLog%=1?{Log~E:\log.txt,----- GenerateMonsterCohort: %CohortMonster% %ALC% %MID% (AL=%AL%   ALCohort=%ALCohort%)}}
_{If~%Temp1%=Yes?
_{If~%ALC%=0?[GenerateNPCCohort]
_/{If~{And~%ALCohort%!=0,%AL%=%ALC%}=1?[PrintMonsterCohort]
_/{If~{And~%ALCohort%=0,%AL%!=%ALC%}=1?[PrintMonsterCohort]
_/[GenerateMonsterCohort]
_}}}
#_/<hr> NO Temp1=%Temp1% (%CohortMonster%) LCohLvl=%LCohLvl%<hr>[GenerateMonsterCohort]
_/[GenerateMonsterCohort]
_}

:PrintMonsterCohort
1, %CohortMonster% ({If~%ALC%=NN?N/%ALC%})
_{If~%MID%!=0?<br><br>[PF Bestiaries.DetermineMonsterURE(%MID%,%Bonus0Level%,2,,1)]}
_{If~{And~{Param~Race,%Race%}=Human,%Subrace%=Imperious}=1?<br>[Tab]Eye for Talent: +2 in one ability score.}
_<br><br>

:GenerateMonsterCohort2
1,[GenerateMonsterCohort_%LCohLvl%]
2,|ALC=0|
3-19,[GenerateMonsterCohort_%LCohLvl%]
20-100,|ALC=0|

#5,|CohortMonster= (; PFB6)||ALC=||Book=PFB6|

;GenerateMonsterCohort_1
3,|CohortMonster=Muckdweller (S Magical Beast; PFB5)||ALC=NN||Book=PFB5|
1,|ALC=0|

;GenerateMonsterCohort_3
3,|CohortMonster=Pyrausta (D Dragon; PFB5)||ALC=CN||Book=PFB5|
1,|ALC=0|

;GenerateMonsterCohort_4
10,|CohortMonster=Blink Dog (Magical Beast; PFB2)||ALC=LG||Book=PFB1|
1,|CohortMonster=Apallie (S Ooze; PFB5)||ALC=NN||Book=PFB5|
1,|CohortMonster=Coral capuchin (T Aquatic Magical Beast; PFB6)||ALC=NN||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_5
10,|CohortMonster=Ghoul (PFB1)||ALC=CE||MID=109||Book=PFB1|
10,|CohortMonster=Worg (PFB1)||ALC=NE||MID=303||Book=PFB1|
10,|CohortMonster=Azer (M Outsider; PFB2)||ALC=LN||Book=PFB2|
10,|CohortMonster=Cambion (demon) (M Outsider; PFB5)||ALC=CE||Book=PFB5|
1,|ALC=0|

;GenerateMonsterCohort_6
20,|CohortMonster=Giant Eagle (PFB1)||ALC=NG||MID=113||Book=PFB1|
20,|CohortMonster=Pegasus (PFB1)||ALC=CG||MID=214||Book=PFB1|
20,|CohortMonster=Skeletal Champion (PFB1)||ALC=NE||MID=252||Book=PFB1|
5,|CohortMonster=Kech (M Monstrous Humanoid; PFB3)||ALC=NE||Book=PFB3|
3,|CohortMonster=Sasquatch (M Humanoid; PFB3)||ALC=NN||Book=PFB3|
1,|CohortMonster=Chuspiki (T Magical Beast; PFB5)||ALC=CN||Book=PFB5|
5,|CohortMonster=Deep Merfolk (M Aquatic Humanoid; PFB5)||ALC=NN||Book=PFB5|
1,|CohortMonster=Flytrap Leshy (S Plant; PFB5)||ALC=NN||Book=PFB5|
1,|CohortMonster=Heikegani (S Aquatic Aberration; PFB5)||ALC=NE||Book=PFB5|
5,|CohortMonster=Liminal Sprite (T Fey; PFB5)||ALC=CN||Book=PFB5|
1,|CohortMonster=Aether Wysp (T Outsider; PFB5)||ALC=NN||Book=PFB5|
1,|CohortMonster=Air Wysp (T Outsider; PFB5)||ALC=NN||Book=PFB5|
1,|CohortMonster=Earth Wysp (T Outsider; PFB5)||ALC=NN||Book=PFB5|
1,|CohortMonster=Fire Wysp (T Outsider; PFB5)||ALC=NN||Book=PFB5|
1,|CohortMonster=Water Wysp (T Outsider; PFB5)||ALC=NN||Book=PFB5|
3,|CohortMonster=Boggart (S Fey; PFB6)||ALC=CE||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_7
10,|CohortMonster=Hell hound (PFB1)||ALC=LE||MID=149||Book=PFB1|
10,|CohortMonster=Hound Archon (PFB1)||ALC=LG||MID=156||Book=PFB1|
10,|CohortMonster=Satyr (PFB1)||ALC=CN||MID=241||Book=PFB1|
10,|CohortMonster=Howler (L Outsider; PFB2)||ALC=CE||Book=PFB2|
10,|CohortMonster=Giant Vulture (L Animal; PFB3)||ALC=NN||Book=PFB3|
5,|CohortMonster=Shae (M Outsider; PFB3)||ALC=NN||Book=PFB3|
1,|CohortMonster=Contemplative (M Monstrous Humanoid; PFB4)||ALC=NN||Book=PFB4|
5,|CohortMonster=Phantom Armor Guardian (M Undead; PFB4)||ALC=NE||Book=PFB4|
1,|CohortMonster=Shriezyx (M Aberration; PFB4)||ALC=CE||Book=PFB4|
1,|CohortMonster=Shulsaga (M Outsider; PFB4)||ALC=NN||Book=PFB4|
1,|CohortMonster=Snallygaster (M Aberration; PFB4)||ALC=CE||Book=PFB4|
5,|CohortMonster=Reptial (agathion) (S Outsider; PFB5)||ALC=NG||Book=PFB5|
1,|CohortMonster=Thought Eater (T Aberration; PFB5)||ALC=NN||Book=PFB5|
1,|CohortMonster=Esobok (psychopomp) (M Outsider; PFB6)||ALC=NN||Book=PFB6|
3,|CohortMonster=Yamah (azata) (M Outsider; PFB6)||ALC=CG||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_8
10,|CohortMonster=Griffon (PFB1)||ALC=NN||MID=141||Book=PFB1|
10,|CohortMonster=Pixie (PFB1)||ALC=NG||MID=218||Book=PFB1|
10,|CohortMonster=Unicorn (PFB1)||ALC=CG||MID=281||Book=PFB1|
10,|CohortMonster=Aranea (M Magical Beast; PFB2)||ALC=NN||Book=PFB2|
10,|CohortMonster=Giant Owl (H Magical Beast; PFB3)||ALC=LN||Book=PFB3|
10,|CohortMonster=Shadow Mastiff (M Outsider; PFB3)||ALC=NE||Book=PFB3|
1,|CohortMonster=Tanuki (M Monstrous Humanoid; PFB3)||ALC=CN||Book=PFB3|
5,|CohortMonster=Fossegrim (M Aquatic Fey; PFB4)||ALC=NE||Book=PFB4|
5,|CohortMonster=Sea Cat (L Aquatic Magical Beast; PFB4)||ALC=NN||Book=PFB4|
5,|CohortMonster=Shobhad (L Monstrous Humanoid; PFB4)||ALC=NN||Book=PFB4|
10,|CohortMonster=Firbolg (L Humanoid; PFB5)||ALC=NN||Book=PFB5|
10,|CohortMonster=Gancanagh (azata) (M Outsider; PFB5)||ALC=CG||Book=PFB5|
1,|CohortMonster=Lotus Leshy (S Plant; PFB5)||ALC=NN||Book=PFB5|
1,|CohortMonster=Venedaemon (daemon) (M Outsider; PFB6)||ALC=NE||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_9
10,|CohortMonster=Manticore (PFB1)||ALC=LE||MID=183||Book=PFB1|
10,|CohortMonster=Leucrotta (L Magical Beast; PFB2)||ALC=CE||Book=PFB2|
3,|CohortMonster=Sabosan (M Monstrous Humanoid; PFB3)||ALC=NE||Book=PFB3|
5,|CohortMonster=Huldra (M Fey; PFB4)||ALC=CN||Book=PFB4|
5,|CohortMonster=Giant Phantom Armor (L Undead; PFB4)||ALC=NE||Book=PFB4|
5,|CohortMonster=Saguaroi (M Plant; PFB4)||ALC=NN||Book=PFB4|
3,|CohortMonster=Uraeus (M Magical Beast; PFB5)||ALC=LG||Book=PFB5|
1,|CohortMonster=Danthienne (T Fey; PFB6)||ALC=CN||Book=PFB6|
5,|CohortMonster=Gowrow (L Aquatic Dragon; PFB6)||ALC=NN||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_10
10,|CohortMonster=Wyvern (PFB1)||ALC=NN||MID=305||Book=PFB1|
5,|CohortMonster=Redcap (S Fey; PFB2)||ALC=NE||Book=PFB2|
3,|CohortMonster=Derhii (L Monstrous Humanoid; PFB3)||ALC=NN||Book=PFB3|
10,|CohortMonster=Dragonne (L Magical Beast; PFB3)||ALC=NN||Book=PFB3|
5,|CohortMonster=Maftet (M Monstrous Humanoid; PFB3)||ALC=NN||Book=PFB3|
5,|CohortMonster=Swan Maiden (M Fey; PFB4)||ALC=CG||Book=PFB4|
1,|CohortMonster=Azuretzi (protean) (S Outsider; PFB6)||ALC=CN||Book=PFB6|
5,|CohortMonster=Brimorak (demon) (S Outsider; PFB6)||ALC=CE||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_11
10,|CohortMonster=Babau (demon) (PFB1)||ALC=CE||MID=12||Book=PFB1|
10,|CohortMonster=Bralani (azata) (PFB1)||ALC=CG||MID=31||Book=PFB1|
10,|CohortMonster=Drider (PFB1)||ALC=CE||MID=82||Book=PFB1|
3,|CohortMonster=Ahuizotl (L Aquatic Magical Beast; PFB3)||ALC=NE||Book=PFB3|
1,|CohortMonster=Encantado (M Aquatic Fey; PFB5)||ALC=CN||Book=PFB5|
1,|CohortMonster=Taniwha (L Aquatic Magical Beast; PFB6)||ALC=CG||Book=PFB6|
1,|CohortMonster=Tenome (M Monstrous Humanoid; PFB6)||ALC=NE||Book=PFB6|
5,|CohortMonster=Yaenit (demon) (M Outsider; PFB6)||ALC=CE||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_12
3,|CohortMonster=Svartalfar (M Fey; PFB4)||ALC=LE||Book=PFB4|
10,|CohortMonster=Dragonkin (L Dragon; PFB5)||ALC=LN||Book=PFB5|
1,|CohortMonster=Moldwretch (S Plant; PFB6)||ALC=NN||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_13
5,|CohortMonster=Kirin (L Magical Beast; PFB3)||ALC=LG||Book=PFB3|
5,|CohortMonster=Nephilim (L Outsider; PFB3)||ALC=NN||Book=PFB3|
3,|CohortMonster=Nependis (L Monstrous Humanoid; PFB4)||ALC=CE||Book=PFB4|
3,|CohortMonster=Vanth (psychopomp) (M Outsider; PFB4)||ALC=NN||Book=PFB4|
1,|CohortMonster=Ichkoh (sahkil) (M Outsider; PFB6)||ALC=NE||Book=PFB6|
1,|CohortMonster=Nekomata (M Magical Beast; PFB6)||ALC=NE||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_14
10,|CohortMonster=Young White Dragon (PFB1)||ALC=CE||MID=345||Book=PFB1|
10,|CohortMonster=Axiomite (M Outsider; PFB2)||ALC=LN||Book=PFB2|
5,|CohortMonster=Adlet (M Humanoid; PFB3)||ALC=CN||Book=PFB3|
5,|CohortMonster=Shedu (L Magical Beast; PFB3)||ALC=LG||Book=PFB3|
1,|CohortMonster=Kabandha (cyclops) (L Humanoid; PFB5)||ALC=LN||Book=PFB5|
1,|CohortMonster=Utukku (qlippoth) (M Outsider; PFB6)||ALC=CE||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_15
10,|CohortMonster=Ettin (PFB1)||ALC=CE||MID=97||Book=PFB1|
10,|CohortMonster=Young Black Dragon (PFB1)||ALC=CE||MID=333||Book=PFB1|
10,|CohortMonster=Young Brass Dragon (PFB1)||ALC=CG||MID=348||Book=PFB1|
10,|CohortMonster=Avoral (Agathion) (M Outsider; PFB2)||ALC=NG||Book=PFB2|
1,|CohortMonster=Psychemental (S Outsider; PFB5)||ALC=NN||Book=PFB5|
1,|CohortMonster=Fen mauler (L Monstrous Humanoid; PFB6)||ALC=NE||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_16
10,|CohortMonster=Erinyes (devil) (PFB1)||ALC=LE||MID=95||Book=PFB1|
10,|CohortMonster=Young Green Dragon (PFB1)||ALC=LE||MID=339||Book=PFB1|
10,|CohortMonster=Young Copper Dragon (PFB1)||ALC=CG||MID=354||Book=PFB1|
10,|CohortMonster=Dragon Horse (L Magical Beast; PFB2)||ALC=NG||Book=PFB2|
5,|CohortMonster=Garuda (M Outsider; PFB3)||ALC=CG||Book=PFB3|
10,|CohortMonster=Sleipnir (L Magical Beast; PFB3)||ALC=NN||Book=PFB3|
5,|CohortMonster=Blood Hag (M Monstrous Humanoid; PFB4)||ALC=NE||Book=PFB4|
1,|CohortMonster=Daitengu (M Outsider; PFB6)||ALC=NN||Book=PFB6|
1,|CohortMonster=Leng hound (M Aberration; PFB6)||ALC=CE||Book=PFB6|
1,|ALC=0|

;GenerateMonsterCohort_17
10,|CohortMonster=Young Blue Dragon (PFB1)||ALC=LE||MID=336||Book=PFB1|
10,|CohortMonster=Young Bronze Dragon (PFB1)||ALC=LG||MID=351||Book=PFB1|
10,|CohortMonster=Leonal (Agathion) (M Outsider; PFB2)||ALC=NG||Book=PFB2|
1,|CohortMonster=Xanthos (H Magical Beast; PFB4)||ALC=NN||Book=PFB4|
1,|ALC=0|

;GenerateMonsterCohort_18
10,|CohortMonster=Stone Giant (PFB1)||ALC=NN||MID=264||Book=PFB1|
10,|CohortMonster=Young Red Dragon (PFB1)||ALC=CE||MID=342||Book=PFB1|
10,|CohortMonster=Young Silver Dragon (PFB1)||ALC=LG||MID=360||Book=PFB1|
1,|ALC=0|

;GenerateMonsterCohort_19
10,|CohortMonster=Young Gold Dragon (PFB1)||ALC=LG||MID=357||Book=PFB1|
1,|ALC=0|

:GenerateFollowers
1,{Bold~Followers: ({Calc~%LFolLvl1%+%LFolLvl2%+%LFolLvl3%+%LFolLvl4%+%LFolLvl5%+%LFolLvl6%}) } %LFolLvl1% x1st
_{If~%LFolLvl2%>0?; %LFolLvl2% x2nd}
_{If~%LFolLvl3%>0?; %LFolLvl3% x3rd}
_{If~%LFolLvl4%>0?; %LFolLvl4% x4th}
_{If~%LFolLvl5%>0?; %LFolLvl5% x5th}
_{If~%LFolLvl6%>0?; %LFolLvl6% x6th}
_<br>{Space~5}{Bold~1st:} |Temp4=%LFolLvl1%||TempNumber=1|[GenerateFollowers2]
_{If~%LFolLvl2%>0?<br>{Space~5}{Bold~2nd:} |Temp4=%LFolLvl2%||TempNumber=2|[GenerateFollowers2]}
_{If~%LFolLvl3%>0?<br>{Space~5}{Bold~3rd:} |Temp4=%LFolLvl3%||TempNumber=3|[GenerateFollowers2]}
_{If~%LFolLvl4%>0?<br>{Space~5}{Bold~4th:} |Temp4=%LFolLvl4%||TempNumber=4|[GenerateFollowers2]}
_{If~%LFolLvl5%>0?<br>{Space~5}{Bold~5th:} |Temp4=%LFolLvl5%||TempNumber=5|[GenerateFollowers2]}
_{If~%LFolLvl6%>0?<br>{Space~5}{Bold~6th:} |Temp4=%LFolLvl6%||TempNumber=6|[GenerateFollowers2]}

:GenerateFollowers2
1,|Temp1=||Com=0||Exp2=0||Exp3=0||Exp4=0||Exp5=0||Exp6=0||Exp7=0||Exp8=0||Exp9=0||Exp10=0|
_|War=0||WarBody=0||WarMili=0||WarThug=0||Adp=0||Ari=0||AdpSee=0||AdpSmi=0|
_|ComDoc=0||ComFar=0||ComMil=0||ComMin=0||ComPor=0||ComTra=0||ComTow=0||ComViE=0|
_|Ftr=0||Bbn=0||Brd=0||Clr=0||Drd=0||Mnk=0||Pal=0||Rgr=0||Rog=0||Sor=0||Wiz=0|
_{While~%Temp4%,
_|Temp4-1|
_|Temp3=[RandomFollower%GenFollowers%]|
_{If~%Temp3%=Com%TempNumber%?|Com+1|
_/{If~%Temp3%=Com%TempNumber% (Doctor)?|ComDoc+1|
_/{If~%Temp3%=Com%TempNumber% (Farmer)?|ComFar+1|
_/{If~%Temp3%=Com%TempNumber% (Militia)?|ComMil+1|
_/{If~%Temp3%=Com%TempNumber% (Miner)?|ComMin+1|
_/{If~%Temp3%=Com%TempNumber% (Porter)?|ComPor+1|
_/{If~%Temp3%=Com%TempNumber% (Traitor)?|ComTra+1|
_/{If~%Temp3%=Com%TempNumber% (Townsperson)?|ComTow+1|
_/{If~%Temp3%=Com%TempNumber% (Village Elder)?|ComViE+1|
_/{If~%Temp3%=Adp{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}}?|Adp+1|
_/{If~%Temp3%=Adp{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}} (Seer)?|AdpSee+1|
_/{If~%Temp3%=Adp{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}} (Smiter)?|AdpSmi+1|
_/{If~%Temp3%=Ari{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}}?|Ari+1|
_/{If~%Temp3%=Ftr{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}?|Ftr+1|
_/{If~%Temp3%=Bbn{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}?|Bbn+1|
_/{If~%Temp3%=Brd{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}?|Brd+1|
_/{If~%Temp3%=Clr{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}?|Clr+1|
_/{If~%Temp3%=Drd{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}?|Drd+1|
_/{If~%Temp3%=Mnk{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}?|Mnk+1|
_/{If~%Temp3%=Pal{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}?|Pal+1|
_/{If~%Temp3%=Rgr{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}?|Rgr+1|
_/{If~%Temp3%=Rog{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}?|Rog+1|
_/{If~%Temp3%=Sor{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}?|Sor+1|
_/{If~%Temp3%=Wiz{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}?|Wiz+1|
_/{If~%Temp3%=Exp%TempNumber% (Blacksmith)?|Exp3+1|
_/{If~%Temp3%=Exp%TempNumber% (Courtesan)?|Exp4+1|
_/{If~%Temp3%=Exp%TempNumber% (Fence)?|Exp5+1|
_/{If~%Temp3%=Exp%TempNumber% (Jeweller)?|Exp6+1|
_/{If~%Temp3%=Exp%TempNumber% (Pawnbroker)?|Exp7+1|
_/{If~%Temp3%=Exp%TempNumber% (Sage_Scholar)?|Exp8+1|
_/{If~%Temp3%=Exp%TempNumber% (Locksmith)?|Exp9+1|
_/{If~%Temp3%=Exp%TempNumber% (Merchant)?|Exp10+1|
_/{If~{Find~1,Exp%TempNumber%,%Temp3%}!=0?|Exp2+1|
_/{If~%Temp3%=War%TempNumber%?|War+1|
_/{If~%Temp3%=War%TempNumber% (Bodyguard)?|WarBody+1|
_/{If~%Temp3%=War%TempNumber% (Militia)?|WarMili+1|
_/{If~%Temp3%=War%TempNumber% (Thug)?|WarThug+1|
_/|Temp1&%Temp3%|{If~%Temp4%>0?|Temp1&$|}
_}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}
_}
#_<br>1 (%Temp1%)<br><br>
_{If~%Com%=1?|Temp1&$Com%TempNumber%|
_/{If~%Com%>1?|Temp1&$Com%TempNumber% (x%Com%)|
_}}
_{If~%ComDoc%=1?|Temp1&$Com%TempNumber% (Doctor)|
_/{If~%ComDoc%>1?|Temp1&$Com%TempNumber% (Doctor) (x%ComDoc%)|
_}}
_{If~%ComFar%=1?|Temp1&$Com%TempNumber% (Farmer)|
_/{If~%ComFar%>1?|Temp1&$Com%TempNumber% (Farmer) (x%ComFar%)|
_}}
_{If~%ComMil%=1?|Temp1&$Com%TempNumber% (Militia)|
_/{If~%ComMil%>1?|Temp1&$Com%TempNumber% (Militia) (x%ComMil%)|
_}}
_{If~%ComMin%=1?|Temp1&$Com%TempNumber% (Miner)|
_/{If~%ComMin%>1?|Temp1&$Com%TempNumber% (Miner) (x%ComMin%)|
_}}
_{If~%ComPor%=1?|Temp1&$Com%TempNumber% (Porter)|
_/{If~%ComPor%>1?|Temp1&$Com%TempNumber% (Porter) (x%ComPor%)|
_}}
_{If~%ComTra%=1?|Temp1&$Com%TempNumber% (Traitor)|
_/{If~%ComTra%>1?|Temp1&$Com%TempNumber% (Traitor) (x%ComTra%)|
_}}
_{If~%ComTow%=1?|Temp1&$Com%TempNumber% (Townsperson)|
_/{If~%ComTow%>1?|Temp1&$Com%TempNumber% (Townsperson) (x%ComTow%)|
_}}
_{If~%ComViE%=1?|Temp1&$Com%TempNumber% (Village Elder)|
_/{If~%ComViE%>1?|Temp1&$Com%TempNumber% (Village Elder) (x%ComViE%)|
_}}
_{If~%Adp%=1?|Temp1&$Adp{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}}|
_/{If~%Adp%>1?|Temp1&$Adp{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}} (x%Adp%)|
_}}
_{If~%AdpSee%=1?|Temp1&$Adp{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}} (Seer)|
_/{If~%AdpSee%>1?|Temp1&$Adp{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}} (Seer) (x%AdpSee%)|
_}}
_{If~%AdpSmi%=1?|Temp1&$Adp{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}} (Smiter)|
_/{If~%AdpSmi%>1?|Temp1&$Adp{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}} (Smiter) (x%AdpSmi%)|
_}}
_{If~%Ari%=1?|Temp1&$Ari{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}}|
_/{If~%Ari%>1?|Temp1&$Ari{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-2}} (x%Ari%)|
_}}
_{If~%Ftr%=1?|Temp1&$Ftr{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}|
_/{If~%Ftr%>1?|Temp1&$Ftr{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}} (x%Ftr%)|
_}}
_{If~%Bbn%=1?|Temp1&$Bbn{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}|
_/{If~%Bbn%>1?|Temp1&$Bbn{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}} (x%Bbn%)|
_}}
_{If~%Brd%=1?|Temp1&$Brd{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}|
_/{If~%Brd%>1?|Temp1&$Brd{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}} (x%Brd%)|
_}}
_{If~%Clr%=1?|Temp1&$Clr{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}|
_/{If~%Clr%>1?|Temp1&$Clr{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}} (x%Clr%)|
_}}
_{If~%Drd%=1?|Temp1&$Drd{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}|
_/{If~%Drd%>1?|Temp1&$Drd{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}} (x%Drd%)|
_}}
_{If~%Mnk%=1?|Temp1&$Mnk{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}|
_/{If~%Mnk%>1?|Temp1&$Mnk{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}} (x%Mnk%)|
_}}
_{If~%Pal%=1?|Temp1&$Pal{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}|
_/{If~%Pal%>1?|Temp1&$Pal{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}} (x%Pal%)|
_}}
_{If~%Rgr%=1?|Temp1&$Rgr{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}|
_/{If~%Rgr%>1?|Temp1&$Rgr{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}} (x%Rgr%)|
_}}
_{If~%Rog%=1?|Temp1&$Rog{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}|
_/{If~%Rog%>1?|Temp1&$Rog{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}} (x%Rog%)|
_}}
_{If~%Sor%=1?|Temp1&$Sor{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}|
_/{If~%Sor%>1?|Temp1&$Sor{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}} (x%Sor%)|
_}}
_{If~%Wiz%=1?|Temp1&$Wiz{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}}|
_/{If~%Wiz%>1?|Temp1&$Wiz{If~%GenFollowers%=1?%TempNumber%/{Calc~%TempNumber%-3}} (x%Wiz%)|
_}}
_{If~%Exp2%=1?|Temp1&$Exp%TempNumber%|
_/{If~%Exp2%>1?|Temp1&$Exp%TempNumber% (x%Exp2%)|
_}}
_{If~%Exp3%=1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Blacksmith})|
_/{If~%Exp3%>1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Blacksmith}) (x%Exp3%)|
_}}
_{If~%Exp4%=1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Courtesan})|
_/{If~%Exp4%>1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Courtesan}) (x%Exp4%)|
_}}
_{If~%Exp5%=1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Fence})|
_/{If~%Exp5%>1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Fence}) (x%Exp5%)|
_}}
_{If~%Exp6%=1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Jeweller})|
_/{If~%Exp6%>1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Jeweller}) (x%Exp6%)|
_}}
_{If~%Exp7%=1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Pawnbroker})|
_/{If~%Exp7%>1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Pawnbroker}) (x%Exp7%)|
_}}
_{If~%Exp8%=1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Sage_Scholar})|
_/{If~%Exp8%>1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Sage_Scholar}) (x%Exp8%)|
_}}
_{If~%Exp9%=1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Locksmith})|
_/{If~%Exp9%>1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Locksmith}) (x%Exp9%)|
_}}
_{If~%Exp10%=1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Merchant})|
_/{If~%Exp10%>1?|Temp1&$Exp%TempNumber% ({Color~DarkCyan,Merchant}) (x%Exp10%)|
_}}
_{If~%WarBody%=1?|Temp1&$War%TempNumber% (Bodyguard)|
_/{If~%WarBody%>1?|Temp1&$War%TempNumber% (Bodyguard) (x%WarBody%)|
_}}
_{If~%WarMili%=1?|Temp1&$War%TempNumber% (Militia)|
_/{If~%WarMili%>1?|Temp1&$War%TempNumber% (Militia) (x%WarMili%)|
_}}
_{If~%WarThug%=1?|Temp1&$War%TempNumber% (Thug)|
_/{If~%WarThug%>1?|Temp1&$War%TempNumber% (Thug) (x%WarThug%)|
_}}
_{If~%War%=1?|Temp1&$War%TempNumber%|
_/{If~%War%>1?|Temp1&$War%TempNumber% (x%War%)|
_}}
#_<br>2 (%Temp1%)<br><br>
_|Temp1={Replace~$$,$,%Temp1%}|
_{If~{Left~1,%Temp1%}=$?|Temp1={Mid~{Calc~{Length~%Temp1%}-1},2,%Temp1%}|}
#_<br>3 (%Temp1%)<br><br>
_|Temp1={OrderAsc~"$",%Temp1%}|
#_<br>4 (%Temp1%)<br><br>
_|Temp1={Replace~$,$ ,%Temp1%}|
#_<br>5 (%Temp1%)<br><br>
_{CommaReplace~1,$,%Temp1%}.

;RandomFollower1
1,Com%TempNumber%|Temp2=[CommonerTypeRandom]|{If~%Temp2%=Standard?/ (%Temp2%)}
1,Exp%TempNumber%|Temp2=[ExpertTypeRandom]|{If~%Temp2%=Standard?/ (%Temp2%)}
1,War%TempNumber%|Temp2=[WarriorTypeRandom]|{If~%Temp2%=Standard?/ (%Temp2%)}
1,Ari%TempNumber%
1,Adp%TempNumber%|Temp2=[AdeptTypeRandom]|{If~%Temp2%=Adept?/ (%Temp2%)}
6,[ShortClassPC]%TempNumber%

;RandomFollower2
1,Com%TempNumber%|Temp2=[CommonerTypeRandom]|{If~%Temp2%=Standard?/ (%Temp2%)}
1,Exp%TempNumber%|Temp2=[ExpertTypeRandom]|{If~%Temp2%=Standard?/ (%Temp2%)}
1,War%TempNumber%|Temp2=[WarriorTypeRandom]|{If~%Temp2%=Standard?/ (%Temp2%)}
2,{If~%TempNumber%>=3?Ari{Calc~%TempNumber%-2}/[RandomFollower2]}
2,{If~%TempNumber%>=3?Adp{Calc~%TempNumber%-2}|Temp2=[AdeptTypeRandom]|{If~%Temp2%=Adept?/ (%Temp2%)}/[RandomFollower2]}
3,{If~%TempNumber%>=4?[ShortClassPC]{Calc~%TempNumber%-3}/[RandomFollower2]}

# ---------------------------------------------------------------------------
#

:GenAlignment
1,[DetermineAlignment=%Class%]
_|AL=[ShortAlignment=%AlignmentChoice%]|
_{If~{And~%ALGroupEvil%=No Evil,{Find~1,E,%AL%}!=0}=1?[GenAlignment]
_   /{If~{And~%ALGroupEvil%=Evil,{Find~1,E,%AL%}=0}=1?[GenAlignment]
_      /{If~{And~%GodName%!=0,%GodGenGroup%=1}=1?[GodAlignment]
_}}}

### NEW CLASS with God or "Nature" classes (like Druid/Ranger) ###
### NOTE: Paladins not included since cannot be found in groups due to Alignment restriction ###
:GodAlignment
1,{If~{And~{Param~Class,%Class%}=Cleric,{Find~1,%AL%,%GodPriAL%}=0}=1?[GenAlignment]
_/{If~{And~{Param~Class,%Class%}=Adept,{And~{Find~1,%AL%,%GodPriAL%}=0,{Find~1,Adept,%GodPriAL%}=0}=1}=1?[GenAlignment]
_/{If~{And~{Param~Class,%Class%}!=Druid,{Param~Class,%Class%}!=Ranger}=1?[GodWAL]
_}}}

:GodWAL
1,{If~{And~{Find~1,Any,%GodWAL%}=0,{Find~1,%AL%,%GodWAL%}=0}=1?[GenAlignment]}

:SetALGroup
1,{If~%AL%=LG?|ALGroup=LG LN NG NN|
_/{If~%AL%=LN?|ALGroup=LG LN LE NG NN NE|
_/{If~%AL%=LE?|ALGroup=LN LE NN NE|
_/{If~%AL%=NG?|ALGroup=LG LN NG NN CG CN|
_/{If~%AL%=NN?|ALGroup=LG LN LE NN NG NE CG CN CE|
_/{If~%AL%=NE?|ALGroup=LN LE NE NN CN CE|
_/{If~%AL%=CG?|ALGroup=NG NN CG CN|
_/{If~%AL%=CN?|ALGroup=NG NE NN CG CN CE|
_/{If~%AL%=CE?|ALGroup=NN NE CN CE|
_}}}}}}}}}

:GenAlignmentCohort
1,{If~%ALCohort%=0?[GenAlignmentCohort2]/|AL=%ALCohort%|}

:GenAlignmentCohort2
1,[DetermineAlignment=%Class%]
_|AL=[ShortAlignment=%AlignmentChoice%]|
_{If~%AL%=%ALMaster%?[GenAlignmentCohort2]
_   /{If~{And~{Find~1,G,%ALMaster%}!=0,{Find~1,E,%AL%}!=0}=1?[GenAlignmentCohort2]
_      /{If~{And~{Find~1,E,%ALMaster%}!=0,{Find~1,G,%AL%}!=0}=1?[GenAlignmentCohort2]
#_      /{If~{And~{Param~Class,%Class%}=Cleric,{Find~%AL%,%GodPriAL%}=0}=1?[GenAlignmentCohort2]
#_      /{If~{And~{Param~Class,%Class%}=Adept,{And~{Find~%AL%,%GodPriAL%}=0,{Find~1,Adept,%GodPriAL%}=0}=1}=1?[GenAlignmentCohort2]
#_}}}}}
_}}}

### XXX ERASE
:GenAlignmentCohort2___OLD with infos
1,[DetermineAlignment=%Class%]|AL=[ShortAlignment=%AlignmentChoice%]|
_<hr> ========> AL %AL% -- ALMaster %ALMaster%<hr>
_{If~%AL%=%ALMaster%?<hr>AL=ALMaster<hr>[GenAlignmentCohort2]
_   /{If~{And~{Find~1,G,%ALMaster%}!=0,{Find~1,E,%AL%}!=0}=1?<hr>AL (E)=%AL% -- ALMaster (G) = %ALMaster%<hr>[GenAlignmentCohort2]
_      /{If~{And~{Find~1,E,%ALMaster%}!=0,{Find~1,G,%AL%}!=0}=1?<hr>AL (G)=%AL% -- ALMaster (E)= %ALMaster%<hr>[GenAlignmentCohort2]
_}}}

# ---------------------------------------------------------------------------
#

### NEW CLASS ### NEW RACE ###
# Temp1 = required type.
:PrintPoison
1,|TempVerify=0|
_{If~{Find~1,blowgun,%WpnR%}!=0?|Temp1=Injury|[PrintPoison2]
_   /{If~{And~{Find~1,alchemy,%SkillsString%}!=0,{Find~1,E,%AL%}!=0}=1?{If~{Dice~1d100}<=90?|Temp1=Any|[PrintPoison2]}
_   /{If~{And~{Param~Race,%Race%}=Drow,{Dice~1d100}<=80}=1?[PrintPoisonDrow]
_   /{If~{And~{And~{Param~Race,%Race%}=Halfling,%Subrace%=Jungle}=1,{Dice~1d100}<=80}=1?[PrintPoison2]
_   /{If~{And~{Param~Class,%Class%}=Rogue,{Find~1,E,%AL%}!=0}=1?{If~{Dice~1d100}<=60?|Temp1=Any|[PrintPoison2]}
_   /{If~{Find~1,E,%AL%}!=0?{If~{Dice~1d100}<=15?|Temp1=Any|[PrintPoison2]}
_}}}}}}

:PrintPoison2
1,|Temp4=%CharacterLevel%||Temp4\6||TempVerify+1|
_{If~%TempVerify%<100?[PrintPoison3]/[PrintPoison5]}

:PrintPoison3
1,|TempString=[Equipment.EQCallPoisonCR_PF(%Temp4%,,2,,3)]|
# Temp2= Name / Temp3= Cost
_{Split~TempString,"!",Temp2,Temp3,Book,Type,Damage,MagEffect,Freq,Onset,Cure,CRVal}
_{If~%Temp3%>{Calc~%WealthWPN%+%WealthLIM%+%WealthGEAR%}?[PrintPoison2]
_/{If~{And~%Temp1%=Injury,{Find~1,Injury,%Type%}=0}=1?[PrintPoison2]
_/[PrintPoison4]
_}}

:PrintPoison4
1,|TempNumber={Dice~2d%CharacterLevel%}||Temp4=%TempNumber%||Temp4*%Temp3%|
_{While~%Temp4%>{Calc~%WealthWPN%+%WealthLIM%+%WealthGEAR%},|Temp4-%Temp3%||TempNumber-1|}
_{If~%Temp4%<=%WealthLIM%?|WealthLIM-%Temp4%||Temp4=0|/|Temp4-%WealthLIM%||WealthLIM=0|}
_{If~%Temp4%<=%WealthWPN%?|WealthWPN-%Temp4%||Temp4=0|/|Temp4-%WealthWPN%||WealthWPN=0|}
_{If~%Temp4%<=%WealthGEAR%?|WealthGEAR-%Temp4%||Temp4=0|/|Temp4-%WealthGEAR%||WealthGEAR=0|}
_<br>[Tab]{Italic~Poison:} {Bold~%TempNumber%} dose{If~%TempNumber%>1?s} of %Temp2% ([AddComma.Start(%Temp3%)] gp, CR%CRVal%).
_ (%Type%{If~%Onset%!=0? (onset: %Onset%)}. %Damage%, {Bold~Frequency:} %Freq% (cure: %Cure%){If~%MagEffect%!=0? (Magical Poison: %MagEffect%)}).

:PrintPoison5
1,<br>{Space~5}{Italic~Poison:} {Bold~{Dice~2d3}} doses of Bloodrot (100 gp, CR1).
_<br>[Tab][Tab]Injury DC12 (onset: 1r). 1 CON +1 WIS, Frequency: 1/r for 4 rnd (cure: 1 save).

:PrintPoisonDrow
1,<br>{Space~5}{Italic~Poison:} {Bold~{Dice~2d3}} doses of Drow Poison.
_<br>[Tab][Tab]Injury DC13. Unconsciousness 1 min, secondary: unconsciousness 2d4h, Frequency: 1/min for 2 min (cure: 1 save).

# ---------------------------------------------------------------------------
#
# ---------------------------------------------------------------------------
#
# ---------------------------------------------------------------------------
#
# ---------------------------------------------------------------------------
#
# ---------------------------------------------------------------------------
#
# ---------------------------------------------------------------------------
#
#
#
#
#
# ---------------------------------------------------------------------------

### NEW RACE ###
### NEW SUBRACE ###
# If you add a size different than S or M, you must modify "Animal Companion Pathfinder.tab" to add Animal Companion and Paladin Mounts
# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
# LANGUAGE: Set them in "Pathfinder Skills"
# See "RacialAL" below in "SetRacialAL".
:SetRacialTraits
# Human (SubHuman= None,Aquatic,Cosmopolitain,Country Folk,Gutter Rat,Imperious,Trailblazer)
1,|RaceType=humanoid||RaceSubtype=0||Size=5||Movement=30||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=0||HumanHeartStreet=0|
_{IIf~%Subrace%=Aquatic?|Swim=30||RaceSubtype=aquatic||VisionLowLight=Yes|}
_{IIf~%Subrace%=Cosmopolitain?[HumanFocusedStudy]; [HumanHeartStreet]
_   :{IIf~%Subrace%=Country Folk?[HumanFocusedStudy]; Heart of the Fields|TempNumber={Calc~%CharacterLevel%\2}||TempNumber>1||Rule=+%TempNumber% [GnomeObsessive]; 1/day can ignore effects that would cause them to become fatigued|[PrRule]
_   :{IIf~%Subrace%=Gutter Rat?[HumanHeartStreet]; Heart of the Slums|Rule=+2 Sleight of Hands/Stealth; +4 Survival in urban/underground; Roll twice saves vs disease (take the best)|[PrRule]
_   :{IIf~%Subrace%=Imperious?Eye for Talent|Rule=+2 Sense Motive / +2 one ability score for Animal Companion/Bonded Mount/Cohort/Familiar|[PrRule]; Silver Tongue|Rule=+2 Diplomacy/Bluff; Diplomacy can shift attitude more than two steps|[PrRule]
_   :{IIf~%Subrace%=Trailblazer?Heart of the Wilderness|TempNumber={Calc~%CharacterLevel%\2}||TempNumber>1||HeartWilderness=%TempNumber%||Rule=+%TempNumber% Survival; +5 CON to stabilize when dying; +%TempNumber% CON for negative hp to be killed|[PrRule]; Heroic|Rule={If~%Valminder%=1?+2 AP when gaining a new level/+1 hero point when gaining a new level}|[PrRule]
_   :Bonus Feat; Skilled|Rule=+1 skill rank/level|[PrRule]
_}}}}}
#
# Dwarf (SubDwarf= Hill/None,Aquatic,Arctic,Deep,Elder,Exiled,Mountain)
2,|RaceType=humanoid||RaceSubtype=0||Size=5||Movement=20||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=60|
_|SlowSteady=Yes||Stonecunning=No|
_{IIf~%Subrace%=Aquatic?|Swim=20||RaceSubtype=aquatic|}
_{IIf~%Subrace%=Aquatic?[DwarfDefTraining]; [DwarfGreed]; Hardy|Rule=+2 save vs poisons/spells/spell-like||Hardy=Yes|[PrRule]; [DwarfHatred]; [DwarfSlowSteady]; [DwarfStability]; [DwarfStonecunning]; [DwarfWnpFam]
_   :{IIf~%Subrace%=Arctic?[ColdEnd], [DwarfDefTraining]; [DwarfGreed]; Hardy|Rule=+2 save vs poisons/spells/spell-like||Hardy=Yes|[PrRule]; Hatred|Rule=+1 attack roll vs humanoid (reptilians) and humanoid (goblinoid)|[PrRule]; Ice Craft|Rule=+2 Craft items made of ice|[PrRule]; Icecunning|Rule=+2 Perception vs unusual stonework and ice structures (traps, hidden doors) and automatic check with 10' to notice such features||Stonecunning=Yes|[PrRule]; [DwarfSlowSteady]; [DwarfWnpFam]
_   :{IIf~%Subrace%=Deep?|VisionDark=90|[DwarfDefTraining]; [DwarfGreed]; Hardy|Rule=+3 save vs poisons/spells/spell-like||Hardy=Yes|[PrRule]; [DwarfHatred]; Light Sensitivity|Rule=Dazzled in bright light or {Italic~daylight} spell; -2 save vs light spells|[PrRule]; [DwarfSlowSteady]; [DwarfStability]; [DwarfStonecunning]; [DwarfWnpFam]
_   :{IIf~%Subrace%=Desert?Crafty|Rule=+2 Knowledge (Dungeoneering/Engineering)/Profession (miner)|[PrRule]; [DwarfDefTraining]|DefensiveTraining=Dragons|; Hardy|Rule=+2 save vs poisons/spells/spell-like||Hardy=Yes|[PrRule]; Hatred|Rule=+1 attack roll vs humanoid (reptilians) and dragons|[PrRule]; [HeatEnd]; [DwarfSlowSteady]; [DwarfStability]; [DwarfWnpFam]
_   :{IIf~%Subrace%=Elder?Ancient Enmity|Rule=+1 attack roll vs humanoid (elf)|[PrRule]; [DwarfDefTraining]; Lorekeeper|Rule=+2 Knowledge (History) vs dwarves or their enemies (can use untrained)|[PrRule]; Magic Resistant|SpellResistanceRacial={Calc~5+%CharacterLevel%}||Rule=SR%SpellResistanceRacial%; STANDARD to lower it 1r; -2 Concentration vs Arcane Spells|[PrRule]; [DwarfSlowSteady]; [DwarfStability]; [DwarfStonecunning]; [DwarfWnpFam]
_   :{IIf~%Subrace%=Exiled?Relentless|Rule=+2 CMB for bull rush/overrun when both standing on the ground|[PrRule]; [DwarfSlowSteady]; Stubborn|Rule=+2 save vs enchantment (charm/compulsion) and can receive a 2nd save 1r later||Hardy=Exiled|[PrRule]; [DwarfWnpFam]; Wyrmscourged|Rule=+1 attack rolls vs dragons; +4 dodge vs dragons; +2 vs ex/spells/sp of dragons; +2 Knowledge (Arcana) vs dragons (can use untrained)||DefensiveTraining=Dragons|[PrRule]
_   :{IIf~%Subrace%=Jungle?|VisionDark=0||VisionLowLight=Yes|[DwarfDefTraining]; Hardy|Rule=+2 save vs poisons/spells/spell-like||Hardy=Yes|[PrRule]; [DwarfHatred]; Jengle Sense|Rule=+2 Heal/Knowledge (Nature)/Survival|[PrRule]; [KeenSenses]; [DwarfSlowSteady]; [DwarfStability]; [DwarfWnpFam]
_   :{IIf~%Subrace%=Mountain?[DwarfDefTraining]; [DwarfGreed]; Hardy|Rule=+2 save vs poisons/spells/spell-like||Hardy=Yes|[PrRule]; [DwarfHatred]; Mountaineer|Rule=Immune to altitude sickness; do not lose DEX when Climb/Acrobatics to cross narrow/slippery surfaces|[PrRule]; [DwarfSlowSteady]; [DwarfStonecunning]; [DwarfWnpFam]
_   :[DwarfDefTraining]; [DwarfGreed]; Hardy|Rule=+2 save vs poisons/spells/spell-like||Hardy=Yes|[PrRule]; [DwarfHatred]; [DwarfSlowSteady]; [DwarfStability]; [DwarfStonecunning]; [DwarfWnpFam]
_}}}}}}}}
#
# Elf (SubElf= None/High,Aquatic,Arctic,Dusk (Shadow in Mystara),Gray,Savage,Tower,Wild,Wood)
3,|RaceType=humanoid||Size=5||Movement=30||Fly=0||FlyMan=0||ElvenImmunities=No||ElvenMagic=No||RaceSubtype=0||Swim=0||VisionDark=0||VisionLowLight=Yes|
_{IIf~%Subrace%=Arctic?|VisionDark=60||VisionLowLight=No|
_   :{IIf~{Or~%Subrace%=Dusk,%Subrace%=Shadow}=1?|VisionDark=60||VisionLowLight=No|
_}}
#
# If no ElfWeaponFamiliarity, search for "ElfWeaponFamiliarity" and add the subrace there.
_{IIf~%Subrace%=Aquatic?|RaceSubtype=aquatic||Swim=30|Amphibious|Rule=Can breathe both water and air|[PrRule]; [ElfImmunity]; [ElfMagic]; [KeenSenses]; [ElfWeaponFamiliarity]
_   :{IIf~%Subrace%=Arctic?Desert Runner|Rule=+4 CON checks/Fortitude vs fatigue/exhaustion/running/forced marches/starvation/thirst/hot-cold environment|[PrRule]; Elemental Resistance|Rule=Resist Cold 5|[PrRule]; [KeenSenses]; [LightSensitivity]; [ElfWeaponFamiliarity]
_   :{IIf~%Subrace%=Desert?Animal Mastery|Rule=+2 Handle Animal/Ride|[PrRule]; [ElfImmunity]; [ElfMagic]; [HeatEnd]; [ElfWeaponFamiliarity]
_   :{IIf~{Or~%Subrace%=Dusk,%Subrace%=Shadow}=1?Arcane Focus|Rule=+2 Concentration to cast Arcane spells defensively|[PrRule]; Dreamspeaker|Rule=+1 DC for divination/sleep spells{IIf~%CHA%>=15?; {Italic~dream} 1/day}|[PrRule]; [KeenSenses]; [LightSensitivity]; Silent Hunter|Rule=Reduce Stealth penalty by 5 when moving and -20 when running|[PrRule]
_   :{IIf~%Subrace%=Gray?[ElfImmunity]; [ElfMagic]; [KeenSenses]; [ElfWeaponFamiliarity]
_   :{IIf~%Subrace%=Jungle?[ElfImmunity]; [KeenSenses]; Lorekeeper|Rule=+2 Knowledge (History)|[PrRule]; [ElfWeaponFamiliarity]
_   :{IIf~%Subrace%=Savage?[ElfImmunity]; Eternal Grudge|Rule=+1 attack rolls vs humanoid (dwarf/orc)|[PrRule]; Fleet-Footed|Rule=Run feat; +2 Initiative|[PrRule]
_   :{IIf~%Subrace%=Tower?Arcane Focus|Rule=+2 Concentration to cast Arcane spells defensively|[PrRule]; [ElfImmunity]; [ElfMagic]; Urbanite|Rule=+2 Diplomacy (gather info); +2 Sense Motive (hunch)|[PrRule]
_   :{IIf~%Subrace%=Wild?[ElfImmunity]; [ElfMagic]; [KeenSenses]; [ElfWeaponFamiliarity]
_   :{IIf~%Subrace%=Wood?[ElfImmunity]; [ElfMagic]; [KeenSenses]; [ElfWeaponFamiliarity]
_   :[ElfImmunity]; [ElfMagic]; [KeenSenses]; [ElfWeaponFamiliarity]
_}}}}}}}}}}
#
# Gnome (SubGnome= None/Rock,Aquatic,Arctic,Dread,Forest,Gear (Thinker in Dragonlance),Lava,Traveler)
4,|RaceType=humanoid||RaceSubtype=0||Size=4||Movement=20||Fly=0||FlyMan=0||GnomeAcademican=0||GnomeObsessive=0||GnomeIllusion=No||HatredGobRep=0||VisionLowLight=Yes||VisionDark=0|
_{IIf~%Subrace%=Aquatic?|Swim=20||RaceSubtype=aquatic|
_   :{IIf~%Subrace%=Lava?|VisionLowLight=No||VisionDark=60|
_}}
#
_{IIf~%Subrace%=Aquatic?[GnomeDefTraining]; Gnome MagicADDGNOMEMAGIC; Hatred|Rule=+1 attack roll vs humanoid (goblinoid)||HatredGobRep=0|[PrRule]; Illusion Resistance|Rule=+2 vs illusions||GnomeIllusion=Yes|[PrRule]; Well-Traveled|Rule=+2 Sense Motive/Diplomacy|[PrRule]; [GnomeWpnFam]
_   :{IIf~%Subrace%=Arctic?[ColdEnd], [GnomeDefTraining]; Gnome MagicADDGNOMEMAGIC; Hatred|Rule=+1 attack roll vs humanoid (goblinoid) and humanoid (reptilian)||HatredGobRep=1|[PrRule]; Illusion Resistance|Rule=+2 vs illusions||GnomeIllusion=Yes|[PrRule]; [KeenSenses]; Instinct|Rule=+2 Sense Motive|[PrRule]; [GnomeWpnFam]
_   :{IIf~%Subrace%=Desert?[GnomeDefTraining]; Gnome MagicADDGNOMEMAGIC; Hatred|Rule=+1 attack roll vs humanoid (goblinoid) and humanoid (reptilian)||HatredGobRep=1|[PrRule]; [HeatEnd]; Illusion Resistance|Rule=+2 vs illusions||GnomeIllusion=Yes|[PrRule]; Negotiator|Rule=+2 Bluff/Diplomacy/Sense Motive|[PrRule]; [GnomeWpnFam]
_   :{IIf~%Subrace%=Dread?[GnomeDefTraining]; Fell MagicADDFELLMAGIC; Hatred|Rule=+1 attack roll vs humanoid (goblinoid) and humanoid (reptilian)||HatredGobRep=1|[PrRule]; [KeenSenses]; Knack for Poison|Rule=+2 Fort vs poisons (+4 if he accidentally poison himself); +2 Craft (Alchemy) to make poison|[PrRule]; [GnomeWpnFam]
_   :{IIf~%Subrace%=Forest?[GnomeDefTraining]; Gnome MagicADDGNOMEMAGIC; Hatred|Rule=+1 attack rolls vs humanoids (goblinoids; kobolds; orcs; reptilians)|[PrRule]; Illusion Resistance|Rule=+2 vs illusions||GnomeIllusion=Yes|[PrRule]; [KeenSenses]; Pass without Trace|Rule=self; FREE|[PrRule]; Stealthy|Rule=+4 Stealth; +8 in wooded areas|[PrRule]; [GnomeWpnFam]
_   :{IIf~%Subrace%=Gear?Academican|Rule=+2 Knowledge ([GnomeAcademican])|[PrRule]; Gnome MagicADDGNOMEMAGIC; Master Tinker|Rule=+1 Disable Device/K (Engineering); proficient with any weapon they have personally crafted|[PrRule]; Illusion Resistance|Rule=+2 vs illusions||GnomeIllusion=Yes|[PrRule]; [KeenSenses]; [GnomeWpnFam]
_   :{IIf~%Subrace%=Jungle?[GnomeDefTraining]; Gnome MagicADDGNOMEMAGIC; Hatred|Rule=+1 attack roll vs humanoid (goblinoid) and humanoid (reptilian)||HatredGobRep=1|[PrRule]; Illusion Resistance|Rule=+2 vs illusions||GnomeIllusion=Yes|[PrRule]; Skilled|Rule=+2 Climb/Craft (shipbuilding)/Swim|[PrRule]; [GnomeWpnFam]
_   :{IIf~%Subrace%=Lava?[GnomeDefTraining]; Hatred|Rule=+1 attack roll vs humanoid (goblinoid) and humanoid (reptilian)||HatredGobRep=1|[PrRule]; Obsessive|Rule=+2 [GnomeObsessive]|[PrRule]; PyromaniacADDPYROMANIAC; [GnomeWpnFam]
_   :{IIf~%Subrace%=Traveler?[GnomeDefTraining]; Explorer|Rule=+2 Climb; +2 Knowledge ([GnomeExplorer])|[PrRule]; [KeenSenses]; Magical LinguistADDMAGICALLINGUIST; [GnomeWpnFam]
_   :[GnomeDefTraining]; Gnome MagicADDGNOMEMAGIC; Hatred|Rule=+1 attack roll vs humanoid (goblinoid) and humanoid (reptilian)||HatredGobRep=1|[PrRule]; Illusion Resistance|Rule=+2 vs illusions||GnomeIllusion=Yes|[PrRule]; [KeenSenses]; Obsessive|Rule=+2 [GnomeObsessive]|[PrRule]; [GnomeWpnFam]
_}}}}}}}}}
#
# Half Elf (SubHalfElf= None,Aquatic,Arctic,Drow-Descended,Elf-Raised,Human-Raised)
5,|RaceType=humanoid||RaceSubtype=elf||Size=5||Movement=30||Fly=0||FlyMan=0||VisionLowLight=Yes||VisionDark=0|
_{IIf~%Subrace%=Aquatic?|Swim=40||RaceSubtype&, aquatic|
_   :{IIf~%Subrace%=Drow-Descended?|VisionLowLight=No||VisionDark=60|
_}}
#XXX OPTION XXX _{If~%Subrace%=Elf-Raised?Ancestral Arms{If~%Valminder%=1?|Rule=Ancestral Weapon Mastery|/|Rule=Exotic Weapon Proficiency|}[PrRule]; 
_{IIf~%Subrace%=Aquatic?Adaptability|Rule=Skill Focus|[PrRule]; Elf Blood; [ElfImmunity]; Multitalented; Survivalist|Rule=+2 Survival|[PrRule]
_   :{IIf~%Subrace%=Arctic?Adaptability|Rule=Skill Focus|[PrRule]; [ColdEnd], Elf Blood; [ElfImmunity]; Multitalented; Survivalist|Rule=+2 Survival|[PrRule]
_   :{IIf~%Subrace%=Desert?Adaptability|Rule=Skill Focus|[PrRule]; Elf Blood; [ElfImmunity]; [HeatEnd]; Multitalented; Sense Situation|Rule=+2 Sense Motive|[PrRule]
_   :{IIf~%Subrace%=Drow-Descended?Drow Blood; Drow MagicADDDROWMAGIC; [ElfImmunity]; [KeenSenses]; Light Blindness|Rule=Blinded 1r in bright light or {Italic~daylight} spell; dazzled afterward in area|[PrRule]
_   :{IIf~%Subrace%=Elf-Raised?Ancestral Arms|Rule=Exotic Weapon Proficiency|[PrRule]; Arcane Training|Rule=Favored class=[~ElfRaisedFavored]; +1CL to use spell trigger/spell completion items or CL1 if no levels in this class|[PrRule]; [ElfImmunity]; [KeenSenses]
_   :{IIf~%Subrace%=Human-Raised?Elf Blood; [ElfImmunity]; Integrated|Rule=+1 Bluff/Disguise/Knowledge (local)|[PrRule]; Multitalented; Wary|Rule=+1 Bluff/Sense Motive|[PrRule]
_   :{IIf~%Subrace%=Jungle?Elf Blood; [ElfImmunity]; [KeenSenses]; Jungle Awareness|Rule=+2 Bluff/Sense Motive|[PrRule]; Multitalented
_   :Adaptability|Rule=Skill Focus|[PrRule]; Elf Blood; [ElfImmunity]; [KeenSenses]; Multitalented
_}}}}}}}
#
# Half Orc (SubHalfOrc= None,Aquatic,Arctic,Arena-Bred,Deep Kin,Feral,Mountain Clan,Mystic)
6,|RaceType=humanoid||RaceSubtype=orc||Size=5||Movement=30||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=60|
_{IIf~%Subrace%=Aquatic?|Swim=30||RaceSubtype&, aquatic|
_   :{IIf~%Subrace%=Arctic?|VisionLowLight=Yes||VisionDark=0|
_   :{IIf~%Subrace%=Arena-Bred?|VisionDark=0|
_   :{IIf~%Subrace%=Deep Kin?|VisionDark=90|
_   :{IIf~%Subrace%=Desert?|VisionDark=0||VisionLowLight=Yes|
_   :{IIf~%Subrace%=Feral?|VisionDark=0||VisionLowLight=Yes|
_   :{IIf~%Subrace%=Jungle?|VisionDark=0||VisionLowLight=Yes|
_}}}}}}}
_{IIf~%Subrace%=Aquatic?Emissaries|Rule=+2 Diplomacy|[PrRule]; Orc Blood; [HalfOrcFerocity]; [HalfOrcWpnFam]
_   :{IIf~%Subrace%=Arctic?[ColdEnd], Emissaries|Rule=+2 Diplomacy|[PrRule]; Orc Blood; [HalfOrcFerocity]; [HalfOrcWpnFam]
_   :{IIf~%Subrace%=Arena-Bred?City-Raised|Rule=Proficient with whips amd longswords; +2 Knowledge (local)|[PrRule]; [OrcIntimidate]; Orc Blood; [HalfOrcFerocity]; Skilled|Rule=+1 skill rank/level|[PrRule]
_   :{IIf~%Subrace%=Deep Kin?Cavewight|Rule=+1 Knowledge (dungeoneering) /Survival (underground)|[PrRule]; Orc Blood; [HalfOrcWpnFam]
_   :{IIf~%Subrace%=Desert?[HeatEnd]; [OrcIntimidate]; Orc Blood; [HalfOrcFerocity]; Runner|Rule=Run feat|[PrRule]; [HalfOrcWpnFam]
_   :{IIf~%Subrace%=Feral?Forest Walker|Rule=+2 Climb|[PrRule]; [OrcIntimidate]; Orc Blood; Toothy|Rule=Bite attack 1d4+STR|[PrRule]; [HalfOrcWpnFam]
_   :{IIf~%Subrace%=Jungle?Jungle Agility|Rule=+2 Acrobatics/Climb|[PrRule]; Orc Blood; [HalfOrcFerocity]; [HalfOrcWpnFam]
_   :{IIf~%Subrace%=Mountain Clan?Bestial|Rule=+2 Perception|[PrRule]; Orc Blood; Rock Climber|Rule=+1 Acrobatics/Climb|[PrRule]; [HalfOrcWpnFam]
_   :{IIf~%Subrace%=Mystic?Orc Blood; Shaman's Apprentice|Rule=Endurance|[PrRule]; Sacred Tatoo|Rule=+1 luck all saves||AllSaveBonus=1|[PrRule]; [HalfOrcWpnFam]
_   :[OrcIntimidate]; Orc Blood; [HalfOrcFerocity]; [HalfOrcWpnFam]
_}}}}}}}}}
#
# Halfling (SubHalfling= None/Lightfoot,Aquatic,Arctic,Avenging,Deep,Nomadic,Slave Born,Tallfellow)
7,|RaceType=humanoid||RaceSubtype=0||Size=4||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=0||Movement=20|
_{IIf~%Subrace%=Aquatic?|Swim=20||RaceSubtype=aquatic||VisionLowLight=Yes|
_   :{IIf~%Subrace%=Deep?|VisionDark=60|
_   :{IIf~%Subrace%=Nomadic?|Movement=30|
_}}}
_{IIf~%Subrace%=Aquatic?Fearless|Rule=+2 vs Fear|[PrRule]; [HalflingLuck]; [KeenSenses]; [HalflingSureFoot]; [HalflingWpnFam]
_   :{IIf~%Subrace%=Arctic?[ColdEnd], Fearless|Rule=+2 vs Fear|[PrRule]; [HalflingLuck]; [KeenSenses]; Sure-Footed|Rule=+2 Acrobatics/Swim|[PrRule]; [HalflingWpnFam]
_   :{IIf~%Subrace%=Avenging?Fearless|Rule=+2 vs Fear|[PrRule]; Low Blow|Rule=+1 to confirm critical if opponent is larger|[PrRule]; Underfoot|Rule=+1 dodge AC vs larger foes; +1 Reflex vs Trample||DodgeRacial=1|[PrRule]; Warslinger|Rule=FREE to reload sling (AO); need 2 hands|[PrRule]; [HalflingWpnFam]
_   :{IIf~%Subrace%=Deep?Fearless|Rule=+2 vs Fear|[PrRule]; [HalflingLuck]; [KeenSenses]; Smithing|Rule=+2 Appraise/Craft vs stone/metal|[PrRule]; Stonecunning|Rule=+2 Perception vs unusual stonework (traps, hidden doors) and automatic check with 10' to notice such features|[PrRule]; [HalflingWpnFam]
_   :{IIf~%Subrace%=Desert?Fearless|Rule=+2 vs Fear|[PrRule]; [HalflingLuck]; [HeatEnd]; [KeenSenses]; Nimble|Rule=+2 Sleight of Hand/Stealth|[PrRule]; [HalflingWpnFam]
_   :{IIf~%Subrace%=Jungle?[KeenSenses]; Poison Resistance|Rule=+2 Fort vs poisons|[PrRule]; Poison Use|Rule=Skilled in the use of poison and never risk accidentally poisoning themselves|[PrRule]; [HalflingSureFoot]; [HalflingWpnFam]
_   :{IIf~%Subrace%=Nomadic?Fleet of Foot|Rule=30' move|[PrRule]; Polyglot|Rule=+2 Linguistics (always class skill)|[PrRule]; Wanderlust|Rule=+2 Knowledge (Geography)/Survival; +1 CL for "movement" spells|[PrRule]; [HalflingWpnFam]
_   :{IIf~%Subrace%=Slave Born?Craven|Rule=+1 Initiative; +1 attack roll when flanking; -2 save vs Fear and no morale bonus vs Fear; when affected by a Fear effect = +10' MV / +1 dodge AC|[PrRule]; Ingratiating|Rule=+2 ONE Perform (always class skill); +2 Craft/Profession|[PrRule]; [HalflingWpnFam]
_   :{IIf~%Subrace%=Tallfellow?[ElfImmunity]; Fearless|Rule=+2 vs Fear|[PrRule]; [HalflingLuck]; [KeenSenses]; [HalflingWpnFam]
_   :Fearless|Rule=+2 vs Fear|[PrRule]; [HalflingLuck]; [KeenSenses]; [HalflingSureFoot]; [HalflingWpnFam]
_}}}}}}}}}
#
#
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
#
#
8,|RaceType=humanoid||RaceSubtype=native||Size=5||Movement=30||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=60|
_Skilled|Rule=+2 Diplomacy/Perception|[PrRule]
_; Spell-Like Ability|Rule={Italic~daylight} 1/day||Temp1={Italic~daylight} 1/day|[AddExtraRacialSpells][PrRule]
_; Celestial Resistance |Rule=Acid/Cold/Electricity Resistance 5|[PrRule]
9,|RaceType=humanoid||RaceSubtype=elf||Size=5||Movement=30||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=120||SpellResistanceRacial={Calc~6+%CharacterLevel%}|
_Drow Immunities|Rule=Immune to magic sleep, +2 vs enchantment spells/effects||ElvenImmunities=Yes|[PrRule]
_; [KeenSenses]
_; Spell-Like Abilities|Rule={Italic~Dancing light, darkness, faerie fire} 1/day||Temp1={Italic~Dancing light, darkness, faerie fire} 1/day|[AddExtraRacialSpells][PrRule]
_; Light Blindness|Rule=Blinded 1r if abruptly exposed to bright light, after dazzled while in area|[PrRule]
_; Poison Use|Rule=Skilled in the use of poison and never risk accidentally poisoning themselves|[PrRule]
# Drow Poisoninjury; save Fort DC 13; frequency 1/minute for 2 minutes; initial effect unconsciousness for 1 minute; secondary effect unconsciousness for 2d4 hours; cure 1 save.
_; Weapon Familiarity|Rule=Proficient with hand crossbow, rapier, and short sword. Treat "drow" weapons as martial weapons|[PrRule]
10,|RaceType=humanoid||RaceSubtype=elf||Size=5||Movement=30||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=120||SpellResistanceRacial={Calc~11+%CharacterLevel%}|
_Drow Immunities|Rule=Immune to magic sleep, +2 vs enchantment spells/effects||ElvenImmunities=Yes|[PrRule]
_; [KeenSenses]
_; Spell-Like Abilities|Rule={Italic~Dancing light, deeper darkness, faerie fire, feather fall, levitate} at will, constant {Italic~detect magic}, 1/day; {Italic~divine favor, dispel magic, suggestion}||Temp1={Italic~Dancing light, deeper darkness, faerie fire, feather fall, levitate} at will, constant {Italic~detect magic}, 1/day; {Italic~divine favor, dispel magic, suggestion}|[AddExtraRacialSpells][PrRule]
_; Light Blindness|Rule=Blinded 1r if abruptly exposed to bright light, after dazzled while in area|[PrRule]
_; Poison Use|Rule=Skilled in the use of poison and never risk accidentally poisoning themselves|[PrRule]
# Drow Poisoninjury; save Fort DC 13; frequency 1/minute for 2 minutes; initial effect unconsciousness for 1 minute; secondary effect unconsciousness for 2d4 hours; cure 1 save.
_; Weapon Familiarity|Rule=Proficient with hand crossbow rapier, and short sword. Treat "drow" weapons as martial weapons|[PrRule]
11,|RaceType=humanoid||RaceSubtype=dwarf||Size=5||Movement=20||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=120|
_|SlowSteady=Yes|
_Slow and Steady|Rule=speed never modified by armor or encumbrance|[PrRule]
_; Duergar Immunities|Rule=Immune to paralysis, phantasms, poison; +2 save vs spells/spell-like|[PrRule]
_; Stability|Rule=+4 CMD vs bull rush/trip while standing on the ground|[PrRule]
_; Spell-Like Abilities|Rule={Italic~Enlarge person, invisibility} 1/day (duergar only)||Temp1={Italic~Enlarge person, invisibility} 1/day (duergar only)|[AddExtraRacialSpells][PrRule]
_; [LightSensitivity]
# Goblin (SubGoblin= None,Aquatic,Arctic)
12,|RaceType=humanoid||RaceSubtype=goblinoid||Size=4||Movement=30||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=60||Climb=0|
_{IIf~%Subrace%=Aquatic?|Swim=30||RaceSubtype&, aquatic|
_   :{IIf~%Subrace%=Arctic?|VisionLowLight=Yes||VisionDark=0|
_   :{IIf~%Subrace%=Desert?|VisionLowLight=Yes||VisionDark=0|
_   :{IIf~%Subrace%=Jungle?|VisionLowLight=Yes||VisionDark=0|
_}}}}
_{IIf~%Subrace%=Aquatic?Skilled|Rule=+2 Ride/Stealth|[PrRule]; Thievery|Rule=+2 Disable Device/Sleight of Hand|[PrRule]
_   :{IIf~%Subrace%=Arctic?[ColdEnd], Skilled|Rule=+4 Ride; +2 Bluff/Sleight of Hand|[PrRule]
_   :{IIf~%Subrace%=Desert?Gossiper|Rule=+2 Diplomacy (Gather Information)|[PrRule]; [HeatEnd], Skilled|Rule=+4 Ride/Stealth|[PrRule]
_   :{IIf~%Subrace%=Jungle?|Climb=20|Skilled|Rule=+4 Acrobatics/Stealth|[PrRule]
_   :Skilled|Rule=+4 Ride/Stealth|[PrRule]
_}}}}
#
13,|RaceType=humanoid||RaceSubtype=goblinoid||Size=5||Movement=30||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=60|
_Sneaky|Rule=+4 Stealth|[PrRule]
#
# Kobold: (+QKob) (SubKobold= None,Aquatic,Arctic,Ebore's Clan,Matthias' Clan,Sigrun's Clan,Uwe's Clan,Exiled) 
14,|RaceType=humanoid||RaceSubtype=reptilian||Size=4||Movement=30||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=60|
_{IIf~%Subrace%=Aquatic?|Swim=40||RaceSubtype=& aquatic|+1 natural armor|NaturalArmorRacial=1|; [KoboldCrafty]; [KeenSenses]; [LightSensitivity]
_   :{IIf~%Subrace%=Arctic?+1 natural armor|NaturalArmorRacial=1|; [ColdEnd], [KoboldCrafty]; [KeenSenses]; [LightSensitivity]
_   :{IIf~%Subrace%=Desert?+1 natural armor|NaturalArmorRacial=1|; Crafty|Rule=+2 Craft (trapmaking), Craft (trapmaking) and Stealth are always class skills|[PrRule]; [HeatEnd]; [KeenSenses]; Survivalist|Rule=+2 Survival|[PrRule]
_   :{IIf~%Subrace%=Ebore's Clan?+1 natural armor|NaturalArmorRacial=1|; [KoboldCrafty]; [KeenSenses]; [LightSensitivity]
_   :{IIf~%Subrace%=Jungle?+1 natural armor|NaturalArmorRacial=1|; Altitude Adaptation|Rule=No altitude sickness|[PrRule]; [KeenSenses]; [LightSensitivity]; Natural Climber|Rule=+2 Climb; Agile Athlete feat|[PrRule]
_   :{IIf~%Subrace%=Matthias' Clan?+1 natural armor|NaturalArmorRacial=1|; [KoboldCrafty]; [KeenSenses]; [LightSensitivity]
_   :{IIf~%Subrace%=Sigrun's Clan?Sigrun's Clan?Crafty|Rule=+2 Craft (trapmaking)/Concentration, Craft (trapmaking) and Stealth are always class skills|[PrRule]; [KeenSenses]; [LightSensitivity]; Unarmed Fighter|Rule=+2 attack/damage unarmed|[PrRule]
_   :{IIf~%Subrace%=Uwe's Clan?+1 natural armor|NaturalArmorRacial=1|; [KoboldCrafty]; [KeenSenses]; [LightSensitivity]
_   :{IIf~%Subrace%=Exiled?+1 natural armor|NaturalArmorRacial=1|; [KoboldCrafty]; [KeenSenses]; [LightSensitivity]
_   :+1 natural armor|NaturalArmorRacial=1|; [KoboldCrafty]; [KeenSenses]; [LightSensitivity]
_}}}}}}}}}
#
15,|RaceType=humanoid||RaceSubtype=aquatic||Size=5||Movement=5||Fly=0||FlyMan=0||Swim=50||VisionLowLight=Yes||VisionDark=0|
_+2 natural armor|NaturalArmorRacial=2|
_; Aquatic|Rule=Can breathe water, amphibious but they prefer not to spend long periods out of the water|[PrRule]
#
# (SubOrc= None,Aquatic,Arctic)
16,|RaceType=humanoid||RaceSubtype=0||Size=5||Movement=30||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=60|
_{IIf~%Subrace%=Aquatic?|Swim=30||RaceSubtype=aquatic|[OrcFerocity]; [LightSensitivity]; [OrcWpnFam]
_   :{IIf~%Subrace%=Arctic?|VisionLowLight=Yes||VisionDark=0|Animal Handler|Rule=+2 Handle Animal|[PrRule]; [ColdEnd], [OrcFerocity]; [OrcWpnFam]
_   :{IIf~%Subrace%=Desert?|VisionLowLight=Yes||VisionDark=0|[OrcFerocity]; [HeatEnd]; Tough|Rule=Endurance feat|[PrRule]; [OrcWpnFam]
_   :{IIf~%Subrace%=Jungle?|VisionLowLight=Yes||VisionDark=0|[OrcFerocity]; Self-Sufficient; [OrcWpnFam]
_   :[OrcFerocity]; [LightSensitivity]; [OrcWpnFam]
_}}}}
# 
17,|RaceType=humanoid||RaceSubtype=gnome||Size=4||Movement=20||Fly=0||FlyMan=0||VisionLowLight=Yes||VisionDark=120||SpellResistanceRacial={Calc~11+%CharacterLevel%}|
_Defensive Training|Rule=+2 dodge AC||DodgeRacial=2|[PrRule]
_; Fortunate|Rule=+2 all saves||AllSaveBonus=2|[PrRule]
_; Skilled|Rule=+2 Craft (alchemy)/Perception/Stealth (+4 underground)|[PrRule]
_; Hatred|Rule=+1 attack roll vs humanoid (reptilian) and humanoid (dwarf)|[PrRule]
_; Stonecunning|Rule=+2 Perception vs unusual stonework (traps, hidden doors) and automatic check with 10' to notice such features|[PrRule]
_; Svirfneblin Magic|Rule=+1 DC for illusion spell they cast|[PrRule]
_; Spell-like Abilities|Rule={Italic~blindness/deafness, blur, disguise self}  1/day; constant {Italic~nondetection}||Temp1={Italic~blindness/deafness, blur, disguise self}  1/day; constant {Italic~nondetection}|[AddExtraRacialSpells][PrRule]
18,|RaceType=humanoid||RaceSubtype=tengu||Size=5||Movement=30||Fly=0||FlyMan=0||VisionLowLight=Yes||VisionDark=0|
_Sneaky|Rule=+2 Perception/Stealth|[PrRule]
_; Gifted Linguist|Rule=+4 Linguistics and learn 2 languages for each rank in Linguistics|[PrRule]
_; Swordtrained|Rule=Proficient will all sword-like weapons|[PrRule]
_; Natural weapon|Rule=Bite 1d3+STR (primary or secondary)|[PrRule]
19,|RaceType=humanoid||RaceSubtype=native||Size=5||Movement=30||Fly=0||FlyMan=0||VisionLowLight=No||VisionDark=60|
_Skilled|Rule=+2 Bluff/Stealth|[PrRule]
_; Spell-Like Ability|Rule={Italic~darkness} 1/day||Temp1={Italic~darkness} 1/day|[AddExtraRacialSpells][PrRule]
_; Fiendish Resistance |Rule=Cold/Electricity/Fire Resistance 5|[PrRule]
_; Fiendish Sorcery|Rule=Sorcerer with Abyssal or Infernal bloodline treat Charisma as 2 points higher for all sorcerer class abilities|[PrRule]
# |RaceType=humanoid||RaceSubtype=0||Size=45||Movement=20||Fly=0||FlyMan=0||Swim=0||VisionLowLight=No||VisionDark=0|
20,{Stop~ERROR SetRacialTraits}
_|Rule=|[PrRule]
_; |Rule=|[PrRule]
_; |Rule=|[PrRule]
_; |Rule=|[PrRule]
_; |Rule=|[PrRule]
_; Weapon Familiarity|Rule=Proficient with slings. Treat "halfling" weapons as martial weapons|[PrRule]

:AddExtraRacialSpells
1,{IIf~{Length~%ExtraRacialSpells%}<5?|ExtraRacialSpells=%Temp1%|:|ExtraRacialSpells&; %Temp1%|}

:ColdEnd
1,Cold Endurance|Rule=+4 Fortitude vs cold weather/exposure|[PrRule]

:HeatEnd
1,Heat Endurance|Rule=+4 Fortitude vs hot weather/thirst|[PrRule]

:DwarfDefTraining
1,Defensive Training|Rule=+4 dodge vs {If~%Subrace%=Desert?dragons/giants}||DefensiveTraining=Yes|[PrRule]

:DwarfGreed
1,Greed|Rule=+2 Appraise vs nonmagical goods with precious metals or gems{If~%Subrace%=Arctic? and items made of ice}||Greed=Yes|[PrRule]

:DwarfHatred
1,Hatred|Rule=+1 attack roll vs humanoid (orc) and humanoid (goblinoid)||HatredOrcGob=1|[PrRule]

:DwarfSlowSteady
1,Slow and Steady|Rule=speed never modified by armor or encumbrance|[PrRule]

:DwarfStability
1,Stability|Rule=+4 CMD vs bull rush/trip while standing on the ground|[PrRule]

:DwarfStonecunning
1,Stonecunning|Rule=+2 Perception vs unusual stonework (traps, hidden doors) and automatic check with 10' to notice such features||Stonecunning=Yes|[PrRule]

:DwarfWnpFam
1,Weapon Familiarity|Rule=Proficient with battleaxes, heavy picks, warhammers. Treat "dwarven" weapons as martial weapons|[PrRule]

:ElfImmunity
1,Elven Immunities|Rule=Immune to magic sleep, +2 vs enchantment spells/effects||ElvenImmunities=Yes|[PrRule]

:LightSensitivity
1,Light Sensitivity|Rule=Dazzled in bright light or {Italic~daylight} spell|[PrRule]

:ElfMagic
1,Elven Magic|Rule=+2 caster level vs SR; +2 Spellcraft to identify magic items||SpellPenetration+2||ElvenMagic=Yes|[PrRule]

### NEW CLASS ### Arcane
;ElfRaisedFavored
1,Bard
1,Wizard
1,Sorcerer

# Search for "FindMeleeElfWpnFam"
:ElfWeaponFamiliarity
1,Weapon Familiarity
_{If~%Subrace%=Aquatic?|Rule=Proficient with rapiers, short swords, and tridents. Treat "elven" weapons as martial weapons|
_/{If~%Subrace%=Desert?|Rule=Proficient with scimitars, rapiers, shortbows (including composite). Treat "elven" weapons as martial weapons|
_/{If~%Subrace%=Jungle?|Rule=Proficient with handaxess, rapiers, short swords, shortbows (including composite). Treat "elven" weapons as martial weapons|
_/|Rule=Proficient with longbows, longswords, rapiers, and shortbows. Treat "elven" weapons as martial weapons|
_}}}
_[PrRule]

;GnomeAcademican
1,Arcana|GnomeAcademican=Arcana|
1,Dungeoneering|GnomeAcademican=Dungeoneering|
18,Engineering|GnomeAcademican=Engineering|
1,Geography|GnomeAcademican=Geography|
1,History|GnomeAcademican=History|
1,Local|GnomeAcademican=Local|
1,Nature|GnomeAcademican=Nature|
1,Nobility|GnomeAcademican=Nobility|
1,Planes|GnomeAcademican=Planes|
1,Religion|GnomeAcademican=Religion|

:GnomeDefTraining
1,Defensive Training|DefensiveTraining=Yes||Rule=+4 dodge vs giants|[PrRule]

;GnomeExplorer
1,Arcana|GnomeAcademican=Arcana|
1,Dungeoneering|GnomeAcademican=Dungeoneering|
1,Engineering|GnomeAcademican=Engineering|
1,Geography|GnomeAcademican=Geography|
1,History|GnomeAcademican=History|
1,Local|GnomeAcademican=Local|
1,Nature|GnomeAcademican=Nature|
1,Nobility|GnomeAcademican=Nobility|
1,Planes|GnomeAcademican=Planes|
1,Religion|GnomeAcademican=Religion|

;GnomeObsessive
2,Craft|GnomeObsessive=Craft|
1,Profession|GnomeObsessive=Profession|

:GnomeWpnFam
1,Weapon Familiarity|Rule={If~%Subrace%=Gear?Proficient with any weapon they have personally crafted. }Treat "gnome" weapons as martial weapons|[PrRule]

:HalflingLuck
1,Halfling Luck|Rule=+1 all saves||AllSaveBonus=1|[PrRule]

:HalflingSureFoot
1,Sure-Footed|Rule=+2 Acrobatics/Climb|[PrRule]

:HalflingWpnFam
1,Weapon Familiarity
_{If~%Subrace%=Jungle?|Rule=Proficient with throwing axe, handaxe, shortbow (including composite). Treat "halfling" weapons as martial weapons|
_/|Rule=Proficient with slings. Treat "halfling" weapons as martial weapons|[PrRule]
_}
_[PrRule]

:HalfOrcFerocity
1,Orc Ferocity|Rule=1/day; when below {If~%Valminder%=1?CONBONUSREPLACE/0 HP} but not {If~%Valminder%=1?below -CONREPLACE/killed} = can fight one more round as if disabled|[PrRule]

:HalfOrcWpnFam
1,Weapon Familiarity|Rule=Proficient with greataxes and falchions. Treat "orc" weapons as martial weapons|[PrRule]

:HumanFocusedStudy
1,Focused Study|Rule=Skill Focus at level 1-8-16|[PrRule]

:HumanHeartStreet
1,|HumanHeartStreet=Yes|Heart of the Streets|Rule=+1 Reflex; +1 dodge AC when adjacent to at least 2 allies; Crowds do not count as difficult terrain|[PrRule]

:KeenSenses
1,Keen Senses|Rule=+2 Perception|[PrRule]|FeatsSkill&;KEENSENSES|

:KoboldCrafty
1,Crafty|Rule=+2 Craft (trapmaking)/Profession ({If~%Subrace%=Matthias' Clan?locksmith/miner}), Craft (trapmaking) and Stealth are always class skills|[PrRule]

:OrcFerocity
1,Ferocity|Rule=Remains conscious even if below {If~%Valminder%=1?CONBONUSREPLACE/0 HP} but still staggered and loses 1 {If~%Valminder%=1?WP/hp}/r; still dies under -%CON%|[PrRule]

:OrcIntimidate
1,Intimidating|Rule=+2 Intimidate|[PrRule]|FeatsSkill&;ORCINTIMIDATING|

:OrcWpnFam
1,Weapon Familiarity|Rule=Proficient with greataxes and falchions. Treat "orc" weapons as martial weapons|[PrRule]

:PrintSubtype
1,{If~%RaceSubtype%!=0? ({CapEachWord~%RaceSubtype%
# XXX NO, feats are determinded after PrintSubtype
#_{If~{And~{Find~1,Fiendish Blood,%FeatsAll%}!=0,{Find~1,evil,%RaceSubtype%}=0}=1?, evil}
_})}

:PrintRacialTraits
1,{If~%VisionLowLight%=Yes? {If~{Find~1,Improved Low-Light Vision,%FeatsAll%}!=0?Improved }Low-Light vision,}
_{If~{Find~1,Otherworldly,%FeatsAll%}!=0?{If~%VisionDark%<60?|VisionDark>60|/|VisionDark+30|}}
_{If~%VisionDark%>0? Darkvision %VisionDark%',}
_{If~{Find~1,aquatic,%RaceSubtype%}>0? Aquatic|Rule=Can move in water without making Swim checks; can breathe wate; cannot breathe air unless it has the amphibious special quality. Aquatic creatures always treat Swim as a class skill|[PrRule],}
_{If~{Length~%RaceTraits%}>1?{If~{Find~1,Aquatic,%RaceSubtype%}>0?;} %RaceTraits%}.
_{If~{Find~1,Ferocious Resolve,%FeatsAll%}!=0? {Color~Green,+Ferocious Resolve (see Orc Ferocity)}}

### NEW RACE ###
:SetRacialAL
1-3,|RacialAL=0|
4,{If~%Subrace%=Dread?|RacialAL=Usually non-Good|
_/|RacialAL=0|
_}
5-7,|RacialAL=0|
8,|RacialAL=Usually NG|
9-10,|RacialAL=Usually CE|
11,|RacialAL=Usually LE|
12,|RacialAL=Usually NE|
13-14,|RacialAL=Usually LE|
15,|RacialAL=Usually NN|
16,|RacialAL=Usually CE|
17-18,|RacialAL=Usually NN|
19,|RacialAL=Usually NE|
20-1000,|RacialAL=0|

# ---------------------------------------------------------------------------
# Spell Determination Code

:SpellsDeterminationBranch
1,BRD
2,CLR
3,DRD
4,PAL
5,RNG
6,SOR
7,WIZ

:SpellsDeterminationBranchOLD
1, Known: [DetermineSpellsBard]
2, Prepared: [DetermineSpellsCleric]
3, Prepared: [DetermineSpellsDruid]
4,[DetermineSpellsPaladin]
5,[DetermineSpellsRanger]
6, Known: [DetermineSpellsSorcerer]
7, Known: [DetermineSpellsWizard]

# ---------------------------------------------------------------------------
# Character Description Section

:CharacterDescriptionBranch
1,{If~%DescriptionFlag%!=2?<br>[BuildCharacterDescription=%DescriptionFlag%]}
_{If~{And~%ShowSubraceDesc%=1,%Subrace%!=None}=1?<br>{Bold~Subrace description:} [ShowSubraceDesc{Param~Race,%Race%}]}

:PersonalHistoryBranch
1,{If~%PersonalHistoryFlag%!=2?<br>[BuildPersonalHistoryBlurb=%PersonalHistoryFlag%]}

:SuggestedMotivation
1,<b>Suggested motivation:</b> [~BandTypeSingle]
_{If~{And~%DescriptionFlag%!=2,%PersonalHistoryFlag%!=2}=1? or see Description and History below
_/{If~%DescriptionFlag%!=2? or see Description below
_/{If~%PersonalHistoryFlag%!=2? or see History below
_}}}.<br><br>

:BuildCharacterDescription
1,<br><b><u>Character Description</u></b><br>
_ [Tab]This {If~%SubraceMaster%!=None?%SubraceMaster% }[Race=%RaceMaster%] is [Height=%HeightFlag%] and [WeightBranch=%WeightFlagMaster%] (%Weight% lbs.) for [HisHer] race.<br>[Tab]
_ {Cap~[HeShe]} is a %AgeMaster%  years old [ManWoman] with [~HairThickness], [~HairStyle] [~HairColor] hair, and [~EyeStyle] [~EyeColor]
_ eyes with [~BrowStyle] eyebrows.
_ {Cap~[HeShe]} has a [~Complexion] complexion, [~SkinType] skin, and [~HeadSize] head with [~FaceStyle]
_ face that has |TempNumber={Dice~1d100}|{If~%TempNumber%<40?a high forehead./ a low forehead and [~ChinStyle].}
_ {Cap~[HisHer]} nose is [~Nose] and [HisHer] mouth is [~MouthStyle] with [~LipsStyle].
_ {Cap~[HisHer]} teeth are [~TeethStyle] and [HisHer] breath is [~Breath].
_ {Cap~[HisHer]} ears are [~EarStyle], and [HeShe]{If~%Gender%=1? sports [~FacialHair]./ has [~BreastStyle] breasts.}
_ {Cap~[HisHer]} arms are [LimbStyle], [HisHer] legs are [LimbStyle], and [HisHer] fingers are [LimbStyle].
_ {Cap~[HeShe]} is wearing [~DressStyle] clothing and [~FacialExpression] expression, and walks with [~MovementStyle] movements.
_ There [~BodyScent] emanating from the [ManWoman].<br>[Tab]
_ {Cap~[HeShe]} is [~GeneralTraits], [~SpecificTraits] and [~SpecificTraits], and speaks in [~VoiceTraits],
_ [VoiceTraits] voice, and |TempNumber={Dice~1d100}|
_ {If~%TempNumber%<85?[~InterestsBranch]/ has no outstanding interests to speak of.}<br>[Tab]
_ {Cap~[HeShe]} [~Sanity].
_ [IdeosyncrasyBranch]
2,{Stop~ERROR in BuildCharacterDescription subtable}
3,{If~%CohortGen%=No?<br>
_{Generate~0,NPC'S DESCRIPTION: Click to show the NPC's description.,BuildCharacterDescription=1}
_}

:InterestsBranch
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<75?is primarily interested in [~Interests]./
_ [HisHer] interests include [~Interests], and [~Interests].}

;GeneralTraits
1,[Miscellaneous.Traits]
1,abrasive
1,aesthetic
1,altruistic
1,amoral
1,argumentative
1,arrogant
1,brilliant
1,callous
1,capricious
1,careless
1,contrary
1,courageous
1,cowardly
1,curious
1,cunning
1,depraved
1,exacting
1,egotistical
1,fanatical
1,forceful
1,friendly
1,greedy
1,generous
1,helpful
1,hedonistic
1,honorable
1,hostile
1,iconoclastic
1,impious
1,inquisitive
1,irreligious
1,an intellectualist
1,kindly
1,loquacious
1,malevolent
1,modest
1,moody
1,naive
1,obsessive
1,opinionated
1,optimistic
1,pessimistic
1,perverted
1,precise
1,perceptive
1,pious
1,quiet
1,sadistic
1,saintly
1,scrupulous
1,servile
1,sober
1,studious
1,suspicious
1,trusting
1,uncivilized
1,violent
1,virtuous
1,well spoken
1,a zealot

;!SpecificTraits
1,anti-intellectual {Lockout~SpecificTraits,2}
1,intellectual {Lockout~SpecificTraits,1}
1,slothful
1,lazy
1,energetic
1,cheerful
1,morose
1,a martyr
1,compassionate
1,sensitive
1,unfeeling
1,insensitive
1,mean
1,humble
1,even-tempered
1,garrulous
1,hot-tempered
1,overbearing
1,articulate
1,antagonistic
1,courteous
1,haughty
1,elitist
1,proud
1,foul
1,rash
1,rude
1,aloof
1,a practical joker
1,a prankster
1,secretive
1,solitary
1,mischievous
1,impulsive
1,lusty
1,irreverent
1,madcap
1,thoughtless
1,taciturn
1,absent-minded
1,dreamy
1,lacks common sense
1,insensitive
1,brave
1,craven
1,shy
1,fearless
1,obsequious
1,inquisitive
1,prying
1,perceptive
1,keen
1,a perfectionist
1,stern
1,harsh
1,punctual
1,driven
1,trusting
1,kind-hearted
1,forgiving
1,unforgiving
1,easy-going
1,compassionate
1,miserly
1,hard-hearted
1,softhearted
1,covetous
1,avaricious
1,thrifty
1,a wastrel
1,a spendthrift
1,extravagant
1,kind
1,charitable
1,gloomy
1,morose
1,compulsive
1,irritable
1,vengeful
1,honest
1,truthful
1,innocent
1,gullible
1,a hick
1,bigoted
1,biased
1,narrow-minded
1,blustering
1,hide-bound
1,cheerful
1,happy
1,diplomatic
1,pleasant
1,foolhardy
1,fatalistic
1,depressing
1,cynical
1,sarcastic
1,realistic
1,laconic
1,soft-spoken
1,retiring
1,mousy
1,practical
1,levelheaded
1,dull
1,reverent
1,ponderous
1,scheming
1,paranoid
1,cautious
1,deceitful
1,nervous
1,uncultured
1,boorish
1,barbaric
1,graceless
1,crude
1,cruel
1,sadistic
1,immoral
1,jealous
1,warlike

;!VoiceTraits
1,an accented
1,a breathless
1,a crisp
1,a guttural
1,a high-pitched
1,a lispy
1,a loud
1,a nasal
1,a neutral
1,a slow
1,a squeaky
1,a stuttering
1,a wheezy
1,a whining
1,a whispery

;!Interests
1,Religion
1,Legend Lore
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<75?Local History/Ancient History}
1,Nature
1,Horticulture
1,Husbandry
1,Exotic Animals, mostly [ExoticAnimals]
1,Hunting
1,Fishing
1,Handicrafts
1,Athletics
1,Politics
1,Wines and Spirits
1,Foods and Preparation
1,Gambling
1,Drugs
10,Collecting [Collections]
1,Community Service
1,Altruism
1,Weaving
1,Pottery
1,Heraldry

;ExoticAnimals
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<10?Rare} Birds
1,Reptiles
1,Amphibians
1,Falcons
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<75?Poisonous} Snakes
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<25?War} Dogs
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<25?Great} Cats
1,Bats
1,Lizards
1,Bears
1,Primates
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<50?Poisonous} Spiders
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<50?Poisonous} Insects
1,Rats
1,Rodents
1,Fish
1,Mammals
1,Fighting Dogs

;!Collections
1,Knives and Daggers
1,Swords
1,Weapons
1,Shields and Weapons
1,Shield Devices
1,Armor
1,Books and Scrolls
1,Minerals and Gems
1,Ornaments and Jewelry
1,Coins and Tokens
1,Trophies and Skins
1,Porcelain, China, and Crystal
1,Tapestries
1,Paintings
1,Statuary
1,Carvings

;Phobias
1,Acrophobia, the fear of heights
1,Algophobia, the fear of pain
1,Agoraphobia, the fear of open spaces
1,Aichmophobia, the fear of sharp instruments
1,Anthropophobia, the fear of leaving home
1,Arachnophobia, the fear of Spiders
1,Astraphobia, the fear of Storms
1,Claustrophobia, the fear of closed places
1,Cynophobia, the fear of Dogs
1,Demonophobia, the fear of Demons
1,Equineophobia, the fear of Horses
1,Felinophobia, the fear of Cats
1,Hematophobia, the fear of Blood
1,Herpetophobia, the fear of Lizards, or Reptiles
1,Hydrophobia, the fear of water
1,Microphobia, the fear of germs
1,Mystophobia, the fear of dirt or contaminants
1,Nyctophobia, fear of the dark
1,Ochlophobia, fear of Crowds
1,Ophidiophobia, fear of Snakes
1,Panophobia, a generalized fear of nearly everything
1,Pathophobia, fear of Disease
1,Phobophobia, fear of fear itself
1,Pyrophobia, the fear of Fire
1,Strangophobia, fear of Strangers
1,Zoophobia. The fear of Animals

;Sanity
10,seems very stable, mentally|TempNumber={Dice~1d100}|{If~%TempNumber%<15?, but suffers from [Phobias]}
20,seems of normal sanity|TempNumber={Dice~1d100}|{If~%TempNumber%<25?, but suffers from [Phobias]}
5,seems to have neurotic tendencies|TempNumber={Dice~1d100}|{If~%TempNumber%<50?, and suffers from [Phobias]}
5,appears to be mentally unstable|TempNumber={Dice~1d100}|{If~%TempNumber%<75? and suffers from [Phobias]}
1,[Villainous Motivations.Insanity(%Gender%)]
1,is maniacal in [HisHer] tendencies|TempNumber={Dice~1d100}|{If~%TempNumber%<95?, and suffers from [Phobias]/ but has no other unusual personality quirks}

# ---------------------------------------------------------------------------

:ManWoman
1,{If~%Gender%=1?man/woman}

:HeShe
1,{If~%Gender%=1?he/she}

:HisHer
1,{If~%Gender%=1?his/her}

:HimHer
1,{If~%Gender%=1?him/her}
 
:Height
1,of medium height
2,tall
3,short

:WeightBranch
1,of normal weight
2,[Overweight]
3,[Underweight]

;Overweight
1,obese
1,fat
1,plump
1,overweight
1,heavy
1,big-boned
1,heavyset
1,muscular

;Underweight
1,underweight
1,lean
1,wiry

;EyeStyle
1,slanted
1,wide
1,large
1,small
1,beady
1,narrow
1,wondering
1,bloodshot

;BrowStyle
1,bushy
1,heavy
1,thick
1,pencil-thin
1,thin, arching
1,virtually no

;EyeColor
1,blue
1,brown
1,green
1,violet
1,gray
1,hazel

;HairThickness
1,thick
1,thin

;HairStyle
1,shoulder-length
1,long, curly
1,short, curly
1,kinky
1,long, straight
1,short, straight
1,long, wavy
1,short, wavy
1,mohawk cut style
1,butch style
1,new wave,
1,crew cut
1,receding

;HairColor
# Blond
1,blonde
1,ash
1,bronze  
1,brassy
1,flaxen
1,ginger
1,golden 
1,honey 
1,platinum
1,tawny 
1,wheaten
# Red
1,red
1,auburn 
1,copper 
1,flaming 
1,strawberry blond
# Brown
1,brown
1,ash 
1,ginger 
1,sandy 
1,chestnut
1,russet
# Black
1,black
1,sable
1,sorrel
1,jet
1,raven
1,sooty black
# Grey
1,gray
1,ash 
1,iron 
1,salt and pepper
1,silver 
1,steel
# White
1,white
1,pearl 
1,snow
1,snowy
1,snow-white
#Other
1,carrot-orange

;Complexion
1,pale
1,sickly
1,dark
1,pink
1,fair
1,light
1,tan
1,gray
1,glowing

;SkinType
1,smooth
1,rough
1,wrinkled
1,pimply
1,weather-beaten

;HeadSize
1,a large
1,a small
1,a normal-sized
1,a blocky

;FaceStyle
1,a round
1,a long
1,a broad
1,a pear-shaped
1,an oval

;FacialExpression
1,a cool
1,a distant
1,an unreadable
1,a predatory
1,a cheerful
1,an angry
1,a gloomy
1,a saturnine
1,a sour
1,a calculating
1,a disapproving
1,a determined
1,a vacant
1,a curious
1,a sorrowful
1,an exasperated
1,a lost
1,a confused
1,a morose
1,a dangerous
1,a violent
1,a piqued
1,a peaked

;LimbStyle
1,long
1,short
1,normal
1,muscular

;ChinStyle
1,no chin
1,double chins
1,a square jaw
1,a pointy chin

;FacialHair
1,no facial hair
1,pork-chop sideburns {Lockout~FacialHair, 1-6}
_|TempNumber={Dice~1d100}|{If~%TempNumber%<75? and [FacialHair]}
1,narrow sideburns{Lockout~FacialHair, 1-6}
_|TempNumber={Dice~1d100}|{If~%TempNumber%<75? and [FacialHair]}
1,wide, bushy sideburns{Lockout~FacialHair, 1-6}
_|TempNumber={Dice~1d100}|{If~%TempNumber%<75? and [FacialHair]}
1,a long |TempNumber={Dice~1d100}|{If~%TempNumber%<50?[HairThickness]} beard
1,a full |TempNumber={Dice~1d100}|{If~%TempNumber%<50?[HairThickness]} beard 
1,a |TempNumber={Dice~1d100}|
_{If~%TempNumber%<50?[HairThickness] tangled} beard
1,a short|TempNumber={Dice~1d100}|
_{If~%TempNumber%<25?[HairThickness] braided} beard
1,a short|TempNumber={Dice~1d100}| 
_{If~%TempNumber%<50?scraggily/spotty} beard
1,a [HairThickness] beard and mustache
1,a short|TempNumber={Dice~1d100}| 
_{If~%TempNumber%<25?waxed} mustache
1,a goatee

;Nose
1,large
1,small
1,thin
1,broken
1,hawk-like
1,bulbous
1,flat
1,angular
1,roman

;MouthStyle
1,small
1,large
1,normal sized

;LipsStyle
1,thin lips
1,thick lips
1,generous lips
1,a thick upper lip

;TeethStyle
1,yellowed
1,uneven
1,white
1,missing
1,rotting

;Breath
1,reeking
1,minty
1,shallow
1,odorless
1,foul
1,fruity
1,fresh
1,pleasant
1,unpleasant
1,smoky

;BodyScent
1,is the scent of roses
1,is the scent of cloves
1,is the scent of cinnamon
1,is the scent of Jasmine
1,is the scent of Lilacs
5,is the scent of sweat
2,is the stench of decay
7,is a faint, undefined perfume
10,are no notable body odors (excluding [HisHer] breath)

;BreastStyle
1,large|TempNumber={Dice~1d100}|
_{If~%TempNumber%<15?, pendulous}
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<50?firm,} medium-sized
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<50?firm,} small
1,virtually no visible

;EarStyle
1,cauliflower-like
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<75?slightly} pointed
1,small
1,large
1,normally formed
1,well formed

;DressStyle
1,neat
1,untidy
1,workmanlike
1,rough
1,soldierly
1,foppish
1,fashionable
1,clean
1,grubby
1,peculiar
1,noble
1,ragged
1,soiled
1,stained
1,threadbare
1,thin
1,|TempNumber={Dice~1d100}|{If~%TempNumber%<15?finely} Embroidered
1,utilitarian
1,bright

;MovementStyle
1,graceful
1,stately
1,poised
1,clipped and efficient
1,brisk
1,slow
1,clumsy
1,crisp
1,erratic
1,awkward
1,predatory
1,painful
1,balanced

# ---------------------------------------------------------------------------
# Ranger Favored Enemies Selection
# XXX Unused
;Aberration
1,Aboleth
1,Athach
1,Beholders
1,Carrion Crawler
1,Choker Chuul
1,Cloaker
1,Delver
1,Destrachan
1,Drider
1,Ethereal Filcher
1,Ettercap
1,Gauth
1,Gibbering Mouther
1,Grick
1,Mimic
1,Mind Flayer
1,[NagaBranch]
1,Otyugh
1,Phasm
1,Rust Monster
1,Scum
1,Umber Hulk
1,Will-o'-Wisp

;Air
1,Air Mephit
1,Arrowhawk
1,Cloud Giant
1,Dust Mephit
1,Green Dragon
1,Ice Mephit
1,Will-o'-Wisp

;Animal
1,[AnimalBranch]
1,Bat Swarm
1,[DinosaurBranch]
1,[DireAnimalBranch]
1,Rat Swarm
1,Roc

;Aquatic
1,Aboleth
1,Aquatic Elf
1,Chuul
1,Dire Shark
1,Dragon Turtle
1,Giant Octopus
1,Kraken
1,Kuo-Toa
1,Locathath
1,Merfolk
1,Merrow
1,Octopus
1,Sahuagin
1,Sea Cat
1,Sea Hag
1,Sharks
1,Skum
1,Squid
1,Giant Squid
1,Water Naga

;Cold
1,Cryohydra
1,Frost Giant
1,Frost Worm
1,Ice Mephit
1,Silver Dragon
1,White Dragon
1,Winter Wolf

;Construct
1,Animated Object
1,[GolemBranch]
1,Homuncalus
1,[InevitableBranch]
1,Retriever
1,Shield Guardian

;Dragon
1,Dragons
1,Dragon Turtle
1,Pseudodragon
1,Wyvern

;Earth
1,Blue Dragon
1,Copper Dragon
1,Earth Mephit
1,Gargoyle
1,Salt Mephit
1,Stone Giant

;Elemental
1,Belker
1,[ElementalBranch]
1,Invisible Stalker
1,Magmin
1,Thoqqua

;ElementalAir
1,Belker
1,Air Elementals
1,Invisible Stalker

;ElementalEarth
1,Earth Elementals
1,Thoqqua

;ElementalFire
1,Fire Elementals
1,Magmin
1,Thoqqua

;ElementalWater
1,Water Elementals

;Fey
1,Dryad
1,Grig
1,Nixie
1,Nymph
1,Pixie
1,Satyr

;Fire
1,Azer
1,Brass Dragon
1,Fire Giant
1,Fire Mephit
1,Gold Dragon
1,Magma Mephit
1,Pyrohydra
1,Red Dragon
1,Steam Mephit

;Giant
1,Ettin
1,[GiantBranch]
1,Ogre
1,Ogre Mage
1,Troll

;Goblinoid
1,Bugbear
1,Goblin
1,Hobgoblin

;Humanoid
1,Bugbear
1,Dwarf
1,Elf
1,Githyanki
1,Githzerai
1,Gnoll
1,Gnome
1,Goblin
1,Halfling
1,Hobgoblin
1,Kobold
1,Lizardfolk
1,Locathah
1,Merfolk
1,Orc
1,Troglodyte

;Incorporeal
1,Allip
1,Ghost
1,Shadow
1,Spectre
1,Wraith

;Lawful
1,[InevitableBranch]

;MagicalBeast
1,Ankheg
1,Aranea
1,Basilisk
1,Behir
1,Bulette
1,Blink Dog
1,Chimera
1,Cockatrice
1,Darkmantle
1,Digester
1,Displacer Beast
1,Dragonne
1,Ethereal Marauder
1,Fiendish Dire Rat
1,Frost Warm
1,Giant Eagle
1,Giant Owl
1,Girallon
1,Gorgon
1,Gray Render
1,Griffon
1,Hellwasp Swarm
1,Hippogriff
1,[HydraBranch]
1,Kraken
1,Krenshar
1,Lamia
1,Lammasu
1,Manticore
1,Owlbear
1,Pegasus
1,Phase Spider
1,Purple Worm
1,Remorhaz
1,Roper
1,Shocker Lizard
1,Sea Cat
1,[SphinxBranch]
1,Spider Eater
1,Stirge
1,Tarrasque
1,Unicorn
1,Winter Wolf
1,Worg
1,Yrthak

;MonstrousHumanoid
1,Centaur
1,Derro
1,Doppleganger
1,Gargoyle
1,Grimlock
1,[HagBranch]
1,Harpy
1,Kuo-Toa
1,Medusa
1,Minotaur
1,Sahuagin
1,[YuanTiBranch]

;Ooze
1,Black Pudding
1,Gelatinous Cube
1,Gray Ooze
1,Ochre Jelly

;Outsider
1,Ravid

;OutsiderAir
1,Air Mephit
1,Arrowhawk
1,Diinni
1,Dust Mephit
1,Ice Mephit

;OutsiderChaotic
1,Chaos Beast
1,[DemonBranch]
1,[EladrinBranch]
1,Howler
1,Lillend
1,[SlaadBranch]
1,Titan

;OutsiderEvil
1,Achaierai
1,Barghest
1,[DemonBranch]
1,[DevilBranch]
1,Hell Hound
1,Howler
1,Night Hag
1,Nightmare
1,Rakshasa
1,Shadow Mastiff
1,Vargouille
1,Xill
1,Yeth Hound

;OutsiderEarth
1,Earth Mephit
1,Salt Mephit
1,Xorn

;OutsiderFire
1,Azer
1,Efreeti
1,Hell Hound
1,Fire Mephit
1,Magma Mephit
1,Steam Mephit
1,Rast
1,Salamanders

;OutsiderGood
1,[AngelBranch]
1,[ArchonBranch]
1,[EladrinBranch]
1,[GuardinalBranch]
1,Lillend
1,Titan

;OutsiderLawful
1,Achaierai
1,[ArchonBranch]
1,Barghest
1,[DevilBranch]
1,Formians
1,Hell Hound
1,Rakshasa
1,Xill

;OutsiderNative
1,Aasimar
1,Couatl
1,Janni
1,Tiefling
1,Rakshasa
1,Triton

;OutsiderWater
1,Ooze Mephit
1,Water Mephit
1,Trojanidas
1,Triton

;Plant
1,Assassin Vine
1,Phantom Fungus
1,Shambling Mound
1,Shrieker
1,Tendriculos
1,Treant
1,Violet Fungus

;Reptilian
1,Kobold
1,Lizardfolk
1,Troglodyte

;Shapechanger
1,Aranea
1,Barghest
1,Doppelganger
1,[LycanthropeBranch]
1,Mimic
1,Phasm

;Undead
1,Allip
1,Bodak
1,Devourer
1,Ghast
1,Ghost
1,Ghoul
1,Lich
1,Mohrg
1,Mummy
1,Mummy Lord
1,[NightShadeBranch]
1,Shadow
1,Skeletons
1,Spectre
1,Vampire
1,Vampire Spawn
1,Wight
1,Wraith
1,Zombie

;Vermin
1,Centipede Swarm
1,[GiantInsectBranch]
1,Locust Swarm
1,Monstrous Centipedes
1,Monstrous Scorpions
1,Monstrous Spiders
1,Spider Swarm

;Water
1,Black Dragon
1,Bronze Dragon
1,Ooze Mephit
1,Water Mephit

# ---------------------------------------------------------------------------
# Variant Branches

;AngelBranch
1,Astral Deva Angel
1,Planatar Angel
1,Solar Angel

;AnimalBranch
1,Ape
1,Baboon
1,Badger
1,Bat
1,Black Bear
1,Brown Bear
1,Polar Bear
1,Bison
1,Boar
1,Camel
1,Cat
1,Cheetah
1,Crocodile
1,Giant Crocodile
1,Dog
1,Riding Dog
1,Donkey
1,Eagle
1,Elephant
1,Hawk
1,Horse
1,Hyena
1,Leopard
1,Lion
1,Lizard
1,Monitor Lizard
1,Manta Ray
1,Monkey
1,Mule
1,Octopus
1,Giant Octopus
1,Owl
1,Pony
1,War Pony
1,Porpoise
1,Rat
1,Raven
1,Rhinocerous
1,Shark
1,[SnakeBranch]
1,Squid
1,Giant Squid
1,Tiger
1,Toad
1,Weasel
1,[WhaleBranch]
1,Wolf
1,Wolverine

;ArchonBranch
1,Lantern Archon
1,Hound Archon
1,Hound Archon Hero
1,Trumpet Archon

;DemonBranch
1,Babau Demon
1,Balor Demon
1,Bebilith Demon
1,Dretch Demon
1,Glabrezu Demon
1,Hezrou Demon
1,Marilith Demon
1,Nalfeshnee Demon
1,Quasit Demon
1,Retriever Demon
1,Succubus Demon
1,Vrock Demon

;DevilBranch
1,Barbed Devil
1,Bearded Devil
1,Bone Devil
1,Chain Devil
1,Erinyes Devil
1,Hellcat Devil
1,Horned Devil
1,Ice Devil
1,Imp Devil
1,Lemure Devil
1,Pit Fiend Devil

;DinosaurBranch
1,Deinonychus
1,Elasmosaurus
1,Megaraptor
1,Triceratops
1,Tyrannosaurus

;DireAnimalBranch
1,Dire Ape
1,Dire Badger
1,Dire Bat
1,Dire Bear
1,Dire Boar
1,Dire Lion
1,Dire Rat
1,Dire Shark
1,Dire Weasel
1,Dire Wolf
1,Dire Wolverine

;EladrinBranch
1,Bralani
1,Ghaele

;ElementalBranch
1,Air Elemental
1,Earth Elemental
1,Fire Elemental
1,Water Elemental

;GiantBranch
1,Cloud Giant
1,Fire Giant
1,Frost Giant
1,Hill Giant
1,Stone Giant
1,Storm Giant

;GiantInsectBranch
1,Giant Ant
1,Giant Bee
1,Giant Bombadier Beetle
1,Giant Fire Beetle
1,Giant Stag Beetle
1,Giant Preying Mantis
1,Giant Wasp
1,Monstrous Centipede
1,Monstrous Scorpion
1,Monstrous Spider

;GolemBranch
1,Clay Golem
1,Flesh Golem
1,Iron Golem
1,Stone Golem

;GuardinalBranch
1,Avoral
1,Leonal

;HagBranch
1,Annis Hag
1,Green Hag
1,Sea Hag
1,Night Hag

;HydraBranch
1,Cryohydra
1,Hydra
1,Pyrohydra

;InevitableBranch
1,Kolyarut
1,Marut
1,Zelekhut

;LycanthropeBranch
1,Werebear
1,Wereboar
1,Wererat
1,Weretiger
1,Werewolf
1,Werewolf Lord
1,Hill Giant Dire Wereboar

;NagaBranch
1,Dark Naga
1,Guardian Naga
1,Spirit Naga
1,Water Naga

;NightShadeBranch
1,Nightcrawler
1,Nightwalker
1,Nightwing

;SlaadBranch
1,Red Slaad
1,Blue Slaad
1,Green Slaad
1,Gray Slaad
1,Death Slaad

;SnakeBranch
1,Constrictor Snake
1,Giant Constrictor Snake
1,Viper Snake

;SphinxBranch
1,Androsphinx
1,Criosphinx
1,Gynosphinx
1,Hieracosphinx

:WhaleBranch
1,Baleen Whale
1,Cachalot Whale
1,Orca

;YuanTiBranch
1,Yuan-ti Abomination
1,Yuan-ti Halfblood
1,Yuan-ti Pureblood

# ---------------------------------------------------------------------------
# Familiar Related

:FamiliarGen
### NEW FAMILIAR ###
1,{If~{Find~1,Improved Familiar,%FeatsAll%}=0?|FamiliarID={Dice~1d11}||FamiliarImpID=0|/[FindImprovedFamiliar]}
#1,|FamiliarImpID=23|

:FindImprovedFamiliar
1,|FamiliarID=0|[ImprovedFamiliarStatsFind]

:ImprovedFamiliarStatsFind
1,[ImprovedFamiliarID]{If~{Find~1,%AL%,%FamImpAL%}=0?[ImprovedFamiliarStatsFind]}

:PrintFamiliar
1,|FamLang=None||FamFortType=Standard|
_[FamiliarStatsMods=%CharacterLevel%]
_{If~%FamiliarID%!=0?[FamiliarStats=%FamiliarID%]|FamFort=2||FamReflex=2||FamWill=0|/[FamiliarImprovedStats=%FamiliarImpID%]}
_{Bold~<u>Familiar</u>: {Cap~%FamName%}} ({Cap~[Miscellaneous.Size=%FamSize%]} %FamType%)
_ [WriteHDFamiliar];
_ {Bold~Init:} [WriteFamInit];
_ {Bold~MV:} %FamMV%;
_ {Bold~AC:} [WriteFamAC]
_ {Bold~BAB:} {If~%FamBAB%>=%BAB%?+%FamBAB%/{Color~DarkCyan,+%BAB%}}; [WriteFamCMB] [WriteFamCMD];
_ {Bold~Attack: } %FamAtt%; {Bold~Space/Reach:} [SpaceReach=%FamSize%];
_ {Bold~SA:} {If~%FamSA%!=None?%FamSA%, }[FamiliarSpecialAbilities=%CharacterLevel%]{Color~DarkCyan,%FamiliarSAString%};
_ {Bold~SQ:} %FamSQ%;
_ {Bold~AL:} {Color~DarkCyan,{If~%FamAL%=NN?N/%FamAL%}};
_ {Bold~SV:} Fort [WriteFamFort], Ref [WriteFamRef], Will [WriteFamWill]; 
_ {Bold~Attributes:} [WriteFamStats]
_ {Bold~Skills:} %FamSkills% {Color~DarkCyan,(or use Master's ranks)};
_{If~%FamLang%!=None?[WriteFamLang]}
_ {Bold~Feats:} {Color~DarkCyan,Alertness}, %FamFeats%.

:FamiliarStatsMods
1-2,|FamACMod=1||FamiliarINT=6|
3-4,|FamACMod=2||FamiliarINT=7|
5-6,|FamACMod=3||FamiliarINT=8|
7-8,|FamACMod=4||FamiliarINT=9|
9-10,|FamACMod=5||FamiliarINT=10|
11-12,|FamACMod=6||FamiliarINT=11|
13-14,|FamACMod=7||FamiliarINT=12|
15-16,|FamACMod=8||FamiliarINT=13|
17-18,|FamACMod=9||FamiliarINT=14|
19-20,|FamACMod=10||FamiliarINT=15|

### NEW FAMILIAR ###
:FamiliarSpecialAbilities
1-2,|FamiliarSAString=alertness (+2 Perception/Sense Motive included), improved evasion, share spells, empathic link|
3-4,[FamiliarSpecialAbilities=1]|FamiliarSAString&, deliver touch spells|
5-6,[FamiliarSpecialAbilities=3]|FamiliarSAString&, speak with master|
7-10,[FamiliarSpecialAbilities=5]|FamiliarSAString&, speak with animals of its kind|
11-12,[FamiliarSpecialAbilities=7]|FamiliarSAString&, spell resistance {Bold~{Calc~5+%CharacterLevel%}}|
13-100,[FamiliarSpecialAbilities=11]|FamiliarSAString&, scry on familiar|

### NEW FAMILIAR ###
:FamiliarStats
1,|FamName=bat||FamType=magical beast (animal)||FamSize=2||FamAL=%AL%|
_|STR=1||DEX=15||CON=6||INT=%FamiliarINT%||WIS=14||CHA=5|[DetermineFAMAttributeBonuses]
_|FamFeats=Agile Maneuvers (B), Weapon Finesse|
_|FamMV=5 ft (1 square), fly 40 ft. (good)||FamACNat=0|
_|FamBAB=0||FamAtt=None|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=None||FamSQ=blindsense 20 ft., low-light vision|
_|FamSkills=Fly +{Calc~14+%DEXBonus%}, Perception +{Calc~6+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}|
2,|FamName=cat||FamType=magical beast (animal)||FamSize=3||FamAL=%AL%|
_|STR=3||DEX=15||CON=8||INT=%FamiliarINT%||WIS=12||CHA=7|[DetermineFAMAttributeBonuses]
_|FamFeats=Agile Maneuvers (B), Weapon Finesse|
_|FamMV=30 ft. (6 squares)||FamACNat=0|
_|FamBAB=0||FamAtt=2 claws [WriteFamAB] melee (1d2[WriteFamDmg]) and bite [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=+4 vs Trip|
_|FamSA=None||FamSQ=low-light vision, scent|
_|FamSkills=Climb +{Calc~10+%STRBonus%}, Perception +{Calc~6+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~12+%DEXBonus%} (Racial +4 Climb, +4 Stealth)|
3,|FamName=hawk||FamType=magical beast (animal)||FamSize=3||FamAL=%AL%|
_|STR=6||DEX=17||CON=11||INT=%FamiliarINT%||WIS=14||CHA=7|[DetermineFAMAttributeBonuses]
_|FamFeats=Agile Maneuvers (B), Weapon Finesse|
_|FamMV=10 ft. (2 squares), fly 60 ft. (average)||FamACNat=0|
_|FamBAB=0||FamAtt=2 talons [WriteFamAB] melee (1d4[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=None||FamSQ=low-light vision|
_|FamSkills=Fly +{Calc~4+%DEXBonus%}, Perception +{Calc~14+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%} (Racial +8 Perception)|
4,|FamName=lizard||FamType=magical beast (animal)||FamSize=3||FamAL=%AL%|
_|STR=3||DEX=15||CON=8||INT=%FamiliarINT%||WIS=12||CHA=2|[DetermineFAMAttributeBonuses]
_|FamFeats=Agile Maneuvers (B), Weapon Finesse|
_|FamMV=20 ft. (4 squares), climb 20 ft.||FamACNat=0|
_|FamBAB=0||FamAtt=bite [WriteFamAB] melee (1d4[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=+4 vs Trip|
_|FamSA=None||FamSQ=low-light vision|
_|FamSkills=Acrobatics +{Calc~8+%DEXBonus%}, Climb +{Calc~14+%STRBonus%}, Perception +{Calc~2+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~12+%DEXBonus%} (Racial: +8 Acrobatics)|
5,|FamName=owl||FamType=magical beast (animal)||FamSize=3||FamAL=%AL%|
_|STR=6||DEX=17||CON=11||INT=%FamiliarINT%||WIS=15||CHA=6|[DetermineFAMAttributeBonuses]
_|FamFeats=Agile Maneuvers (B), Weapon Finesse|
_|FamMV=10 ft. (2 squares), fly 60 ft. (average)||FamACNat=0|
_|FamBAB=0||FamAtt=2 talons [WriteFamAB] melee (1d4[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=None||FamSQ=low-light vision|
_|FamSkills=Fly +{Calc~4+%DEXBonus%}, Perception +{Calc~10+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~12+%DEXBonus%} (Racial +4 Perception/Stealth)|
6,|FamName=rat||FamType=magical beast (animal)||FamSize=3||FamAL=%AL%|
_|STR=2||DEX=15||CON=11||INT=%FamiliarINT%||WIS=13||CHA=2|[DetermineFAMAttributeBonuses]
_|FamFeats=Agile Maneuvers (B), Weapon Finesse|
_|FamMV=15 ft. (3 squares), climb 15 ft., swim 15 ft.||FamACNat=0|
_|FamBAB=0||FamAtt=bite [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=+4 vs Trip|
_|FamSA=None||FamSQ=low-light vision, scent|
_|FamSkills=Climb +{Calc~14+%STRBonus%}, Perception +{Calc~2+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~16+%DEXBonus%}, Swim +{Calc~14+%STRBonus%} (Racial +4 Stealth)|
7,|FamName=raven||FamType=magical beast (animal)||FamSize=3||FamAL=%AL%|
_|STR=2||DEX=15||CON=8||INT=%FamiliarINT%||WIS=15||CHA=7|[DetermineFAMAttributeBonuses]
_|FamFeats=Agile Maneuvers (B), Skill Focus (Perception), Weapon Finesse|
_|FamMV=</b> 10 Ft. (2 Squares), Fly 40 Ft. (Average)||FamACNat=0|
_|FamBAB=0||FamAtt=bite [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=None||FamSQ=low-light vision|
_|FamSkills=Fly +{Calc~4+%DEXBonus%}, Percepton +{Calc~6+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}|
8,|FamName=viper snake||FamType=magical beast (animal)||FamSize=3||FamAL=%AL%|
_|STR=4||DEX=17||CON=8||INT=%FamiliarINT%||WIS=13||CHA=2|[DetermineFAMAttributeBonuses]
_|FamFeats=Agile Maneuvers (B), Weapon Finesse|
_|FamMV=20 ft. (4 squares), climb 20 ft., swim 20 ft.||FamACNat=1|
_|FamBAB=0||FamAtt=bite [WriteFamAB] melee (1d2[WriteFamDmg] +poison (DC[WriteFamCON_DC], 1/r for 6r, 1d2 CON, cure: 1 save))|
_|FamCMBBonus=None||FamCMDBonus=can't be tripped|
_|FamSA=poison|
_|FamSQ=low-light vision, scent|
_|FamSkills=Climb +{Calc~14+%STRBonus%}, Perception +{Calc~10+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~12+%DEXBonus%}, Swim +{Calc~14+%STRBonus%} (Racial +4 Perception/Stealth)|
9,|FamName=toad||FamType=magical beast (animal)||FamSize=2||FamAL=%AL%|
_|STR=1||DEX=12||CON=6||INT=%FamiliarINT%||WIS=15||CHA=4|[DetermineFAMAttributeBonuses]
_|FamFeats=Agile Maneuvers (B), Skill Focus (Perception)|
_|FamMV=5 ft. (1 square)||FamACNat=0|
_|FamBAB=0||FamAtt=None|
_|FamCMBBonus=None||FamCMDBonus=+4 vs Trip|
_|FamSA=None||FamSQ=low-light vision, scent|
_|FamSkills=Perception +{Calc~5+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~20+%DEXBonus%} (Racial +4 Stealth)|
10,|FamName=weasel||FamType=magical beast (animal)||FamSize=3||FamAL=%AL%|
_|STR=3||DEX=15||CON=10||INT=%FamiliarINT%||WIS=12||CHA=5|[DetermineFAMAttributeBonuses]
_|FamFeats=Agile Maneuvers (B), Weapon Finesse|
_|FamMV=20 ft. (4 squares), climb 20 ft.||FamACNat=1|
_|FamBAB=0||FamAtt=bite [WriteFamAB] melee (1d3[WriteFamDmg] plus attach)|
_|FamCMBBonus=None||FamCMDBonus=+4 vs Trip|
_|FamSA=Attach (auto grapple, auto bite each round)||FamSQ=low-light vision, scent|
_|FamSkills=Acrobatics +{Calc~12+%DEXBonus%}, Climb +{Calc~14+%STRBonus%}, Escape Artist +{Calc~1+%DEXBonus%}, Perception +{Calc~2+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~12+%DEXBonus%} (Racial +4 Stealth, +8 Acrobatics)|
11,|FamName=monkey||FamType=magical beast (animal)||FamSize=3||FamAL=%AL%|
_|STR=3||DEX=15||CON=10||INT=%FamiliarINT%||WIS=12||CHA=5|[DetermineFAMAttributeBonuses]
_|FamFeats=Agile Maneuvers (B), Weapon Finesse|
_|FamMV=30 ft. (6 squares), climb 30 ft.||FamACNat=0|
_|FamBAB=0||FamAtt=bite [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=None||FamSQ=low-light vision|
_|FamSkills=Acrobatics +{Calc~8+%DEXBonus%}, Climb +{Calc~14+%STRBonus%}, Perception +{Calc~6+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%} (Racial +8 Acrobatics)|

:WriteHDFamiliar
1,{Bold~HD:} {Color~DarkCyan,%CharacterLevel%}; 
_{If~%Valminder%=2?
_{Bold~hp:} {Calc~%HitPoints%\2}; 
_/
_{Bold~VP:} {Color~DarkCyan,{Calc~%VP%\2}}, {Bold~WP:} {Color~DarkCyan,{Calc~%WP%\2}}/{If~%CON%>0?{If~%CONBonus%>0?-%CONBonus%/0}/{If~%CHABonus%>0?-%CHABonus%/0}}/{If~%CON%>0?-%CON%/-%CHA%}
_}

:WriteFamStats
1,Str %STR% ({If~%STRBonus%>=0?+}%STRBonus%)
_, Dex %DEX% ({If~%DEXBonus%>=0?+}%DEXBonus%)
_, Con %CON% ({If~%CONBonus%>=0?+}%CONBonus%)
_, {Color~DarkCyan,Int %INT% ({If~%INTBonus%>=0?+}%INTBonus%)}
_, Wis %WIS% ({If~%WISBonus%>=0?+}%WISBonus%)
_, Cha %CHA% ({If~%CHABonus%>=0?+}%CHABonus%)
_; 

:WriteFamAC
1,|Temp1={Calc~10+[DetermineAttackBonusesSize=%FamSize%]+%DEXBonus%+%FamACNat%+%FamACMod%}|
_{If~{Find~1,Dodge,%FamFeats%}!=0?|Temp1+1|}
_%Temp1%, T [WriteFamTouchAC], FF [WriteFamFFAC] 
_({If~[DetermineAttackBonusesSize=%FamSize%]>=0?+}[DetermineAttackBonusesSize=%FamSize%] size, 
_{If~%DEXBonus%>=0?+}%DEXBonus% Dex, 
_{If~{Find~1,Dodge,%FamFeats%}!=0?+1 dodge, }
_{If~%FamACNat%>0? +%FamACNat% Natural, }
_{Color~DarkCyan,+%FamACMod% Natural (from master)}
_)

:WriteFamTouchAC
1,|Temp1={Calc~10+[DetermineAttackBonusesSize=%FamSize%]+%DEXBonus%}|
_{If~{Find~1,Dodge,%FamFeats%}!=0?|Temp1+1|}
_%Temp1%

:WriteFamFFAC
1,{Calc~10+[DetermineAttackBonusesSize=%FamSize%]+%FamACNat%+%FamACMod%}

:WriteFamCMB
1,{If~%MonkManeuverTraining%!=0?|CMB=%MonkManeuverTraining%|/{If~%FamBAB%>=%BAB%?|CMB=%FamBAB%|/|CMB=%BAB%|}}
_{If~{Find~1,Agile Maneuvers,%FamFeats%}!=0?|CMB+%DEXBonus%|/|CMB+%STRBonus%|}
_|CMBD_Mod=0|[DetermineCMB_ModBySize=%FamSize%]
_|CMB+%CMBD_Mod%|
_{Bold~CMB:} {If~%CMB%>=0?+}{If~%MonkManeuverTraining%!=0?{Color~DarkCyan,%CMB%}/{If~{Find~1,Agile Maneuvers,%FamFeats%}=0?%CMB%/{Color~Green,%CMB%}}}
_{If~%FamCMBBonus%!=None? (%FamCMBBonus%)};

:WriteFamCMD
1,{If~{Find~1,Defensive Combat Training,%FamFeats%}!=0?|CMD=%CharacterLevel%|/{If~%FamBAB%>=%BAB%?|CMD=%FamBAB%|/|CMD=%BAB%|}}
_|CMD+10||CMD+%STRBonus%||CMD+%DEXBonus%||CMD+%CMBD_Mod%|
_{If~{Find~1,Dodge,%FamFeats%}!=0?|CMD+1|}
_{Bold~CMD:} {If~{Find~1,Defensive Combat Training,%FamFeats%}=0?%CMD%/{Color~Green,%CMD%}}
_{If~%FamCMDBonus%!=None? (%FamCMDBonus%)}

:WriteFamAB
1,|Temp1=%BAB%||Temp1+[DetermineAttackBonusesSize=%FamSize%]|
_{If~{Find~1,Weapon Finesse,%FamFeats%}!=0?|Temp1+%DEXBonus%|/|Temp1+%STRBonus%|}
_{If~%Temp1%>=0?+}%Temp1%

:WriteFamDmg
1,{If~%STRBonus%!=0?{If~%STRBonus%>0?+}%STRBonus%}

:WriteFamFort
1,{If~%FortitudeSaveBase%<%FamFort%?|Temp1=%FamFort%|/|Temp1=%FortitudeSaveBase%|}
_{If~%FamFortType%=Standard?|Temp1+%CONBonus%|/|Temp1+%FamFortType%|}
_{If~{Find~1,Great Fortitude,%FamFeats%}!=0?|Temp1+2|}
_{If~%Temp1%>=0?+}%Temp1%

:WriteFamRef
1,{If~%ReflexSaveBase%<%FamReflex%?|Temp1=%FamReflex%|/|Temp1=%ReflexSaveBase%|}
_|Temp1+%DEXBonus%|
_{If~{Find~1,Lightning Reflexes,%FamFeats%}!=0?|Temp1+2|}
_{If~%Temp1%>=0?+}%Temp1%

:WriteFamWill
1,{If~%WillSaveBase%<%FamWill%?|Temp1=%FamWill%|/|Temp1=%WillSaveBase%|}
_|Temp1+%WISBonus%|
_{If~{Find~1,Iron Will,%FamFeats%}!=0?|Temp1+2|}
_{If~%Temp1%>=0?+}%Temp1%

:WriteFamInit
1,|Temp1=%DEXBonus%|
_{If~{Find~1,Improved Initiative,%FamFeats%}!=0?|Temp1+4|}
_{If~{Find~1,Quick Reconnoiter,%FamFeats%}!=0?|Temp1+2|}
_{If~%Temp1%>=0?+}%Temp1%

:WriteFamCON_DC
1,|Temp1=%CharacterLevel%||Temp1\2||Temp1+10||Temp1+%CONBonus%|%Temp1%

:WriteFamCON_DC_Plus1
1,|Temp1=%CharacterLevel%||Temp1\2||Temp1+10||Temp1+%CONBonus%||Temp1+1|%Temp1%

:WriteFamCON_DC_Plus2
1,|Temp1=%CharacterLevel%||Temp1\2||Temp1+10||Temp1+%CONBonus%||Temp1+2|%Temp1%

:WriteFamSTR_DC
1,|Temp1=%CharacterLevel%||Temp1\2||Temp1+10||Temp1+%STRBonus%|%Temp1%

:WriteFamLang
1, {Bold~Languages:} %FamLang%;

### NEW FAMILIAR ###
;ImprovedFamiliarID
5,|FamName=celestial hawk||FamImpAL=LG LN NG NN CG CN||FamiliarImpID=1|
5,|FamName=dire rat||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=2|
5,|FamName=fiendish viper||FamImpAL=LN LE NN NE CN CE||FamiliarImpID=3|
1,{If~%CharacterLevel%>=5?|FamName=small air elemental||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=4|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=5?|FamName=small earth elemental||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=5|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=5?|FamName=small fire elemental||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=6|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=5?|FamName=small water elemental||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=7|/[ImprovedFamiliarID]}
5,{If~%CharacterLevel%>=5?|FamName=stirge||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=8|/[ImprovedFamiliarID]}
5,{If~%CharacterLevel%>=7?|FamName=homunculus||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=9|/[ImprovedFamiliarID]}
5,{If~%CharacterLevel%>=7?|FamName=imp||FamImpAL=LN LE NN NE||FamiliarImpID=10|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=7?|FamName=air mephit||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=11|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=7?|FamName=dust mephit||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=12|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=7?|FamName=earth mephit||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=13|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=7?|FamName=fire mephit||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=14|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=7?|FamName=ice mephit||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=15|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=7?|FamName=magma mephit||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=16|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=7?|FamName=ooze mephit||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=17|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=7?|FamName=salt mephit||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=18|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=7?|FamName=steam mephit||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=19|/[ImprovedFamiliarID]}
1,{If~%CharacterLevel%>=7?|FamName=water mephit||FamImpAL=LG LN LE NG NN NE CG CN CE||FamiliarImpID=20|/[ImprovedFamiliarID]}
5,{If~%CharacterLevel%>=7?|FamName=pseudodragon||FamImpAL=LG LN NG NN CG CN||FamiliarImpID=21|/[ImprovedFamiliarID]}
5,{If~%CharacterLevel%>=7?|FamName=quasit||FamImpAL=NN NE CN CE||FamiliarImpID=22|/[ImprovedFamiliarID]}

### NEW FAMILIAR ###
:FamiliarImprovedStats
1,[FamiliarStats]|FamName={Color~Olive,celestial} %FamName%||FamAL=NG|
_|FamFort=2||FamReflex=2||FamWill=0|
_|FamSQ={Color~Olive,darkvision 60'}, %FamSQ%|
_|FamSQ&, {Color~Olive,[CelestialAbilities=%CharacterLevel%]}|
_|Temp1={Color~Olive,Smite (1/day, SWIFT, +{If~%CHABonus%>0?%CHABonus%/0} attack rolls, +%CharacterLevel% damage vs evil foes, until target is dead)}|
_{If~%FamSA%=None?|FamSA=%Temp1%|/|FamSA&, %Temp1%|}
2,|FamName=dire rat||FamType=magical beast (animal)||FamSize=4||FamAL=NN|
_|STR=10||DEX=17||CON=13||INT=%FamiliarINT%||WIS=13||CHA=4|[DetermineFAMAttributeBonuses]
_|FamFort=2||FamReflex=2||FamWill=0|
_|FamFeats=Skill Focus (Perception)|
_|FamMV=40 ft. (6 squares), climb 20 ft., swim 20 ft.||FamACNat=0|
_|FamBAB=0||FamAtt=bite [WriteFamAB] melee (1d4[WriteFamDmg] +disease)|
_|FamCMBBonus=None||FamCMDBonus=+4 vs Trip|
_|FamSA=disease (injury, DC[WriteFamCON_DC], onset 1d3 days, 1/day, 1d3 DEX +1d3 CON, cure: 2 consecutive saves)||FamSQ=low-light vision, scent|
_|FamSkills=Climb +{Calc~8+%DEXBonus%}, Perception +{Calc~5+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~8+%DEXBonus%}, Swim +{Calc~8+%DEXBonus%}|
3,[FamiliarStats]|FamName={Color~Olive,fiendish} %FamName%||FamAL=NE|
_|FamFort=2||FamReflex=2||FamWill=0|
_|FamSQ={Color~Olive,darkvision 60'}, %FamSQ%|
_|FamSQ&, {Color~Olive,[FiendishAbilities=%CharacterLevel%]}|
_|Temp1={Color~Olive,Smite (1/day, SWIFT, +{If~%CHABonus%>0?%CHABonus%/0} attack rolls, +%CharacterLevel% damage vs good foes, until target is dead)}|
_{If~%FamSA%=None?|FamSA=%Temp1%|/|FamSA&, %Temp1%|}
4,|FamName=air elemental||FamType=outsider (air, elemental, extraplanar)||FamSize=4||FamAL=NN|
_|STR=12||DEX=17||CON=12||INT=%FamiliarINT%||WIS=11||CHA=11|[DetermineFAMAttributeBonuses]
_|FamFort=3||FamReflex=3||FamWill=0|
_|FamFeats=Flyby Attack, Improved Initiative (B), Weapon Finesse (B)|
_|FamMV=fly 100' (perfect)||FamACNat=3|
_|FamBAB=2||FamAtt=slam [WriteFamAB] melee (1d4[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=Whirlwind (Reflex DC[WriteFamSTR_DC])||FamSQ=darkvision 60', Air Mastery (Ex, Airborne creatures take a 1 penalty on attack and damage rolls against an air elemental), Elemental traits|
_|FamSkills=Acrobatics +{Calc~4+%DEXBonus%}, Escape Artist +{Calc~4+%DEXBonus%}, Fly +{Calc~14+%DEXBonus%}, Knowledge (planes) +{Calc~4+%INTBonus%}, Perception +{Calc~6+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~8+%DEXBonus%}|
_|FamLang=auran|
5,|FamName=earth elemental||FamType=outsider (earth, elemental, extraplanar)||FamSize=4||FamAL=NN|
_|STR=16||DEX=8||CON=13||INT=%FamiliarINT%||WIS=11||CHA=11|[DetermineFAMAttributeBonuses]
_|FamFort=3||FamReflex=0||FamWill=3|
_|FamFeats=Improved Bull Rush (B), Power Attack|
_|FamMV=20', burrow 20', earth glide||FamACNat=7|
_|FamBAB=2||FamAtt=slam [WriteFamAB] melee (1d6[WriteFamDmg])|
_|FamCMBBonus=+2 vs Bull Rush||FamCMDBonus=+2 vs Bull Rush|
_|FamSA=Earth Mastery (+1 attack/damage if both it and its foe are touching the ground. -4 attack/damage vs airborne or waterborne foes)||FamSQ=darkvision 60', tremorsense 60', Earth Glide (moves easily through stone, dirt, earth), Elemental traits|
_|FamSkills=Appraise +{Calc~4+%INTBonus%}, Climb +{Calc~4+%STRBonus%}, Knowledge (dungeoneering) +{Calc~4+%INTBonus%}, Knowledge (planes) +{Calc~4+%INTBonus%}, Perception +{Calc~6+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~8+%DEXBonus%}|
_|FamLang=terran|
6,|FamName=fire elemental||FamType=outsider (elemental, extraplanar, fire)||FamSize=4||FamAL=NN|
_|STR=10||DEX=13||CON=10||INT=%FamiliarINT%||WIS=11||CHA=11|[DetermineFAMAttributeBonuses]
_|FamFort=3||FamReflex=3||FamWill=0|
_|FamFeats=Dodge, Improved Initiative (B), Weapon Finesse (B)|
_|FamMV=50'||FamACNat=3|
_|FamBAB=2||FamAtt=slam [WriteFamAB] melee (1d4[WriteFamDmg] +1d4 Fire +Burn)|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=burn (1d4 Fire Reflex DC[WriteFamCON_DC] or Catch Fire 1d4r)||FamSQ=darkvision 60', Immune Fire, Vulnerability to Cold, Elemental traits|
_|FamSkills=Acrobatics +{Calc~4+%DEXBonus%}, Climb +{Calc~4+%STRBonus%}, Escape Artist +{Calc~4+%DEXBonus%}, Intimidate +{Calc~4+%CHABonus%}, Knowledge (planes) +{Calc~4+%INTBonus%}, Perception +{Calc~6+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}|
_|FamLang=ignan|
7,|FamName=water elemental||FamType=outsider (elemental, extraplanar, water)||FamSize=4||FamAL=NN|
_|STR=14||DEX=10||CON=13||INT=%FamiliarINT%||WIS=11||CHA=11|[DetermineFAMAttributeBonuses]
_|FamFort=3||FamReflex=3||FamWill=0|
_|FamFeats=Power Attack|
_|FamMV=20', swim 90'||FamACNat=6|
_|FamBAB=2||FamAtt=slam [WriteFamAB] melee (1d6[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=drench (puts out L nonmagical fires, dispel fire CL{Color~DarkCyan,%CharacterLevel%}), vortex (Reflex DC[WriteFamSTR_DC]), water mastery (+1 attack/damage if both it and its opponent are touching water. If opponent or elemental is touching the ground, the elemental takes a 4 attack/damage)||FamSQ=darkvision 60', Elemental traits|
_|FamSkills=Acrobatics +{Calc~4+%DEXBonus%}, Escape Artist +{Calc~4+%DEXBonus%}, Knowledge (planes) +{Calc~4+%INTBonus%}, Perception +{Calc~6+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~8+%DEXBonus%}, Swim +{Calc~12+%STRBonus%}|
_|FamLang=aquan|
8,|FamName=stirge||FamType=magical beast||FamSize=4||FamAL=NN|
_|STR=3||DEX=19||CON=10||INT=%FamiliarINT%||WIS=12||CHA=6|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=2||FamWill=0|
_|FamFeats=Agile Maneuvers (B), Weapon Finesse|
_|FamMV=10', fly 40' (average)||FamACNat=0|
_|FamBAB=0||FamAtt=bite [WriteFamAB] melee (attach +blood drain +diseased)|
_|FamCMBBonus=+8 grapple when attached||FamCMDBonus=+8 vs Trip|
_|FamSA=Attach (auto grapple, lose DEX to AC), Blood Drain (1 CON drain, flies off after 4 CON drained||FamSQ=darkvision 60, low-light vision, scent, diseased (10[Percent] to be affected by [StirgeDisease])|
_|FamSkills=Fly +{Calc~4+%DEXBonus%}, Perception +{Calc~2+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~12+%DEXBonus%}|
10,|FamName=homunculus||FamType=construct||FamSize=3||FamAL=%AL%|
_|STR=8||DEX=15||CON=0||INT={If~%FamiliarINT%>10?%FamiliarINT%/10}||WIS=12||CHA=7|[DetermineFAMAttributeBonuses]
_|FamFort=2||FamReflex=0||FamWill=0||FamFortType=%CHABonus%|
_|FamFeats=Agile Maneuvers (B), Lightning Reflexes|
_|FamMV=20', fly 50' (good)||FamACNat=0|
_|FamBAB=2||FamAtt=bite [WriteFamAB] melee (1d4[WriteFamDmg] +poison (DC[WriteFamCON_DC], 1/m for 60m, Sleep 1 minute, cure: 1 save))|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=Poison||FamSQ=darkvision 60', low-light vision, construct traits|
_|FamSkills=Fly +{Calc~8+%DEXBonus%}, Perception +{Calc~4+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}|
_|FamLang=cannot speak, telepathic link with master (1500')|
11,|FamName=imp||FamType=outsider (devil, evil, extraplanar, lawful)||FamSize=3||FamAL=LE|
_|STR=10||DEX=17||CON=10||INT={If~%FamiliarINT%>13?%FamiliarINT%/13}||WIS=12||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=4||FamWill=3|
_|FamFeats=Dodge, Weapon Finesse|
_|FamMV=20', fly 50' (perfect)||FamACNat=1|
_|FamBAB=3||FamAtt=sting [WriteFamAB] melee (1d4[WriteFamDmg] +poison (DC[WriteFamCON_DC_Plus2], 1/r for 6r, 1d2 DEX, cure: 1 save))|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=Poison||FamSQ=darkvision 60', see in darkness, Fast Healing 2, DR 5/good or silver, Immune Fire/Poison, Resist Acid-Cold 10, {Bold~Spell-Like (CL6):} {Italic~detect good} (constant), {Italic~detect magic} (constant), {Italic~invisibility} (self, at will), {Italic~augury} (1/day), {Italic~suggestion} (1/day), {Italic~commune} (1/week, 6 questions CL12); change shape (boar, giant spider, rat, or raven, {Italic~beast shape I})|
_|FamSkills=Acrobatics +{Calc~6+%DEXBonus%}, Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~18+%DEXBonus%}, Knowledge (arcana) +{Calc~6+%INTBonus%}, Knowledge (planes) +{Calc~6+%INTBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Spellcraft +{Calc~6+%INTBonus%}|
_|FamLang=Common, Infernal|
12,|FamName=air mephit||FamType=outsider (air)||FamSize=4||FamAL=NN|
_|STR=13||DEX=15||CON=12||INT=%FamiliarINT%||WIS=11||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Dodge, Improved Initiative|
_|FamMV=30', fly 60' (perfect)||FamACNat=3|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=breath weapon (15' cone, 1/4r, sand and grit 1d8 Slashing, Reflex 1/2 DC[WriteFamCON_DC_Plus1])|
_|FamSQ=darkvision 60', Fast Healing 2 (in gusty and windy areas), DR 5/magic, {Bold~Spell-like (CL6):} 1/daysummon (level 2, 1 mephit of the same type 25[Percent]),
_ {Italic~blur} (1/hour, 6 min, 20[Percent] concealment), {Italic~gust of wind}  (1/day)|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~16+%DEXBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}|
_|FamLang=Common, Auran|
13,|FamName=dust mephit||FamType=outsider (air)||FamSize=4||FamAL=NN|
_|STR=13||DEX=15||CON=12||INT=%FamiliarINT%||WIS=11||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Dodge, Improved Initiative|
_|FamMV=30', fly 50' (perfect)||FamACNat=3|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=breath weapon (15' cone, 1/4r, dust 1d4 Slashing +Sickened 3r (living foes), Reflex 1/2 DC[WriteFamCON_DC_Plus1]; Sickened: -2 attack/wpn dmg/save/skill/ability checks)|
_|FamSQ=darkvision 60', Fast Healing 2 (in dusty environments), DR 5/magic, {Bold~Spell-like (CL6):} 1/daysummon (level 2, 1 mephit of the same type 25[Percent]),
_ {Italic~blur} (1/hour, 6 min, 20[Percent] concealment), {Italic~wind wall} (1/day)|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~16+%DEXBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}|
_|FamLang=Common, Auran|
14,|FamName=earth mephit||FamType=outsider (earth)||FamSize=4||FamAL=NN|
_|STR=13||DEX=15||CON=12||INT=%FamiliarINT%||WIS=11||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Dodge, Improved Initiative|
_|FamMV=30', fly 40' (average)||FamACNat=3|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=breath weapon (15' cone, 1/4r, rocks 1d8 Blunt, Reflex 1/2 DC[WriteFamCON_DC_Plus1])|
_|FamSQ=darkvision 60', Fast Healing 2 (only underground), DR 5/magic, {Bold~Spell-like (CL6):} 1/daysummon (level 2, 1 mephit of the same type 25[Percent]),
_ {Italic~enlarge person} (self, 1/day), {Italic~soften earth and stone} (1/day)|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~8+%DEXBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}|
_|FamLang=Common, Terran|
15,|FamName=fire mephit||FamType=outsider (fire)||FamSize=4||FamAL=NN|
_|STR=13||DEX=15||CON=12||INT=%FamiliarINT%||WIS=11||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Dodge, Improved Initiative|
_|FamMV=30', fly 40' (average)||FamACNat=3|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=breath weapon (15' cone, 1/4r, 1d8 Fire, Reflex 1/2 DC[WriteFamCON_DC_Plus1])|
_|FamSQ=darkvision 60', Fast Healing 2 (while in contact with fire), DR 5/magic, Immune Fire, Vulnerability to Cold, {Bold~Spell-like (CL6):} 1/daysummon (level 2, 1 mephit of the same type 25[Percent]),
_ {Italic~scorching ray} (1/hour, 40' ray 4d6 Fire), {Italic~heat metal} (1/day, DC{Calc~12+%CHABonus%})|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~8+%DEXBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}|
_|FamLang=Common, Ignan|
16,|FamName=ice mephit||FamType=outsider (cold)||FamSize=4||FamAL=NN|
_|STR=13||DEX=15||CON=12||INT=%FamiliarINT%||WIS=11||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Dodge, Improved Initiative|
_|FamMV=30', fly 40' (average)||FamACNat=3|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=breath weapon (15' cone, 1/4r, 1d4 Cold +Sickened 3r (living foes), Reflex 1/2 DC[WriteFamCON_DC_Plus1]; Sickened: -2 attack/wpn dmg/save/skill/ability checks)|
_|FamSQ=darkvision 60', Fast Healing 2 (in areas below freezing), DR 5/magic, Immune Cold, Vulnerability to Fire, {Bold~Spell-like (CL6):} 1/daysummon (level 2, 1 mephit of the same type 25[Percent]),
_ {Italic~magic missile} (1/hour, 160' 3x 1d4+1 (all within 15')), {Italic~chill metal} (1/day, DC{Calc~12+%CHABonus%})|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~8+%DEXBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}|
_|FamLang=Common, Auran|
17,|FamName=magma mephit||FamType=outsider (fire)||FamSize=4||FamAL=NN|
_|STR=13||DEX=15||CON=12||INT=%FamiliarINT%||WIS=11||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Dodge, Improved Initiative|
_|FamMV=30', fly 40' (average)||FamACNat=3|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=breath weapon (15' cone, 1/4r, 1d8 Fire, Reflex 1/2 DC[WriteFamCON_DC_Plus1])|
_|FamSQ=darkvision 60', Fast Healing 2 (while in contact with magma or lava), DR 5/magic, Immune Fire, Vulnerability to Cold, {Bold~Spell-like (CL6):} 1/daysummon (level 2, 1 mephit of the same type 25[Percent]),
_ {Italic~magma form (su)} (1/hour, pool of lava, 3' dia 6" deep, DR20/magic, NO attack, MV: 10', can pass through small openings/cracks, 1d6 Fire anything it touches, 10 minutes), {Italic~pyrotechnics} (1/day)|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~8+%DEXBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}|
_|FamLang=Common, Ignan|
18,|FamName=ooze mephit||FamType=outsider (water)||FamSize=4||FamAL=NN|
_|STR=13||DEX=15||CON=12||INT=%FamiliarINT%||WIS=11||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Dodge, Improved Initiative|
_|FamMV=30', fly 40' (average), swim 30'||FamACNat=3|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=breath weapon (15' cone, 1/4r, slime 1d4 Acid +Sickened 3r (living foes), Reflex 1/2 DC[WriteFamCON_DC_Plus1]; Sickened: -2 attack/wpn dmg/save/skill/ability checks)|
_|FamSQ=darkvision 60', Fast Healing 2 (in wet or muddy environments), DR 5/magic, {Bold~Spell-like (CL6):} 1/daysummon (level 2, 1 mephit of the same type 25[Percent]),
_ {Italic~acid arrow} (1/hour, 640' touch 2d4 Acid +2d4 Acid for 2r), {Italic~ stinking cloud} (1/day, DC{Calc~13+%CHABonus%})|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~8+%DEXBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}, Swim +{Calc~8+%STRBonus%}|
_|FamLang=Common, Aquan|
19,|FamName=salt mephit||FamType=outsider (earth)||FamSize=4||FamAL=NN|
_|STR=13||DEX=15||CON=12||INT=%FamiliarINT%||WIS=11||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Dodge, Improved Initiative|
_|FamMV=30', fly 40' (average)||FamACNat=3|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=breath weapon (15' cone, 1/4r, salt crystals 1d4 Slashing +Sickened 3r (living foes), Reflex 1/2 DC[WriteFamCON_DC_Plus1]; Sickened: -2 attack/wpn dmg/save/skill/ability checks)|
_|FamSQ=darkvision 60', Fast Healing 2 (in arid environments), DR 5/magic, {Bold~Spell-like (CL6):} 1/daysummon (level 2, 1 mephit of the same type 25[Percent]),
_ {Italic~glitterdust} (1/hour), {Italic~dehydrate (su)} (1/day, draw moisture 20' rad, Living creatures = 2d8 dmg (Fort 1/2 DC{Calc~12+%CHABonus%}, -2 save plant/aquatic creatures))|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~8+%DEXBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}|
_|FamLang=Common, Terran|
20,|FamName=steam mephit||FamType=outsider (fire)||FamSize=4||FamAL=NN|
_|STR=13||DEX=15||CON=12||INT=%FamiliarINT%||WIS=11||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Dodge, Improved Initiative|
_|FamMV=30', fly 40' (average)||FamACNat=3|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=breath weapon (15' cone, 1/4r, Steam 1d4 Fire +Sickened 3r (living foes), Reflex 1/2 DC[WriteFamCON_DC_Plus1]; Sickened: -2 attack/wpn dmg/save/skill/ability checks)|
_|FamSQ=darkvision 60', Fast Healing 2 (in boiling water or steam), DR 5/magic, Immune Fire, Vulnerability to Cold, {Bold~Spell-like (CL6):} 1/daysummon (level 2, 1 mephit of the same type 25[Percent]),
_ {Italic~blur} (1/hour, 6 min, 20[Percent] concealment), {Italic~boiling rain (su)} (1/day, rainstorm of boiling water, 20'x20', Living= 2d6 Fire, Fort 1/2 DC{Calc~12+%CHABonus%})|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~8+%DEXBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}|
_|FamLang=Common, Ignan|
21,|FamName=water mephit||FamType=outsider (water)||FamSize=4||FamAL=NN|
_|STR=13||DEX=15||CON=12||INT=%FamiliarINT%||WIS=11||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Dodge, Improved Initiative|
_|FamMV=30', fly 40' (average), swim 30'||FamACNat=3|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=breath weapon (15' cone, 1/4r, 1d8 Acid, Reflex 1/2 DC[WriteFamCON_DC_Plus1])|
_|FamSQ=darkvision 60', Fast Healing 2 (underwater), DR 5/magic, {Bold~Spell-like (CL6):} 1/daysummon (level 2, 1 mephit of the same type 25[Percent]),
_ {Italic~acid arrow} (1/hour, 640' touch 2d4 Acid +2d4 Acid for 2r), {Italic~stinking cloud} (1/day, DC{Calc~13+%CHABonus%})|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~8+%DEXBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}, Swim +{Calc~8+%STRBonus%}|
_|FamLang=Common, Aquan|
22,|FamName=pseudodragon||FamType=dragon||FamSize=3||FamAL=NG|
_|STR=7||DEX=15||CON=13||INT={If~%FamiliarINT%>10?%FamiliarINT%/10}||WIS=12||CHA=10|[DetermineFAMAttributeBonuses]
_|FamFort=3||FamReflex=3||FamWill=3|
_|FamFeats=Agile Maneuvers (B), Weapon Finesse|
_|FamMV=15', fly 60' (good)||FamACNat=2|
_|FamBAB=2||FamAtt=sting [WriteFamAB] melee (1d3[WriteFamDmg] +poison (DC[WriteFamCON_DC_Plus2], 1/m for 10m, sleep 1 minute, cure: 1 save)), bite [WriteFamAB] melee (1d2[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=Reach (5' tail), poison||FamSQ=blindsense 60', darkvision 60', low-light vision, Immune paralysis/sleep|
_|FamSkills=Diplomacy +{Calc~5+%CHABonus%}, Fly +{Calc~13+%DEXBonus%}, Perception +{Calc~7+%WISBonus%}, Sense Motive +{Calc~7+%WISBonus%}, Stealth +{Calc~17+%DEXBonus%} (+4 in forests), Survival +{Calc~5+%WISBonus%} (+4 Stealth racial)|
_|FamLang=Draconic, Telepathy 60'|
23,|FamName=quasit||FamType=outsider (chaotic, demon, evil, extraplanar)||FamSize=3||FamAL=CE|
_|STR=8||DEX=14||CON=11||INT={If~%FamiliarINT%>11?%FamiliarINT%/11}||WIS=12||CHA=11|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Improved Initiative, Weapon Finesse|
_|FamMV=20', fly 50' (perfect)||FamACNat=2|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg] +poison (DC[WriteFamCON_DC_Plus2], 1/r for 6r, 1d2 DEX, cure: 2 consecutive saves)), bite [WriteFamAB] melee (1d4[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=Poison||FamSQ=darkvision 60', Fast Healing 2, DR 5/good or cold iron, Immune Electricity/Poison, Resist Acid-Cold-Fire 10, {Bold~Spell-Like (CL6):} {Italic~detect good} (at will), {Italic~detect magic} (at will), {Italic~invisibility} (self, at will), {Italic~cause fear} (30' rad, DC{Calc~11+%CHABonus%}, 1/day), {Italic~commune} (1/week, 6 questions CL12); change shape (bat, small centipede, toad, or wolf, {Italic~polymorph})|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~18+%DEXBonus%}, Knowledge (planes) +{Calc~6+%INTBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~14+%DEXBonus%}|
_|FamLang=Abyssal, Common, Telepathy (touch)|

:Mephit_Blank
1,|FamName=XXX mephit||FamType=outsider (XXX)||FamSize=4||FamAL=NN|
_|STR=13||DEX=15||CON=12||INT=%FamiliarINT%||WIS=11||CHA=14|[DetermineFAMAttributeBonuses]
_|FamFort=1||FamReflex=3||FamWill=3|
_|FamFeats=Dodge, Improved Initiative|
_|FamMV=30', fly 40' (average)||FamACNat=3|
_|FamBAB=3||FamAtt=2 claws [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=breath weapon (15' cone, 1/4r, XXX, Reflex 1/2 DC[WriteFamCON_DC_Plus1])|
_|FamSQ=darkvision 60', Fast Healing 2 (XXX), DR 5/magic, {Bold~Spell-like (CL6):} 1/daysummon (level 2, 1 mephit of the same type 25[Percent]),
_ {Italic~XXX} (1/hour), {Italic~XXX} (1/day)|
_|FamSkills=Bluff +{Calc~6+%CHABonus%}, Fly +{Calc~8+%DEXBonus%}, Perception +{Calc~8+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%}, Stealth +{Calc~10+%DEXBonus%}|
_|FamLang=Common, XXX one appropriate elemental language(Aquan, Auran, Ignan, or Terran)|
# Familiar Blank
2,|FamName=||FamType=magical beast (animal)||FamSize=3||FamAL=|
_|STR=||DEX=||CON=||INT={If~%FamiliarINT%>XXX?%FamiliarINT%/XXX}||WIS=||CHA=|[DetermineFAMAttributeBonuses]
_|FamFort=2||FamReflex=2||FamWill=0|
_|FamFeats=|
_|FamMV=30 ft. (6 squares), climb 30 ft.||FamACNat=0|
_|FamBAB=0||FamAtt=bite [WriteFamAB] melee (1d3[WriteFamDmg])|
_|FamCMBBonus=None||FamCMDBonus=None|
_|FamSA=None||FamSQ=low-light vision|
_|FamSkills=Acrobatics +{Calc~8+%DEXBonus%}, Climb +{Calc~14+%STRBonus%}, Perception +{Calc~2+%WISBonus%}, Sense Motive +{Calc~2+%WISBonus%} (Racial +8 Acrobatics)|
_|FamLang=XXX|

:CelestialAbilities
1-4,Resist Acid, Cold and Electricity 5
5-10,Resist Acid, Cold and Electricity 10, DR 5/evil
11-100,Resist Acid, Cold and Electricity 15, DR 10/evil

:FiendishAbilities
1-4,Resist Acid and Fire 5
5-10,Resist Acid and Fire 10, DR 5/good
11-100,Resist Acid and Fire 15, DR 10/good

:StirgeDisease
3,blinding sickness (Fort DC16, Onset: 1d3 days, 1/d, 1d4 STR (if >2STR make other save or permanent blindness, Cure: 2 consecutive saves)
1,bubonic plague (Fort DC17, Onset: 1 day, 1/d, 1d4 CON + 1 CHA and fatigued, Cure: 2 consecutive saves)
1,demon fever (Fort DC18, Onset: 1 day, 1/d, 1d6 CON +other save or 1 CON is drained instead, Cure: 2 consecutive saves)
3,devil chills (Fort DC14, Onset: 1d4 days, 1/d, 1d4 STR, Cure: 3 consecutive saves)
5,filth fever (Fort DC12, Onset: 1d3 days, 1/d, 1d3 DEX + 1d3 CON ,Cure: 2 consecutive saves)
3,red ache (Fort DC15, Onset: 1d3 days, 1/d, 1d6 STR ,Cure: 2 consecutive saves)

# ---------------------------------------------------------------------------
# XXX Verify if still needed

# XXX Verify if still needed
:DetermineCONBonus
1,|CONBonus={If~%CON%>=10?{Trunc~{Calc~(%CON%-10)/2}}/{Floor~{Calc~(%CON%-10)/2}}}|

# XXX Verify if still needed
:DetermineCHABonus
1,|CHABonus={If~%CHA%>=10?{Trunc~{Calc~(%CHA%-10)/2}}/{Floor~{Calc~(%CHA%-10)/2}}}|

# ---------------------------------------------------------------------------
# Personal History Section

:BuildPersonalHistoryBlurb
1,<br><br><b><u>Personal History</u></b><br>
_ [Tab]This character [~InitiatePersonalHistory] in {AorAn~[CommunityType=%RaceMaster%]}.
_ {Cap~[HeShe]} was raised in an area considered [~Climate] [~Terrain].<br>
_ [Tab][Parents] [~Grandparents] [~Siblings] [~ExtendedFamily] [~Friends].<br><br>
_ [Tab]{Cap~[HeShe]} grew up in [~FamilyPowerStructure].<br>
_ [Tab][FamilyEconomicStatus]. As [HeShe] was growing up, [HisHer] family [~FamilySocialStanding].<br>
_ [Tab]During the times of [HisHer] life when it became necessary to defend themselves, [~FamilyDefenseReadiness].<br>
_ [Tab]Privately, [HisHer] family [~FamilyPrivateEthics]. {Cap~[HisHer]} family's public ethics [~FamilyPublicEthics].
_ {Cap~[HisHer]} family's reputation in the community however, [~FamilyReputation].<br>
_ [Tab]{Cap~[HisHer]} family's Religious preferences [FamilyReligiousCommitment].<br>
_ [Tab]Politically, [HisHer] family would be considered [~FamilyPoliticalViews].<br>
_ [Tab][AncestorsOfNote].<br><br>
_ [Tab]{Cap~[HisHer]} childhood was [Chanceof]{If~%Chance%>50?essentially normal/otherwise unremarkable}.
_ The only thing that might be considered unusual was the fact that [HeShe] [~ChildhoodEvents].
_ Although the event was traumatic, [HeShe]
_ [Chanceof]{If~%Chance%>50?could/would} not have been the [ManWoman] [HeShe] is now without it.<br>
_ [Tab]During the years of [HisHer] youth, [YouthEvents].<br>
_ [Tab][PivotalEvents].<br>
_ [Tab]{Cap~[HisHer]} early education was couched in [ChildhoodInstruction].
_ Later, [HeShe] [FormalEducation].
_ Currently, [HeShe] has been making a living [~CurrentTrade].<br>
_ [Tab]As far as [HisHer] relationships with [HisHer] Instructors went, [~Instructors].<br>
_ [Tab][Enemies]|Gender=%PC_Gender%|<br>
#
_ {If~{Param~Class,%Class%}=Sorcerer?<br>[Background Sorcery.Alternate(%Gender%)]}
2,{Stop~ERROR in BuildPersonalHistoryBlurb subtable}
3,{If~%CohortGen%=No?<br>
_{Generate~0,NPC'S HISTORY: Click to show the NPC's history.,BuildPersonalHistoryBlurb=1}
_}

:InitiatePersonalHistory
1,was raised
2,spent [HisHer] formative years
3,grew up
4,spent most of [HisHer] life
5,spent the first few years of [HisHer] life
6,was born

# ---------------------------------------------------------------------------
# Relationships

:Parents
1-55,Both of [HisHer] Parents are alive and healthy.
56-65,Only [HisHer] [Chanceof]{If~%Chance%>50?|ParentFlag=1|}{If~%ParentFlag%=0?Father/Mother}
_ is still alive, [HisHer] {If~%ParentFlag%=0?Mother/Father} passed away as the result of [CausesOfDeath].
66-70,Both of [HisHer] Parents are Dead, [Chanceof]{If~%Chance%>75?they both died as the result of
_ [CausesOfDeath]/[HisHer] Father died as the result of [CausesOfDeath],
_ [HisHer] Mother died as the result of [CausesOfDeath]}.|OrphanFlag=1|
71-80,{Cap~[HisHer]} [Chanceof]{If~%Chance%>50?|ParentFlag=1|}{If~%ParentFlag%=0?Father/Mother}
_ has a long term [Chanceof]{If~%Chance%>50?illness/infirmity}, [HisHer] {If~%ParentFlag%=0?Mother/Father} is 
_ healthy and well.
81-85,Both of [HisHer] Parents have a long term [Chanceof]{If~%Chance%>50?illness/infirmity}.
86-95,{Cap~[HisHer]} Parents are [Chanceof]{If~%Chance%>50?lost/unknown}.
96-100,{Cap~[HisHer]} Parents were [Chanceof]{If~%Chance%>50?adoptive/foster} parents. [Parents={Dice~1d95}]

:Siblings
1-25,{Cap~[HeShe]} has no siblings, [HeShe] is an only child.
26-45,{Cap~[HeShe]} is the oldest child of [HisHer] family, and has
_|TempNumber={Dice~1d4}| [NumberNames=%TempNumber%] younger {If~%TempNumber%=1?sibling/siblings}.
46-75,{Cap~[HeShe]} is the middle child of [HisHer] family, and has
_|TempNumber={Dice~1d3}| [NumberNames=%TempNumber%] older {If~%TempNumber%=1?sibling/siblings} as well as
_|TempNumber={Dice~1d3}| [NumberNames=%TempNumber%] younger {If~%TempNumber%=1?sibling/siblings}.
76-95,{Cap~[HeShe]} is the youngest child of [HisHer] family, and has
_|TempNumber={Dice~1d4}| [NumberNames=%TempNumber%]  older {If~%TempNumber%=1?sibling/siblings}.
96-100,{Cap~[HeShe]} is [Chanceof]{If~%Chance%>80?{AorAn~[TwinType]} triplet with {Dice~1d3+1} other siblings/
_{AorAn~[TwinType]} twin with|TempNumber={Dice~1d4}| [NumberNames=%TempNumber%] other {If~%TempNumber%=1?sibling/siblings}}.

:Grandparents
1-20,{Cap~[HeShe]} has no living grandparents
_ [Chanceof]{If~%Chance%>50?, [HeShe] remembers them, but they have passed away.}
21-30,{Cap~[HisHer]} mother's parents are still alive, but [HisHer] father's parents are deceased.
31-40,{Cap~[HisHer]} father's parents are still alive, but [HisHer] mother's parents are deceased.
41-60,{Cap~[HisHer]} [Chanceof]|TempNumber=%Chance%|{If~%TempNumber%>50?paternal/maternal} 
_[Chanceof]{If~%Chance%>50?grandfather/grandmother} is deceased,
_ as is [HisHer] {If~%TempNumber%>50?maternal/paternal} [Chanceof]{If~%Chance%>50?grandfather/grandmother}.
61-70,Of [HisHer] four grandparents, only [HisHer] [GrandparentRelationship] [GrandparentTypes] is deceased.
71-80,Of [HisHer] eight great-grandparents,|TempNumber={Dice~1d4}| [NumberNames=%TempNumber%]
_ {If~%TempNumber%=1?is/ are} still alive; [HisHer] |Counter={Calc~%TempNumber%-1}|
_{If~%Counter%=0?[GrandparentRelationship] [GrandparentTypes]'s [ParentType]/
_{Loop~%Counter%,[GrandparentRelationship] [GrandparentTypes]'s [ParentType], |Counter-1|}
_ and [HisHer] [GrandparentRelationship] [GrandparentTypes]'s [ParentType]}.
_{Reset~GrandparentRelationship}{Reset~GrandparentTypes} [Grandparents={Dice~1d70}]
81-100,{Cap~[HisHer]} grandparents are unknown. They all died before [HeShe] was old enough to remember them.

:ExtendedFamily
1-10,{Cap~[HeShe]} has no other living relatives[Chanceof]{If~%Chance%>50? that [HeShe] is aware of}.
11-20,{Cap~[HeShe]} has other relatives out there somewhere, but [HeShe] doesn't know who or how many there are.
21-55,{Cap~[HeShe]} has at least|TempNumber={Dice~1d10}| %TempNumber% other living {If~%TempNumber%= 1?relative/relatives}
_[Chanceof]{If~%Chance%>50? that [HeShe] is aware of}.
56-90,{Cap~[HeShe]} has at least|TempNumber={Dice~2d12}| %TempNumber% other living {If~%TempNumber%= 1?relative/relatives}
_[Chanceof]{If~%Chance%>50? that [HeShe] is aware of}.
91-100,{Cap~[HeShe]} has a huge extended family, and [HeShe] knows dozens of relatives from various generations.

:Friends
1-15,{Cap~[HeShe]} has no friends, and is a loner [Chanceof]{If~%Chance%>50?by choice/by circumstance. [LonerCircumstance]}
16-30,{Cap~[HeShe]} lost a significant friend by the name of [~Names Generator.NAME Random] {Reset~CausesOfDeath}
_ [Chanceof]{If~%Chance%>50?who died {Dice~2d10} years ago as the result of [CausesOfDeath]/
_ when [Chanceof]|TempNumber=%Chance%|{If~%TempNumber%>50?he/she} went missing {Dice~2d10} years ago}
31-50,{Cap~[HeShe]} has a few close friends, but doesn't make friends easily.
_ {Cap~[HeShe]}'s a good friend to those [HeShe] does have, though
51-80,{Cap~[HeShe]} has several friends that [HeShe] considers [Chanceof]{If~%Chance%>50?companions/ associates},
_ but they aren't particularly close to [HimHer]
81-100,{Cap~[HeShe]} has light and pleasant relationships with many people but there are few if any, significant ties

:Enemies
1-15,At this point in [HisHer] life, [HeShe] has no known enemies.
16-25,{Cap~[HeShe]} has a minor childhood enemy by the name of [~Names Generator.NAME Random] who still harbors a 
_ [Chanceof]{If~%Chance%>50?grudge/ prejudice} against [HimHer]{If~%IronyFlag%=1?./, but [HeShe] can't think of any
_ reason for the continuing antagonism.}
26-30,{Cap~[HeShe]} wronged a lover in a matter of the heart several years ago{If~%IronyFlag%=1?./, and suspects that now,
_ [HeShe] may have made an enemy of [HisHer] jilted lover as the result of it.} 
31-35,A jilted lover's [Chanceof]{If~%Chance%>50?friend/ relative} harbors ill feelings for [HimHer] due to
_ [HisHer] actions toward [Chanceof]|TempNumber=%Chance%|{If~%TempNumber%>50?his/her} loved one.
36-40,{Cap~[HeShe]} edged a romantic rival out in an affair of the heart, and [HisHer] rival still holds a grudge.
41-50,{Cap~[HisHer]} family has earned the enmity of [~EnemyBranch].
51-55,One of [HisHer] friends has an enemy by the name of [~Names Generator.NAME Random],
_ and now, that person hates [HimHer] as well.
56-60,Sometime in the recent past, [HeShe] acquired a rival when that person
_ [Chanceof]{If~%Chance%>50?was/ felt} wronged as the result of a
_ [Chanceof]{If~%Chance%>50?social [~Mistake]/ business [~Mistake]}.
61-65,[Chanceof]{If~%Chance%>70?A group of local [~BandTypePlural] have chosen to direct their|GroupFlag=2|/
_ A local [~Individual] has chosen to direct
_ |PC_Gender=%Gender%||NPC_Gender={Dice~1d2}||Gender=%NPC_Gender%|[HisHer]|Gender=%PC_Gender%|}
_ [Chanceof]{If~%Chance%>50?enmity/ hatred} towards [HimHer]{If~%IronyFlag%=1?./
_[Chanceof]{If~%Chance%>50?, and [HeShe] isn't quite sure what might have fostered it/
_. {Cap~[HeShe]} believes that it might have been the result of a minor adventure that [HeShe]
_ |Gender=%NPC_Gender%| completed at {If~%GroupFlag%=2?their/[HisHer]} expense,
_ ostensibly known as The [~ADV Instant Adventure Namer.Generate]}}
66-70,[Chanceof]{If~%Chance%>70?A group of local [~Monster Stats.MonsterNames]s view/
_ A local [~Monster Stats.MonsterNames] views} [HimHer] as a threat{If~%IronyFlag%=1?./, which [HeShe] suspects might
_ have been the result of a minor encounter that occurred a few [Conflict Namer.TimeIdentifier={Dice~1d8+10}]s ago.}
71-75,{Cap~[HeShe]} has made an enemy of a person by the name of [~Names Generator.NAME Random], who has a philosophical
_ beef with [HimHer].
76-80,{Cap~[HeShe]} has made a Political enemy of {AorAn~[PoliticalEnemy]} by the name of [~Formal Names.Start],
_ who looks on [HimHer] with [Chanceof]{If~%Chance%>50?extreme} disfavor due to the
_ [Chanceof]{If~%Chance%>50?fact/ perceived notion} that [HeShe]
_ [Chanceof]{If~%Chance%>75?had shown a marked lack of good manners while attending a recent formal event/
_ inadvertently spoiled the enemy's secret plans}.
81-85,{Cap~[HeShe]} has made an Arcane rival. [Chanceof]{If~%Chance%>50?A fellow apprentice/
_ A student of the Arcane Arts} by the name of [~Names Generator.NAME Random] has developed an intense dislike for [HimHer]
_{If~%IronyFlag%=1?./, and [HeShe] suspects that it might have been due to the fact that [HeShe] was considered the instructor's favorite.}
86-90,{Cap~[HeShe]} has made a diabolical enemy. A powerful [DiabolicalEnemy] has identified [HimHer] as a
_ [Chanceof]{If~%Chance%>50?current/ future} threat{If~%IronyFlag%=1?./, and [HeShe] must be constantly vigilant, prepared for
_ unexpected attacks.}
91-95,There is an enemy within [HisHer] family{If~%IronyFlag%=1?; [HisHer] |TempNumber={Dice~1d13}|[Relative=%TempNumber%]
_ [Chanceof]{If~%Chance%>50?hates/ fears} [HimHer]./. {Cap~[HeShe]}[Chanceof]{If~%Chance%>50?knows/ suspects} that 
_ [HisHer] |TempNumber={Dice~1d13}|[Relative=%TempNumber%]
_ [Chanceof]{If~%Chance%>50?hates/ fears} [HimHer], and is constantly on guard when|Gender=%NPC_Gender%|
_ [HeShe] is near.}
96-100,{Cap~[HeShe]} suffers from Paranoia, believing that someone is out to get [HimHer].
_ [Chanceof]{If~%Chance%>75?|IronyFlag=1| Ironically, there really is someone that bears [HimHer] ill will,
_ although [HeShe] doesn't know it. [Enemies={Dice~1d80+15}]}

:Instructors
1-15,[HeShe] had no Instructors of note
_ [Chanceof]{If~%Chance%>50?They were generally forgettable, and imparted no particularly useful knowledge to [HisHer] youthful mind/
_ {Cap~[HeShe]} pretty much taught [HimHer]self}
16-40,[HeShe] had a basic education. A particularly good instructor taught [HimHer] the basic skills,
_ [Chanceof]{If~%Chance%>50?but, unfortunately, |Gender={Dice~1d2}| [HeShe] has since died
_ as the result of [CausesOfDeath]/ and as far as [HeShe] knows, is alive, well, and still teaching}
41-50,[HeShe] had an advanced education.
_ A top-notch instructor taught [HimHer] the more advanced forms of military, religious, and arcane techniques
51-55,[HeShe] managed to [Chanceof]{If~%Chance%>50?anger/ alienate} an instructor of note, and [HisHer] formal education
_ has suffered as a result of it
56-60, the instructor who taught [HimHer] everything [HeShe] knows mysteriously vanished. {Cap~[HeShe]} has always wondered
_ what happened to to [HisHer] mentor, and has vowed to keep looking for clues to help solve the mystery
61-65, a favorite instuctor of note requested [Chanceof]|TempNumber=%Chance%|{If~%Chance%>50?an oath/ a service} from [HimHer]
_ [Chanceof]{If~%Chance%>50?recently/ in the past}, and [HeShe] [Chanceof]{If~%Chance%>50?wants to/ feels obligated to}
_ do whatever is necessary to {If~%TempNumber%>50?keep that oath/ perform that service}
66-70, the person who taught [HimHer] the most isn't actually in [HisHer] area of expertise, but that person was a pivotal influence
_ in [HisHer] Life
71-80,[HisHer] instructor was of a higher social class than [HeShe] was, and as a result, [HeShe] received a more comprehensive
_ education than what [HeShe] would have likely been able to achieve under different circumstances
81-90,[HisHer] instructor was of a lower social class than [HeShe] was, and as a result, [HeShe] received less of a formal education than
_ what [HeShe] would have likely been able to achieve under different circumstances
91-95,[HisHer] favorite instructor was of a different race than [HeShe] was, and as a result, [HeShe] received more specialized knowledge
_ than [HeShe] would have normally been able to achieve under different circumstances
96-100, the instructor that had the most influence on [HisHer] early ecucation was exotic. As a result, [HeShe] received more specialized
_ knowledge than [HeShe] would have normally been able to receive under different circumstances

;LonerCircumstance
1,{Cap~[HisHer]} [Relative] was labeled {AorAn~[UnsavoryLabels]}, and [HeShe] was generally shunned as the result of it
1,{Cap~[HeShe]} is labeled {AorAn~[UnsavoryLabels]}, and was generally shunned because of it

;UnsavoryLabels
1,bad influence
1,collaborator
1,conspirator
1,convict
1,criminal
1,crook
1,defector
1,delinquent
1,deserter
1,dissident
1,double agent
1,felon
1,insurgent
1,lawbreaker
1,leper
1,loyalist
1,mole
1,offender
1,scoundrel
1,spy
1,terrorist
1,threat
1,traitor
1,turncoat
1,villain

;!CausesOfDeath
1,an accident
1,a fatal injury
1,a wasting disease
1,an unfortunate mishap
1,a conflict called [Conflict Namer.Start]

;TwinType
7,identical
3,fraternal

:NumberNames
1,one
2,two
3,three
4,four
5,five
6,six
7,seven
8,eight

:ParentType
1,father
2,mother

:!GrandparentRelationship
1,paternal
2,maternal
3,paternal
4,maternal

:!GrandparentTypes
1,grandfather
2,grandmother
3,grandfather
4,grandmother

:Relative
1,father |NPC_Gender=1|
2,mother |NPC_Gender=2|
3,uncle |NPC_Gender=1|
4,aunt |NPC_Gender=2|
5,brother |NPC_Gender=1|
6,sister |NPC_Gender=2|
7,cousin|NPC_Gender={Dice~1d2}|
8,grandfather |NPC_Gender=1|
9,grandmother |NPC_Gender=2|
10,stepbrother|NPC_Gender=1|
11,stepsister|NPC_Gender=2|
12,foster brother|NPC_Gender=1|
13,foster sister|NPC_Gender=2|

;DiabolicalEnemy
1,Demon
1,Devil
1,[~Outsider]

;PoliticalEnemy
1,Noble
1,Officer
1,High-Ranking Official

;Mistake
1,blunder
1,error
1,fault 
1,faux pas 
1,gaffe
1,inaccuracy 
1,lapse 
1,misstep 
1,mistake 
1,muddle
1,oversight 
1,slip-up

:EnemyBranch
1,a person by the name of [Names Generator.NAME Random]
2,an opposing family by the name of [Names Generator.NAME Random]
3,a [Chanceof]{If~%Chance%>75?powerful/ minor} local group known as [~Group Namer.Start]
4,an Arcane group called [~Group Designer.ArcMainNoun]
5,a Mystical group called [~Group Designer.MysMainNoun]

# XXX Look Here
:BandTypePlural
1,|Plural=2|[BandTypeAlt]

:BandTypeSingle
1,|Plural=1|[BandTypeAlt]

;BandTypeAlt
5,{PluralIf~%Plural%,adventurer}|Plural=1|
1,{PluralIf~%Plural%,ambassador} from [~Countries.Land_%WorldNeededName%]|Plural=1|
2,{PluralIf~%Plural%,bandit}|Plural=1|
1,{PluralIf~%Plural%,bodyguard}|Plural=1|
2,{PluralIf~%Plural%,bounty hunter}{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]}|Plural=1|
2,{PluralIf~%Plural%,brigand}|Plural=1|
1,{PluralIf~%Plural%,brute}|Plural=1|
1,{PluralIf~%Plural%,bucaneer}|Plural=1|
1,{PluralIf~%Plural%,burglar}|Plural=1|
1,{PluralIf~%Plural%,crook}|Plural=1|
1,{PluralIf~%Plural%,felon}|Plural=1|
1,{PluralIf~%Plural%,gang member}|Plural=1|
1,{PluralIf~%Plural%,heavy}|Plural=1|
1,{PluralIf~%Plural%,hooligan}|Plural=1|
1,{PluralIf~%Plural%,lawman}{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]}|Plural=1|
1,{PluralIf~%Plural%,marauder}|Plural=1|
1,{PluralIf~%Plural%,militia}|Plural=1|
5,{PluralIf~%Plural%,mercenary}{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]/ of the [~Countries.MercenaryGroup_%WorldNeededName%]}|Plural=1|
1,{PluralIf~%Plural%,merchant}{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]/ of the [~Countries.MerchantGroup_%WorldNeededName%]}|Plural=1|
1,{PluralIf~%Plural%,mugger}|Plural=1|
2,{PluralIf~%Plural%,official}{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]}|Plural=1|
2,{PluralIf~%Plural%,outlaw}{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]}|Plural=1|
1,{PluralIf~%Plural%,pilgrim} (God: [ChooseDeity]){If~{Dice~1d3}=1? from [~Countries.Land]}|Plural=1|
1,{PluralIf~%Plural%,pirate}|Plural=1|
2,{PluralIf~%Plural%,raider}{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]}|Plural=1|
1,{PluralIf~%Plural%,refugee} from [~Countries.Land_%WorldNeededName%]|Plural=1|
1,{PluralIf~%Plural%,robber}|Plural=1|
2,{PluralIf~%Plural%,ruffian}|Plural=1|
1,{PluralIf~%Plural%,thief}|Plural=1|
2,{PluralIf~%Plural%,thug}|Plural=1|
5,{PluralIf~%Plural%,traveler} from [~Countries.Land_%WorldNeededName%]|Plural=1|

;BandType
1,adventurer
1,ambassador from [~Countries.Land_%WorldNeededName%]
1,bandit
1,bounty hunter{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]}
1,brigand
1,brute
1,bucaneer
1,burglar
1,crook
1,felon
1,gang member
1,heavy
1,hooligan
1,lawman{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]}
1,marauder
1,mercenary{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]/ of the [~Countries.MercenaryGroup_%WorldNeededName%]}
1,merchant{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]/ of the [~Countries.MerchantGroup_%WorldNeededName%]}
1,mugger
1,official{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]}
1,outlaw{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]}
1,pilgrim (God: [ChooseDeity]){If~{Dice~1d3}=1? from [~Countries.Land]}
1,pirate
1,raider{If~{Dice~1d3}=1? from [~Countries.Land_%WorldNeededName%]}
1,refugee from [~Countries.Land_%WorldNeededName%]
1,robber
1,ruffian
1,thief
1,thug
1,traveller from [~Countries.Land_%WorldNeededName%]

:Individual
1,Adventurer
2,Bandit
3,Brigand
4,Brute
5,Buccaneer
6,Burglar
7,Crook
8,Felon
9,Gang Member
10,Heavy
11,Hood
12,Hooligan
13,Marauder
14,Mercenary
15,Mugger
16,Outlaw
17,Pirate
18,Raider
19,Robber
20,Ruffian
21,Thief
22,Thug

;Outsider
1,Aasimar
1,Achaierai
1,Air Mephit
1,Angel
1,Archon
1,Arrowhawk
1,Azer
1,Barghest
1,Chaos Beast
1,Couatl
1,Demon
1,Devil
1,Diinni
1,Dust Mephit
1,Earth Mephit
1,Efreeti
1,Eladrin
1,Fire Mephit
1,Formians
1,Guardinals
1,Hell Hound
1,Howler
1,Ice Mephit
1,Janni
1,Lillend
1,Magma Mephit
1,Night Hag
1,Nightmare
1,Ooze Mephit
1,Rakshasa
1,Rast
1,Ravid
1,Salamanders
1,Salt Mephit
1,Shadow Mastiff
1,Slaadi
1,Steam Mephit
1,Tiefling
1,Titan
1,Triton
1,Trojanidas
1,Vargouille
1,Water Mephit
1,Xill
1,Xorn
1,Yeth Hound

# ---------------------------------------------------------------------------
# Life Events

:ChildhoodEvents
01-15,had survived [ChildhoodDangers]
16-30,had survived a major threat to [HisHer] Community. {Cap~{AorAn~[CommunityDangers]}} struck when [HeShe] was a child,
_ and [HeShe] is rarely able to sleep the entire night without a [Chanceof]{If~%Chance%>50?dream/nightmare} coming to fore,
_ forcing [HimHer] to relive the tragic event
31-45,undertook a long journey that had a profound effect on [HisHer] early childhood
46-55,had witnessed a [Chanceof]{If~%Chance%>50?horrible crime/violent event} that tarnished [HisHer] young,
_ impressionable view of the world
56-60,had been born [AstronomicalEvent] that has always had an unusual effect on the way [HeShe] is treated by others
61-65,had an earthshaking encounter with greatness when [HeShe] [IndividualsOfNote]
66-75,had became a refuge as the result of [Chanceof]{If~%Chance%>50?a senseless war/
_{AorAn~[CommunityDangers]} that had destroyed [HisHer] home}
76-85,had been profoundly affected by a death in the family as [HeShe] lost [HisHer] [Relative] to [CausesOfDeath]
86-95,had [Chanceof]{If~%Chance%>50?succumbed to a serious Illness/developed a congenital health defect}
_ that plagues [HimHer] to this very day
96-100,had been seriously injured earlier in [HisHer] Childhood [SeriousInjuries]

:YouthEvents
1-15,[HeShe] was forced to grow up quickly as the result of the
_ unfortunate realities of Battle. {Cap~[HeShe]} aided in the defense of the community against
_ [Chanceof]{If~%Chance%>50?[~BandTypePlural]/ a marauding [~Monster Stats.MonsterNames]}, and has never forgotten
_ the harsh lessons learned as the result of those early childhood conflicts
16-25,[HeShe] participated in a minor adventure when [HeShe] helped
_ [Chanceof]{If~%Chance%>50?neighbors build a homestead/ by working on a caravan on a new trade route}
26-35,[HeShe] got into politics early when [HeShe] [Chanceof]{If~%Chance%>50?spoke on behalf of a political
_ [Chanceof]{If~%Chance%>50?movement/candidate}/stood up to an abuse of authority}
36-50,[HeShe] was involved in a Great Romance. To this day, the romance still affects [HisHer] life since
_ [Chanceof]{If~%Chance%>50?[HisHer] 'Great Love' was jilted as the result of a long-forgotten quarrel/
_ the relationship continues to this day}.
_ As a result, [HeShe] has fostered a reputation {If~%Chance%>50?of boorishness/for great tenderness}
51-60,[HisHer] early life was governed by Religion. {Cap~[HeShe]} served [ChooseDeity] in a minor capacity,
_ pledging [HisHer] fealty to the God with a minor [Chanceof]{If~%Chance%>50?vow/oath} of allegiance
61-70,[HeShe] displayed [Chanceof]{If~%Chance%>50?an innate talent for Arcane Spellcasting/
_ an affinity for magic early in [HisHer] life, [Chanceof]{If~%Chance%>50?and others soon took notice of [HisHer] talents/
_ but [HeShe] chose to keep it a secret}}
71-80,[HisHer] early life was shaped by the practice of Healing. {Cap~[HeShe]} was forced into caring for
_ [Chanceof]{If~%Chance%>50?[HisHer] recovering [Relative]/a recovering hero who had sought refuge in [HisHer] home},
_ and [HeShe] can trace nearly all [HisHer] skills in those fields to the trials of [HisHer] youth as a result of that particular incident
81-95,[HeShe] had broken the law as a youngster. [Chanceof]{If~%Chance%>50?Unfortunately, [HeShe] got caught,
_ and was forced to endure the punishment proscribed for [HisHer] crimes as the result of [HisHer] actions/
_ {Cap~[HeShe]} was able to avoid the repercussions of the crime, and subsequently learned how to dodge the consequences and survive}
96-100,[HeShe] found that [HeShe] had [Chanceof]{If~%Chance%>50?[Aptitudes]/[Talents]}
_ that helped [HimHer] make a better life for [HimHer]self

:PivotalEvents
1-55,All in all though, [HeShe] has been lucky. There have been no [Chanceof]{If~%Chance%>50?Pivotal/Major} Events of any consequence in
_ [HisHer] life - yet
56-65,Unfortunately, [HeShe] has become a Refugee. {Cap~[HeShe]} was forced to become a displaced person as the result of
_ {AorAn~[CommunityDangers]} that decimated [HisHer] community |TempNumber={Dice~1d8}|%TempNumber% {If~%TempNumber%=1?year/years} ago
66-70,One thing of particular note however; [HeShe] has been forced to deal with a Cultural Shift as the result of the migration of
_ a large, cohesive group of {Lockout~Race,%RaceMaster%} {Plural~{Cap~[Race]}} that have moved into [HisHer] home community.
_ They are creating friction with the existing population, and as a result, [HeShe] has been exposed to a new culture
_ and new challenges that [HeShe] will eventually need to deal with
71-75,Throughout [HisHer] life, [HeShe] has been forced to deal with attacks from a group of organized [~BandTypePlural]
_ who have been menacing [HisHer] community. {Cap~[HeShe]} [Chanceof]{If~%Chance%>50?has been charged with/
_ is looking for help} finding a way to quell the senseless tide of violence
76-80,Throughout [HisHer] life, [HeShe] has been forced to deal with a significant
_ [Chanceof]{If~%Chance%>50?monster known as {AorAn~[~Monster Stats.MonsterNames]}/villain by the name of [~Formal Names.Start]}
_ {If~%Chance%>50?that/who} is threatening the community. {Cap~[HeShe]} is hoping to find a way to assure that the
_ {If~%Chance%>50?creature/Villain} is finally [Chanceof]{If~%Chance%>50?destroyed/driven off}
81-85,Throughout [HisHer] life, [HeShe] has been forced to deal with an all-out [WarTypes]. The armed conflict has engulfed
_ [HisHer] community, and [HeShe] [Chanceof]{If~%Chance%>50?has been charged with attempting/has made it [HisHer] mission}
_ to find a way of dealing with it - if at all possible 
86-95,Unfortunately, life has not been all that rosey for [HimHer]. {Cap~[HeShe]} has been forced to deal with a
_ Community Crisis [CommunityCrisis]
96-100,Unfortunately, [HeShe] has been forced to re-evaluate [HisHer] core Religious beliefs after [ReligiousAwakenings]
_ challenging all of [HisHer] deep-rooted beliefs in [HisHer] own Religion.

:ReligiousAwakenings
1,a new faith arose that is
2,a schism has torn [HisHer] existing faith apart -
3,a prophecy was [Chanceof]{If~%Chance%>50?announced/discovered} that is now

:CommunityCrisis
1,brought on by a major [CommunityDangers]. The calamity brought a multitude of problems - the least of which involved the
_ structural integrity of not only [HisHer] [Chanceof]{If~%Chance%>50?home/business}, but the homes and businesses of
_ [HisHer] closest neighbors and relatives as well
2,that manifested when [HisHer] community was beset by major Climate Shift that turned the community into [ClimateShiftResults]
_ for the last |TempNumber={Dice~2d5}| %TempNumber% [Conflict Namer.TimeIdentifier=%TempNumber%]s. No one has been able to stem
_ the chaos, but [HisHer] employers would like [HisHer] to attempt to find a resolution to the problem - if at all possible
3,brought on by an unchecked Famine that decimated [HisHer] community. Virtually all the local healers had exhausted their skills and
_ ideas - with only a mere handful of precious lives being saved to show for their efforts. {Cap~[HeShe]} was in the front lines of
_ the battle, but [HisHer] efforts and the application of [HisHer] Skills proved to be futile nonetheless.
_ {Cap~[HeShe]} is haunted to this day by [HisHer] futile attempts to make a difference in that particular crisis 
4,that manifested when a heretofore unknown disease repeatedly decimated [HisHer] community. {Cap~[HeShe]} has been subsequently
_ recruited to help discover a solution to the problem, while attempting to address the current logistics of crisis by whatever means
_ that may present themselves to [HisHer] investigation of the matter 

:ClimateShiftResults
1,a virtual Oven
2,an icebox
3,a blast furnace
4,a sodden mess
5,the site of a localized whirlwind

:WarTypes
1,war with an ancient nemesis
2,war with a group of renegade [~BandTypePlural]
3,war with an opposing monarch
4,revolution
5,war with a monstrous host

:Aptitudes
1,extremely keen vision
2,exceptionally acute hearing

:Talents
1,a knack for ventriloquism
2,exceptional skills relating to the occupation of [Miscellaneous.Occupations]

;SeriousInjuries
1,when [HeShe] fell victim to a raging [FireTypes] fire that scarred [HimHer] for life
1,, and grew up physically deformed as the result of {AorAn~[PhysicalDeformities]}
_ that [HeShe] has been struggling with for most of [HisHer] life

;PhysicalDeformities
1,serious birth defect
1,a wasting disease
1,a serious injury

;FireTypes
1,forest
1,grass
1,house
1,chemical

;IndividualsOfNote
1,met the King when [HeShe] was only a child
1,was signaled out by a visiting Magus as a 'Child of Destiny'
1,met a traveling Sage who prophesized that [HeShe] would be instrumental in affecting the fate of the world

;ChildhoodDangers
1,an attack by {AorAn~[DangerousCreatures]}
1,a kidnapping by a band of [~BandTypePlural]

;DangerousCreatures
1,bear
1,wild boar
1,stampeding buffalo
1,mad bull
1,crocodile
1,alligator
1,wildcat
1,mountain lion
1,cougar
1,wolf
1,coyote
1,pack of wild dogs

;CommunityDangers
1,[Chanceof]{If~%Chance%>50?flash} flood
1,famine
1,plague
1,earthquake
1,tsunami
1,flash flood
1,rockslide
1,mudslide
1,tornado
1,hurricane
1,cyclone
1,sandstorm

;AstronomicalEvent
1,under a strange moon
1,when a comet appeared in the night skies
1,the day a huge meteorite struck the earth near [HisHer] home
1,a Night of the Eye
1,the night of the new moon
1,the night of the full moon
1,the night of a lunar eclipse

# ---------------------------------------------------------------------------
# Education

:ChildhoodInstruction
1-20,the Outdoors, where [HeShe] learned basic wilderness survival skills
21-40,Book Learning. {Cap~[HeShe]} learned how to read and write at an early age, and it has been a major part of [HisHer] life
_ ever since
41-55,Religion, where [HeShe] learned the religious beliefs of [HisHer] [Chanceof]{If~%Chance%>50?community/family}.
_ {Cap~[HeShe]} [Chanceof]{If~%Chance%>50?embraced them whole-heartedly|ReligiousFlag=1|/has since rejected them completely out-of-hand
_ after becoming disillusioned by a [Chanceof]{If~%Chance%>50?tragic/traumatic} incident later in [HisHer] life|ReligiousFlag=2|}
56-65,Language, where [HeShe] was encouraged to learn {Lockout~Languages,%RaceMaster%} {Cap~[~Languages]}.
_ [Chanceof]{If~%Chance%>50?It has been a large part of [HisHer] life/
_ Although it was important when [HeShe] was young - [HeShe] has largely forgotten it}  since then
66-75,the Arts, where [HeShe] showed an exceptional talent for [TheArts]|TheArtsFlag=1|
76-85,Multicultural skills. {Cap~[HisHer]} [Chanceof]{If~%Chance%>50?family/parents} [Chanceof]{If~%Chance%>50?traveled/moved}
_ around enough to teach [HimHer] that the world was a big place - filled with many different kinds of people, places, and things,
_ that helped nourish [HisHer] overwhelming thirst for knowledge|MultiCulturalFlag=1|
86-95,[Chanceof]{If~%Chance%>50?Business/Politics|PoliticalFlag=1|}. {Cap~[HeShe]} was curious about
_ {If~%Chance%>50?money/government}, and strove
_ mightily to make the best use of [HisHer] hard-won skills in [HisHer] chosen field
96-100,Magic. {Cap~[HeShe]} showed an early affinity for the Arcane Arts, 
_ [Chanceof]{If~%Chance%>50?and has been striving to master them ever since|MagicFlag=1|/
_ but never had a real desire to pursue the vocation|MagicFlag=2|}

:FormalEducation
1-25,learned Agriculture, where [HeShe] was introduced to farming and the techniques associated with animal husbandry
26-30,learned basic local history
31-35,{If~%PoliticalFlag%=1?continued to delve into/learned basic} Politics, concentrating on Diplomacy and political philosophy
36-40,{If~%ReligiousFlag%>0?{If~%ReligiousFlag%=2? {Lockout~FormalEducation,36-40}[FormalEducation]/
_ continued to study}/studied}
_ {If~%ReligiousFlag%=2? /Religion, especially religious texts, concentrating on understanding the associated philosophies}
41-50,learned Natural History, where [HeShe] studied biology and geology
51-55,{If~%MultiCulturalFlag%=1?excelled in/began to study} Multicultural exchanges -
_ where [HeShe] studied the comparative cultures and mores of other [Chanceof]{If~%Chance%>50?races/nationalities}
56-60,{If~%TheArtsFlag%=1?continued to hone/began to develop} [HisHer] skills in the Arts, concentrating primarily on [TheArts]
61-65,learned Literature, where [HeShe] read poetry and prose extensively, developing [HisHer] skills in composition
66-70,learned basic mathematics, [Chanceof]{If~%Chance%>50?applying them extensively to other areas in [HisHer] life/
_ but [HeShe] has no real [Chanceof]{If~%Chance%>50?desire to use the/skill in the use of the} knowledge [HeShe] had gained}
71-75,learned Advanced Math. {Cap~[HeShe]} has mastered some of the more complex mathematics in the process
76-80,learned Astronomy. {Cap~[HeShe]} studies the movement of the stars, including the astrological aspect of the phenomena
81-90,attended Finishing School - where [HeShe] was educated in courtly matters, and Etiquette
91-95,became a graduate of the 'School of Hard Knocks' where [HisHer] time on the street helped to teach [HimHer]
_ the intricacies of minor thievery and con games
96-100,{If~%MagicFlag%>0?{If~%MagicFlag%=2? {Lockout~FormalEducation,96-100}[FormalEducation]/
_ continued to hone [HisHer] Skills in}/began to learn}
_ {If~%MagicFlag%=2? /Magic. {Cap~[HeShe]} studies "Defense Against the Dark Arts", has learned ways to fight monsters,
_ and is learning how to battle the influences of Black Magic}

:CurrentTrade
01-20,as a Farmer - planting, weeding, and harvesting the local crops
21-30,as a [Chanceof]{If~%Chance%>50?Hunter/Trapper}. {Cap~[HeShe]} spends most of [HisHer] time in the wilderness
_ {If~%Chance%>50?hunting/trapping} animals to supply the local populace with {If~%Chance%>50?meat/skins} for public consumption
31-40,as a Craftsman. {Cap~[HeShe]} learned [Crafts] early in [HisHer] life, and has managed to make a comfortable living through the
_ application of [HisHer] talent
41-50,through the application of [HisHer] Religious background. {Cap~[HeShe]} has had advanced training
_ [Chanceof]{If~%Chance%>50?as an acolyte/special functionary} for religious practices in a formal church setting, and has found
_ that [HisHer] training provides ample opportunities to apply [HisHer] Religious mores and expertise to help 'better' many an
_ unfortunate's lives - and make a make a decent living at it, to boot
51-60,through [HisHer] exposure to Politics. {Cap~[HeShe]} has been apprenticed to a [Chanceof]{If~%Chance%>50?political/bureaucratic}
_ functionary, and [HeShe] has done quite well financially as the result of it
61-70,as a Healer. {Cap~[HeShe]} has learned the skills of [Chanceof]{If~%Chance%>50?a Healer/an Herbalist},
_ and has utilized that ability to help create the foundation of a comfortable occupation
71-75,through [HisHer] Specialized knowledge of [~Miscellaneous.Occupations]. {Cap~[HeShe]} learned the trade early in [HisHer] life,
_ and has been building that knowledge into a lucrative source of income ever since
76-85,as {AorAn~{CapEachWord~[BasicMilitary]}}. The job's not that fulfilling, but it helps pay the bills
86-90,as {AorAn~{CapEachWord~[SpecialMilitary]}}. Although the job offers a certain degree of prestige, it's not what [HeShe]
_ really wants to do with [HisHer] life
91-95,through [HisHer] association, and acceptance for training in the [Chanceof]{If~%Chance%>50?Monastic Order/Knightly Order}
_ known as {If~%Chance%>50?[~Group Designer.StartMystic]/[~Group Namer.Start]}
96-100,as an Arcanist. {Cap~[HeShe]} has been apprenticed to a [Chanceof]{If~%Chance%>50?Wizard/Sorcerer} for arcane instruction

;BasicMilitary
1,infantry soldier
1,archer
1,staff officer
1,squire

;SpecialMilitary
1,artillary soldier
1,armorer
1,scout
1,aid de camp
1,logistical soldier

;Crafts
1,Animal Breeding
1,Animal Training
1,Armorer
1,Basketry
1,Batik
1,Beading
1,Beekeeping
1,Blacksmithing
1,Bone Carving
1,Bowyer/Fletcher
1,Brewing
1,Candlemaking
1,Cartography
1,Ceramics
1,Coiling
1,Cooking
1,Cooper
1,Coppersmithing
1,Crocheting
1,Dog Breeding
1,Doll Making
1,Dye Making
1,Embroidery
1,Farrier
1,Flintnapping
1,Genealogy
1,Glass Making
1,Glassblowing
1,Goldsmithing
1,Heraldry
1,Horse Breeding
1,Hunting
1,Ironsmithing
1,Jewelry Making
1,Knitting
1,Knotting
1,Lace Making
1,Leatherworking
1,Locksmithing
1,Metalworking
1,Musician
1,Needlecrafting
1,Netmaking
1,Potter
1,Quilting
1,Rope Making
1,Scribner
1,Scrimshaw
1,Sculpting
1,Sewing
1,Silversmithing
1,Singing
1,Soapmaking
1,Spinning
1,Stone Carving
1,Tanning
1,Thatching
1,Toy Making
1,Trapping
1,Weaponsmithing
1,Weaving
1,Wood Carving
1,Woodworking

;!TheArts
1,singing
1,drawing
1,dancing
1,painting
1,sculpture
1,writing
1,illustration

;!Languages
1,human
1,dwarven
1,elvish
1,gnomish
1,[Chanceof]{If~%Chance%>50?{Unlock~Languages,3}[Languages=3]/{Unlock~Languages,1}[Languages=1]}
1,[Chanceof]{If~%Chance%>50?{Unlock~Languages,8}[Languages=8]/{Unlock~Languages,1}[Languages=1]}
1,halfling
1,Orcish
1,Abyssal
1,Aquan
1,Auran
1,Celestial
1,Draconic
1,Druidic
1,Giant
1,Ignan
1,Infernal
1,Sylvan
1,Terran
1,Undercommon

# ---------------------------------------------------------------------------
# 'Family' Related

:FamilyEconomicStatus
1-5,{If~%OrphanFlag%=1?{Cap~[HeShe]} is an Orphan who/Although a few of [HisHer] relatives may still be alive,
_ [HeShe] considers [HimHer]self to be an Orphan after being [Chanceof]{If~%Chance%>50?alienated/discarded}
_ by those who were supposed to be [HisHer] true family. Consequently, [HeShe] insists that [HeShe] has no known family, and}
_ was raised [SurrogateFamily]
6-15,{Cap~[HeShe]} and [HisHer] family are Refugees as the result of
_ [Chanceof]{If~%Chance%>50?{AorAn~[CommunityDangers]}/[Conflict Namer.Start]}.
_ Subsequently, [HisHer] family owns nothing and has no regular income
16-40,{Cap~[HisHer]} family is Poor. Sometimes [HisHer] family had to beg for food and shelter.
_ They own no property, and their income barely covers their basic needs
41-60,{Cap~[HisHer]} family can be considered of Moderate means since [HisHer] family's income slightly exceeds its needs.
_ They [Chanceof]{If~%Chance%>50?own a small home/can make rent payments without significant concern}
61-75,{Cap~[HisHer]} family is Wealthy. {Cap~[HisHer]} family owns its home [Chanceof]{If~%Chance%>50?and other property as well},
_ since the family's income significantly exceeds their basic needs
76-80,{Cap~[HeShe]} was raised as part of a Religious Order
_ [Chanceof]{If~%Chance%>50?called/by the name of} [~Group Namer.Start].
_ While [HisHer] 'family' didn't have much direct income, it had access to the necessary resources through its church
81-85,{Cap~[HeShe]} was raised as part of an Arcane Order
_ [Chanceof]{If~%Chance%>50?called/by the name of} [~Group Designer.StartArcane].
_ While [HisHer] 'family' didn't have much direct income, it had access to the necessary resources through its Wizards and Sorcerers
86-90,{Cap~[HeShe]} was raised as part of a Monastic Order
_ [Chanceof]{If~%Chance%>50?called/by the name of} [~Group Designer.StartMystic] that took [HisHer] family in.
_ They live a spartan existence, subsequently, so does [HisHer] family
91-95,Wealth is unimportant to [HimHer] and [HisHer] family. {Cap~[HisHer]} family's economic status is difficult to measure,
_ since they live a solitary life on the frontier as [SolitaryLifestyles], living entirely off the land
96-100,{Cap~[HeShe]} and [HisHer] family are dependents of the Military. {Cap~[HisHer]} [Relative] is an Officer, which means
_ little direct income - but the Military provides for all of their basic needs

:FamilySocialStanding
1-10,were considered Newcomers. {Cap~[HeShe]} and [HisHer] family were [Chanceof]{If~%Chance%>50?settlers/refugees},
_ [Chanceof]{If~%Chance%>50?and their neighbors treated them accordingly/but they were treated as equals}
11-15,were treated poorly. Unfortunately, there were Members of [HisHer] family who were
_ [Chanceof]{If~%Chance%>50?guilty of/wrongly convicted of} crimes, so [HeShe] has been trying to rectify the situation ever since 
16-20,were Slaves. {Cap~[HisHer]} family were considered another person's property. {Cap~[HisHer]}
_ [Chanceof]{If~%Chance%>50?family were some of the lucky ones, since they lead pampered, if restricted lives/
_ were some of the unlucky ones, they were forced to do backbreaking manual labor for their 'Masters'}
21-45,were considered Lower Class. {Cap~[HisHer]} family were [Chanceof]{If~%Chance%>50?laborers/servants}, and [HeShe]
_ has been struggling to escape that stigma nearly all of [HisHer] life
46-65,belonged to a Skilled [Chanceof]{If~%Chance%>50?Trading/Merchant} family. {Cap~[HeShe]} was the child of
_ {AorAn~{CapEachWord~[Miscellaneous.Occupations]}}
66-75,|TempNumber={Dice~1d3}|was closely tied to {AorAn~[GroupAffiliation=%TempNumber%]} group by the name of
_ [GroupNameBranch=%TempNumber%] that was generally well regarded by the community
76-85,|TempNumber={Dice~1d3}|was closely tied to {AorAn~[GroupAffiliation=%TempNumber%]} group by the name of
_ [GroupNameBranch=%TempNumber%] that was generally despised and distrusted by the community
86-95,were considered Upper Class. They were the 'upper crust' of [HisHer] community
96-100,were Nobles, and [HisHer] family were at the very pinnacle of social standing in [HisHer] community

:FamilyDefenseReadiness
1-10,[HisHer] family proved to be very ineffectual in their defense of the family holdings. Essentially, [HisHer] family had
_ no cognizant ability to defend themselves - and were often berated as cowards, fools, or worse - but that was about all
_ that could be said about them
11-20,there was little to fear. {Cap~[HisHer]} family maintained a low, but effective level of readiness that included the use
_ of a few weapons and the discussion of how to defend themselves against raiders, or the occasional hostile monster
21-40,[HisHer] family were prepared - if necessary - for martial conflict. Most of [HisHer] family members were at least minimally
_ versed in the basics of using clubs, spears, and knives in self-defense and/or the defense of their home - but that was about all
41-55,[HisHer] family trained, and still trains actively in all matters martial. They can be prepared for combat with only
_ a few days of last-minute preparation
56-70,there was little need to fear. {Cap~[HeShe]} grew up in an environment where Combat was a regular part of the lives of
_ [HisHer] family, and most adult members of [HisHer] family were veterans of some type of combat.
_ Martial weapons and training were a regular component of their daily lives
71-80,there was little to fear since [HisHer] family has a tradition of military service, and family members are taught from birth
_ to be courageous and stalwart companions when battle is joined. The family armory has always contained magical weapons and armor,
_ and [HeShe] was taught the use of them all - almost before [HeShe] learned to walk
81-90,[HisHer] family relied upon outside protection such as guards or mercenaries. {Cap~[HeShe]} never had the need, nor desire
_ to prepare [HimHer]self for any potential conflict. {Cap~[HeShe]} was raised to leave any fighting that may crop up to the 'Pros'
91-95,[HisHer] family relied on magical protection, as opposed to 'Dirtying their hands'
_ with the base exercises associated with martial combat. It was a tactic that has proved quite effective for [HisHer] family
_ in the past - and it still seems to work. Their mantra: Don't try to fix it if it ain't broken. It could prove to be a
_ dangerous policy somewhere down the road, but for right now - it works
96-100,[HisHer] family really doesn't have any consistent pattern of preparedness should the need for martial expertise come into play.
_ Some members of the family were very prepared for combat, yet others were essentially unprepared - or merely unwilling to fight.
_ The Martial skills and/or Skill sets associated with each family member are specific to that particular family member

:FamilyPrivateEthics
1-25,considered themselves neutral, since they tended to exhibit [Chanceof]{If~%Chance%>50?neutral ethics/no consistent
_ familial ethical direction of note} throughout [HisHer] early life
26-50,held to the letter of contracts and agreements, and could always be depended on to 'do the right thing' -
_ earning them a reputation for honesty and reliability
51-75,were known for their conscientious involvement in the community and their proactive nature when it came
_ to helping others
76-90,were often caught trying to [Chanceof]{If~%Chance%>50?break agreements/recant on promises}
_ [Chanceof]{If~%Chance%>50?- although [HeShe], [HimHer]self, has been, and is still attempting
_ to 'turn over a new leaf' to rectify the situation/ - and unfortunately, [HeShe] seems to share the same traits}
91-100,would be considered undesirable - to say the least. They often took actions that could be
_ considered detrimental to the community [Chanceof]{If~%Chance%>50?- although [HeShe], [HimHer]self, has been,
_ and is still attempting to 'turn over a new leaf' to rectify the situation/ - and unfortunately,
_ [HeShe] seems to share the same undesirable traits}

:FamilyPublicEthics
1-60,could be summed up as normal. {Cap~[HisHer]} family's ethical reputation matches their private ethics
61-75,could be summed up as undeserved. Clearly, the community has the wrong idea
76-90,has recently changed, however. Although the public perception about [HisHer] family has changed
_ [Chanceof]{If~%Chance%>50?for the better/for the worse}, the family's reputation has not yet been affected.
_ Interesting question: How did the policy change, and why? {Cap~[HeShe]} is intrigued by the policy change,
_ and is always willing to follow up any leads that may help answer those very questions
91-100,could be considered [Chanceof]{If~%Chance%>50?beyond reproach/beneath contempt}.
_ Regardless of [HisHer] family's actual ethics, public opinion is so ingrained concerning [HisHer] family that
_ it's essentially unchangeable. In this case however, public opinion is [Chanceof]{If~%Chance%>50?right/wrong}

:FamilyReligiousCommitment
1-20,could be considered [Chanceof]{If~%Chance%>50?neutral/uninterested} since [HisHer] family had
_ [Chanceof]{If~%Chance%>50?no real commitment/an inconsistent} family religious direction as [HeShe] was growing up
21-40,were strong as [HeShe] was growing up. {Cap~[HisHer]} family was deeply committed to [ChooseDeity]
_ as their patron Deity
41-60,leaned toward the worship of [ChooseDeity] as their patron Deity for years, but they do not seem to
_ observe their religious commitments consistently
61-70,smack of enmity since [HisHer] family has had a historical conflict with the followers of [ChooseDeity].
_ [Chanceof]{If~%Chance%>50?Although [HeShe] can understand her family's enmity, [HeShe] does not follow the same path/
_ {Cap~[HeShe]} shares her family's enmity, and carries the torch for yet one more generation} 
71-80,are participatory, as [HisHer] family is a part of a religious order dedicated to [ChooseDeity].
_ |TempNumber={Dice~1d19}|{If~%TempNumber%<>1?Although [HeShe] can understand [HisHer] family's piety,
_ [HeShe] does not worship the same patron Deity/{Cap~[HeShe]} shares her family's beliefs, and carries the torch supporting
_ her family's religious convictions for at least one more generation}
81-85,smack of open Heresy. {Cap~[HisHer]} family believes in a religious movement considered
_ [Chanceof]{If~%Chance%>50?heretical/dangerous} by the community at large, and do little to hide their beliefs
86-90,lean towards hidden Heresy. {Cap~[HisHer]} family believes in a religious movement that is considered
_ [Chanceof]{If~%Chance%>50?heretical/dangerous} by the community at large, however, [HisHer] family attempts to hide
_ their commitment from the general public
91-100,could be considered mixed, since [HisHer] family openly venerates [ChooseDeity]
_ while privately venerating [ChooseDeity]

:FamilyReputation
1-40,is essentially unknown, as [HisHer] family has no perceived character. Individuals are treated according to
_ the situation without any regard to the family name
41-55,is Good. {Cap~[HisHer]} family is known to produce stalwart companions, and they are always sought out when
_ dependability, or a reputation for steadfastness is desired
56-65,is outstanding. {Cap~[HisHer]} family is known to produce upstanding individuals,
_ but has also been known to produce the occasional bad apple
66-75,is generally well respected, although it has been known to produce a Black Sheep or two over the years.
_ In general, [HisHer] family is considered upstanding, but at least |TempNumber={Dice~1d4}|[NumberNames=%TempNumber%]
_ {If~%TempNumber%=1?member of the family is/members of the family are} known to be disreputable
76-90,is mostly bad. The family, in general is treated with contempt, but occasionally a family member or two has
_ demonstrated positive qualities and has earned the respect of those they have interacted with
91-100,is bad. Others treat [HisHer] family with contempt, and every member is assumed to be disreputable

:FamilyPoliticalViews
1-15,Apolitical. {Cap~[HisHer]} family has no specific political stance
16-30,Supportive. {Cap~[HisHer]} family supports the current political structure and the current rulers
31-40,Enfranchised. {Cap~[HisHer]} family is a part of the system and supports it as it is
41-45,Enfranchised Progressive. {Cap~[HisHer]} family is a part of the system, but is open to suggestions for change
46-50,Enfranchised Radical. {Cap~[HisHer]} family is a part of the system, but is actively seeking to change the system
51-65,Loyal Opposition. {Cap~[HisHer]} family supports the current political structure, but favors a change of rulers
66-75,Dissatisfied. {Cap~[HisHer]} family is unhappy with current political structure, but is satisfied that the current
_ rulers are at least doing no real harm
76-85,Dissident. {Cap~[HisHer]} family is secretly supporting a [Chanceof]{If~%Chance%>50?rebellion/movement} to
_ overthrow [Chanceof]{If~%Chance%>50?the political system/the existing rulers}
86-90,Radical. {Cap~[HisHer]} family is in open revolt against the current system and the existing rulers
91-100,Mixed. One part of [HisHer] family supports the current
_ [Chanceof]{If~%Chance%>50?system/rulers},|Chance2=%Chance%|
_ and other factions are actively working to [Chanceof]{If~%Chance%>50?replace/remove}
_ {If~%Chance2%>50? that system/those rulers}

:FamilyPowerStructure
1-10,an unorganized familial situation wherein [HisHer] family had no real internal organization to speak of, and all
_ family members were responsible for their own actions|TempNumber=1|
11-30,a family that was run by the Elders of the family. The oldest members controlled the family[Chanceof]{If~%Chance%>50?/, 
_[Chanceof]{If~%Chance%>50? and made all critical decisions with little, if no input from the rest of the family/although
_ occasionally, they would solicit input from the rest of the family}}|TempNumber=2|
31-40,a Patriarchy, in which the male members controlled the family[Chanceof]{If~%Chance%>50?/, 
_[Chanceof]{If~%Chance%>50? and made all critical decisions with little, if no input from the rest of the family/ although
_ occasionally, they would solicit input from the rest of the family}}|TempNumber=3|
41-50,a Matriarchy, in which the female members controlled the family[Chanceof]{If~%Chance%>50?/, 
_[Chanceof]{If~%Chance%>50? and made all critical decisions with little, if no input from the rest of the family/ although
_ occasionally, they would solicit input from the rest of the family}}|TempNumber=4|
51-60,an Oligarchy, wherein the richest members controlled the family[Chanceof]{If~%Chance%>50?/, 
_[Chanceof]{If~%Chance%>50? and made all critical decisions with little, if no input from the rest of the family/ although
_ occasionally, they would solicit input from the rest of the family}}|TempNumber=5|
61-70,a Meritcracy, in which the members with the most talent in their ability to run the family business controlled the family
_[Chanceof]{If~%Chance%>50?/, 
_[Chanceof]{If~%Chance%>50? and made all critical decisions with little, if no input from the rest of the family/ although
_ occasionally, they would solicit input from the rest of the family}}|TempNumber=6|
71-90,a Divided family. One branch of the family was [FamilyPowerStructure={Dice~1d70}],
_ while the other branch was [DetermineDividedPowerStructure=%TempNumber%]
91-95,in a situation where [HisHer] family was lead by an outsider; a liege lord or another person
_ to whom the family had sworn support
96-100,an environment of Domination. {Cap~[HisHer]} [Relative] ruled the family with an iron fist
_ using fear and intimidation[Chanceof]{If~%Chance%>50?/ 
_[Chanceof]{If~%Chance%>50? and made all critical decisions with little, if no input from the rest of the family/ although
_ occasionally, they would solicit input from the rest of the family}}

:AncestorsOfNote
1-49,{Cap~[HisHer]} family tree is rather barren of any special branches or notoriety, as [HisHer] family has no remarkable
_ relatives or ancestors of note to date
50-55,A point of interest reguarding the history of [HisHer] family - at some point in the past, [HisHer] family
_ had an ancestor of note who [Chanceof]{If~%Chance%>50?is currently unknown/has been forgotten}. The full tale of this
_ particular ancestor has been lost for years, but [Chanceof]{If~%Chance%>70?his/her} legacy has been passed down orally
_ for generations. {Cap~[HeShe]} is curious about the tales, and is interested in finding out more if the opportunity ever
_ presents itself
56-60,An item of interest - [HisHer] family has an ancestor who was a settler from some far-off land. The Land has been lost
_ in legend, and to this day, little is known about it
61-63,{Cap~[HisHer]} family boasts a Master Artisan as an ancestor. {Cap~[HisHer]} ancestor - [~Names Generator.NAME Random]
_ by name - was an artisan of unmatched skill who left a legacy of excellence that is still used as a standard gauge of quality
_ in most of the world today
64-66,{Cap~[HisHer]} family boasts a successful Merchant as an ancestor. {Cap~[HisHer]} ancestor created a new
_ [Chanceof]{If~%Chance%>50?business/trade [Chanceof]{If~%Chance%>50?good/route}} that continues to contribute to the
_ family's fortunes - even today
67-69,{Cap~[HisHer]} family had an ancestor who was an unsuccessful Merchant. That ancestor - [~Names Generator.NAME Random]
_ by name - created a new [Chanceof]{If~%Chance%>50?business/trade [Chanceof]{If~%Chance%>50?good/route}} that has since
_ been [BoughtLostOrStolen] the family
70-72,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who was a well-known
_ Cleric of some repute
73-75,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who was a well-known
_ [Chanceof]{If~%Chance%>50?Wizard/Sorcerer} of some repute
76-77,{Cap~[HisHer]} family has an ancestor who owned <i>[~AncestralMagicItems]</i>[Chanceof]{If~%Chance%>50?that became
_ a family heirloom[Chanceof]{If~%Chance%>75?. It/, but it} has since been [BoughtLostOrStolen] the family/, and it became
_ one of the family's defining moments of [Chanceof]{If~%Chance%>25?pride/shame}}
78,Interesting footnote: an ancestor of [HisHer] family is reputed to have created a spell that is now lost to common knowledge
79,Interesting footnote: [HisHer] family has an ancestor who created a remarkable magic item that helped to validate
_ [Chanceof]{If~%Chance%>75? his/her} value to the Arcane community
80-81,{Cap~[HisHer]} family produced a great military leader who was ultimately victorious in [Conflict Namer.Start]
82-83,{Cap~[HisHer]} family has an ancestor who was thoroughly defeated in a military campaign known as [Conflict Namer.Start]
84,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who founded a community that still
_ thrives to this day
85,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who founded a community that has
_ ceased to exist
86,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who held a high position in the
_ current political system
87,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who held a high position in a
_ discredited political system
88-90,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who is known to have been
_ instrumental in [NoteworthyDeeds]
91,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who was successful in
_ [NoteworthyDeeds], but no one believes the story
92,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who made up a story
_ (commonly accepted as fact) about [NoteworthyDeeds]
93,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who was once a
_  [Chanceof]{If~%Chance%>50?king/noble} who lost power, then fled to a new land
94,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who is known to have supported a
_ failed rebellion by the name of [Conflict Namer.Start]
95,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who is known to have betrayed
_ [Chanceof]{If~%Chance%>50?the community/the nation}
96,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who is known to have had a affiliation
_ with [Chanceof]{If~%Chance%>50?a dark god/an evil cult}
97,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who was a terrible villain who caused
_ great evil throughout the land
98,{Cap~[HisHer]} family has an ancestor by the name of [~Names Generator.NAME Random] who was the focus of a great omen
99,{Cap~[HisHer]} family is rumored to have produced an ancestor who  [Chanceof]{If~%Chance%>50?ascended to godhood/
_ had meaningful contact with the gods}
100,{Cap~[HisHer]} family has an ancestor who is reputed to have come from some place not of this world

;AncestralMagicItems
1,[Artifact]
5,[Magic Weapon Names.Generate]

;Artifact
50,{AorAn~[MagicItemBranch]}
1,the Book of Exalted Deeds
1,the Book of Infinite Spells
1,the Book of Vile Darkness
1,the Deck of Many Things
1,the Hammer of Thunderbolts
1,the Philosopher's Stone
1,the Sphere of Annihilation
1,a Staff of the Magi
1,the Talisman of Pure Good
1,the Talisman of the Sphere
1,the Talisman of Ultimate Evil
1,the Talisman of Zagy
1,the Hand of Vecna
1,the Eye of Vecna
1,the Mace of St Cuthbert
1,the Moaning Diamond
1,an Orb of Dragonkind
1,the Shadowstaff
1,the Shield of Prator
1,the Sword of Kas

;MagicItemBranch
1,{CapEachWord~[Random Magic.RingDescription]}
1,{CapEachWord~[Random Magic.RodDescription]}
1,{CapEachWord~[Random Magic.StaffDescription]}
1,{CapEachWord~[Random Magic.WandDescription]}
1,{CapEachWord~[Random Magic.WondrousItemDescription]}
1,{CapEachWord~[Random Magic.ArmorShieldDescription]}
1,{CapEachWord~[Random Magic.WeaponDescription]}
#1,{CapEachWord~[Random Magic.PotionAndOilDescription]}
#1,{CapEachWord~[Random Magic.ScrollDescription]}

:DetermineDividedPowerStructure
1,[FamilyPowerStructure={Dice~1d60+10}]
2,[Chanceof]{If~%Chance%>50?[FamilyPowerStructure={Dice~1d10}]/[FamilyPowerStructure={Dice~1d40+30}]}
3,[Chanceof]{If~%Chance%>50?[FamilyPowerStructure={Dice~1d30}]/[FamilyPowerStructure={Dice~1d30+40}]}
4,[Chanceof]{If~%Chance%>50?[FamilyPowerStructure={Dice~1d40}]/[FamilyPowerStructure={Dice~1d20+50}]}
5,[Chanceof]{If~%Chance%>50?[FamilyPowerStructure={Dice~1d50}]/[FamilyPowerStructure={Dice~1d10+60}]}
6,[FamilyPowerStructure={Dice~1d60}]

:NoteworthyDeeds
1,completing a great quest[Chanceof]{If~%Chance%>50?that changed their life forever/
_ in conjunction with [Conflict Namer.Start]}
2,recovering an important artifact; [~Artifact]
3,destroying {AorAn~[~Monster Stats.MonsterNames]} that was threatening the community
4,destroying a terrible villain by the name of [~Formal Names.Start] who was threatening the community

:BoughtLostOrStolen
1,bought from
2,lost by
3,stolen from
4,forgotton by

:ReviseDeityID
1-18,|TempNumber+1|
19,|TempNumber=1|

:GroupAffiliation
1,Arcane
2,Monastic
3,Military

:GroupNameBranch
1,[~Group Designer.StartArcane]
2,[~Group Designer.StartMystic]
3,[~Group Namer.Start]

:SurrogateFamily
1,as a refugee after fleeing [Conflict Namer.Start] [SurrogateFamily={Dice~1d7+1}]
2,by a Poor family that loved, and cared for [HimHer], despite their state of destitution
3,by a family of moderate means that loved [HimHer] for [HimHer]self
4,by a wealthy family that loved [HimHer] for [HimHer]self
5,as part of a Religious Order [Chanceof]{If~%Chance%>50?called/by the name of} [~Group Namer.Start]
_ after [HeShe] had been found [Chanceof]{If~%Chance%>50?abandoned/on the street}
_[Chanceof]{If~%Chance%>50?, wandering aimlessly}[Chanceof]{If~%Chance%>50?, near death}
6,as part of an Arcane Order [Chanceof]{If~%Chance%>50?called/by the name of} [~Group Designer.StartArcane]
_ after [HeShe] had been found [Chanceof]{If~%Chance%>50?abandoned/on the street}
_[Chanceof]{If~%Chance%>50?, wandering aimlessly}[Chanceof]{If~%Chance%>50?, near death}
7,as part of a Monastic Order [Chanceof]{If~%Chance%>50?called/by the name of} [~Group Designer.StartMystic]
_ after [HeShe] had been found [Chanceof]{If~%Chance%>50?abandoned/on the street}
_[Chanceof]{If~%Chance%>50?, wandering aimlessly}[Chanceof]{If~%Chance%>50?, near death}
8,by a Military family who discovered [HimHer] [Chanceof]{If~%Chance%>50?abandoned/senseless}
_[Chanceof]{If~%Chance%>50?, wandering aimlessly}[Chanceof]{If~%Chance%>75?, on the battlefield}
_[Chanceof]{If~%Chance%>50?, near death}, then ultimately cared for and loved [HimHer], for [HimHer]self

:SolitaryLifestyles
1,trappers
2,scouts
3,hunters

:Climate
1-5,Arctic
6-15,Subarctic
16-65,Temperate
66-90,Subtropical
91-100,Tropical

:Terrain
01-10,Deserts - primarily [DesertSubtypes]
11-30,Plains - primarily [PlainsSubtypes]
31-45,Forests - primarily [ForestSubtypes]
46-60,Hills - primarily [HillsSubtypes]
61-70,Mountains - primarily [MountainSubtypes]
71-80,Marsh - primarily [MarshSubtypes]
81-85,Aquatic - primarily [AquaticSubtypes]
86-90,Underground - primarily [UndergroundSubtypes]
91-100, - in nomadic communities based mostly in the [Terrain={Dice~1d80}], although [HeShe] was exposed to other terrain
_ types during [HisHer] parent's travels

;DesertSubtypes
1,sandy wastelands
1,rocky wastelands
1,lava fields

;PlainsSubtypes
1,cultivated settlements
1,farming communities
1,meadowlands

;ForestSubtypes
1,tangled jungles
1,sparse evergreen copses
1,deciduous vegetation

;HillsSubtypes
1,highlands
1,cliff dwellings
1,badlands

;MountainSubtypes
1,highland meadows
1,rocky outcroppings
1,timberline communities
1,alpine communities
1,rugged terrain

;MarshSubtypes
1,swamps
1,moors
1,[Chanceof]{If~%Chance%<25?peat} bogs
1,bayous
1,wetlands

;AquaticSubtypes
1,underwater communities
1,small islands
1,penninsulas
1,bays

;UndergroundSubtypes
1,subterranean communities
1,the underdark
1,cavern complexes

# PFCore: 1=Human  2=Dwarf  3=Elf  4=Gnome   5=Half Elf  6=Half Orc   7=Halfling  
### NEW RACE ###
:CommunityType
1,[HomeCommunityHuman]
2,[HomeCommunityDwarf]
3,[HomeCommunityElf]
4,[HomeCommunityGnome]
5,[HomeCommunityHalfElf]
6,[HomeCommunityHalfOrc]
7,[HomeCommunityHalfling]
# PFB1:   8=Aasimar  9=Drow  10=Drow Noble  11=Duergar  12=Goblin  13=Hobgoblin  14=Kobold  15=Merfolk  16=Orc  17=Svirfneblin  18=Tengu  19=Tiefling
8,{Stop~ERROR CommunityType}

:HomeCommunityHuman
1-5,Small Tribe that consisted of|Population={Dice~10d10}| %Population% individuals.
_ Life in the tiny community centered around [HomeCommunityHumanDetails={Dice~1d4}]
6-10,Compound of approximately|Population={Dice~5d4*10}| %Population% people.
_ The community tended to be close-knit and was primarily focused on [HomeCommunityHumanDetails={Dice~1d4+4}] pursuits
11-20,Frontier Homestead that consisted of [HisHer] [Chanceof]{If~%Chance%>50?extended/immediate} family
_[Chanceof]{If~%Chance%<75?, plus one other family}. Life on the frontier was spartan and dangerous,
_ but it encouraged self-sufficiency
21-35,Thorp by the name of [~Town Names.Generate] that consisted of
_|Population={Dice~2d4*10}| %Population% people. The small settlement was little more than a cluster of farmhouses
36-55,Hamlet named [~Town Names.Generate] that supported nearly|Population={Dice~5d20*20}| %Population% individuals
56-75,Village named [~Town Names.Generate]. The population of the Village was
_|Population={Calc~(({Dice~1d6}+3)*100)}| %Population% and was home to a small number of Craftsman
76-80,Small Town named [~Town Names.Generate]. The population of the Town was
_|Population={Dice~10d20*100}| %Population% people. This village was [Chanceof]{If~%Chance%<25?quite well known,
_ and shows up regularly on/relatively unknown, but large enough to show up on} local maps
81-85,Large Town named [~Town Names.Generate]. The population of the Town was
_|Population={Calc~(({Dice~1d4}+1)*1000)}| %Population% people, and it was a
_[Chanceof]{If~%Chance%>50?regional/provencial} center
86-90,Small City by the name of [~Town Names.Generate], with a population of
_|Population={Dice~1d12*1000}| %Population% residents
_[Chanceof]{If~%Chance%>75?This city is the capital of [~Town Names.Generate]}
91-95,Large City by the name of [~Town Names.Generate], with a population of
_|Population={Calc~(({Dice~1d13}+12)*1000)}| %Population% inhabitants.
_ The city is the dominant city in the country of [~Town Names.Generate] 
96-100,Metropolis by the name of [~Town Names.Generate], with a population of
_|Population={Dice~4d2500*100}| %Population% residents

:HomeCommunityHumanDetails
1,hunting and gathering
2,herding {Plural~[HerdAnimalBranch]}
3,subsistence farming
4,raising and selling domestic animals. Primarily {Plural~[DomesticAnimalBranch]}
5,religious
6,arcane
7,monastic
8,military

:HomeCommunityDwarf
1-10,Single-Family Redoubt. {Cap~[HeShe]} grew up on the edge of dwarven civilization,
_ far from the rest of [HisHer] clan because [DwarvenAlienation]
11-20,Prospecting Camp of |Population={Dice~5d4}| %Population% Dwarves that called this camp home
_[Chanceof]{If~%Chance%>75?. This camp represented an extended family trying to strike it rich}
21-30,Small [HomeCommunityDwarfDetails={Dice~1d3}] Mine that was populated by
_|Population={Calc~(({Dice~1d4+1})*10)}| %Population% Dwarves
31-45,Large [HomeCommunityDwarfDetails={Dice~1d3}] Mine that was populated by
_|Population={Calc~(({Dice~5d4})*10)}| %Population% Dwarves
46-65,Delve that included a large [HomeCommunityDwarfDetails={Dice~1d3}] mine, a forge, and smith works.
_|Population={Calc~(({Dice~5d10})*10)}| It was originally populated by %Population% Dwarves
66-90,Large Delve that included a large [HomeCommunityDwarfDetails={Dice~1d3}] mine, a forge, and smith works as well as
_ an extensive community structure and a population of|Population={Calc~(({Dice~1d20})*100)}| %Population% Dwarves
91-100,Human-Dominated area. {Cap~[HeShe]} was raised in {AorAn~[HomeCommunityHuman]} {Cap~[HeShe]} was
_ [Chanceof]{If~%Chance%>25?subjected to unfair prejudice from [HisHer] fellows for being 'contaminated' by outside ways/
_raised, and treated as if [HeShe] were 'a member of the family'}

:HomeCommunityDwarfDetails
1,[~Miscellaneous.Metal]
2,[~Miscellaneous.Precious Metal]
3,[~Gems.Name]

:DwarvenAlienation
1,[HeShe] married into a Rival Clan
2,[HeShe] was disowned after [HeShe] insisted that [HisHer] family's beliefs did not align with the
_ direction that [HisHer] life was taking
3,[HeShe] has deep-rooted doubts as to what [HisHer] place is in [HisHer] clan, and has elected to
_ disown [HisHer] racial heritage until [HeShe] can 'find' [HimHer]self
4,[HeShe] has a mental illness that makes [HimHer] believe that [HeShe] is really a Gnome that has been
_ polymorphed into a Dwarf

:HomeCommunityElf
1-50,Encampment of |Population={Calc~({Dice~1d5}*10)}|%Population% Elves. This elven camp was a
_ [Chanceof]{If~%Chance%>25?semi-nomatic/nomadic} clan
51-85,Village of |Population={Calc~({Dice~1d5}*100)}|%Population% Elves. The Village was a loose grouping of
_ [Chanceof]{If~%Chance%>50?related families/craftsmen}
86-95,Elven City with a population of close to|Population={Calc~({Dice~1d4+1}*1000)}| %Population% Elves. 
_ Only a handful of these cities exist. It was the center of elven government
96-100,Human-Dominated Area. [HomeCommunityElfDetails]. The human area was {AorAn~[HomeCommunityHuman]}

:HomeCommunityElfDetails
1,|ParentFlag=1|{Cap~[HisHer]} parents chose to live among the Humans [CohabitateReasons], [Chanceof]
_{If~%Chance%>50?and [HeShe] shared their views/but [HeShe] wanted to get away from them}
2,{Cap~[HeShe]} chose to live among the Humans [CohabitateReasons]

:!CohabitateReasons
1, to study their [Chanceof]{If~%Chance%>50?customs/ways}
2, since {If~%ParentFlag%=1?they/[HeShe]} felt a kinship with them
3, because {If~%ParentFlag%=1?they felt/[HeShe] feels} more comfortable with Humans than
_{If~%ParentFlag%=1?their/[HisHer]} own kind
4, after being exiled from {If~%ParentFlag%=1?their/[HisHer]} own clan

:HomeCommunityGnome
1-10,Solitary Family. {Cap~[HisHer]} family has found solitude [HomeCommunityGnomeDetails]
11-40,Cluster of {Dice~1d9+1} Gnome families that formed a loosely-knit cluster settlement.
_ The total population was approximately|Population={Dice~10d10}| %Population% Gnomes
41-70,Gathering of|Population={Dice~10d100}| %Population% Gnomes that called this 'cluster of clusters' home
71-80,Human-Dominated Area. {Cap~[HisHer]} family lives among the Humans. The Human area was {AorAn~[HomeCommunityHuman]}
81-90,Dwarven-Dominated Area. {Cap~[HisHer]} family lives among the Dwarves. The Dwarven area was {AorAn~[HomeCommunityDwarf]}
91-100,Elven-Dominated Area. {Cap~[HisHer]} family lives among the Elves. The Elven area was {AorAn~[HomeCommunityElf]}

:HomeCommunityGnomeDetails
1,as the result of ostracization on the part of [HisHer] peers for the un-Gnomish practices
_ [HeShe] chooses to engage in.
2,because of a slight miscalculation that was made a few years ago. The circumstances are still being analyzed
3,for 'Religious reasons'
4,to allow [HimHer] to 'find [HimHer]self'

:HomeCommunityHalfling
1-30,Clan with {Dice~5d10} Halflings. {Cap~[HeShe]} grew up on the road with [HisHer] extended family
31-65,Troupe of {Dice~10d10} wandering Halflings
66-80,Shire that consisted of nearly {Dice~5d10*10} Halflings
81-90,Town with a population of approximately {Dice~5d10*100} Halflings
91-95,County of nearly {Dice~1d50*1000} inhabitants
96-100,Human-Dominated Area. {Cap~[HeShe]} lives among the humans. The human area was {AorAn~[HomeCommunityHuman]}

:HomeCommunityHalfElf
1-20,Fringe Community of {Dice~5d10} Half-elves, Half-orcs, and other mixed breeds and outcasts
21-85,Human-Dominated Area. {Cap~[HeShe]} lives among the Humans. The Human area was {AorAn~[HomeCommunityHuman]}
86-100,Elven-Dominated Area. {Cap~[HeShe]} lives among the Elves. The Elven area was {AorAn~[HomeCommunityElf]}

:HomeCommunityHalfOrc
1-20,Fringe Community of {Dice~5d10} Half-elves, Half-orcs, and other mixed breeds and outcasts
21-85,Human-Dominated Area. {Cap~[HeShe]} lives among the Humans. The Human area was {AorAn~[HomeCommunityHuman]}
86-100,Orc-Dominated Area. {Cap~[HeShe]} lives among the Orcs.

:DomesticAnimalBranch
1,Bison
2,Boar
3,Camel
4,Cat
5,Cheetah
6,Dog
7,Riding Dog
8,Donkey
9,Elephant
10,Hawk
11,Horse
12,Leopard
13,Lion
14,Monkey
15,Mule
16,Pony
17,War Pony
18,Tiger
19,Weasel
20,Wolf

;HerdAnimalBranch
1,[DomesticAnimalBranch=1]
1,[DomesticAnimalBranch=2]
1,[DomesticAnimalBranch=3]
1,[DomesticAnimalBranch=8]
1,[DomesticAnimalBranch=9]
1,[DomesticAnimalBranch=11]
1,[DomesticAnimalBranch=15]
1,[DomesticAnimalBranch=16]
1,[DomesticAnimalBranch=17]

;RacialIdentifier
1,human
1,dwarven
1,elvish
1,gnomish
1,half-elven
1,half-orcen
1,halfling

# ---------------------------------------------------------------------------
# Ideosyncrasies

:IdeosyncrasyBranch
1,<br>[Tab][Chanceof]{If~%Chance%<10?A couple of other items/One other item} of interest concerning this [ManWoman];
_ {If~%Chance%<10?[~Ideosyncrasies], and [~Ideosyncrasies]/[~Ideosyncrasies]}.

;!Ideosyncrasies
1,[HeShe] speaks with an accent
1,[HisHer] face is covered in acne
1,[HeShe] is always drinking
1,[HeShe] is always eating
1,[HeShe] is always late
1,[HeShe] is always out of breath
1,[HeShe] wears a 'lucky' [LuckyItem]
1,[HeShe] wears [Miscellaneous.Color], a favorite color
1,[HeShe] wears thick, leather gloves
1,[HeShe] has an animal bite scar on [HisHer] [BlemishLocation]
1,[HeShe] has an animal claw scar on [HisHer] [BlemishLocation]
1,[HeShe] uses archaic speech
1,[HeShe] has [HisHer] arm in a sling
1,[HeShe] asks often about [HisHer] own appearance
1,[HeShe] asks rhetorical questions and answers them [HimHer]self
1,[HeShe] avoids crowds
1,[HeShe] is a bad cook but [HeShe] begs those [HeShe]'s talking with to eat anyway
1,[HeShe] has a bandaged [Extremity]
1,[HeShe] belches loudly, and often
1,[HeShe] has a prejudice against {Plural~[Creatures.Humanoid]}
1,[HeShe] has a prejudice against {Plural~{Cap~[Class]}}
1,[HeShe] bites [HisHer] fingernails
1,[HeShe] bites [HisHer] fingernails, or cuticles
1,[HeShe] bites [HisHer] lower lip
1,[HeShe] pouts blatantly
1,[HeShe] is actually blind[Chanceof]{If~%Chance%>75?, but is able to see through [HisHer] pet's eyes}
1,[HeShe] blinks often
1,[HeShe] bows before, and after speaking
1,[HeShe] is a braggart
1,[HeShe] has a [Chanceof]{If~%Chance%>75?bruised [Extremity]/bruised [Extremity={Dice~1d2}]}
1,[HeShe] is bucktoothed
1,[HeShe] calls acquaintences by the wrong name
1,[HeShe] carries a cloth covered basket
1,[HeShe] carries crumbs to feed birds
1,[HeShe] carries a satchel filled with junk
1,[HeShe] carries a small [SmallAnimal]
1,[HeShe] chews on [Chewable]
1,[HeShe] chews on a [Chanceof]{If~%Chance%>50?braid/lock} of [HisHer] hair
1,[HeShe] claps [HisHer] hands often
1,[HeShe] closely examines everything
1,[HisHer] clothes have bulging pouches
1,[HisHer] clothes [Chanceof]{If~%Chance%>50?are/seem to be} made of woven leaves
1,[HeShe] [Chanceof]{If~%Chance%>50?is/seems to be} quite clumsy
1,[HeShe] combs [HisHer] hair with [HisHer] fingers
1,[HeShe] complains of heartburn
1,[HeShe] [Chanceof]{If~%Chance%>50?is/seems to be} a compulsive liar
1,[HeShe] [Chanceof]{If~%Chance%>50?is/seems to be} quite conceited
1,[HeShe] is convinced that those [HeShe]'s talking with, need reforming
1,[HeShe] coughs frequently
1,[HeShe] is covered with road dust
1,[HeShe] has crumbs in [HisHer] beard and clothes
1,[HeShe] has a dark tan
1,[HeShe] denies [HeShe]'s gossiping, yet proceeds to do so anyway
1,[HeShe] usually dresses in formal attire
1,[HeShe] usually dresses in furs
1,[HeShe] usually dresses in leather
1,[HeShe] usually dresses in silks and lace
1,[HeShe] dresses as if [HeShe] were colorblind
1,[HeShe] dresses funny
1,[HeShe] carries {AorAn~[Equipment.ExoticWeaponsList]}
1,[HeShe] has an eye tic
1,[HeShe] has unusual facial piercing
1,[HeShe] falsely claims that [HeShe] is an adventurer too
1,[HeShe] is fascinated by fire
1,[HeShe] is fascinated by non-human races
1,[HeShe] fidgets
1,[HeShe] has problems with flatulence
1,[HeShe] flips a key ring with [HisHer] finger
1,[HeShe] has a food stained face
1,[HeShe] wears foreign clothing
1,[HeShe] has freckles
1,[HeShe] has gaps between [HisHer] teeth
1,[HeShe] gestures wildly with [HisHer] hands
1,[HeShe] giggles at inappropriate times
1,[HeShe] gives a different name at every meeting
1,[HeShe] greatly exaggerates
1,[HeShe] has a hacking cough
1,[HeShe] has hair dye covering [HisHer] collar
1,[HeShe] is hairless
1,[HeShe] covers [HisHer] mouth when [HeShe] speaks
1,[HeShe] frequently hands coppers to beggar children
1,[HeShe] [Chanceof]{If~%Chance%>50?is/seems to be} hard of hearing
1,[HeShe] [Chanceof]{If~%Chance%>50?has/seems to have} arthritis in [HisHer] hands
1,[HeShe] has a has black eye
1,[HeShe] has hiccups
1,[HeShe] has leaves on [HisHer] clothing
1,[HeShe] has leaves in [HisHer] hair
1,[HeShe] has long, lacquered fingernails
1,[HeShe] has {Dice~1d3} gold teeth
1,[HeShe] has paint-stained hands and clothes
1,[HeShe] has a vampire bite scars on [HisHer] neck
1,[HeShe] has a wart on [HisHer] hand[Chanceof]{If~%Chance%>50?, and always covers it}
1,[HeShe] has a high, squeaky voice
1,[HeShe] has a holier than thou attitude
1,[HeShe] hooks [HisHer] thumbs in [HisHer] belt[Chanceof]{If~%Chance%>50?, and bounces}
1,[HeShe] is dressed inappropriately
1,[HeShe] is incredibly fat
1,[HeShe] is incredibly thin
1,[HeShe] instructs any who will listen, about the latest fashions
1,[HeShe] [Chanceof]{If~%Chance%>50?is/is acting} intoxicated
1,[HeShe] jingles coins in [HisHer] pocket
1,[HeShe] jingles coins in [HisHer] pouch
1,[HeShe] keeps [HisHer] arms folded
1,[HeShe] places [HisHer] hand on those [HeShe]'s talking with's shoulder as [HeShe] talks with them
1,[HeShe] keeps hand on [HisHer] weapon
1,[HeShe] keeps hands [HisHer] in [HisHer] pockets
1,[HeShe] is a kleptomaniac
1,[HeShe] laughs at [Chanceof]{If~%Chance%>50?unexpected/random} times
1,[HeShe] laughs when [HeShe] is nervous
1,[HeShe] has a lazy eye
1,[HeShe] has a limp
1,[HeShe] talks with a lisp
1,[HeShe] looks like a deadbeat
1,[HeShe] loses items, and asks [Chanceof]{If~%Chance%>50?those [HeShe]'s talking with/passer's by} to help [HimHer] look for them
1,[HeShe] likes to make puns
1,[HeShe] has many braids in [HisHer] {If~%Gender%=1?beard/hair}
1,[HeShe] has braided hair
1,[HeShe] has a distinctly military manner about [HimHer]
1,[HeShe] has mismatched eyes
1,[HeShe] has a missing [BodyParts]
1,[HeShe] unconciously mixes gibberish and normal words while speaking
1,[HeShe] unconciously mixes languages while speaking
1,[HeShe] has an obvious mole on [HisHer] face
1,[HeShe] wears a monocle
1,[HeShe] is mute, and speaks using sign language
1,[HeShe] never looks anyone in the eye
1,[HeShe] nods often
1,[HeShe] is a non-religious fanatic
1,[HeShe] has frequent nose bleeds
1,[HeShe] obviously wears cosmetics
1,[HeShe] always offers exotic beverages to those [HeShe] is conversing with
1,[HeShe] always offers exotic foods to those [HeShe] is conversing with
1,[HeShe] ogles the opposite sex openly
1,[HeShe] has oily [Chanceof]{If~%Chance%>50?skin/hair}
1,[HeShe] only eats [Chanceof]{If~%Chance%>50?meat/vegetables}
1,[HeShe] is overweight
1,[HeShe] has paper cuts, and ink stained fingers
1,{If~%Gender%=1?[HeShe] wears an artificial beard that appears to be pasted-on/[Ideosyncrasies]}
1,{If~%Gender%=1?[HeShe] has an artificial mustache that appears to be pasted-on/[Ideosyncrasies]}
1,[HeShe] is a pathological liar
1,[HeShe] picks at scabs on [HisHer] skin
1,[HeShe] picks [HisHer] ears
1,[HeShe] picks lint off clothes - both his, and those he is talking with
1,[HeShe] picks lint off [HisHer] clothes
1,[HeShe] attempts to pick lint off the clothes of those he is talking with
1,[HeShe] picks [HisHer] nose
1,[HeShe] picks [HisHer] teeth with [HisHer] fingernails
1,[HeShe] picks [HisHer] teeth with a wooden stick
1,[HeShe] picks [HisHer] teeth with [HisHer] knife
1,[HeShe] plays with a charm on [HisHer] necklace
1,[HeShe] has pockmarked skin
1,[HeShe] polishes [HisHer] brooch often
1,[HeShe] polishes [HisHer] buckle often
1,[HeShe] polishes [HisHer] spectacles[Chanceof]{If~%Chance%>50?, but [HeShe] never wears them}
1,[HeShe] is a practical joker
1,{If~%Gender%=2?she is pregnant/he has an extended belly}
1,[HeShe] quotes a famous poet by the name of [Names Generator.NAME For All], regularly
1,[HeShe] quotes the religious [Chanceof]{If~%Chance%>50?text/scripture} of [ChooseDeity]
1,[HeShe] has a rash
1,[HeShe] refers to 'the good old days' frequently
1,[HeShe] refers to [HimHer]self in the third person
1,[HeShe] regularly blows stray hairs out of [HisHer] eyes
1,[HeShe] is a religious fanatic ([Religion.Deities])
1,[HeShe] wears rings or bells in [HisHer] {If~%Gender%=2?hair/beard braids}
1,[HeShe] wears rings sewn on [HisHer] clothes[Chanceof]{If~%Chance%>50?, which are further adorned with fetishes}
1,[HeShe] rolls [HisHer] "R's" when speaking
1,[HeShe] has rope burns around [HisHer] [Chanceof]{If~%Chance%>50?neck/wrists}
1,[HeShe] rubs the back of [HisHer] neck
1,[HeShe] rubs calluses on [HisHer] palms with [HisHer] thumb
1,[HeShe] rubs [HisHer] chin
1,[HeShe] rubs [HisHer] eyes often
1,[HeShe] rubs [HisHer] hands together
1,[HeShe] rubs [HisHer] [Chanceof]{If~%Chance%>50?large} belly often
1,[HeShe] rubs a [Chanceof]{If~%Chance%>50?luckstone/fetish} constantly
1,[HeShe] rubs an old knee injury
1,[HeShe] rubs [HisHer] palms on [HisHer] thighs
1,[HeShe] has a runny nose
1,[HeShe] says "hmm - hmm" far too often
1,[HeShe] has a scar on [HisHer] [BlemishLocation]
1,[HeShe] has scratches  on [HisHer] [BlemishLocation]
1,[HeShe] always seems to be cold
1,[HeShe] always seems to be hot
1,[HeShe] has a serious burn scar on [HisHer] [BlemishLocation]
1,[HeShe] constantly sharpens [HisHer] knife with a whetstone
1,[HeShe] {If~%Gender%=1?has shaving cuts on [HisHer] face/has knife scars on [HisHer] [BlemishLocation]}
1,[HeShe] has a single [Chanceof]{If~%Chance%>50?hair/beard} braid
1,[HeShe] sketches [HisHer] subject while talking with them
1,[HeShe] seems to be sleepy
1,[HeShe] smacks the palm of [HisHer] hand with [HisHer] fist
1,[HeShe] smells like alcohol
1,[HeShe] smells like cedar wood
1,[HeShe] smells like cheap cologne
1,[HeShe] smells like dogs
1,[HeShe] smells like expensive cologne
1,[HeShe] smells like horses
1,[HeShe] smells like lavender
1,[HeShe] smells like roses
1,[HeShe] smells like soap
1,[HeShe] smells like sweat
1,[HeShe] smells like tobacco
1,[HeShe] smells terrible
1,[HeShe] sneezes often
1,[HeShe] sniffs frequently
1,[HeShe] snorts when [HeShe] laughs
1,[HeShe] speaks only a foreign language ({Cap~[Miscellaneous.Language]})
1,[HeShe] speaks to 'spirits'
1,[HeShe] speaks to animals like people
1,[HeShe] spit polishes a thick, fancy bracelet
1,[HeShe] spits when talking
1,[HeShe] wears spotless, glossy boots
1,[HeShe] squints
1,[HeShe] stretches often
1,[HeShe] stutters
1,[HeShe] sucks on [HisHer] teeth
1,[HeShe] has a sunburn, and [HisHer] skin is peeling
1,[HeShe] is superstitious
1,[HeShe] survived torture, and as the result of it, [HeShe] has no fingernails
1,[HeShe] sweats profusely
1,[HeShe] talks in rhyme
1,[HeShe] talks loudly
1,[HeShe] talks of constantly about [HisHer] health problems
1,[HeShe] taps [HisHer] foot incessantly
1,[HeShe] [Chanceof]{If~%Chance%>50?taps [HisHer] foot/drums [HisHer] fingers} unconciously
1,[HeShe] has a tattoo of {AorAn~[Creatures.Start2]} on [HisHer] [BlemishLocation]
1,[HeShe] has a tendency to tell tall tales
1,[HeShe] is tongue tied
1,[HeShe] is toothless
1,[HeShe] [Chanceof]{If~%Chance%>50?trims/cleans} [HisHer] fingernails with a long knife
1,[HeShe] tugs on [HisHer] ear
1,[HeShe] twirls a coin between [HisHer] fingers
1,[HeShe] twirls [HisHer] hair with [HisHer] finger
1,[HeShe] twists [HisHer] ring
1,[HeShe] is underweight
1,[HeShe] wears unusual jewelry
1,[HeShe] almost always uses a parasol
1,[HeShe] uses foul language
1,[HeShe] uses long words incorrectly
1,[HeShe] is a vegetarian
1,[HeShe] is very pale
1,[HeShe] walks like a sailor
1,[HeShe] has a wandering eye
1,[HeShe] has [Chanceof]{If~%Chance%>50?a watering eye/watering eyes}
1,[HeShe] has {If~%Gender%=1?waxed facial/unusually colored} hair
1,[HeShe] prefers to wear ancient fashions
1,[HeShe] wears armor covered in [Chanceof]{If~%Chance%>50?archaic/arcane} runes
1,[HeShe] wears clothes that are too big for [HimHer]
1,[HeShe] wears clothes that are too small for [HimHer]
1,[HeShe] wears [Chanceof]{If~%Chance%>50?a flower/flowers} in [HisHer] clothing
1,[HeShe] wears [Chanceof]{If~%Chance%>50?a flower/flowers} in [HisHer] hair
1,[HeShe] wears foreign style clothing
1,[HeShe] has a heart shaped beauty mark on [HisHer] [BlemishLocation]
1,[HeShe] wears a notched belt
1,[HeShe] obviously wears a wig
1,[HeShe] wears a scarf tied around [HisHer] [Chanceof]{If~%Chance%>50?ankle/ankles}
1,[HeShe] wears a scarf tied around [HisHer] [Chanceof]{If~%Chance%>50?wrist/wrists}
1,[HeShe] wears vest adorned with bell buttons
1,[HeShe] wears a well-tended, but ancient weapon
1,[HeShe] whispers when [HeShe] is speaking
1,[HeShe] whistles when [HeShe] is nervous
1,[HeShe] [Chanceof]{If~%Chance%>50?will not/cannot} lie
1,[HeShe] has a wine colored birthmark on [HisHer] [BlemishLocation]
1,[HeShe] has a wine{If~%Gender%=1?-stained} 'moustache'
1,[HeShe] writes down everything [HeShe] hears during [HisHer] conversations
1,[HeShe] yawns often
1,[HeShe] has a prejudice against {Plural~[Miscellaneous.Occupations]}

;LuckyItem
1,hat
1,scarf
1,ring

;BlemishLocation
1,face [Chanceof]{If~%Chance%>75?, over [HisHer] [Chanceof]{If~%Chance%>50?left/right} eye/
_, on [HisHer] [Chanceof]{If~%Chance%>50?left/right} cheek}
1,[Chanceof]{If~%Chance%>50?left/right} chest
1,[Chanceof]{If~%Chance%>50?upper /fore}arm
1,[Chanceof]{If~%Chance%>50?left/right} shoulder
1,[Chanceof]{If~%Chance%>50?left/right} buttox
1,[Chanceof]{If~%Chance%>50?upper/lower} back
1,[Chanceof]{If~%Chance%>50?left/right} thigh
1,[Chanceof]{If~%Chance%>50?left/right} calf
1,back of [HisHer] [Chanceof]{If~%Chance%>50?left/right} hand
1,top of [HisHer] [Chanceof]{If~%Chance%>50?left/right} foot
1,[Chanceof]{If~%Chance%>50?left/right} hip
1,neck
1,wrist
1,ankle

;Extremity
1,[Chanceof]{If~%Chance%>50?left/right} leg
1,[Chanceof]{If~%Chance%>50?left/right} arm
1,forehead

;SmallAnimal
1,snake
1,mouse
1,lizard

;Chewable
1,a blade of grass
1,a small stick
1,leaves

;BodyParts
1,limb; [HisHer] [Extremity={Dice~1d2}]
1,limb; [HisHer] |TempNumber={Dice~1d2}|[Extremity=%TempNumber%] at the {If~%TempNumber%=1?[Joint={Dice~1d3}]/[Joint={Dice~1d3+3}]}
1,|TempNumber={Dice~1d3}| {If~%TempNumber%=1?finger/fingers}
1,|TempNumber={Dice~1d4}| {If~%TempNumber%=1?tooth/teeth}

:Joint
1,ankle
1,knee
1,hip
1,wrist
1,elbow
1,shoulder
1,elbow

# -------------------------------------------------------------

:ChooseDeity
1,[~Religion.Deities2(2,%WorldNeeded%)]

# Domains
:Air domain
1-2,|DomainPower=Lightning Arc (Sp) (30' ranged touch, 1d6+{Trunc~{Calc~(%CharacterLevel%/2)}} Electric, {Calc~3+%WISBonus%}/day)|
_|DomainSpell=1- obscuring mist|
3-4,[Air domain=1]|DomainSpell&, 2- wind wall|
5,[Air domain=3]|DomainSpell&, 3- gaseous form|
6,[Air domain=5]|DomainPower&, Electric {IIf~%CharacterLevel%=20?Immunity:Resistance {IIf~%CharacterLevel%<12?10:20}} (Ex)|
7-8,[Air domain=6]|DomainSpell&, 4- air walk|
9-10,[Air domain=7]|DomainSpell&, 5- control winds|
11-12,[Air domain=9]|DomainSpell&, 6- chain lightning|
13-14,[Air domain=11]|DomainSpell&, 7- elemental body IV (air only)|
15-16,[Air domain=13]|DomainSpell&, 8- whirlwind|
17-100,[Air domain=15]|DomainSpell&, 9- elemental swarm (air only)|

# NOTE: BSk not required here because K(Nature) is already a class skill for the Druid.
:Animal domain
1-2,|DomainPower=Class skill: Knowledge (Nature), Speak with Animals (Sp) ({Calc~(3+%CharacterLevel%)} rounds/day)|
_|DomainSpell=1- calm animals|
3,[Animal domain=1]|DomainSpell&, 2- hold animal|
4,[Animal domain=3]|AnimalCompanion=%CharacterLevel%||AnimalCompanion-3||DomainPower&, Animal Companion (CL{Bold~%AnimalCompanion%})|
5-6,[Animal domain=4]|DomainSpell&, 3- dominate animal|
7-8,[Animal domain=5]|DomainSpell&, 4- summon nature's ally IV (animals only)|
9-10,[Animal domain=7]|DomainSpell&, 5- beast shape III (animals only)|
11-12,[Animal domain=9]|DomainSpell&, 6- antilie shell|
13-14,[Animal domain=11]|DomainSpell&, 7- animal shapes|
15-16,[Animal domain=13]|DomainSpell&, 8- summon nature's ally VIII (animals only)|
17-100,[Animal domain=15]|DomainSpell&, 9- shapechange|

:Earth domain
1-2,|DomainPower=Acid Dart (Sp) (30' ranged touch, 1d6+{Trunc~{Calc~(%CharacterLevel%/2)}} Acid, {Calc~3+%WISBonus%}/day)|
_|DomainSpell=1- magic stone|
3-4,[Earth domain=1]|DomainSpell&, 2- soften earth and stone|
5,[Earth domain=3]|DomainSpell&, 3- stone shape|
6,[Earth domain=5]|DomainPower&, Acid {IIf~%CharacterLevel%=20?Immunity:Resistance {IIf~%CharacterLevel%<12?10:20}} (Ex)|
7-8,[Earth domain=6]|DomainSpell&, 4- spike stones|
9-10,[Earth domain=7]|DomainSpell&, 5- wall of stone|
11-12,[Earth domain=9]|DomainSpell&, 6- stoneskin|
13-14,[Earth domain=11]|DomainSpell&, 7- elemental body IV (earth only)|
15-16,[Earth domain=13]|DomainSpell&, 8- earthquake|
17-100,[Earth domain=15]|DomainSpell&, 9- elemental swarm (earth only)|

:Fire domain
1-2,|DomainPower=Fire Bolt (Sp) (30' ranged touch, 1d6+{Trunc~{Calc~(%CharacterLevel%/2)}} Fire, {Calc~3+%WISBonus%}/day)|
_|DomainSpell=1- burning hands|
3-4,[Fire domain=1]|DomainSpell&, 2- produce flame|
5,[Fire domain=3]|DomainSpell&, 3- fireball|
6,[Fire domain=5]|DomainPower&, Fire {IIf~%CharacterLevel%=20?Immunity:Resistance {IIf~%CharacterLevel%<12?10:20}} (Ex)|
7-8,[Fire domain=6]|DomainSpell&, 4- wall of fire|
9-10,[Fire domain=7]|DomainSpell&, 5- fire shield|
11-12,[Fire domain=9]|DomainSpell&, 6- fire seeds|
13-14,[Earth domain=11]|DomainSpell&, 7- elemental body IV (fire only)|
15-16,[Earth domain=13]|DomainSpell&, 8- incendiary cloud|
17-100,[Earth domain=15]|DomainSpell&, 9- elemental swarm (fire only)|

:Plant domain
1-2,|DomainPower=Wooden Fist (Su) (FREE, no AO from your unarmed attacks, +{If~%CharacterLevel%=1?1/{Trunc~{Calc~(%CharacterLevel%/2)}}} lethal dmg, {Calc~3+%WISBonus%}/day)|
_|DomainSpell=1- entangle|
3-4,[Plant domain=1]|DomainSpell&, 2- barkskin|
5,[Plant domain=3]|DomainSpell&, 3- plant growth|
6,[Plant domain=5]|DomainPower&, Bramble Armor (Su) (FREE, attacker (unarmed, non-reached weapon) suffers 1d6+{Trunc~{Calc~(%CharacterLevel%/2)}} piercing dmg/attack, %CharacterLevel% rounds/day)|
7-8,[Plant domain=6]|DomainSpell&, 4- command plants|
9-10,[Plant domain=7]|DomainSpell&, 5- wall of thorns|
11-12,[Plant domain=9]|DomainSpell&, 6- repel wood|
13-14,[Plant domain=11]|DomainSpell&, 7- animate plants|
15-16,[Plant domain=13]|DomainSpell&, 8- control plants|
17-100,[Plant domain=15]|DomainSpell&, 9- shambler|

:Water domain
1-2,|DomainPower=Icicle (Sp) (30' ranged touch, 1d6+{Trunc~{Calc~(%CharacterLevel%/2)}} Cold, {Calc~3+%WISBonus%}/day)|
_|DomainSpell=1- obscuring mist|
3-4,[Water domain=1]|DomainSpell&, 2- fog cloud|
5,[Water domain=3]|DomainSpell&, 3- water breathing|
6,[Water domain=5]|DomainPower&, Cold {IIf~%CharacterLevel%=20?Immunity:Resistance {IIf~%CharacterLevel%<12?10:20}} (Ex)|
7-8,[Water domain=6]|DomainSpell&, 4- control water|
9-10,[Water domain=7]|DomainSpell&, 5- ice storm|
11-12,[Water domain=9]|DomainSpell&, 6- cone of cold|
13-14,[Earth domain=11]|DomainSpell&, 7- elemental body IV (water only)|
15-16,[Earth domain=13]|DomainSpell&, 8- horrid wilting|
17-100,[Earth domain=15]|DomainSpell&, 9- elemental swarm (water only)|

:Weather domain
1-2,|DomainPower=Storm Burst (Sp) (30' ranged touch, 1d6+{Trunc~{Calc~(%CharacterLevel%/2)}} nonlethal and -2 attack rolls for 1r, {Calc~3+%WISBonus%}/day)|
_|DomainSpell=1- obscuring mist|
3-4,[Weather domain=1]|DomainSpell&, 2- fog cloud|
5-6,[Weather domain=3]|DomainSpell&, 3- call lightning|
7,[Weather domain=5]|DomainSpell&, 4- sleet storm|
8,[Weather domain=7]|DomainPower&, Lightning Lord (Sp) ({Calc~(100+(%CharacterLevel%*10))}', 3d6 Electric, Reflex 1/2, can call more than 1 bolt/round, 1 bolt/target, all targets within 30', %CharacterLevel% bolts/day)|
9-10,[Weather domain=8]|DomainSpell&, 5- ice storm|
11-12,[Weather domain=9]|DomainSpell&, 6- control winds|
13-14,[Weather domain=11]|DomainSpell&, 7- control weather|
15-16,[Weather domain=13]|DomainSpell&, 8- whirlwind|
17-100,[Weather domain=15]|DomainSpell&, 9- storm of vengeance|

:XXX domain
1-2,|DomainPower=Lightning Arc (Sp) (30' ranged touch, 1d6+{Trunc~{Calc~(%CharacterLevel%/2)}} Electric, {Calc~3+%WISBonus%}/day)|
_|DomainSpell=1- |
3-4,[XXX domain=1]|DomainSpell&, 2- |
5,[XXX domain=3]|DomainSpell&, 3- |
6,[XXX domain=5]|DomainPower&, Electric {IIf~%CharacterLevel%=20?Immunity:Resistance {IIf~%CharacterLevel%<12?10:20}}|
7-8,[XXX domain=6]|DomainSpell&, 4- |
9-10,[XXX domain=7]|DomainSpell&, 5- |
11-12,[XXX domain=9]|DomainSpell&, 6- |
13-14,[XXX domain=11]|DomainSpell&, 7- |
15-16,[XXX domain=13]|DomainSpell&, 8- |
17-100,[XXX domain=15]|DomainSpell&, 9- |

# ------------------------------------------
# Leave at the end

:Percent
1,/%


